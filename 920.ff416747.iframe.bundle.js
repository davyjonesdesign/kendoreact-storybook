"use strict";(self.webpackChunkkendoreact_storybook=self.webpackChunkkendoreact_storybook||[]).push([[920],{"./node_modules/@progress/kendo-charts/dist/es/main.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{u3A:()=>arc_gauge,Vrl:()=>barcode,t1X:()=>chart,Tkp:()=>circular_gauge,NQY:()=>dom_events_builder,aYW:()=>instance_observer,px9:()=>linear_gauge,T57:()=>map_map,rgY:()=>qrcode,t69:()=>radial_gauge,xN:()=>stock_chart,Vn3:()=>baseTheme});var easing_functions_namespaceObject={};__webpack_require__.r(easing_functions_namespaceObject),__webpack_require__.d(easing_functions_namespaceObject,{easeOutElastic:()=>easeOutElastic,linear:()=>linear,swing:()=>swing});var ARC="arc",BLACK="#000",BOTTOM="bottom",CENTER="center",CIRCLE="circle",DATE="date",FORMAT_REGEX=/\{\d+:?/,LEFT="left",MAX_VALUE=Number.MAX_VALUE,MIN_VALUE=-Number.MAX_VALUE,RIGHT="right",TOP="top",VALUE="value",WHITE="#fff",X="x",Y="y";function isArray(value){return Array.isArray(value)}function addClass(element,classes){for(var classArray=isArray(classes)?classes:[classes],idx=0;idx<classArray.length;idx++){var className=classArray[idx];-1===element.className.indexOf(className)&&(element.className+=" "+className)}}var SPACE_REGEX=/\s+/g;function removeClass(element,className){element&&element.className&&(element.className=element.className.replace(className,"").replace(SPACE_REGEX," "))}var defined=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/util/defined.js");function alignPathToPixel(path){var offset=.5;path.options.stroke&&defined.A(path.options.stroke.width)&&path.options.stroke.width%2==0&&(offset=0);for(var i=0;i<path.segments.length;i++)path.segments[i].anchor().round(0).translate(offset,offset);return path}function clockwise(angle1,angle2){return-angle1.x*angle2.y+angle1.y*angle2.x<0}function isNumber(value){return"number"==typeof value&&!isNaN(value)}function isString(value){return"string"==typeof value}function convertableToNumber(value){return isNumber(value)||isString(value)&&isFinite(value)}function isFunction(fn){return"function"==typeof fn}function deepExtendOne(destination,source){for(var property in source){var propValue=source[property],propType=typeof propValue,propInit=void 0;if((propInit="object"===propType&&null!==propValue?propValue.constructor:null)&&propInit!==Array)if(propValue instanceof Date)destination[property]=new Date(propValue.getTime());else if(isFunction(propValue.clone))destination[property]=propValue.clone();else{var destProp=destination[property];destination[property]="object"==typeof destProp&&destProp||{},deepExtendOne(destination[property],propValue)}else"undefined"!==propType&&(destination[property]=propValue)}return destination}function deepExtend(destination){for(var arguments$1=arguments,length=arguments.length,i=1;i<length;i++)deepExtendOne(destination,arguments$1[i]);return destination}function isObject(value){return"object"==typeof value}function styleValue(value){return isNumber(value)?value+"px":value}var SIZE_STYLES_REGEX=/width|height|top|left|bottom|right/i;function isSizeField(field){return SIZE_STYLES_REGEX.test(field)}function elementStyles(element,styles){var stylesArray=isString(styles)?[styles]:styles;if(isArray(stylesArray)){for(var result={},style=window.getComputedStyle(element),idx=0;idx<stylesArray.length;idx++){var field=stylesArray[idx];result[field]=isSizeField(field)?parseFloat(style[field]):style[field]}return result}if(isObject(styles))for(var field$1 in styles)element.style[field$1]=styleValue(styles[field$1])}function getSpacing(value,defaultSpacing){void 0===defaultSpacing&&(defaultSpacing=0);var spacing={top:0,right:0,bottom:0,left:0};return"number"==typeof value?spacing[TOP]=spacing[RIGHT]=spacing[BOTTOM]=spacing[LEFT]=value:(spacing[TOP]=value[TOP]||defaultSpacing,spacing[RIGHT]=value[RIGHT]||defaultSpacing,spacing[BOTTOM]=value[BOTTOM]||defaultSpacing,spacing[LEFT]=value[LEFT]||defaultSpacing),spacing}var current={compile:function(template){return template}},TemplateService=function TemplateService(){};TemplateService.register=function register(userImplementation){current=userImplementation},TemplateService.compile=function compile(template,options){return current.compile(template,options)};const template_service=TemplateService;function getTemplate(options){var template;return void 0===options&&(options={}),options.template?options.template=template=template_service.compile(options.template):isFunction(options.content)&&(template=options.content),template}var FIELD_REGEX=/\[(?:(\d+)|['"](.*?)['"])\]|((?:(?!\[.*?\]|\.).)+)/g,getterCache={};function getter(field){if(getterCache[field])return getterCache[field];var fields=[];return field.replace(FIELD_REGEX,(function(match,index,indexAccessor,field){fields.push(defined.A(index)?index:indexAccessor||field)})),getterCache[field]=function(obj){for(var result=obj,idx=0;idx<fields.length&&result;idx++)result=result[fields[idx]];return result},getterCache[field]}function grep(array,callback){for(var length=array.length,result=[],idx=0;idx<length;idx++)callback(array[idx])&&result.push(array[idx]);return result}function hasClasses(element,classNames){if(element.className)for(var names=classNames.split(" "),idx=0;idx<names.length;idx++)if(element.className.indexOf&&-1!==element.className.indexOf(names[idx]))return!0}getterCache[void 0]=function(obj){return obj};var HashMap=function HashMap(){this._map=new Map};HashMap.prototype.get=function get(key){return this._map.get(key)},HashMap.prototype.set=function set(key,value){this._map.set(key,value)};const hash_map=HashMap;function inArray(value,array){if(array)return-1!==array.indexOf(value)}var round=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/util/round.js");function interpolateValue(start,end,progress){return round.A(start+(end-start)*progress,3)}var InstanceObserver=function InstanceObserver(observer,handlers){this.observer=observer,this.handlerMap=deepExtend({},this.handlerMap,handlers)};InstanceObserver.prototype.trigger=function trigger(name,args){var isDefaultPrevented,observer=this.observer,handlerMap=this.handlerMap;return handlerMap[name]?isDefaultPrevented=this.callObserver(handlerMap[name],args):observer.trigger&&(isDefaultPrevented=this.callObserver("trigger",name,args)),isDefaultPrevented},InstanceObserver.prototype.callObserver=function callObserver(fnName){for(var args=[],len=arguments.length-1;len-- >0;)args[len]=arguments[len+1];return this.observer[fnName].apply(this.observer,args)},InstanceObserver.prototype.requiresHandlers=function requiresHandlers(names){if(this.observer.requiresHandlers)return this.observer.requiresHandlers(names);for(var idx=0;idx<names.length;idx++)if(this.handlerMap[names[idx]])return!0};const instance_observer=InstanceObserver;function map(array,callback){for(var length=array.length,result=[],idx=0;idx<length;idx++){var value=callback(array[idx]);defined.A(value)&&result.push(value)}return result}var support=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/common/support.js"),browser=support.A.browser||{};function mousewheelDelta(e){var delta=0;return e.wheelDelta?(delta=-e.wheelDelta/120,browser.webkit&&(delta/=2*Math.max(window.devicePixelRatio,.625))):e.detail&&(delta=e.detail/3),delta=delta>0?Math.ceil(delta):Math.floor(delta)}var common_class=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/common/class.js"),log_to_console=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/common/log-to-console.js"),ref=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/util.js"),append=ref.append,bindEvents=ref.bindEvents,drawing_utils_defined=ref.defined,deg=ref.deg,elementOffset=ref.elementOffset,elementSize=ref.elementSize,eventCoordinates=ref.eventCoordinates,eventElement=ref.eventElement,hashKey=ref.hashKey,last=ref.last,limitValue=ref.limitValue,objectKey=ref.objectKey,rad=ref.rad,drawing_utils_round=ref.round,unbindEvents=ref.unbindEvents,valueOrDefault=ref.valueOrDefault,FontLoader=function FontLoader(){};FontLoader.fetchFonts=function fetchFonts(options,fonts,state){void 0===state&&(state={depth:0});!options||state.depth>5||!document.fonts||Object.keys(options).forEach((function(key){var value=options[key];"dataSource"!==key&&"$"!==key[0]&&value&&("font"===key?fonts.push(value):"object"==typeof value&&(state.depth++,FontLoader.fetchFonts(value,fonts,state),state.depth--))}))},FontLoader.loadFonts=function loadFonts(fonts,callback){var promises=[];if(fonts.length>0&&document.fonts){try{promises=fonts.map((function(font){return document.fonts.load(font)}))}catch(e){(0,log_to_console.A)(e)}Promise.all(promises).then(callback,callback)}else callback()},FontLoader.preloadFonts=function preloadFonts(options,callback){var fonts=[];FontLoader.fetchFonts(options,fonts),FontLoader.loadFonts(fonts,callback)};const font_loader=FontLoader;function setDefaultOptions(type,options){var proto=type.prototype;proto.options?proto.options=deepExtend({},proto.options,options):proto.options=options}var HTMLBaseIcon=function HTMLBaseIcon(element,options){this.element=element,this.options=deepExtend({},this.options,options),this.wrapper()};HTMLBaseIcon.prototype.wrapper=function wrapper(){this.addClasses()},HTMLBaseIcon.prototype.addClasses=function addClasses(){},HTMLBaseIcon.prototype.html=function html(){return this.element.outerHTML},setDefaultOptions(HTMLBaseIcon,{name:"",size:"none",themeColor:"none",flip:"default",iconClass:"",stylingOptions:["size","themeColor","fill"]});var HTMLFontIcon=function(HTMLBaseIcon){function HTMLFontIcon(element,options){HTMLBaseIcon.call(this,element,options)}return HTMLBaseIcon&&(HTMLFontIcon.__proto__=HTMLBaseIcon),HTMLFontIcon.prototype=Object.create(HTMLBaseIcon&&HTMLBaseIcon.prototype),HTMLFontIcon.prototype.constructor=HTMLFontIcon,HTMLFontIcon.prototype.wrapper=function wrapper(){var currentIconClass=this.element.className.split(" ").find((function(x){return x.startsWith("k-i-")})),className=this.options.icon?(this.options.icon.startsWith("k-i-")?"":"k-i-")+this.options.icon:"";this._className=className,addClass(this.element,"k-icon"),removeClass(this.element,currentIconClass),addClass(this.element,className),addClass(this.element,this.options.iconClass||""),HTMLBaseIcon.prototype.wrapper.call(this)},HTMLFontIcon}(HTMLBaseIcon);setDefaultOptions(HTMLFontIcon,{name:"HTMLFontIcon",icon:null});var HTMLSvgIcon=function(HTMLBaseIcon){function HTMLSvgIcon(element,options){element.innerHTML="",HTMLBaseIcon.call(this,element,options)}return HTMLBaseIcon&&(HTMLSvgIcon.__proto__=HTMLBaseIcon),HTMLSvgIcon.prototype=Object.create(HTMLBaseIcon&&HTMLBaseIcon.prototype),HTMLSvgIcon.prototype.constructor=HTMLSvgIcon,HTMLSvgIcon.prototype.wrapper=function wrapper(){var icon=this.options.icon,iconClass=this.options.iconClass,currentIconClass=this.element.className.split(" ").find((function(x){return x.startsWith("k-svg-i-")}));if(!icon&&iconClass){var iconNameMatch=iconClass.match(/k-i-(\w+(?:-\w+)*)/);iconNameMatch&&(icon=iconNameMatch[1],iconClass=iconClass.replace(iconNameMatch[0],""))}isString(icon)&&(icon=icon.replace("k-i-","").replace(/-./g,(function(x){return x[1].toUpperCase()})),icon=this.options.svgIcons[icon]||this.options.svgIcons[icon+"Icon"]);var className=icon&&icon.name?"k-svg-i-"+icon.name:"";if(this._className=className,addClass(this.element,"k-svg-icon"),removeClass(this.element,currentIconClass),addClass(this.element,className),addClass(this.element,iconClass||""),this.element.setAttribute("aria-hidden","true"),icon&&function isPlainObject(value){return"[object Object]"===Object.prototype.toString.call(value)}(icon)){var svgElement=document.createElementNS("http://www.w3.org/2000/svg","svg");svgElement.setAttribute("viewBox",icon.viewBox||""),svgElement.setAttribute("focusable","false"),svgElement.innerHTML=icon.content||"",this.element.appendChild(svgElement)}HTMLBaseIcon.prototype.wrapper.call(this)},HTMLSvgIcon}(HTMLBaseIcon);setDefaultOptions(HTMLSvgIcon,{name:"HTMLSvgIcon",icon:null,svgIcons:{}});var ICON_TYPES={svg:HTMLSvgIcon,font:HTMLFontIcon};function renderIcon(iconElement,iconOptions){var element=iconElement,options=iconOptions;return element&&(!isObject(element)||element instanceof HTMLElement)&&!isString(element)||(options=element,element=document.createElement("span")),isString(options)&&(options={icon:options}),options.type||(options.type="svg"),ICON_TYPES[options.type]?new ICON_TYPES[options.type](element,options).html():null}function sparseArrayLimits(arr){for(var min=MAX_VALUE,max=MIN_VALUE,idx=0,length=arr.length;idx<length;idx++){var value=arr[idx];null!==value&&isFinite(value)&&(min=Math.min(min,value),max=Math.max(max,value))}return{min:min===MAX_VALUE?void 0:min,max:max===MIN_VALUE?void 0:max}}function find(array,predicate){for(var i=0;i<array.length;i++){var item=array[i];if(predicate(item,i,array))return item}}var Matrix=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/geometry/matrix.js").A,matrixRegexp=/matrix\((.*)\)/;function transformMatrix(element){var transform=getComputedStyle(element).transform;return"none"===transform?Matrix.unit():function parseMatrix(matrixString){var match=matrixString.match(matrixRegexp);if(null===match||2!==match.length)return Matrix.unit();var members=match[1].split(",").map((function(x){return parseFloat(x)}));return new(Function.prototype.bind.apply(Matrix,[null].concat(members)))}(transform)}var color_color=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/common/color/color.js");const auto_text_color=function autoTextColor(color){return new color_color.A(color).isDark()?WHITE:BLACK};var DELETED={},LegacySet=function LegacySet(values){this._index={},this._values=values?values.slice(0):[];for(var i=0;i<this._values.length;i++)this._index[this._values[i]]=i},prototypeAccessors={size:{configurable:!0}};LegacySet.prototype.values=function values(){return this._values.filter((function(item){return item!==DELETED}))},LegacySet.prototype.has=function has(value){return void 0!==this._index[value]},LegacySet.prototype.add=function add(value){this.has(value)||(this._index[value]=this._values.length,this._values.push(value))},LegacySet.prototype.delete=function delete$1(value){var index=this._index[value];void 0!==index&&(this._values[index]=DELETED,delete this._index[value])},LegacySet.prototype.clear=function clear(){this._index={},this._values=[]},prototypeAccessors.size.get=function(){return this._values.length},Object.defineProperties(LegacySet.prototype,prototypeAccessors);var SetWrapper=function SetWrapper(values){this._set=new Set(values)},prototypeAccessors$1={size:{configurable:!0}};SetWrapper.prototype.values=function values(){return Array.from(this._set)},SetWrapper.prototype.has=function has(value){return this._set.has(value)},SetWrapper.prototype.add=function add(value){this._set.add(value)},SetWrapper.prototype.delete=function delete$2(value){this._set.delete(value)},SetWrapper.prototype.clear=function clear(){this._set.clear()},prototypeAccessors$1.size.get=function(){return this._set.size},Object.defineProperties(SetWrapper.prototype,prototypeAccessors$1);function createHashSet(values){return supported=!1,"function"==typeof Set&&(supported=new Set([1]).has(1)),supported?new SetWrapper(values):new LegacySet(values);var supported}function defaultErrorHandler(error){throw error}const common_keys={INSERT:45,DELETE:46,BACKSPACE:8,TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,END:35,HOME:36,SPACEBAR:32,PAGEUP:33,PAGEDOWN:34,F2:113,F10:121,F12:123,NUMPAD_PLUS:107,NUMPAD_MINUS:109,NUMPAD_DOT:110};function autoMajorUnit(min,max){var diff=drawing_utils_round(max-min,9);if(0===diff){if(0===max)return.1;diff=Math.abs(max)}var scale=Math.pow(10,Math.floor(Math.log(diff)/Math.log(10))),relativeValue=drawing_utils_round(diff/scale,10);return drawing_utils_round(scale*(relativeValue<1.904762?.2:relativeValue<4.761904?.5:relativeValue<9.523809?1:2),10)}const core_point=function(Class){function Point(x,y){Class.call(this),this.x=x||0,this.y=y||0}return Class&&(Point.__proto__=Class),Point.prototype=Object.create(Class&&Class.prototype),Point.prototype.constructor=Point,Point.prototype.clone=function clone(){return new Point(this.x,this.y)},Point.prototype.equals=function equals(point){return point&&this.x===point.x&&this.y===point.y},Point.prototype.rotate=function rotate(center,degrees){var theta=rad(degrees),cosT=Math.cos(theta),sinT=Math.sin(theta),cx=center.x,cy=center.y,x=this.x,y=this.y;return this.x=drawing_utils_round(cx+(x-cx)*cosT+(y-cy)*sinT,3),this.y=drawing_utils_round(cy+(y-cy)*cosT-(x-cx)*sinT,3),this},Point.prototype.multiply=function multiply(a){return this.x*=a,this.y*=a,this},Point.prototype.distanceTo=function distanceTo(point){var dx=this.x-point.x,dy=this.y-point.y;return Math.sqrt(dx*dx+dy*dy)},Point.onCircle=function onCircle(center,angle,radius){var radians=rad(angle);return new Point(center.x-radius*Math.cos(radians),center.y-radius*Math.sin(radians))},Point}(common_class.A);var geometry_rect=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/geometry/rect.js"),Box=function(Class){function Box(x1,y1,x2,y2){Class.call(this),this.x1=x1||0,this.y1=y1||0,this.x2=x2||0,this.y2=y2||0}return Class&&(Box.__proto__=Class),Box.prototype=Object.create(Class&&Class.prototype),Box.prototype.constructor=Box,Box.prototype.equals=function equals(box){return this.x1===box.x1&&this.x2===box.x2&&this.y1===box.y1&&this.y2===box.y2},Box.prototype.width=function width(){return this.x2-this.x1},Box.prototype.height=function height(){return this.y2-this.y1},Box.prototype.translate=function translate(dx,dy){return this.x1+=dx,this.x2+=dx,this.y1+=dy,this.y2+=dy,this},Box.prototype.move=function move(x,y){var height=this.height(),width=this.width();return drawing_utils_defined(x)&&(this.x1=x,this.x2=this.x1+width),drawing_utils_defined(y)&&(this.y1=y,this.y2=this.y1+height),this},Box.prototype.wrap=function wrap(targetBox){return this.x1=Math.min(this.x1,targetBox.x1),this.y1=Math.min(this.y1,targetBox.y1),this.x2=Math.max(this.x2,targetBox.x2),this.y2=Math.max(this.y2,targetBox.y2),this},Box.prototype.wrapPoint=function wrapPoint(point){var arrayPoint=isArray(point),x=arrayPoint?point[0]:point.x,y=arrayPoint?point[1]:point.y;return this.wrap(new Box(x,y,x,y)),this},Box.prototype.snapTo=function snapTo(targetBox,axis){return axis!==X&&axis||(this.x1=targetBox.x1,this.x2=targetBox.x2),axis!==Y&&axis||(this.y1=targetBox.y1,this.y2=targetBox.y2),this},Box.prototype.alignTo=function alignTo(targetBox,anchor){var height=this.height(),width=this.width(),axis=anchor===TOP||anchor===BOTTOM?Y:X,offset=axis===Y?height:width;if(anchor===CENTER){var targetCenter=targetBox.center(),center=this.center();this.x1+=targetCenter.x-center.x,this.y1+=targetCenter.y-center.y}else this[axis+1]=anchor===TOP||anchor===LEFT?targetBox[axis+1]-offset:targetBox[axis+2];return this.x2=this.x1+width,this.y2=this.y1+height,this},Box.prototype.shrink=function shrink(dw,dh){return this.x2-=dw,this.y2-=dh,this},Box.prototype.expand=function expand(dw,dh){return this.shrink(-dw,-dh),this},Box.prototype.pad=function pad(padding){var spacing=getSpacing(padding);return this.x1-=spacing.left,this.x2+=spacing.right,this.y1-=spacing.top,this.y2+=spacing.bottom,this},Box.prototype.unpad=function unpad(padding){var spacing=getSpacing(padding);return spacing.left=-spacing.left,spacing.top=-spacing.top,spacing.right=-spacing.right,spacing.bottom=-spacing.bottom,this.pad(spacing)},Box.prototype.clone=function clone(){return new Box(this.x1,this.y1,this.x2,this.y2)},Box.prototype.center=function center(){return new core_point(this.x1+this.width()/2,this.y1+this.height()/2)},Box.prototype.containsPoint=function containsPoint(point){return point.x>=this.x1&&point.x<=this.x2&&point.y>=this.y1&&point.y<=this.y2},Box.prototype.points=function points(){return[new core_point(this.x1,this.y1),new core_point(this.x2,this.y1),new core_point(this.x2,this.y2),new core_point(this.x1,this.y2)]},Box.prototype.getHash=function getHash(){return[this.x1,this.y1,this.x2,this.y2].join(",")},Box.prototype.overlaps=function overlaps(box){return!(box.y2<this.y1||this.y2<box.y1||box.x2<this.x1||this.x2<box.x1)},Box.prototype.rotate=function rotate(rotation){var width=this.width(),height=this.height(),ref=this.center(),cx=ref.x,cy=ref.y,r1=rotatePoint(0,0,cx,cy,rotation),r2=rotatePoint(width,0,cx,cy,rotation),r3=rotatePoint(width,height,cx,cy,rotation),r4=rotatePoint(0,height,cx,cy,rotation);return width=Math.max(r1.x,r2.x,r3.x,r4.x)-Math.min(r1.x,r2.x,r3.x,r4.x),height=Math.max(r1.y,r2.y,r3.y,r4.y)-Math.min(r1.y,r2.y,r3.y,r4.y),this.x2=this.x1+width,this.y2=this.y1+height,this},Box.prototype.toRect=function toRect(){return new geometry_rect.A([this.x1,this.y1],[this.width(),this.height()])},Box.prototype.hasSize=function hasSize(){return 0!==this.width()&&0!==this.height()},Box.prototype.align=function align(targetBox,axis,alignment){var c1=axis+1,c2=axis+2,sizeFunc=axis===X?"width":"height",size=this[sizeFunc]();inArray(alignment,[LEFT,TOP])?(this[c1]=targetBox[c1],this[c2]=this[c1]+size):inArray(alignment,[RIGHT,BOTTOM])?(this[c2]=targetBox[c2],this[c1]=this[c2]-size):alignment===CENTER&&(this[c1]=targetBox[c1]+(targetBox[sizeFunc]()-size)/2,this[c2]=this[c1]+size)},Box}(common_class.A);function rotatePoint(x,y,cx,cy,angle){var theta=rad(angle);return new core_point(cx+(x-cx)*Math.cos(theta)+(y-cy)*Math.sin(theta),cy-(x-cx)*Math.sin(theta)+(y-cy)*Math.cos(theta))}const core_box=Box;var Ring=function(Class){function Ring(center,innerRadius,radius,startAngle,angle){Class.call(this),this.center=center,this.innerRadius=innerRadius,this.radius=radius,this.startAngle=startAngle,this.angle=angle}return Class&&(Ring.__proto__=Class),Ring.prototype=Object.create(Class&&Class.prototype),Ring.prototype.constructor=Ring,Ring.prototype.clone=function clone(){return new Ring(this.center,this.innerRadius,this.radius,this.startAngle,this.angle)},Ring.prototype.middle=function middle(){return this.startAngle+this.angle/2},Ring.prototype.setRadius=function setRadius(newRadius,innerRadius){return innerRadius?this.innerRadius=newRadius:this.radius=newRadius,this},Ring.prototype.point=function point(angle,innerRadius){var radianAngle=rad(angle),ax=Math.cos(radianAngle),ay=Math.sin(radianAngle),radius=innerRadius?this.innerRadius:this.radius,x=drawing_utils_round(this.center.x-ax*radius,3),y=drawing_utils_round(this.center.y-ay*radius,3);return new core_point(x,y)},Ring.prototype.adjacentBox=function adjacentBox(distance,width,height){var sector=this.clone().expand(distance),midAndle=sector.middle(),midPoint=sector.point(midAndle),hw=width/2,hh=height/2,sa=Math.sin(rad(midAndle)),ca=Math.cos(rad(midAndle)),x=midPoint.x-hw,y=midPoint.y-hh;return Math.abs(sa)<.9&&(x+=hw*-ca/Math.abs(ca)),Math.abs(ca)<.9&&(y+=hh*-sa/Math.abs(sa)),new core_box(x,y,x+width,y+height)},Ring.prototype.containsPoint=function containsPoint(p){var center=this.center,innerRadius=this.innerRadius,radius=this.radius,startAngle=this.startAngle,endAngle=this.startAngle+this.angle,dx=p.x-center.x,dy=p.y-center.y,vector=new core_point(dx,dy),startPoint=this.point(startAngle),startVector=new core_point(startPoint.x-center.x,startPoint.y-center.y),endPoint=this.point(endAngle),endVector=new core_point(endPoint.x-center.x,endPoint.y-center.y),dist=drawing_utils_round(dx*dx+dy*dy,3);return(startVector.equals(vector)||clockwise(startVector,vector))&&!clockwise(endVector,vector)&&dist>=innerRadius*innerRadius&&dist<=radius*radius},Ring.prototype.getBBox=function getBBox(){var angles,box=new core_box(MAX_VALUE,MAX_VALUE,MIN_VALUE,MIN_VALUE),startAngle=drawing_utils_round(this.startAngle%360),endAngle=drawing_utils_round((startAngle+this.angle)%360),innerRadius=this.innerRadius,allAngles=[0,90,180,270,startAngle,endAngle].sort(numericComparer),startAngleIndex=allAngles.indexOf(startAngle),endAngleIndex=allAngles.indexOf(endAngle);angles=startAngle===endAngle?allAngles:startAngleIndex<endAngleIndex?allAngles.slice(startAngleIndex,endAngleIndex+1):[].concat(allAngles.slice(0,endAngleIndex+1),allAngles.slice(startAngleIndex,allAngles.length));for(var i=0;i<angles.length;i++){var point=this.point(angles[i]);box.wrapPoint(point),box.wrapPoint(point,innerRadius)}return innerRadius||box.wrapPoint(this.center),box},Ring.prototype.expand=function expand(value){return this.radius+=value,this},Ring}(common_class.A);function numericComparer(a,b){return a-b}const core_ring=Ring;!function(Ring){function Sector(center,radius,startAngle,angle){Ring.call(this,center,0,radius,startAngle,angle)}Ring&&(Sector.__proto__=Ring),Sector.prototype=Object.create(Ring&&Ring.prototype),Sector.prototype.constructor=Sector,Sector.prototype.expand=function expand(value){return Ring.prototype.expand.call(this,value)},Sector.prototype.clone=function clone(){return new Sector(this.center,this.radius,this.startAngle,this.angle)},Sector.prototype.setRadius=function setRadius(newRadius){return this.radius=newRadius,this}}(core_ring);var geometry_point=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/geometry/point.js"),geometry_arc=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/geometry/arc.js"),shapes_path=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/shapes/path.js"),ShapeBuilder=function(Class){function ShapeBuilder(){Class.apply(this,arguments)}return Class&&(ShapeBuilder.__proto__=Class),ShapeBuilder.prototype=Object.create(Class&&Class.prototype),ShapeBuilder.prototype.constructor=ShapeBuilder,ShapeBuilder.prototype.createRing=function createRing(sector,options){var startAngle=sector.startAngle+180,endAngle=sector.angle+startAngle;sector.angle>0&&startAngle===endAngle&&(endAngle+=.001);var center=new geometry_point.A(sector.center.x,sector.center.y),radius=Math.max(sector.radius,0),innerRadius=Math.max(sector.innerRadius,0),arc=new geometry_arc.A(center,{startAngle,endAngle,radiusX:radius,radiusY:radius}),path=shapes_path.w.fromArc(arc,options).close();if(innerRadius){arc.radiusX=arc.radiusY=innerRadius;var innerEnd=arc.pointAt(endAngle);path.lineTo(innerEnd.x,innerEnd.y),path.arc(endAngle,startAngle,innerRadius,innerRadius,!0)}else path.lineTo(center.x,center.y);return path},ShapeBuilder}(common_class.A);ShapeBuilder.current=new ShapeBuilder;const shape_builder=ShapeBuilder;var shapes_circle=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/shapes/circle.js"),geometry_circle=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/geometry/circle.js"),geometry_transform=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/geometry/transform.js"),shapes_group=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/shapes/group.js");function swing(position){return.5-Math.cos(position*Math.PI)/2}function linear(position){return position}function easeOutElastic(position,time,start,diff){var s=1.70158,p=0,a=diff;return 0===position?start:1===position?start+diff:(p||(p=.5),a<Math.abs(diff)?(a=diff,s=p/4):s=p/(2*Math.PI)*Math.asin(diff/a),a*Math.pow(2,-10*position)*Math.sin((Number(position)-s)*(1.1*Math.PI)/p)+diff+start)}var instance,now=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/util/now.js"),limit_value=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/util/limit-value.js"),animation_frame=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/common/animation-frame.js"),AnimationFactory=function(Class){function AnimationFactory(){Class.call(this),this._items=[]}Class&&(AnimationFactory.__proto__=Class),AnimationFactory.prototype=Object.create(Class&&Class.prototype),AnimationFactory.prototype.constructor=AnimationFactory;var staticAccessors={current:{configurable:!0}};return staticAccessors.current.get=function(){return instance||(instance=new AnimationFactory),instance},AnimationFactory.prototype.register=function register(name,type){this._items.push({name,type})},AnimationFactory.prototype.create=function create(element,options){var match,items=this._items;if(options&&options.type)for(var type=options.type.toLowerCase(),i=0;i<items.length;i++)if(items[i].name.toLowerCase()===type){match=items[i];break}if(match)return new match.type(element,options)},Object.defineProperties(AnimationFactory,staticAccessors),AnimationFactory}(common_class.A);const animation_factory=AnimationFactory;var Animation=function(Class){function Animation(element,options){Class.call(this),this.options=Object.assign({},this.options,options),this.element=element}Class&&(Animation.__proto__=Class),Animation.prototype=Object.create(Class&&Class.prototype),Animation.prototype.constructor=Animation;var prototypeAccessors={options:{configurable:!0}};return Animation.create=function create(type,element,options){return animation_factory.current.create(type,element,options)},prototypeAccessors.options.get=function(){return this._options||{duration:500,easing:"swing"}},prototypeAccessors.options.set=function(value){this._options=value},Animation.prototype.setup=function setup(){},Animation.prototype.step=function step(){},Animation.prototype.play=function play(){var this$1=this,options=this.options,duration=options.duration,delay=options.delay;void 0===delay&&(delay=0);var easing=easing_functions_namespaceObject[options.easing],start=(0,now.A)()+delay,finish=start+duration;0===duration?(this.step(1),this.abort()):setTimeout((function(){var loop=function(){if(!this$1._stopped){var wallTime=(0,now.A)(),time=(0,limit_value.A)(wallTime-start,0,duration),easingPosition=easing(time/duration,time,0,1,duration);this$1.step(easingPosition),wallTime<finish?(0,animation_frame.A)(loop):this$1.abort()}};loop()}),delay)},Animation.prototype.abort=function abort(){this._stopped=!0},Animation.prototype.destroy=function destroy(){this.abort()},Object.defineProperties(Animation.prototype,prototypeAccessors),Animation}(common_class.A);const animation=Animation;var ChartElement=function(Class){function ChartElement(options){Class.call(this),this.children=[],this.options=deepExtend({},this.options,this.initUserOptions(options))}return Class&&(ChartElement.__proto__=Class),ChartElement.prototype=Object.create(Class&&Class.prototype),ChartElement.prototype.constructor=ChartElement,ChartElement.prototype.initUserOptions=function initUserOptions(options){return options},ChartElement.prototype.reflow=function reflow(targetBox){for(var box,children=this.children,i=0;i<children.length;i++){var currentChild=children[i];currentChild.reflow(targetBox),box=box?box.wrap(currentChild.box):currentChild.box.clone()}this.box=box||targetBox},ChartElement.prototype.destroy=function destroy(){var children=this.children;this.animation&&this.animation.destroy();for(var i=0;i<children.length;i++)children[i].destroy()},ChartElement.prototype.getRoot=function getRoot(){var parent=this.parent;return parent?parent.getRoot():null},ChartElement.prototype.getSender=function getSender(){var service=this.getService();if(service)return service.sender},ChartElement.prototype.getService=function getService(){for(var element=this;element;){if(element.chartService)return element.chartService;element=element.parent}},ChartElement.prototype.translateChildren=function translateChildren(dx,dy){for(var children=this.children,childrenCount=children.length,i=0;i<childrenCount;i++)children[i].box.translate(dx,dy)},ChartElement.prototype.append=function append(){for(var arguments$1=arguments,i=0;i<arguments.length;i++){var item=arguments$1[i];this.children.push(item),item.parent=this}},ChartElement.prototype.renderVisual=function renderVisual(){!1!==this.options.visible&&(this.createVisual(),this.addVisual(),this.renderChildren(),this.createAnimation(),this.renderComplete())},ChartElement.prototype.addVisual=function addVisual(){this.visual&&(this.visual.chartElement=this,this.parent&&this.parent.appendVisual(this.visual))},ChartElement.prototype.renderChildren=function renderChildren(){for(var children=this.children,length=children.length,i=0;i<length;i++)children[i].renderVisual()},ChartElement.prototype.createVisual=function createVisual(){this.visual=new shapes_group.A({zIndex:this.options.zIndex,visible:valueOrDefault(this.options.visible,!0)})},ChartElement.prototype.createAnimation=function createAnimation(){this.visual&&this.options.animation&&(this.animation=animation.create(this.visual,this.options.animation))},ChartElement.prototype.appendVisual=function appendVisual(childVisual){childVisual.chartElement||(childVisual.chartElement=this),childVisual.options.noclip?this.clipRoot().visual.append(childVisual):drawing_utils_defined(childVisual.options.zIndex)?this.stackRoot().stackVisual(childVisual):this.isStackRoot?this.stackVisual(childVisual):this.visual?this.visual.append(childVisual):this.parent.appendVisual(childVisual)},ChartElement.prototype.clipRoot=function clipRoot(){return this.parent?this.parent.clipRoot():this},ChartElement.prototype.stackRoot=function stackRoot(){return this.parent?this.parent.stackRoot():this},ChartElement.prototype.stackVisual=function stackVisual(childVisual){var pos,zIndex=childVisual.options.zIndex||0,visuals=this.visual.children,length=visuals.length;for(pos=0;pos<length;pos++){var sibling=visuals[pos];if(valueOrDefault(sibling.options.zIndex,0)>zIndex)break}this.visual.insert(pos,childVisual)},ChartElement.prototype.traverse=function traverse(callback){for(var children=this.children,length=children.length,i=0;i<length;i++){var child=children[i];callback(child),child.traverse&&child.traverse(callback)}},ChartElement.prototype.closest=function closest(match){for(var element=this,matched=!1;element&&!matched;)(matched=match(element))||(element=element.parent);if(matched)return element},ChartElement.prototype.renderComplete=function renderComplete(){},ChartElement.prototype.hasHighlight=function hasHighlight(){var options=(this.options||{}).highlight;return!(!this.createHighlight||options&&!1===options.visible||!1===this.visible)},ChartElement.prototype.toggleHighlight=function toggleHighlight(show,opacity){var this$1=this,options=(this.options||{}).highlight||{},customVisual=options.visual,highlight=this._highlight;if(!highlight){var highlightOptions={fill:{color:WHITE,opacity:opacity||.2},stroke:{color:WHITE,width:1,opacity:opacity||.2}};if(customVisual){if(!(highlight=this._highlight=customVisual(Object.assign(this.highlightVisualArgs(),{createVisual:function(){return this$1.createHighlight(highlightOptions)},sender:this.getSender(),series:this.series,dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,runningTotal:this.runningTotal,total:this.total}))))return}else highlight=this._highlight=this.createHighlight(highlightOptions);drawing_utils_defined(highlight.options.zIndex)||(highlight.options.zIndex=valueOrDefault(options.zIndex,this.options.zIndex)),this.appendVisual(highlight)}highlight.visible(show)},ChartElement.prototype.createGradientOverlay=function createGradientOverlay(element,options,gradientOptions){var overlay=new shapes_path.w(Object.assign({stroke:{color:"none"},fill:this.createGradient(gradientOptions),closed:element.options.closed},options));return overlay.segments.elements(element.segments.elements()),overlay},ChartElement.prototype.createGradient=function createGradient(options){if(this.parent)return this.parent.createGradient(options)},ChartElement.prototype.supportsPointInactiveOpacity=function supportsPointInactiveOpacity(){return!0},ChartElement}(common_class.A);ChartElement.prototype.options={};const chart_element=ChartElement;var BoxElement=function(ChartElement){function BoxElement(options){ChartElement.call(this,options),this.options.margin=getSpacing(this.options.margin),this.options.padding=getSpacing(this.options.padding)}return ChartElement&&(BoxElement.__proto__=ChartElement),BoxElement.prototype=Object.create(ChartElement&&ChartElement.prototype),BoxElement.prototype.constructor=BoxElement,BoxElement.prototype.reflow=function reflow(targetBox){var box,this$1=this,options=this.options,width=options.width,height=options.height,shrinkToFit=options.shrinkToFit,hasSetSize=width&&height,margin=options.margin,padding=options.padding,borderWidth=options.border.width,reflowPaddingBox=function(){this$1.align(targetBox,X,options.align),this$1.align(targetBox,Y,options.vAlign),this$1.paddingBox=box.clone().unpad(margin).unpad(borderWidth)},contentBox=targetBox.clone();hasSetSize&&(contentBox.x2=contentBox.x1+width,contentBox.y2=contentBox.y1+height),shrinkToFit&&contentBox.unpad(margin).unpad(borderWidth).unpad(padding),ChartElement.prototype.reflow.call(this,contentBox),box=hasSetSize?this.box=new core_box(0,0,width,height):this.box,shrinkToFit&&hasSetSize?(reflowPaddingBox(),contentBox=this.contentBox=this.paddingBox.clone().unpad(padding)):(contentBox=this.contentBox=box.clone(),box.pad(padding).pad(borderWidth).pad(margin),reflowPaddingBox()),this.translateChildren(box.x1-contentBox.x1+margin.left+borderWidth+padding.left,box.y1-contentBox.y1+margin.top+borderWidth+padding.top);for(var children=this.children,i=0;i<children.length;i++){var item=children[i];item.reflow(item.box)}},BoxElement.prototype.align=function align(targetBox,axis,alignment){this.box.align(targetBox,axis,alignment)},BoxElement.prototype.hasBox=function hasBox(){var options=this.options;return options.border.width||options.background},BoxElement.prototype.createVisual=function createVisual(){ChartElement.prototype.createVisual.call(this),this.options.visible&&this.hasBox()&&this.visual.append(shapes_path.w.fromRect(this.paddingBox.toRect(),this.visualStyle()))},BoxElement.prototype.visualStyle=function visualStyle(){var options=this.options,border=options.border||{};return{stroke:{width:border.width,color:border.color,opacity:valueOrDefault(border.opacity,options.opacity),dashType:border.dashType},fill:{color:options.background,opacity:options.opacity},cursor:options.cursor}},BoxElement}(chart_element);setDefaultOptions(BoxElement,{align:LEFT,vAlign:TOP,margin:{},padding:{},border:{color:BLACK,width:0},background:"",shrinkToFit:!1,width:0,height:0,visible:!0});const box_element=BoxElement;var ShapeElement=function(BoxElement){function ShapeElement(options,pointData){BoxElement.call(this,options),this.pointData=pointData}return BoxElement&&(ShapeElement.__proto__=BoxElement),ShapeElement.prototype=Object.create(BoxElement&&BoxElement.prototype),ShapeElement.prototype.constructor=ShapeElement,ShapeElement.prototype.getElement=function getElement(){var options=this.options,box=this.paddingBox,type=options.type,rotation=options.rotation,center=box.center(),halfWidth=box.width()/2,halfHeight=box.height()/2;if(!options.visible||!this.hasBox())return null;var element,style=this.visualStyle();if(type===CIRCLE)element=new shapes_circle.A(new geometry_circle.A([drawing_utils_round(box.x1+halfWidth,3),drawing_utils_round(box.y1+halfHeight,3)],Math.min(halfWidth,halfHeight)),style);else if("triangle"===type)element=shapes_path.w.fromPoints([[box.x1+halfWidth,box.y1],[box.x1,box.y2],[box.x2,box.y2]],style).close();else if("cross"===type)(element=new shapes_path.P(style)).moveTo(box.x1,box.y1).lineTo(box.x2,box.y2),element.moveTo(box.x1,box.y2).lineTo(box.x2,box.y1);else{var rect=box.toRect();if("roundedRect"===type){var borderRadius=valueOrDefault(options.borderRadius,rect.width()/5);rect.setCornerRadius(borderRadius)}element=shapes_path.w.fromRect(rect,style)}return rotation&&element.transform(geometry_transform.A().rotate(-rotation,[center.x,center.y])),element.options.zIndex=options.zIndex,element},ShapeElement.prototype.createElement=function createElement(){var this$1=this,customVisual=this.options.visual,pointData=this.pointData||{};return customVisual?customVisual({value:pointData.value,dataItem:pointData.dataItem,sender:this.getSender(),series:pointData.series,category:pointData.category,rect:this.paddingBox.toRect(),options:this.visualOptions(),createVisual:function(){return this$1.getElement()}}):this.getElement()},ShapeElement.prototype.visualOptions=function visualOptions(){var options=this.options;return{background:options.background,border:options.border,margin:options.margin,padding:options.padding,type:options.type,size:options.width,visible:options.visible}},ShapeElement.prototype.createVisual=function createVisual(){this.visual=this.createElement()},ShapeElement}(box_element);setDefaultOptions(ShapeElement,{type:CIRCLE,align:CENTER,vAlign:CENTER});const shape_element=ShapeElement;var linear_gradient=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/gradients/linear-gradient.js"),radial_gradient=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/gradients/radial-gradient.js");const core_gradients={glass:{type:"linear",rotation:0,stops:[{offset:0,color:WHITE,opacity:0},{offset:.25,color:WHITE,opacity:.3},{offset:1,color:WHITE,opacity:0}]},sharpBevel:{type:"radial",stops:[{offset:0,color:WHITE,opacity:.55},{offset:.65,color:WHITE,opacity:0},{offset:.95,color:WHITE,opacity:.25}]},roundedBevel:{type:"radial",stops:[{offset:.33,color:WHITE,opacity:.06},{offset:.83,color:WHITE,opacity:.2},{offset:.95,color:WHITE,opacity:0}]},roundedGlass:{type:"radial",supportVML:!1,stops:[{offset:0,color:WHITE,opacity:0},{offset:.5,color:WHITE,opacity:.3},{offset:.99,color:WHITE,opacity:0}]},sharpGlass:{type:"radial",supportVML:!1,stops:[{offset:0,color:WHITE,opacity:.2},{offset:.15,color:WHITE,opacity:.15},{offset:.17,color:WHITE,opacity:.35},{offset:.85,color:WHITE,opacity:.05},{offset:.87,color:WHITE,opacity:.15},{offset:.99,color:WHITE,opacity:0}]},bubbleShadow:{type:"radial",center:[.5,.5],radius:.5}};function boxDiff(r,s){if(r.x1===s.x1&&r.y1===s.y1&&r.x2===s.x2&&r.y2===s.y2)return s;var a=Math.min(r.x1,s.x1),b=Math.max(r.x1,s.x1),c=Math.min(r.x2,s.x2),d=Math.max(r.x2,s.x2),e=Math.min(r.y1,s.y1),f=Math.max(r.y1,s.y1),g=Math.min(r.y2,s.y2),h=Math.max(r.y2,s.y2),boxes=[];return boxes[0]=new core_box(b,e,c,f),boxes[1]=new core_box(a,f,b,g),boxes[2]=new core_box(c,f,d,g),boxes[3]=new core_box(b,g,c,h),r.x1===a&&r.y1===e||s.x1===a&&s.y1===e?(boxes[4]=new core_box(a,e,b,f),boxes[5]=new core_box(c,g,d,h)):(boxes[4]=new core_box(c,e,d,f),boxes[5]=new core_box(a,g,b,h)),grep(boxes,(function(box){return box.height()>0&&box.width()>0}))[0]}var RootElement=function(ChartElement){function RootElement(options){ChartElement.call(this,options);var rootOptions=this.options;rootOptions.width=parseInt(rootOptions.width,10),rootOptions.height=parseInt(rootOptions.height,10),this.gradients={}}return ChartElement&&(RootElement.__proto__=ChartElement),RootElement.prototype=Object.create(ChartElement&&ChartElement.prototype),RootElement.prototype.constructor=RootElement,RootElement.prototype.reflow=function reflow(){var options=this.options,children=this.children,currentBox=new core_box(0,0,options.width,options.height);this.box=currentBox.unpad(options.margin);for(var i=0;i<children.length;i++)children[i].reflow(currentBox),currentBox=boxDiff(currentBox,children[i].box)||new core_box},RootElement.prototype.createVisual=function createVisual(){this.visual=new shapes_group.A,this.createBackground()},RootElement.prototype.createBackground=function createBackground(){var options=this.options,border=options.border||{},box=this.box.clone().pad(options.margin).unpad(border.width),background=shapes_path.w.fromRect(box.toRect(),{stroke:{color:border.width?border.color:"",width:border.width,dashType:border.dashType},fill:{color:options.background,opacity:options.opacity},zIndex:-10});this.visual.append(background)},RootElement.prototype.getRoot=function getRoot(){return this},RootElement.prototype.createGradient=function createGradient(options){var drawingGradient,gradients=this.gradients,hashCode=objectKey(options),gradient=core_gradients[options.gradient];if(gradients[hashCode])drawingGradient=gradients[hashCode];else{var gradientOptions=Object.assign({},gradient,options);"linear"===gradient.type?drawingGradient=new linear_gradient.A(gradientOptions):(options.innerRadius&&(gradientOptions.stops=function innerRadialStops(options){for(var stops=options.stops,usedSpace=options.innerRadius/options.radius*100,length=stops.length,currentStops=[],i=0;i<length;i++){var currentStop=Object.assign({},stops[i]);currentStop.offset=(currentStop.offset*(100-usedSpace)+usedSpace)/100,currentStops.push(currentStop)}return currentStops}(gradientOptions)),(drawingGradient=new radial_gradient.A(gradientOptions)).supportVML=!1!==gradient.supportVML),gradients[hashCode]=drawingGradient}return drawingGradient},RootElement.prototype.cleanGradients=function cleanGradients(){var gradients=this.gradients;for(var hashCode in gradients)gradients[hashCode]._observers=[]},RootElement.prototype.size=function size(){var options=this.options;return new core_box(0,0,options.width,options.height)},RootElement}(chart_element);setDefaultOptions(RootElement,{width:600,height:400,background:WHITE,border:{color:BLACK,width:0},margin:getSpacing(5),zIndex:-2});const root_element=RootElement;var FloatElement=function(ChartElement){function FloatElement(options){ChartElement.call(this,options),this._initDirection()}return ChartElement&&(FloatElement.__proto__=ChartElement),FloatElement.prototype=Object.create(ChartElement&&ChartElement.prototype),FloatElement.prototype.constructor=FloatElement,FloatElement.prototype._initDirection=function _initDirection(){var options=this.options;options.vertical?(this.groupAxis=X,this.elementAxis=Y,this.groupSizeField="width",this.elementSizeField="height",this.groupSpacing=options.spacing,this.elementSpacing=options.vSpacing):(this.groupAxis=Y,this.elementAxis=X,this.groupSizeField="height",this.elementSizeField="width",this.groupSpacing=options.vSpacing,this.elementSpacing=options.spacing)},FloatElement.prototype.reflow=function reflow(targetBox){this.box=targetBox.clone(),this.reflowChildren()},FloatElement.prototype.reflowChildren=function reflowChildren(){var box=this.box,elementAxis=this.elementAxis,groupAxis=this.groupAxis,elementSizeField=this.elementSizeField,groupSizeField=this.groupSizeField,ref$1=this.groupOptions(),groups=ref$1.groups,groupsSize=ref$1.groupsSize,maxGroupElementsSize=ref$1.maxGroupElementsSize,groupsCount=groups.length,groupsStart=box[groupAxis+1]+this.alignStart(groupsSize,box[groupSizeField]());if(groupsCount){for(var groupStart=groupsStart,groupIdx=0;groupIdx<groupsCount;groupIdx++){for(var group=groups[groupIdx],groupElements=group.groupElements,elementStart=box[elementAxis+1],groupElementsCount=groupElements.length,idx=0;idx<groupElementsCount;idx++){var element=groupElements[idx],elementSize=this.elementSize(element),groupElementStart=groupStart+this.alignStart(elementSize[groupSizeField],group.groupSize),elementBox=new core_box;elementBox[groupAxis+1]=groupElementStart,elementBox[groupAxis+2]=groupElementStart+elementSize[groupSizeField],elementBox[elementAxis+1]=elementStart,elementBox[elementAxis+2]=elementStart+elementSize[elementSizeField],element.reflow(elementBox),elementStart+=elementSize[elementSizeField]+this.elementSpacing}groupStart+=group.groupSize+this.groupSpacing}box[groupAxis+1]=groupsStart,box[groupAxis+2]=groupsStart+groupsSize,box[elementAxis+2]=box[elementAxis+1]+maxGroupElementsSize}},FloatElement.prototype.alignStart=function alignStart(size,maxSize){var start=0,align=this.options.align;return align===RIGHT||align===BOTTOM?start=maxSize-size:align===CENTER&&(start=(maxSize-size)/2),start},FloatElement.prototype.groupOptions=function groupOptions(){for(var box=this.box,children=this.children,elementSizeField=this.elementSizeField,groupSizeField=this.groupSizeField,elementSpacing=this.elementSpacing,groupSpacing=this.groupSpacing,maxSize=drawing_utils_round(box[elementSizeField]()),childrenCount=children.length,groups=[],groupSize=0,groupElementsSize=0,groupsSize=0,maxGroupElementsSize=0,groupElements=[],idx=0;idx<childrenCount;idx++){var element=children[idx];element.box||element.reflow(box);var elementSize=this.elementSize(element);this.options.wrap&&drawing_utils_round(groupElementsSize+elementSpacing+elementSize[elementSizeField])>maxSize&&(groups.push({groupElements,groupSize,groupElementsSize}),maxGroupElementsSize=Math.max(maxGroupElementsSize,groupElementsSize),groupsSize+=groupSpacing+groupSize,groupSize=0,groupElementsSize=0,groupElements=[]),groupSize=Math.max(groupSize,elementSize[groupSizeField]),groupElementsSize>0&&(groupElementsSize+=elementSpacing),groupElementsSize+=elementSize[elementSizeField],groupElements.push(element)}return groups.push({groupElements,groupSize,groupElementsSize}),{groups,groupsSize:groupsSize+=groupSize,maxGroupElementsSize:maxGroupElementsSize=Math.max(maxGroupElementsSize,groupElementsSize)}},FloatElement.prototype.elementSize=function elementSize(element){return{width:element.box.width(),height:element.box.height()}},FloatElement.prototype.createVisual=function createVisual(){},FloatElement}(chart_element);setDefaultOptions(FloatElement,{vertical:!0,wrap:!0,vSpacing:0,spacing:0});const float_element=FloatElement;var shapes_text=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/shapes/text.js"),measure_text=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/text-metrics/measure-text.js"),DrawingText=shapes_text.A,Text=function(ChartElement){function Text(content,options){ChartElement.call(this,options),this.content=content,this.reflow(new core_box)}return ChartElement&&(Text.__proto__=ChartElement),Text.prototype=Object.create(ChartElement&&ChartElement.prototype),Text.prototype.constructor=Text,Text.prototype.reflow=function reflow(targetBox){var options=this.options,size=options.size=measure_text.A(this.content,{font:options.font});this.baseline=size.baseline,this.box=new core_box(targetBox.x1,targetBox.y1,targetBox.x1+size.width,targetBox.y1+size.height)},Text.prototype.createVisual=function createVisual(){var ref=this.options,font=ref.font,color=ref.color,opacity=ref.opacity,cursor=ref.cursor;this.visual=new DrawingText(this.content,this.box.toRect().topLeft(),{font,fill:{color,opacity},cursor})},Text}(chart_element);setDefaultOptions(Text,{font:"12px sans-serif",color:BLACK});const core_text=Text;function rectToBox(rect){var origin=rect.origin,bottomRight=rect.bottomRight();return new core_box(origin.x,origin.y,bottomRight.x,bottomRight.y)}var ROWS_SPLIT_REGEX=/\n/m,TextBox=function(BoxElement){function TextBox(content,options,data){BoxElement.call(this,options),this.content=content,this.data=data,this._initContainer(),!1!==this.options._autoReflow&&this.reflow(new core_box)}return BoxElement&&(TextBox.__proto__=BoxElement),TextBox.prototype=Object.create(BoxElement&&BoxElement.prototype),TextBox.prototype.constructor=TextBox,TextBox.prototype._initContainer=function _initContainer(){var options=this.options,rows=String(this.content).split(ROWS_SPLIT_REGEX),floatElement=new float_element({vertical:!0,align:options.align,wrap:!1}),textOptions=deepExtend({},options,{opacity:1,animation:null});this.container=floatElement,this.append(floatElement);for(var rowIdx=0;rowIdx<rows.length;rowIdx++){var text=new core_text(rows[rowIdx].trim(),textOptions);floatElement.append(text)}},TextBox.prototype.reflow=function reflow(targetBox){var options=this.options,visualFn=options.visual;if(this.container.options.align=options.align,visualFn&&!this._boxReflow){var visualBox=targetBox;visualBox.hasSize()||(this._boxReflow=!0,this.reflow(visualBox),this._boxReflow=!1,visualBox=this.box);var visual=this.visual=visualFn(this.visualContext(visualBox));visual&&(visualBox=rectToBox(visual.clippedBBox()||new geometry_rect.A),visual.options.zIndex=options.zIndex),this.box=this.contentBox=this.paddingBox=visualBox}else if(BoxElement.prototype.reflow.call(this,targetBox),options.rotation){var margin=getSpacing(options.margin),box=this.box.unpad(margin);this.targetBox=targetBox,this.normalBox=box.clone(),(box=this.rotate()).translate(margin.left-margin.right,margin.top-margin.bottom),this.rotatedBox=box.clone(),box.pad(margin)}},TextBox.prototype.createVisual=function createVisual(){var options=this.options;if(this.visual=new shapes_group.A({transform:this.rotationTransform(),zIndex:options.zIndex,noclip:options.noclip}),this.hasBox()){var box=shapes_path.w.fromRect(this.paddingBox.toRect(),this.visualStyle());this.visual.append(box)}},TextBox.prototype.renderVisual=function renderVisual(){if(this.options.visible)if(this.options.visual){var visual=this.visual;visual&&!drawing_utils_defined(visual.options.noclip)&&(visual.options.noclip=this.options.noclip),this.addVisual(),this.createAnimation()}else BoxElement.prototype.renderVisual.call(this)},TextBox.prototype.visualContext=function visualContext(targetBox){var this$1=this,context={text:this.content,rect:targetBox.toRect(),sender:this.getSender(),options:this.options,createVisual:function(){return this$1._boxReflow=!0,this$1.reflow(targetBox),this$1._boxReflow=!1,this$1.getDefaultVisual()}};return this.data&&Object.assign(context,this.data),context},TextBox.prototype.getDefaultVisual=function getDefaultVisual(){this.createVisual(),this.renderChildren();var visual=this.visual;return delete this.visual,visual},TextBox.prototype.rotate=function rotate(){var options=this.options;return this.box.rotate(options.rotation),this.align(this.targetBox,X,options.align),this.align(this.targetBox,Y,options.vAlign),this.box},TextBox.prototype.rotationTransform=function rotationTransform(){var rotation=this.options.rotation;if(!rotation)return null;var ref=this.normalBox.center(),cx=ref.x,cy=ref.y,boxCenter=this.rotatedBox.center();return geometry_transform.A().translate(boxCenter.x-cx,boxCenter.y-cy).rotate(rotation,[cx,cy])},TextBox}(box_element);const text_box=TextBox;var Title=function(ChartElement){function Title(options){ChartElement.call(this,options),this._textBox=new text_box(this.options.text,Object.assign({},this.options,{vAlign:this.options.position})),this.append(this._textBox)}return ChartElement&&(Title.__proto__=ChartElement),Title.prototype=Object.create(ChartElement&&ChartElement.prototype),Title.prototype.constructor=Title,Title.prototype.reflow=function reflow(targetBox){ChartElement.prototype.reflow.call(this,targetBox),this.box.snapTo(targetBox,X)},Title.buildTitle=function buildTitle(options,defaultOptions){var title,titleOptions=options;return"string"==typeof options&&(titleOptions={text:options}),(titleOptions=Object.assign({visible:!0},defaultOptions,titleOptions))&&titleOptions.visible&&titleOptions.text&&(title=new Title(titleOptions)),title},Title.orderTitles=function orderTitles(titles){var items=[].concat(titles),top=items.filter((function(item){return item&&item.options.position!==BOTTOM})),bottom=items.filter((function(item){return item&&item.options.position===BOTTOM}));return collapseVerticalMargins(top),collapseVerticalMargins(bottom),bottom.reverse(),top.concat(bottom)},Title}(chart_element);function collapseVerticalMargins(items){for(var i=1;i<items.length;i++){var box=items[i]._textBox,prevBox=items[i-1]._textBox;prevBox.options.margin=Object.assign(getSpacing(prevBox.options.margin),{bottom:0}),box.options.margin=Object.assign(getSpacing(box.options.margin),{top:0})}}setDefaultOptions(Title,{color:BLACK,position:TOP,align:CENTER,margin:getSpacing(5),padding:getSpacing(5)});const core_title=Title;var AxisLabel=function(TextBox){function AxisLabel(value,text,index,dataItem,options){TextBox.call(this,text,options),this.text=text,this.value=value,this.index=index,this.dataItem=dataItem,this.reflow(new core_box)}return TextBox&&(AxisLabel.__proto__=TextBox),AxisLabel.prototype=Object.create(TextBox&&TextBox.prototype),AxisLabel.prototype.constructor=AxisLabel,AxisLabel.prototype.visualContext=function visualContext(targetBox){var context=TextBox.prototype.visualContext.call(this,targetBox);return context.value=this.value,context.dataItem=this.dataItem,context.format=this.options.format,context.culture=this.options.culture,context},AxisLabel.prototype.click=function click(widget,e){widget.trigger("axisLabelClick",{element:eventElement(e),value:this.value,text:this.text,index:this.index,dataItem:this.dataItem,axis:this.parent.options})},AxisLabel.prototype.rotate=function rotate(){if(this.options.alignRotation!==CENTER){var box=this.normalBox.toRect(),transform=this.rotationTransform();this.box=rectToBox(box.bbox(transform.matrix()))}else TextBox.prototype.rotate.call(this);return this.box},AxisLabel.prototype.rotationTransform=function rotationTransform(){var options=this.options,rotation=options.rotation;if(!rotation)return null;if(options.alignRotation===CENTER)return TextBox.prototype.rotationTransform.call(this);var rotationMatrix=geometry_transform.A().rotate(rotation).matrix(),box=this.normalBox.toRect(),rect=this.targetBox.toRect(),rotationOrigin=options.rotationOrigin||TOP,alignAxis=rotationOrigin===TOP||rotationOrigin===BOTTOM?X:Y,distanceAxis=rotationOrigin===TOP||rotationOrigin===BOTTOM?Y:X,axisAnchor=rotationOrigin===TOP||rotationOrigin===LEFT?rect.origin:rect.bottomRight(),topLeft=box.topLeft().transformCopy(rotationMatrix),topRight=box.topRight().transformCopy(rotationMatrix),bottomRight=box.bottomRight().transformCopy(rotationMatrix),bottomLeft=box.bottomLeft().transformCopy(rotationMatrix),rotatedBox=geometry_rect.A.fromPoints(topLeft,topRight,bottomRight,bottomLeft),translate={};translate[distanceAxis]=rect.origin[distanceAxis]-rotatedBox.origin[distanceAxis];var alignStart,alignEnd,distanceLeft=Math.abs(topLeft[distanceAxis]+translate[distanceAxis]-axisAnchor[distanceAxis]),distanceRight=Math.abs(topRight[distanceAxis]+translate[distanceAxis]-axisAnchor[distanceAxis]);drawing_utils_round(distanceLeft,10)===drawing_utils_round(distanceRight,10)?(alignStart=topLeft,alignEnd=topRight):distanceRight<distanceLeft?(alignStart=topRight,alignEnd=bottomRight):(alignStart=topLeft,alignEnd=bottomLeft);var alignCenter=alignStart[alignAxis]+(alignEnd[alignAxis]-alignStart[alignAxis])/2;return translate[alignAxis]=rect.center()[alignAxis]-alignCenter,geometry_transform.A().translate(translate.x,translate.y).rotate(rotation)},AxisLabel}(text_box);setDefaultOptions(AxisLabel,{_autoReflow:!1});const axis_label=AxisLabel;var Note=function(BoxElement){function Note(fields,options,chartService){BoxElement.call(this,options),this.fields=fields,this.chartService=chartService,this.render()}return BoxElement&&(Note.__proto__=BoxElement),Note.prototype=Object.create(BoxElement&&BoxElement.prototype),Note.prototype.constructor=Note,Note.prototype.hide=function hide(){this.options.visible=!1},Note.prototype.show=function show(){this.options.visible=!0},Note.prototype.render=function render(){var this$1=this,options=this.options;if(options.visible){var width,height,label=options.label,icon=options.icon,box=new core_box,childAlias=function(){return this$1},size=icon.size,text=this.fields.text;if(drawing_utils_defined(label)&&label.visible){var noteTemplate=getTemplate(label);noteTemplate?text=noteTemplate(this.fields):label.format&&(text=this.chartService.format.auto(label.format,text)),label.color||(label.color="inside"===label.position?"#fff":icon.background),this.label=new text_box(text,deepExtend({},label)),this.label.aliasFor=childAlias,"inside"!==label.position||drawing_utils_defined(size)||(icon.type===CIRCLE?size=Math.max(this.label.box.width(),this.label.box.height()):(width=this.label.box.width(),height=this.label.box.height()),box.wrap(this.label.box))}icon.width=width||size||7,icon.height=height||size||7;var marker=new shape_element(deepExtend({},icon));marker.aliasFor=childAlias,this.marker=marker,this.append(marker),this.label&&this.append(this.label),marker.reflow(new core_box),this.wrapperBox=box.wrap(marker.box)}},Note.prototype.reflow=function reflow(targetBox){var lineStart,box,contentBox,options=this.options,label=this.label,marker=this.marker,wrapperBox=this.wrapperBox,center=targetBox.center(),length=options.line.length,position=options.position;options.visible&&(inArray(position,[LEFT,RIGHT])?position===LEFT?(contentBox=wrapperBox.alignTo(targetBox,position).translate(-length,targetBox.center().y-wrapperBox.center().y),options.line.visible&&(lineStart=[targetBox.x1,center.y],this.linePoints=[lineStart,[contentBox.x2,center.y]],box=contentBox.clone().wrapPoint(lineStart))):(contentBox=wrapperBox.alignTo(targetBox,position).translate(length,targetBox.center().y-wrapperBox.center().y),options.line.visible&&(lineStart=[targetBox.x2,center.y],this.linePoints=[lineStart,[contentBox.x1,center.y]],box=contentBox.clone().wrapPoint(lineStart))):position===BOTTOM?(contentBox=wrapperBox.alignTo(targetBox,position).translate(targetBox.center().x-wrapperBox.center().x,length),options.line.visible&&(lineStart=[center.x,targetBox.y2],this.linePoints=[lineStart,[center.x,contentBox.y1]],box=contentBox.clone().wrapPoint(lineStart))):(contentBox=wrapperBox.alignTo(targetBox,position).translate(targetBox.center().x-wrapperBox.center().x,-length),options.line.visible&&(lineStart=[center.x,targetBox.y1],this.linePoints=[lineStart,[center.x,contentBox.y2]],box=contentBox.clone().wrapPoint(lineStart))),marker&&marker.reflow(contentBox),label&&(label.reflow(contentBox),marker&&("outside"===options.label.position&&label.box.alignTo(marker.box,position),label.reflow(label.box))),this.contentBox=contentBox,this.targetBox=targetBox,this.box=box||contentBox)},Note.prototype.createVisual=function createVisual(){BoxElement.prototype.createVisual.call(this),this.visual.options.noclip=this.options.noclip,this.options.visible&&this.createLine()},Note.prototype.renderVisual=function renderVisual(){var this$1=this,options=this.options,customVisual=options.visual;options.visible&&customVisual?(this.visual=customVisual(Object.assign(this.fields,{sender:this.getSender(),rect:this.targetBox.toRect(),options:{background:options.background,border:options.background,icon:options.icon,label:options.label,line:options.line,position:options.position,visible:options.visible},createVisual:function(){this$1.createVisual(),this$1.renderChildren();var defaultVisual=this$1.visual;return delete this$1.visual,defaultVisual}})),this.addVisual()):BoxElement.prototype.renderVisual.call(this)},Note.prototype.createLine=function createLine(){var options=this.options.line;if(this.linePoints){var path=shapes_path.w.fromPoints(this.linePoints,{stroke:{color:options.color,width:options.width,dashType:options.dashType}});alignPathToPixel(path),this.visual.append(path)}},Note.prototype.click=function click(widget,e){var args=this.eventArgs(e);widget.trigger("noteClick",args)||e.preventDefault()},Note.prototype.over=function over(widget,e){var args=this.eventArgs(e);widget.trigger("noteHover",args)||e.preventDefault()},Note.prototype.out=function out(widget,e){var args=this.eventArgs(e);widget.trigger("noteLeave",args)},Note.prototype.eventArgs=function eventArgs(e){var options=this.options;return Object.assign(this.fields,{element:eventElement(e),text:drawing_utils_defined(options.label)?options.label.text:"",visual:this.visual})},Note}(box_element);setDefaultOptions(Note,{icon:{visible:!0,type:CIRCLE},label:{position:"inside",visible:!0,align:CENTER,vAlign:CENTER},line:{visible:!0},visible:!0,position:TOP,zIndex:2});const core_note=Note;var intl_service_current={format:function(format,value){return value},toString:function(value){return value},parseDate:function(value){return new Date(value)},firstDay:function(){return 0}},IntlService=function IntlService(){},staticAccessors={implementation:{configurable:!0}};IntlService.register=function register(userImplementation){intl_service_current=userImplementation},staticAccessors.implementation.get=function(){return intl_service_current},Object.defineProperties(IntlService,staticAccessors);const intl_service=IntlService;var FORMAT_REPLACE_REGEX=/\{(\d+)(:[^\}]+)?\}/g,FormatService=function FormatService(intlService){this._intlService=intlService},format_service_prototypeAccessors={intl:{configurable:!0}};format_service_prototypeAccessors.intl.get=function(){return this._intlService||intl_service.implementation},format_service_prototypeAccessors.intl.set=function(value){this._intlService=value},FormatService.prototype.auto=function auto(formatString){for(var values=[],len=arguments.length-1;len-- >0;)values[len]=arguments[len+1];var intl=this.intl;return isString(formatString)&&formatString.match(FORMAT_REGEX)?intl.format.apply(intl,[formatString].concat(values)):intl.toString(values[0],formatString)},FormatService.prototype.localeAuto=function localeAuto(formatString,values,locale){var intl=this.intl;return isString(formatString)&&formatString.match(FORMAT_REGEX)?formatString.replace(FORMAT_REPLACE_REGEX,(function(match,index,placeholderFormat){var value=values[parseInt(index,10)];return intl.toString(value,placeholderFormat?placeholderFormat.substring(1):"",locale)})):intl.toString(values[0],formatString,locale)},Object.defineProperties(FormatService.prototype,format_service_prototypeAccessors);const format_service=FormatService;var ChartService=function ChartService(chart,context){void 0===context&&(context={}),this._intlService=context.intlService,this.sender=context.sender||chart,this.format=new format_service(context.intlService),this.chart=chart,this.rtl=Boolean(context.rtl)},chart_service_prototypeAccessors={intl:{configurable:!0}};chart_service_prototypeAccessors.intl.get=function(){return this._intlService||intl_service.implementation},chart_service_prototypeAccessors.intl.set=function(value){this._intlService=value,this.format.intl=value},ChartService.prototype.notify=function notify(name,args){this.chart&&this.chart.trigger(name,args)},ChartService.prototype.isPannable=function isPannable(axis){var pannable=((this.chart||{}).options||{}).pannable;return pannable&&pannable.lock!==axis},Object.defineProperties(ChartService.prototype,chart_service_prototypeAccessors);const chart_service=ChartService;var dom_events_builder_current,DomEventsBuilder=function DomEventsBuilder(){};DomEventsBuilder.register=function register(userImplementation){dom_events_builder_current=userImplementation},DomEventsBuilder.create=function create(element,events){if(dom_events_builder_current)return dom_events_builder_current.create(element,events)};const dom_events_builder=DomEventsBuilder;function createAxisTick(options,tickOptions){var tickX=options.tickX,tickY=options.tickY,position=options.position,tick=new shapes_path.w({stroke:{width:tickOptions.width,color:tickOptions.color}});return options.vertical?tick.moveTo(tickX,position).lineTo(tickX+tickOptions.size,position):tick.moveTo(position,tickY).lineTo(position,tickY+tickOptions.size),alignPathToPixel(tick),tick}function createAxisGridLine(options,gridLine){var lineStart=options.lineStart,lineEnd=options.lineEnd,position=options.position,line=new shapes_path.w({stroke:{width:gridLine.width,color:gridLine.color,dashType:gridLine.dashType}});return options.vertical?line.moveTo(lineStart,position).lineTo(lineEnd,position):line.moveTo(position,lineStart).lineTo(position,lineEnd),alignPathToPixel(line),line}var Axis=function(ChartElement){function Axis(options,chartService){void 0===chartService&&(chartService=new chart_service),ChartElement.call(this,options),this.chartService=chartService,this.options.visible||(this.options=deepExtend({},this.options,{labels:{visible:!1},line:{visible:!1},margin:0,majorTickSize:0,minorTickSize:0})),this.options.minorTicks=deepExtend({},{color:this.options.line.color,width:this.options.line.width,visible:"none"!==this.options.minorTickType},this.options.minorTicks,{size:this.options.minorTickSize,align:this.options.minorTickType}),this.options.majorTicks=deepExtend({},{color:this.options.line.color,width:this.options.line.width,visible:"none"!==this.options.majorTickType},this.options.majorTicks,{size:this.options.majorTickSize,align:this.options.majorTickType}),this.initFields(),this.options._deferLabels||this.createLabels(),this.createTitle(),this.createNotes()}return ChartElement&&(Axis.__proto__=ChartElement),Axis.prototype=Object.create(ChartElement&&ChartElement.prototype),Axis.prototype.constructor=Axis,Axis.prototype.initFields=function initFields(){},Axis.prototype.labelsRange=function labelsRange(){return{min:this.options.labels.skip,max:this.labelsCount()}},Axis.prototype.normalizeLabelRotation=function normalizeLabelRotation(labelOptions){var rotation=labelOptions.rotation;isObject(rotation)&&(labelOptions.alignRotation=rotation.align,labelOptions.rotation=rotation.angle)},Axis.prototype.createLabels=function createLabels(){var options=this.options,align=options.vertical?RIGHT:CENTER,labelOptions=deepExtend({},options.labels,{align,zIndex:options.zIndex}),step=Math.max(1,labelOptions.step);if(this.clearLabels(),labelOptions.visible){this.normalizeLabelRotation(labelOptions),"auto"===labelOptions.rotation&&(labelOptions.rotation=0,options.autoRotateLabels=!0);for(var range=this.labelsRange(),idx=range.min;idx<range.max;idx+=step){var labelContext={index:idx,count:range.max},label=this.createAxisLabel(idx,labelOptions,labelContext);label&&(this.append(label),this.labels.push(label))}}},Axis.prototype.clearLabels=function clearLabels(){this.children=grep(this.children,(function(child){return!(child instanceof axis_label)})),this.labels=[]},Axis.prototype.clearTitle=function clearTitle(){var this$1=this;this.title&&(this.children=grep(this.children,(function(child){return child!==this$1.title})),this.title=void 0)},Axis.prototype.clear=function clear(){this.clearLabels(),this.clearTitle()},Axis.prototype.lineBox=function lineBox(){var options=this.options,box=this.box,vertical=options.vertical,mirror=options.labels.mirror,axisX=mirror?box.x1:box.x2,axisY=mirror?box.y2:box.y1,lineWidth=options.line.width||0;return vertical?new core_box(axisX,box.y1,axisX,box.y2-lineWidth):new core_box(box.x1,axisY,box.x2-lineWidth,axisY)},Axis.prototype.createTitle=function createTitle(){var options=this.options,titleOptions=deepExtend({rotation:options.vertical?-90:0,text:"",zIndex:1,visualSize:!0},options.title);if(titleOptions.visible&&titleOptions.text){var title=new text_box(titleOptions.text,titleOptions);this.append(title),this.title=title}},Axis.prototype.createNotes=function createNotes(){var options=this.options,notes=options.notes,items=notes.data||[];this.notes=[];for(var i=0;i<items.length;i++){var item=deepExtend({},notes,items[i]);item.value=this.parseNoteValue(item.value);var note=new core_note({value:item.value,text:item.label.text,dataItem:item},item,this.chartService);note.options.visible&&(drawing_utils_defined(note.options.position)?options.vertical&&!inArray(note.options.position,[LEFT,RIGHT])?note.options.position=options.reverse?LEFT:RIGHT:options.vertical||inArray(note.options.position,[TOP,BOTTOM])||(note.options.position=options.reverse?BOTTOM:TOP):options.vertical?note.options.position=options.reverse?LEFT:RIGHT:note.options.position=options.reverse?BOTTOM:TOP,this.append(note),this.notes.push(note))}},Axis.prototype.parseNoteValue=function parseNoteValue(value){return value},Axis.prototype.renderVisual=function renderVisual(){ChartElement.prototype.renderVisual.call(this),this.createPlotBands()},Axis.prototype.createVisual=function createVisual(){ChartElement.prototype.createVisual.call(this),this.createBackground(),this.createLine()},Axis.prototype.gridLinesVisual=function gridLinesVisual(){var gridLines=this._gridLines;return gridLines||(gridLines=this._gridLines=new shapes_group.A({zIndex:-2}),this.appendVisual(this._gridLines)),gridLines},Axis.prototype.createTicks=function createTicks(lineGroup){var options=this.options,lineBox=this.lineBox(),mirror=options.labels.mirror,majorUnit=options.majorTicks.visible?options.majorUnit:0,tickLineOptions={vertical:options.vertical};function render(tickPositions,tickOptions,skipUnit){var count=tickPositions.length,step=Math.max(1,tickOptions.step);if(tickOptions.visible)for(var i=tickOptions.skip;i<count;i+=step)drawing_utils_defined(skipUnit)&&i%skipUnit===0||(tickLineOptions.tickX=mirror?lineBox.x2:lineBox.x2-tickOptions.size,tickLineOptions.tickY=mirror?lineBox.y1-tickOptions.size:lineBox.y1,tickLineOptions.position=tickPositions[i],lineGroup.append(createAxisTick(tickLineOptions,tickOptions)))}render(this.getMajorTickPositions(),options.majorTicks),render(this.getMinorTickPositions(),options.minorTicks,majorUnit/options.minorUnit)},Axis.prototype.createLine=function createLine(){var options=this.options,line=options.line,lineBox=this.lineBox();if(line.width>0&&line.visible){var path=new shapes_path.w({stroke:{width:line.width,color:line.color,dashType:line.dashType}});path.moveTo(lineBox.x1,lineBox.y1).lineTo(lineBox.x2,lineBox.y2),options._alignLines&&alignPathToPixel(path);var group=this._lineGroup=new shapes_group.A;group.append(path),this.visual.append(group),this.createTicks(group)}},Axis.prototype.getActualTickSize=function getActualTickSize(){var options=this.options,tickSize=0;return options.majorTicks.visible&&options.minorTicks.visible?tickSize=Math.max(options.majorTicks.size,options.minorTicks.size):options.majorTicks.visible?tickSize=options.majorTicks.size:options.minorTicks.visible&&(tickSize=options.minorTicks.size),tickSize},Axis.prototype.createBackground=function createBackground(){var options=this.options,box=this.box,background=options.background;background&&(this._backgroundPath=shapes_path.w.fromRect(box.toRect(),{fill:{color:background},stroke:null}),this.visual.append(this._backgroundPath))},Axis.prototype.createPlotBands=function createPlotBands(){var this$1=this,options=this.options,plotBands=options.plotBands||[],vertical=options.vertical,plotArea=this.plotArea;if(0!==plotBands.length){for(var group=this._plotbandGroup=new shapes_group.A({zIndex:-1}),altAxis=grep(this.pane.axes,(function(axis){return axis.options.vertical!==this$1.options.vertical}))[0],idx=0;idx<plotBands.length;idx++){var item=plotBands[idx],slotX=void 0,slotY=void 0,labelOptions=item.label,label=void 0;if(vertical?(slotX=(altAxis||plotArea.axisX).lineBox(),slotY=this$1.getSlot(item.from,item.to,!0)):(slotX=this$1.getSlot(item.from,item.to,!0),slotY=(altAxis||plotArea.axisY).lineBox()),labelOptions&&(labelOptions.vAlign=labelOptions.position||LEFT,label=this$1.createPlotBandLabel(labelOptions,item,new core_box(slotX.x1,slotY.y1,slotX.x2,slotY.y2))),0!==slotX.width()&&0!==slotY.height()){var bandRect=new geometry_rect.A([slotX.x1,slotY.y1],[slotX.width(),slotY.height()]),path=shapes_path.w.fromRect(bandRect,{fill:{color:item.color,opacity:item.opacity},stroke:null});group.append(path),label&&group.append(label)}}this.appendVisual(group)}},Axis.prototype.createPlotBandLabel=function createPlotBandLabel(label,item,box){if(!1===label.visible)return null;var textbox,text=label.text;if(drawing_utils_defined(label)&&label.visible){var labelTemplate=getTemplate(label);labelTemplate?text=labelTemplate({text,item}):label.format&&(text=this.chartService.format.auto(label.format,text)),label.color||(label.color=this.options.labels.color)}return(textbox=new text_box(text,label)).reflow(box),textbox.renderVisual(),textbox.visual},Axis.prototype.createGridLines=function createGridLines(altAxis){var options=this.options,minorGridLines=options.minorGridLines,majorGridLines=options.majorGridLines,minorUnit=options.minorUnit,vertical=options.vertical,axisLineVisible=altAxis.options.line.visible,majorUnit=majorGridLines.visible?options.majorUnit:0,lineBox=altAxis.lineBox(),linePos=lineBox[vertical?"y1":"x1"],lineOptions={lineStart:lineBox[vertical?"x1":"y1"],lineEnd:lineBox[vertical?"x2":"y2"],vertical},majorTicks=[],container=this.gridLinesVisual();function render(tickPositions,gridLine,skipUnit){var count=tickPositions.length,step=Math.max(1,gridLine.step);if(gridLine.visible)for(var i=gridLine.skip;i<count;i+=step){var pos=drawing_utils_round(tickPositions[i]);inArray(pos,majorTicks)||i%skipUnit===0||axisLineVisible&&linePos===pos||(lineOptions.position=pos,container.append(createAxisGridLine(lineOptions,gridLine)),majorTicks.push(pos))}}return render(this.getMajorTickPositions(),majorGridLines),render(this.getMinorTickPositions(),minorGridLines,majorUnit/minorUnit),container.children},Axis.prototype.reflow=function reflow(box){for(var options=this.options,labels=this.labels,title=this.title,vertical=options.vertical,count=labels.length,sizeFn=vertical?"width":"height",titleSize=title?title.box[sizeFn]():0,space=this.getActualTickSize()+options.margin+titleSize,boxSize=((this.getRoot()||{}).box||box)[sizeFn](),maxLabelSize=0,i=0;i<count;i++){var labelSize=labels[i].box[sizeFn]();labelSize+space<=boxSize&&(maxLabelSize=Math.max(maxLabelSize,labelSize))}this.box=vertical?new core_box(box.x1,box.y1,box.x1+maxLabelSize+space,box.y2):new core_box(box.x1,box.y1,box.x2,box.y1+maxLabelSize+space),this.arrangeTitle(),this.arrangeLabels(),this.arrangeNotes()},Axis.prototype.getLabelsTickPositions=function getLabelsTickPositions(){return this.getMajorTickPositions()},Axis.prototype.labelTickIndex=function labelTickIndex(label){return label.index},Axis.prototype.arrangeLabels=function arrangeLabels(){for(var options=this.options,labels=this.labels,labelsBetweenTicks=this.labelsBetweenTicks(),vertical=options.vertical,mirror=options.labels.mirror,tickPositions=this.getLabelsTickPositions(),idx=0;idx<labels.length;idx++){var label=labels[idx],tickIx=this.labelTickIndex(label),labelSize=vertical?label.box.height():label.box.width(),firstTickPosition=tickPositions[tickIx],nextTickPosition=tickPositions[tickIx+1],positionStart=void 0,positionEnd=void 0;if(vertical){if(labelsBetweenTicks)positionStart=firstTickPosition+(nextTickPosition-firstTickPosition)/2-labelSize/2;else positionStart=firstTickPosition-labelSize/2;positionEnd=positionStart}else labelsBetweenTicks?(positionStart=firstTickPosition,positionEnd=nextTickPosition):positionEnd=(positionStart=firstTickPosition-labelSize/2)+labelSize;this.positionLabel(label,mirror,positionStart,positionEnd)}},Axis.prototype.positionLabel=function positionLabel(label,mirror,positionStart,positionEnd){void 0===positionEnd&&(positionEnd=positionStart);var labelBox,options=this.options,vertical=options.vertical,lineBox=this.lineBox(),labelOffset=this.getActualTickSize()+options.margin;if(vertical){var labelX=lineBox.x2;mirror?(labelX+=labelOffset,label.options.rotationOrigin=LEFT):(labelX-=labelOffset+label.box.width(),label.options.rotationOrigin=RIGHT),labelBox=label.box.move(labelX,positionStart)}else{var labelY=lineBox.y1;mirror?(labelY-=labelOffset+label.box.height(),label.options.rotationOrigin=BOTTOM):(labelY+=labelOffset,label.options.rotationOrigin=TOP),labelBox=new core_box(positionStart,labelY,positionEnd,labelY+label.box.height())}label.reflow(labelBox)},Axis.prototype.autoRotateLabelAngle=function autoRotateLabelAngle(labelBox,slotWidth){return labelBox.width()<slotWidth?0:labelBox.height()>slotWidth?-90:-45},Axis.prototype.autoRotateLabels=function autoRotateLabels(){if(!this.options.autoRotateLabels||this.options.vertical)return!1;for(var tickPositions=this.getMajorTickPositions(),labels=this.labels,limit=Math.min(labels.length,tickPositions.length-1),angle=0,idx=0;idx<limit;idx++){var width=Math.abs(tickPositions[idx+1]-tickPositions[idx]),labelBox=labels[idx].box,labelAngle=this.autoRotateLabelAngle(labelBox,width);if(0!==labelAngle&&(angle=labelAngle),-90===angle)break}if(0!==angle){for(var idx$1=0;idx$1<labels.length;idx$1++)labels[idx$1].options.rotation=angle,labels[idx$1].reflow(new core_box);return!0}},Axis.prototype.arrangeTitle=function arrangeTitle(){var options=this.options,title=this.title,mirror=options.labels.mirror,vertical=options.vertical;title&&(vertical?(title.options.align=mirror?RIGHT:LEFT,title.options.vAlign=title.options.position):(title.options.align=title.options.position,title.options.vAlign=mirror?TOP:BOTTOM),title.reflow(this.box))},Axis.prototype.arrangeNotes=function arrangeNotes(){for(var idx=0;idx<this.notes.length;idx++){var item=this.notes[idx],value=item.options.value,slot=void 0;drawing_utils_defined(value)?(this.shouldRenderNote(value)?item.show():item.hide(),slot=this.noteSlot(value)):item.hide(),item.reflow(slot||this.lineBox())}},Axis.prototype.noteSlot=function noteSlot(value){return this.getSlot(value)},Axis.prototype.alignTo=function alignTo(secondAxis){var lineBox=secondAxis.lineBox(),vertical=this.options.vertical,pos=vertical?Y:X;this.box.snapTo(lineBox,pos),vertical?this.box.shrink(0,this.lineBox().height()-lineBox.height()):this.box.shrink(this.lineBox().width()-lineBox.width(),0),this.box[pos+1]-=this.lineBox()[pos+1]-lineBox[pos+1],this.box[pos+2]-=this.lineBox()[pos+2]-lineBox[pos+2]},Axis.prototype.axisLabelText=function axisLabelText(value,options,context){var text,this$1=this,tmpl=getTemplate(options),defaultText=function(){return options.format?this$1.chartService.format.localeAuto(options.format,[value],options.culture):value};tmpl?text=tmpl(Object.assign({},context,{get text(){return defaultText()},value,format:options.format,culture:options.culture})):text=defaultText();return text},Axis.prototype.slot=function slot(from,to,limit){var slot=this.getSlot(from,to,limit);if(slot)return slot.toRect()},Axis.prototype.contentBox=function contentBox(){var box=this.box.clone(),labels=this.labels;if(labels.length){var axis=this.options.vertical?Y:X;if(this.chartService.isPannable(axis)){var offset=this.maxLabelOffset();box[axis+1]-=offset.start,box[axis+2]+=offset.end}else{labels[0].options.visible&&box.wrap(labels[0].box);var lastLabel=labels[labels.length-1];lastLabel.options.visible&&box.wrap(lastLabel.box)}}return box},Axis.prototype.maxLabelOffset=function maxLabelOffset(){for(var ref=this.options,vertical=ref.vertical,reverse=ref.reverse,labelsBetweenTicks=this.labelsBetweenTicks(),tickPositions=this.getLabelsTickPositions(),offsetField=vertical?Y:X,labels=this.labels,startPosition=reverse?1:0,endPosition=reverse?0:1,maxStartOffset=0,maxEndOffset=0,idx=0;idx<labels.length;idx++){var label=labels[idx],tickIx=this.labelTickIndex(label),startTick=void 0,endTick=void 0;labelsBetweenTicks?(startTick=tickPositions[tickIx+startPosition],endTick=tickPositions[tickIx+endPosition]):startTick=endTick=tickPositions[tickIx],maxStartOffset=Math.max(maxStartOffset,startTick-label.box[offsetField+1]),maxEndOffset=Math.max(maxEndOffset,label.box[offsetField+2]-endTick)}return{start:maxStartOffset,end:maxEndOffset}},Axis.prototype.limitRange=function limitRange(from,to,min,max,offset){var options=this.options;if(from<min&&offset<0&&(!drawing_utils_defined(options.min)||options.min<=min)||max<to&&offset>0&&(!drawing_utils_defined(options.max)||max<=options.max))return null;if(to<min&&offset>0||max<from&&offset<0)return{min:from,max:to};var rangeSize=to-from,minValue=from,maxValue=to;return from<min&&offset<0?(minValue=limitValue(from,min,max),maxValue=limitValue(from+rangeSize,min+rangeSize,max)):to>max&&offset>0&&(maxValue=limitValue(to,min,max),minValue=limitValue(to-rangeSize,min,max-rangeSize)),{min:minValue,max:maxValue}},Axis.prototype.valueRange=function valueRange(){return{min:this.seriesMin,max:this.seriesMax}},Axis.prototype.lineDir=function lineDir(){var ref=this.options;return(ref.vertical?-1:1)*(ref.reverse?-1:1)},Axis.prototype.lineInfo=function lineInfo(){var vertical=this.options.vertical,lineBox=this.lineBox(),lineSize=vertical?lineBox.height():lineBox.width(),axis=vertical?Y:X,axisDir=this.lineDir(),axisOrigin=axis+(1===axisDir?1:2).toString();return{axis,axisOrigin,axisDir,lineBox,lineSize,lineStart:lineBox[axisOrigin]}},Axis.prototype.pointOffset=function pointOffset(point){var ref=this.lineInfo(),axis=ref.axis,axisDir=ref.axisDir,axisOrigin=ref.axisOrigin,lineBox=ref.lineBox,lineSize=ref.lineSize;return(axisDir>0?point[axis]-lineBox[axisOrigin]:lineBox[axisOrigin]-point[axis])/lineSize},Axis.prototype.scaleToDelta=function scaleToDelta(rawScale,range){var scale=limitValue(rawScale,-.999,.999);return scale>0?range*Math.min(1,scale):range-range/(1+scale)},Axis.prototype.labelsBetweenTicks=function labelsBetweenTicks(){return!this.options.justified},Axis.prototype.prepareUserOptions=function prepareUserOptions(){},Axis}(chart_element);setDefaultOptions(Axis,{labels:{visible:!0,rotation:0,mirror:!1,step:1,skip:0},line:{width:1,color:BLACK,visible:!0},title:{visible:!0,position:CENTER},majorTicks:{align:"outside",size:4,skip:0,step:1},minorTicks:{align:"outside",size:3,skip:0,step:1},axisCrossingValue:0,majorTickType:"outside",minorTickType:"none",majorGridLines:{skip:0,step:1},minorGridLines:{visible:!1,width:1,color:BLACK,skip:0,step:1},margin:5,visible:!0,reverse:!1,justified:!0,notes:{label:{text:""}},_alignLines:!0,_deferLabels:!1});const axis=Axis;var DAYS="days",YEARS="years",TIME_PER_UNIT={years:31536e6,months:26784e5,weeks:6048e5,days:864e5,hours:36e5,minutes:6e4,seconds:1e3,milliseconds:1};function absoluteDateDiff(a,b){return a.getTime()-b-6e4*(a.getTimezoneOffset()-b.getTimezoneOffset())}function addTicks(date,ticks){return new Date(date.getTime()+ticks)}function toDate(value){var result;return value instanceof Date?result=value:value&&(result=new Date(value)),result}function adjustDST(date,hours){return 0===hours&&23===date.getHours()&&(date.setHours(date.getHours()+2),!0)}function addDuration(dateValue,value,unit,weekStartDay){var result=dateValue;if(dateValue){var date=toDate(dateValue),hours=date.getHours();unit===YEARS?adjustDST(result=new Date(date.getFullYear()+value,0,1),0):"months"===unit?adjustDST(result=new Date(date.getFullYear(),date.getMonth()+value,1),hours):"weeks"===unit?(result=addDuration(function startOfWeek(date,weekStartDay){void 0===weekStartDay&&(weekStartDay=0);var daysToSubtract=0,day=date.getDay();if(!isNaN(day))for(;day!==weekStartDay;)0===day?day=6:day--,daysToSubtract++;return addTicks(date,864e5*-daysToSubtract)}(date,weekStartDay),7*value,DAYS),adjustDST(result,hours)):unit===DAYS?adjustDST(result=new Date(date.getFullYear(),date.getMonth(),date.getDate()+value),hours):"hours"===unit?result=function addHours(date,hours){var roundedDate=new Date(date);roundedDate.setMinutes(0,0,0);var tzDiff=6e4*(date.getTimezoneOffset()-roundedDate.getTimezoneOffset());return addTicks(roundedDate,tzDiff+36e5*hours)}(date,value):"minutes"===unit?(result=addTicks(date,6e4*value)).getSeconds()>0&&result.setSeconds(0):"seconds"===unit?result=addTicks(date,1e3*value):"milliseconds"===unit&&(result=addTicks(date,value)),"milliseconds"!==unit&&result.getMilliseconds()>0&&result.setMilliseconds(0)}return result}function floorDate(date,unit,weekStartDay){return addDuration(toDate(date),0,unit,weekStartDay)}function ceilDate(dateValue,unit,weekStartDay){var date=toDate(dateValue);return date&&floorDate(date,unit,weekStartDay).getTime()===date.getTime()?date:addDuration(date,1,unit,weekStartDay)}function dateComparer(a,b){return a&&b?a.getTime()-b.getTime():-1}function dateDiff(a,b){return a.getTime()-b}function toTime(value){if(isArray(value)){for(var result=[],idx=0;idx<value.length;idx++)result.push(toTime(value[idx]));return result}if(value)return toDate(value).getTime()}function date_equals_dateEquals(a,b){return a&&b?toTime(a)===toTime(b):a===b}function timeIndex(date,start,baseUnit){return absoluteDateDiff(date,start)/TIME_PER_UNIT[baseUnit]}function dateIndex(value,start,baseUnit,baseUnitStep){var date=toDate(value),startDate=toDate(start);return("months"===baseUnit?date.getMonth()-startDate.getMonth()+12*(date.getFullYear()-startDate.getFullYear())+timeIndex(date,new Date(date.getFullYear(),date.getMonth()),DAYS)/new Date(date.getFullYear(),date.getMonth()+1,0).getDate():baseUnit===YEARS?date.getFullYear()-startDate.getFullYear()+dateIndex(date,new Date(date.getFullYear(),0),"months",1)/12:baseUnit===DAYS||"weeks"===baseUnit?timeIndex(date,startDate,baseUnit):dateDiff(date,start)/TIME_PER_UNIT[baseUnit])/baseUnitStep}function duration(a,b,unit){return unit===YEARS?b.getFullYear()-a.getFullYear():"months"===unit?12*duration(a,b,YEARS)+b.getMonth()-a.getMonth():unit===DAYS?Math.floor(dateDiff(b,a)/864e5):Math.floor(dateDiff(b,a)/TIME_PER_UNIT[unit])}function parseDate(intlService,date){return isString(date)&&intlService.parseDate(date)||toDate(date)}function parseDates(intlService,dates){if(isArray(dates)){for(var result=[],idx=0;idx<dates.length;idx++)result.push(parseDate(intlService,dates[idx]));return result}return parseDate(intlService,dates)}function firstDay(options,intlService){return isNumber(options.weekStartDay)?options.weekStartDay:intlService&&intlService.firstDay?intlService.firstDay():0}var CategoryAxis=function(Axis){function CategoryAxis(){Axis.apply(this,arguments)}return Axis&&(CategoryAxis.__proto__=Axis),CategoryAxis.prototype=Object.create(Axis&&Axis.prototype),CategoryAxis.prototype.constructor=CategoryAxis,CategoryAxis.prototype.initFields=function initFields(){this._ticks={}},CategoryAxis.prototype.categoriesHash=function categoriesHash(){return""},CategoryAxis.prototype.clone=function clone(){var copy=new CategoryAxis(Object.assign({},this.options,{categories:this.options.srcCategories}),this.chartService);return copy.createLabels(),copy},CategoryAxis.prototype.initUserOptions=function initUserOptions(options){var categories=options.categories||[],definedMin=drawing_utils_defined(options.min),definedMax=drawing_utils_defined(options.max);if(options.srcCategories=options.categories=categories,(definedMin||definedMax)&&categories.length){var max,min=definedMin?Math.floor(options.min):0;max=definedMax?options.justified?Math.floor(options.max)+1:Math.ceil(options.max):categories.length,options.categories=options.categories.slice(min,max)}return options},CategoryAxis.prototype.rangeIndices=function rangeIndices(){var options=this.options,length=options.categories.length||1;return{min:isNumber(options.min)?options.min%1:0,max:isNumber(options.max)&&options.max%1!=0&&options.max<this.totalRange().max?length-(1-options.max%1):length-(options.justified?1:0)}},CategoryAxis.prototype.range=function range(){var options=this.options;return{min:isNumber(options.min)?options.min:0,max:isNumber(options.max)?options.max:this.totalRange().max}},CategoryAxis.prototype.roundedRange=function roundedRange(){return this.range()},CategoryAxis.prototype.totalRange=function totalRange(){var options=this.options;return{min:0,max:Math.max(this._seriesMax||0,options.srcCategories.length)-(options.justified?1:0)}},CategoryAxis.prototype.scaleOptions=function scaleOptions(){var ref=this.rangeIndices(),min=ref.min,max=ref.max,lineBox=this.lineBox();return{scale:(this.options.vertical?lineBox.height():lineBox.width())/(max-min||1)*(this.options.reverse?-1:1),box:lineBox,min,max}},CategoryAxis.prototype.arrangeLabels=function arrangeLabels(){Axis.prototype.arrangeLabels.call(this),this.hideOutOfRangeLabels()},CategoryAxis.prototype.hideOutOfRangeLabels=function hideOutOfRangeLabels(){var box=this.box,labels=this.labels;if(labels.length>0){var valueAxis=this.options.vertical?Y:X,start=box[valueAxis+1],end=box[valueAxis+2],firstLabel=labels[0],lastLabel=last(labels);(firstLabel.box[valueAxis+1]>end||firstLabel.box[valueAxis+2]<start)&&(firstLabel.options.visible=!1),(lastLabel.box[valueAxis+1]>end||lastLabel.box[valueAxis+2]<start)&&(lastLabel.options.visible=!1)}},CategoryAxis.prototype.getMajorTickPositions=function getMajorTickPositions(){return this.getTicks().majorTicks},CategoryAxis.prototype.getMinorTickPositions=function getMinorTickPositions(){return this.getTicks().minorTicks},CategoryAxis.prototype.getLabelsTickPositions=function getLabelsTickPositions(){return this.getTicks().labelTicks},CategoryAxis.prototype.tickIndices=function tickIndices(stepSize){for(var ref=this.rangeIndices(),min=ref.min,max=ref.max,limit=Math.ceil(max),current=Math.floor(min),indices=[];current<=limit;)indices.push(current),current+=stepSize;return indices},CategoryAxis.prototype.getTickPositions=function getTickPositions(stepSize){for(var ref=this.options,vertical=ref.vertical,reverse=ref.reverse,ref$1=this.scaleOptions(),scale=ref$1.scale,box=ref$1.box,min=ref$1.min,pos=box[(vertical?Y:X)+(reverse?2:1)],indices=this.tickIndices(stepSize),positions=[],idx=0;idx<indices.length;idx++)positions.push(pos+drawing_utils_round(scale*(indices[idx]-min),3));return positions},CategoryAxis.prototype.getTicks=function getTicks(){var options=this.options,cache=this._ticks,range=this.rangeIndices(),lineBox=this.lineBox(),hash=lineBox.getHash()+range.min+","+range.max+options.reverse+options.justified;if(cache._hash!==hash){var hasMinor=options.minorTicks.visible||options.minorGridLines.visible;cache._hash=hash,cache.labelTicks=this.getTickPositions(1),cache.majorTicks=this.filterOutOfRangePositions(cache.labelTicks,lineBox),cache.minorTicks=hasMinor?this.filterOutOfRangePositions(this.getTickPositions(.5),lineBox):[]}return cache},CategoryAxis.prototype.filterOutOfRangePositions=function filterOutOfRangePositions(positions,lineBox){if(!positions.length)return positions;for(var axis=this.options.vertical?Y:X,inRange=function(position){return lineBox[axis+1]<=position&&position<=lineBox[axis+2]},end=positions.length-1,startIndex=0;!inRange(positions[startIndex])&&startIndex<=end;)startIndex++;for(var endIndex=end;!inRange(positions[endIndex])&&endIndex>=0;)endIndex--;return positions.slice(startIndex,endIndex+1)},CategoryAxis.prototype.lineInfo=function lineInfo(){var ref=this.options,vertical=ref.vertical,reverse=ref.reverse,lineBox=this.lineBox(),lineSize=vertical?lineBox.height():lineBox.width(),axis=vertical?Y:X,axisDir=reverse?-1:1,axisOrigin=axis+(1===axisDir?1:2).toString();return{axis,axisOrigin,axisDir,lineBox,lineSize,lineStart:lineBox[axisOrigin]}},CategoryAxis.prototype.lineDir=function lineDir(){return this.options.reverse?-1:1},CategoryAxis.prototype.getSlot=function getSlot(from,to,limit){var options=this.options,reverse=options.reverse,justified=options.justified,ref=this.scaleOptions(),scale=ref.scale,box=ref.box,min=ref.min,ref$1=this.lineInfo(),valueAxis=ref$1.axis,lineStart=ref$1.lineStart,slotBox=box.clone(),singleSlot=!drawing_utils_defined(to),start=valueOrDefault(from,0),end=valueOrDefault(to,start);end=Math.max(end-1,start);var p1=lineStart+(start-min)*scale,p2=lineStart+((end=Math.max(start,end))+1-min)*scale;return singleSlot&&justified&&(p2=p1),limit&&(p1=limitValue(p1,box[valueAxis+1],box[valueAxis+2]),p2=limitValue(p2,box[valueAxis+1],box[valueAxis+2])),slotBox[valueAxis+1]=reverse?p2:p1,slotBox[valueAxis+2]=reverse?p1:p2,slotBox},CategoryAxis.prototype.limitSlot=function limitSlot(slot){var valueAxis=this.options.vertical?Y:X,lineBox=this.lineBox(),limittedSlot=slot.clone();return limittedSlot[valueAxis+1]=limitValue(slot[valueAxis+1],lineBox[valueAxis+1],lineBox[valueAxis+2]),limittedSlot[valueAxis+2]=limitValue(slot[valueAxis+2],lineBox[valueAxis+1],lineBox[valueAxis+2]),limittedSlot},CategoryAxis.prototype.slot=function slot(from,to,limit){var min=Math.floor(this.options.min||0),start=from,end=to;return"string"==typeof start?start=this.categoryIndex(start):isNumber(start)&&(start-=min),"string"==typeof end?end=this.categoryIndex(end):isNumber(end)&&(end-=min),Axis.prototype.slot.call(this,start,end,limit)},CategoryAxis.prototype.pointCategoryIndex=function pointCategoryIndex(point){var ref=this.options,reverse=ref.reverse,justified=ref.justified,valueAxis=ref.vertical?Y:X,ref$1=this.scaleOptions(),scale=ref$1.scale,box=ref$1.box,min=ref$1.min,max=ref$1.max,startValue=reverse?max:min,lineStart=box[valueAxis+1],lineEnd=box[valueAxis+2],pos=point[valueAxis];if(pos<lineStart||pos>lineEnd)return null;var value=startValue+(pos-lineStart)/scale,diff=value%1;return justified?value=Math.round(value):0===diff&&value>0&&value--,Math.floor(value)},CategoryAxis.prototype.getCategory=function getCategory(point){var index=this.pointCategoryIndex(point);return null===index?null:this.options.categories[index]},CategoryAxis.prototype.categoryIndex=function categoryIndex(value){return this.totalIndex(value)-Math.floor(this.options.min||0)},CategoryAxis.prototype.categoryAt=function categoryAt(index,total){var options=this.options;return(total?options.srcCategories:options.categories)[index]},CategoryAxis.prototype.categoriesCount=function categoriesCount(){return(this.options.categories||[]).length},CategoryAxis.prototype.translateRange=function translateRange(delta){var options=this.options,lineBox=this.lineBox(),size=options.vertical?lineBox.height():lineBox.width(),range=options.categories.length,offset=drawing_utils_round(delta/(size/range),10);return{min:offset,max:range+offset}},CategoryAxis.prototype.scaleRange=function scaleRange(scale,cursor){var position=Math.abs(this.pointOffset(cursor)),rangeIndices=this.limitedRangeIndices(),range=rangeIndices.max-rangeIndices.min,delta=this.scaleToDelta(scale,range),minDelta=position*delta,maxDelta=(1-position)*delta,min=rangeIndices.min+minDelta,max=rangeIndices.max-maxDelta;return max-min<.1&&(max=min+.1),{min,max}},CategoryAxis.prototype.zoomRange=function zoomRange(scale,cursor){var ref=this.totalRange(),totalMin=ref.min,totalMax=ref.max,range=this.scaleRange(scale,cursor);return{min:limitValue(range.min,totalMin,totalMax),max:limitValue(range.max,totalMin,totalMax)}},CategoryAxis.prototype.labelsCount=function labelsCount(){var labelsRange=this.labelsRange();return labelsRange.max-labelsRange.min},CategoryAxis.prototype.labelsRange=function labelsRange(){var options=this.options,justified=options.justified,labelOptions=options.labels,ref=this.limitedRangeIndices(!0),min=ref.min,max=ref.max,start=Math.floor(min);return justified?(min=Math.ceil(min),max=Math.floor(max)):(min=Math.floor(min),max=Math.ceil(max)),{min:(min>labelOptions.skip?labelOptions.skip+labelOptions.step*Math.ceil((min-labelOptions.skip)/labelOptions.step):labelOptions.skip)-start,max:(options.categories.length?max+(justified?1:0):0)-start}},CategoryAxis.prototype.createAxisLabel=function createAxisLabel(index,labelOptions,labelContext){var options=this.options,dataItem=options.dataItems?options.dataItems[index]:null,category=valueOrDefault(options.categories[index],"");labelContext.dataItem=dataItem;var text=this.axisLabelText(category,labelOptions,labelContext);return new axis_label(category,text,index,dataItem,labelOptions)},CategoryAxis.prototype.shouldRenderNote=function shouldRenderNote(value){var range=this.limitedRangeIndices();return Math.floor(range.min)<=value&&value<=Math.ceil(range.max)},CategoryAxis.prototype.noteSlot=function noteSlot(value){var options=this.options,index=value-Math.floor(options.min||0);return this.getSlot(index)},CategoryAxis.prototype.arrangeNotes=function arrangeNotes(){Axis.prototype.arrangeNotes.call(this),this.hideOutOfRangeNotes()},CategoryAxis.prototype.hideOutOfRangeNotes=function hideOutOfRangeNotes(){var notes=this.notes,box=this.box;if(notes&&notes.length)for(var valueAxis=this.options.vertical?Y:X,start=box[valueAxis+1],end=box[valueAxis+2],idx=0;idx<notes.length;idx++){var note=notes[idx];note.box&&(end<note.box[valueAxis+1]||note.box[valueAxis+2]<start)&&note.hide()}},CategoryAxis.prototype.pan=function pan(delta){var range=this.limitedRangeIndices(!0),scale=this.scaleOptions().scale,offset=drawing_utils_round(delta/scale,10),totalRange=this.totalRange(),min=range.min+offset,max=range.max+offset;return this.limitRange(min,max,0,totalRange.max,offset)},CategoryAxis.prototype.pointsRange=function pointsRange(start,end){var ref=this.options,reverse=ref.reverse,valueAxis=ref.vertical?Y:X,range=this.limitedRangeIndices(!0),ref$1=this.scaleOptions(),scale=ref$1.scale,lineStart=ref$1.box[valueAxis+(reverse?2:1)],diffStart=start[valueAxis]-lineStart,diffEnd=end[valueAxis]-lineStart,min=range.min+diffStart/scale,max=range.min+diffEnd/scale,rangeMin=Math.min(min,max),rangeMax=Math.max(min,max);if(rangeMax-rangeMin>=.01)return{min:rangeMin,max:rangeMax}},CategoryAxis.prototype.valueRange=function valueRange(){return this.range()},CategoryAxis.prototype.totalIndex=function totalIndex(value){var options=this.options,index=this._categoriesMap?this._categoriesMap.get(value):function indexOf(value,arr){if(value instanceof Date){for(var length=arr.length,idx=0;idx<length;idx++)if(date_equals_dateEquals(arr[idx],value))return idx;return-1}return arr.indexOf(value)}(value,options.srcCategories);return index},CategoryAxis.prototype.currentRangeIndices=function currentRangeIndices(){var options=this.options,min=0;return isNumber(options.min)&&(min=Math.floor(options.min)),{min,max:isNumber(options.max)?options.justified?Math.floor(options.max):Math.ceil(options.max)-1:this.totalCount()-1}},CategoryAxis.prototype.limitedRangeIndices=function limitedRangeIndices(totalLimit){var max,options=this.options,min=isNumber(options.min)?options.min:0;if(max=isNumber(options.max)?options.max:isNumber(options.min)?min+options.categories.length:this.totalRange().max||1,totalLimit){var totalRange=this.totalRange();min=limitValue(min,0,totalRange.max),max=limitValue(max,0,totalRange.max)}return{min,max}},CategoryAxis.prototype.totalRangeIndices=function totalRangeIndices(){return{min:0,max:this.totalRange().max||1}},CategoryAxis.prototype.mapCategories=function mapCategories(){if(!this._categoriesMap)for(var map=this._categoriesMap=new hash_map,srcCategories=this.options.srcCategories,idx=0;idx<srcCategories.length;idx++)map.set(srcCategories[idx],idx)},CategoryAxis.prototype.totalCount=function totalCount(){return Math.max(this.options.srcCategories.length,this._seriesMax||0)},CategoryAxis}(axis);setDefaultOptions(CategoryAxis,{type:"category",vertical:!1,majorGridLines:{visible:!1,width:1,color:BLACK},labels:{zIndex:1},justified:!1,_deferLabels:!0});const category_axis=CategoryAxis;var DateLabelFormats={milliseconds:"HH:mm:ss.fff",seconds:"HH:mm:ss",minutes:"HH:mm",hours:"HH:mm",days:"M/d",weeks:"M/d",months:"MMM 'yy",years:"yyyy"},BASE_UNITS=["milliseconds","seconds","minutes","hours",DAYS,"weeks","months",YEARS];function categoryRange(categories,clearCache){clearCache&&(categories._range=void 0);var range=categories._range;return range||((range=categories._range=sparseArrayLimits(categories)).min=toDate(range.min),range.max=toDate(range.max)),range}var EmptyDateRange=function EmptyDateRange(options){this.options=options};EmptyDateRange.prototype.displayIndices=function displayIndices(){return{min:0,max:1}},EmptyDateRange.prototype.displayRange=function displayRange(){return{}},EmptyDateRange.prototype.total=function total(){return{}},EmptyDateRange.prototype.valueRange=function valueRange(){return{}},EmptyDateRange.prototype.valueIndex=function valueIndex(){return-1},EmptyDateRange.prototype.values=function values(){return[]},EmptyDateRange.prototype.totalIndex=function totalIndex(){return-1},EmptyDateRange.prototype.valuesCount=function valuesCount(){return 0},EmptyDateRange.prototype.totalCount=function totalCount(){return 0},EmptyDateRange.prototype.dateAt=function dateAt(){return null};var DateRange=function DateRange(start,end,options){this.options=options,options.baseUnitStep=options.baseUnitStep||1;var roundToBaseUnit=options.roundToBaseUnit,justified=options.justified;this.start=addDuration(start,0,options.baseUnit,options.weekStartDay);var lowerEnd=this.roundToTotalStep(end),expandEnd=!justified&&date_equals_dateEquals(end,lowerEnd)&&!options.justifyEnd;this.end=this.roundToTotalStep(end,!justified,expandEnd?1:0);var min=options.min||start;this.valueStart=this.roundToTotalStep(min),this.displayStart=roundToBaseUnit?this.valueStart:min;var max=options.max;if(max){var next=!justified&&date_equals_dateEquals(max,this.roundToTotalStep(max))?-1:0;this.valueEnd=this.roundToTotalStep(max,!1,next),this.displayEnd=roundToBaseUnit?this.roundToTotalStep(max,!justified):options.max}else this.valueEnd=lowerEnd,this.displayEnd=roundToBaseUnit||expandEnd?this.end:end;this.valueEnd<this.valueStart&&(this.valueEnd=this.valueStart),this.displayEnd<=this.displayStart&&(this.displayEnd=this.roundToTotalStep(this.displayStart,!1,1))};function autoBaseUnit(options,startUnit,startStep){for(var unitSteps,step,nextStep,categoryLimits=categoryRange(options.categories),span=(options.max||categoryLimits.max)-(options.min||categoryLimits.min),autoBaseUnitSteps=options.autoBaseUnitSteps,maxDateGroups=options.maxDateGroups,autoUnit="fit"===options.baseUnit,autoUnitIx=startUnit?BASE_UNITS.indexOf(startUnit):0,baseUnit=autoUnit?BASE_UNITS[autoUnitIx++]:options.baseUnit,units=span/TIME_PER_UNIT[baseUnit],totalUnits=units;!step||units>=maxDateGroups;){unitSteps=unitSteps||autoBaseUnitSteps[baseUnit].slice(0);do{nextStep=unitSteps.shift()}while(nextStep&&startUnit===baseUnit&&nextStep<startStep);if(nextStep)units=totalUnits/(step=nextStep);else{if(baseUnit===last(BASE_UNITS)){step=Math.ceil(totalUnits/maxDateGroups);break}if(!autoUnit){units>maxDateGroups&&(step=Math.ceil(totalUnits/maxDateGroups));break}baseUnit=BASE_UNITS[autoUnitIx++]||last(BASE_UNITS),totalUnits=span/TIME_PER_UNIT[baseUnit],unitSteps=null}}options.baseUnitStep=step,options.baseUnit=baseUnit}function initUnit(options){var baseUnit=(options.baseUnit||"").toLowerCase();return"fit"!==baseUnit&&!inArray(baseUnit,BASE_UNITS)&&function defaultBaseUnit(options){for(var lastCategory,unit,categories=options.categories,count=drawing_utils_defined(categories)?categories.length:0,minDiff=MAX_VALUE,categoryIx=0;categoryIx<count;categoryIx++){var category=categories[categoryIx];if(category&&lastCategory){var diff=absoluteDateDiff(category,lastCategory);diff>0&&(unit=(minDiff=Math.min(minDiff,diff))>=31536e6?YEARS:minDiff>=24192e5?"months":minDiff>=6048e5?"weeks":minDiff>=864e5?DAYS:minDiff>=36e5?"hours":minDiff>=6e4?"minutes":"seconds")}lastCategory=category}options.baseUnit=unit||DAYS}(options),"fit"!==baseUnit&&"auto"!==options.baseUnitStep||autoBaseUnit(options),options}DateRange.prototype.displayRange=function displayRange(){return{min:this.displayStart,max:this.displayEnd}},DateRange.prototype.displayIndices=function displayIndices(){if(!this._indices){var options=this.options,baseUnit=options.baseUnit,baseUnitStep=options.baseUnitStep,minIdx=dateIndex(this.displayStart,this.valueStart,baseUnit,baseUnitStep),maxIdx=dateIndex(this.displayEnd,this.valueStart,baseUnit,baseUnitStep);this._indices={min:minIdx,max:maxIdx}}return this._indices},DateRange.prototype.total=function total(){return{min:this.start,max:this.end}},DateRange.prototype.totalCount=function totalCount(){return this.totalIndex(this.end)+(this.options.justified?1:0)},DateRange.prototype.valueRange=function valueRange(){return{min:this.valueStart,max:this.valueEnd}},DateRange.prototype.valueIndex=function valueIndex(value){var options=this.options;return Math.floor(dateIndex(value,this.valueStart,options.baseUnit,options.baseUnitStep))},DateRange.prototype.totalIndex=function totalIndex(value){var options=this.options;return Math.floor(dateIndex(value,this.start,options.baseUnit,options.baseUnitStep))},DateRange.prototype.dateIndex=function dateIndex$1(value){var options=this.options;return dateIndex(value,this.valueStart,options.baseUnit,options.baseUnitStep)},DateRange.prototype.valuesCount=function valuesCount(){return this.valueIndex(this.valueEnd)+1},DateRange.prototype.values=function values(){var values=this._values;if(!values){var options=this.options,range=this.valueRange();this._values=values=[];for(var date=range.min;date<=range.max;)values.push(date),date=addDuration(date,options.baseUnitStep,options.baseUnit,options.weekStartDay)}return values},DateRange.prototype.dateAt=function dateAt(index,total){var options=this.options;return addDuration(total?this.start:this.valueStart,options.baseUnitStep*index,options.baseUnit,options.weekStartDay)},DateRange.prototype.roundToTotalStep=function roundToTotalStep(value,upper,next){var ref=this.options,baseUnit=ref.baseUnit,baseUnitStep=ref.baseUnitStep,weekStartDay=ref.weekStartDay,start=this.start,step=dateIndex(value,start,baseUnit,baseUnitStep),roundedStep=upper?Math.ceil(step):Math.floor(step);return next&&(roundedStep+=next),addDuration(start,roundedStep*baseUnitStep,baseUnit,weekStartDay)};var DateCategoryAxis=function(CategoryAxis){function DateCategoryAxis(){CategoryAxis.apply(this,arguments)}return CategoryAxis&&(DateCategoryAxis.__proto__=CategoryAxis),DateCategoryAxis.prototype=Object.create(CategoryAxis&&CategoryAxis.prototype),DateCategoryAxis.prototype.constructor=DateCategoryAxis,DateCategoryAxis.prototype.clone=function clone(){var copy=new DateCategoryAxis(Object.assign({},this.options),this.chartService);return copy.createLabels(),copy},DateCategoryAxis.prototype.categoriesHash=function categoriesHash(){var start=this.dataRange.total().min;return this.options.baseUnit+this.options.baseUnitStep+start},DateCategoryAxis.prototype.initUserOptions=function initUserOptions(options){return options},DateCategoryAxis.prototype.initFields=function initFields(){CategoryAxis.prototype.initFields.call(this);var chartService=this.chartService,intlService=chartService.intl,options=this.options,categories=options.categories||[];if(categories._parsed||((categories=parseDates(intlService,categories))._parsed=!0),options=deepExtend({roundToBaseUnit:!0},options,{categories,min:parseDate(intlService,options.min),max:parseDate(intlService,options.max),weekStartDay:firstDay(options,intlService)}),chartService.panning&&chartService.isPannable(options.vertical?Y:X)&&(options.roundToBaseUnit=!1),options.userSetBaseUnit=options.userSetBaseUnit||options.baseUnit,options.userSetBaseUnitStep=options.userSetBaseUnitStep||options.baseUnitStep,this.options=options,options.srcCategories=categories,categories.length>0){var range=categoryRange(categories,!0),maxDivisions=options.maxDivisions,safeOptions=initUnit(options),forecast=options._forecast;if(forecast&&(forecast.before>0&&(range.min=addDuration(range.min,-forecast.before,safeOptions.baseUnit,safeOptions.weekStartDay)),forecast.after>0&&(range.max=addDuration(range.max,forecast.after,safeOptions.baseUnit,safeOptions.weekStartDay))),this.dataRange=new DateRange(range.min,range.max,safeOptions),maxDivisions){var dataRange=this.dataRange.displayRange(),divisionOptions=Object.assign({},options,{justified:!0,roundToBaseUnit:!1,baseUnit:"fit",min:dataRange.min,max:dataRange.max,maxDateGroups:maxDivisions}),dataRangeOptions=this.dataRange.options;autoBaseUnit(divisionOptions,dataRangeOptions.baseUnit,dataRangeOptions.baseUnitStep),this.divisionRange=new DateRange(range.min,range.max,divisionOptions)}else this.divisionRange=this.dataRange}else options.baseUnit=options.baseUnit||DAYS,this.dataRange=this.divisionRange=new EmptyDateRange(options);this.rangeLabels=[]},DateCategoryAxis.prototype.tickIndices=function tickIndices(stepSize){var dataRange=this.dataRange,divisionRange=this.divisionRange,valuesCount=divisionRange.valuesCount();if(!this.options.maxDivisions||!valuesCount)return CategoryAxis.prototype.tickIndices.call(this,stepSize);var indices=[],values=divisionRange.values(),offset=0;this.options.justified||(values=values.concat(divisionRange.dateAt(valuesCount)),offset=.5);for(var idx=0;idx<values.length;idx++)if(indices.push(dataRange.dateIndex(values[idx])+offset),1!==stepSize&&idx>=1){var last=indices.length-1;indices.splice(idx,0,indices[last-1]+(indices[last]-indices[last-1])*stepSize)}return indices},DateCategoryAxis.prototype.shouldRenderNote=function shouldRenderNote(value){var range=this.range(),categories=this.options.categories||[];return dateComparer(value,range.min)>=0&&dateComparer(value,range.max)<=0&&categories.length},DateCategoryAxis.prototype.parseNoteValue=function parseNoteValue(value){return parseDate(this.chartService.intl,value)},DateCategoryAxis.prototype.noteSlot=function noteSlot(value){return this.getSlot(value)},DateCategoryAxis.prototype.translateRange=function translateRange(delta){var options=this.options,baseUnit=options.baseUnit,weekStartDay=options.weekStartDay,vertical=options.vertical,lineBox=this.lineBox(),size=vertical?lineBox.height():lineBox.width(),range=this.range(),scale=size/(range.max-range.min),offset=drawing_utils_round(delta/scale,10);if(range.min&&range.max){var from=addTicks(options.min||range.min,offset),to=addTicks(options.max||range.max,offset);range={min:addDuration(from,0,baseUnit,weekStartDay),max:addDuration(to,0,baseUnit,weekStartDay)}}return range},DateCategoryAxis.prototype.labelsRange=function labelsRange(){return{min:this.options.labels.skip,max:this.divisionRange.valuesCount()}},DateCategoryAxis.prototype.pan=function pan(delta){if(this.isEmpty())return null;var options=this.options,lineBox=this.lineBox(),size=options.vertical?lineBox.height():lineBox.width(),ref=this.dataRange.displayRange(),min=ref.min,max=ref.max,totalLimits=this.dataRange.total(),offset=drawing_utils_round(delta/(size/(max-min)),10)*(options.reverse?-1:1),from=addTicks(min,offset),to=addTicks(max,offset),panRange=this.limitRange(toTime(from),toTime(to),toTime(totalLimits.min),toTime(totalLimits.max),offset);return panRange?(panRange.min=toDate(panRange.min),panRange.max=toDate(panRange.max),panRange.baseUnit=options.baseUnit,panRange.baseUnitStep=options.baseUnitStep||1,panRange.userSetBaseUnit=options.userSetBaseUnit,panRange.userSetBaseUnitStep=options.userSetBaseUnitStep,panRange):void 0},DateCategoryAxis.prototype.pointsRange=function pointsRange(start,end){if(this.isEmpty())return null;var pointsRange=CategoryAxis.prototype.pointsRange.call(this,start,end),datesRange=this.dataRange.displayRange(),indicesRange=this.dataRange.displayIndices(),scale=dateDiff(datesRange.max,datesRange.min)/(indicesRange.max-indicesRange.min),options=this.options;return{min:addTicks(datesRange.min,pointsRange.min*scale),max:addTicks(datesRange.min,pointsRange.max*scale),baseUnit:options.userSetBaseUnit||options.baseUnit,baseUnitStep:options.userSetBaseUnitStep||options.baseUnitStep}},DateCategoryAxis.prototype.scaleRange=function scaleRange(scale,cursor){if(this.isEmpty())return{};var options=this.options,fit="fit"===options.userSetBaseUnit,totalLimits=this.dataRange.total(),ref=this.dataRange.displayRange(),rangeMin=ref.min,rangeMax=ref.max,position=Math.abs(this.pointOffset(cursor)),range=rangeMax-rangeMin,delta=this.scaleToDelta(scale,range),minDelta=Math.round(position*delta),maxDelta=Math.round((1-position)*delta),baseUnit=this.dataRange.options.baseUnit,min=new Date(rangeMin.getTime()+minDelta),max=new Date(rangeMax.getTime()-maxDelta);if(fit){var autoBaseUnitStep,ticks,autoBaseUnitSteps=options.autoBaseUnitSteps,maxDateGroups=options.maxDateGroups,maxDiff=last(autoBaseUnitSteps[baseUnit])*maxDateGroups*TIME_PER_UNIT[baseUnit],rangeDiff=dateDiff(rangeMax,rangeMin),diff=dateDiff(max,min),baseUnitIndex=BASE_UNITS.indexOf(baseUnit);if(diff<TIME_PER_UNIT[baseUnit]&&"milliseconds"!==baseUnit)baseUnit=BASE_UNITS[baseUnitIndex-1],min=addTicks(rangeMin,ticks=(rangeDiff-(maxDateGroups-1)*(autoBaseUnitStep=last(autoBaseUnitSteps[baseUnit]))*TIME_PER_UNIT[baseUnit])/2),max=addTicks(rangeMax,-ticks);else if(diff>maxDiff&&baseUnit!==YEARS){var stepIndex=0;do{baseUnitIndex++,baseUnit=BASE_UNITS[baseUnitIndex],stepIndex=0,ticks=2*TIME_PER_UNIT[baseUnit];do{autoBaseUnitStep=autoBaseUnitSteps[baseUnit][stepIndex],stepIndex++}while(stepIndex<autoBaseUnitSteps[baseUnit].length&&ticks*autoBaseUnitStep<rangeDiff)}while(baseUnit!==YEARS&&ticks*autoBaseUnitStep<rangeDiff);(ticks=(ticks*autoBaseUnitStep-rangeDiff)/2)>0&&(min=addTicks(rangeMin,-ticks),max=addTicks(rangeMax,ticks),min=addTicks(min,limitValue(max,totalLimits.min,totalLimits.max)-max),max=addTicks(max,limitValue(min,totalLimits.min,totalLimits.max)-min))}}return min&&max&&dateDiff(max,min)>0?{min,max,baseUnit:options.userSetBaseUnit||options.baseUnit,baseUnitStep:options.userSetBaseUnitStep||options.baseUnitStep}:void 0},DateCategoryAxis.prototype.zoomRange=function zoomRange(scale,cursor){var totalLimits=this.dataRange.total(),range=this.scaleRange(scale,cursor);return range&&(range.min<totalLimits.min&&(range.min=totalLimits.min),range.max>totalLimits.max&&(range.max=totalLimits.max)),range},DateCategoryAxis.prototype.range=function range(){return this.dataRange.displayRange()},DateCategoryAxis.prototype.createLabels=function createLabels(){CategoryAxis.prototype.createLabels.call(this),this.createRangeLabels()},DateCategoryAxis.prototype.clearLabels=function clearLabels(){CategoryAxis.prototype.clearLabels.call(this),this.rangeLabels=[]},DateCategoryAxis.prototype.arrangeLabels=function arrangeLabels(){this.arrangeRangeLabels(),CategoryAxis.prototype.arrangeLabels.call(this)},DateCategoryAxis.prototype.arrangeRangeLabels=function arrangeRangeLabels(){var options=this.options,rangeLabels=this.rangeLabels;if(0!==rangeLabels.length){var lineBox=this.lineBox(),vertical=options.vertical,mirror=options.rangeLabels.mirror||options.labels.mirror,firstLabel=rangeLabels[0];if(firstLabel){var position=vertical?lineBox.y1-firstLabel.box.height()/2:lineBox.x1;this.positionLabel(firstLabel,mirror,position)}var lastLabel=rangeLabels[1];if(lastLabel){var position$1=vertical?lineBox.y2-lastLabel.box.height()/2:lineBox.x2;this.positionLabel(lastLabel,mirror,position$1)}}},DateCategoryAxis.prototype.autoRotateLabels=function autoRotateLabels(){CategoryAxis.prototype.autoRotateLabels.call(this),this.autoRotateRangeLabels()},DateCategoryAxis.prototype.hideOutOfRangeLabels=function hideOutOfRangeLabels(){CategoryAxis.prototype.hideOutOfRangeLabels.call(this),this.hideOverlappingLabels()},DateCategoryAxis.prototype.hideOverlappingLabels=function hideOverlappingLabels(){var rangeLabels=this.rangeLabels,labels=this.labels;if(0!==rangeLabels.length){var firstRangeLabel=rangeLabels[0];if(firstRangeLabel&&firstRangeLabel.options.visible)for(var i=0;i<labels.length;i++){if(!clip(firstRangeLabel,labels[i]))break}var lastRangeLabel=rangeLabels[1];if(lastRangeLabel&&lastRangeLabel.options.visible)for(var i$1=labels.length-1;i$1>0;--i$1){if(!clip(lastRangeLabel,labels[i$1]))break}}function clip(rangeLabel,label){return!(label.options.visible&&!label.box.overlaps(rangeLabel.box))&&(label.options.visible=!1,!0)}},DateCategoryAxis.prototype.contentBox=function contentBox(){for(var box=CategoryAxis.prototype.contentBox.call(this),rangeLabels=this.rangeLabels,i=0;i<rangeLabels.length;i++){var label=rangeLabels[i];label.options.visible&&box.wrap(label.box)}return box},DateCategoryAxis.prototype.createAxisLabel=function createAxisLabel(index,labelOptions,labelContext){void 0===labelContext&&(labelContext={});var options=this.options,dataItem=options.dataItems&&!options.maxDivisions?options.dataItems[index]:null,date=this.divisionRange.dateAt(index),unitFormat=labelOptions.dateFormats[this.divisionRange.options.baseUnit];labelOptions.format=labelOptions.format||unitFormat,labelContext.dataItem=dataItem;var text=this.axisLabelText(date,labelOptions,labelContext);if(text)return new axis_label(date,text,index,dataItem,labelOptions)},DateCategoryAxis.prototype.createRangeLabels=function createRangeLabels(){var this$1=this,ref=this.divisionRange,displayStart=ref.displayStart,displayEnd=ref.displayEnd,options=this.options,labelOptions=Object.assign({},options.labels,options.rangeLabels,{align:CENTER,zIndex:options.zIndex});if(!0===labelOptions.visible){this.normalizeLabelRotation(labelOptions),labelOptions.alignRotation=CENTER,"auto"===labelOptions.rotation&&(labelOptions.rotation=0,options.autoRotateRangeLabels=!0);var unitFormat=labelOptions.dateFormats[this.divisionRange.options.baseUnit];labelOptions.format=labelOptions.format||unitFormat;var createLabel=function(index,date,text){if(text){var label=new axis_label(date,text,index,null,labelOptions);this$1.append(label),this$1.rangeLabels.push(label)}};createLabel(0,displayStart,this.axisLabelText(displayStart,labelOptions,{index:0,count:2})),createLabel(1,displayEnd,this.axisLabelText(displayEnd,labelOptions,{index:1,count:2}))}},DateCategoryAxis.prototype.autoRotateRangeLabels=function autoRotateRangeLabels(){var this$1=this,labels=this.rangeLabels;if(this.options.autoRotateRangeLabels&&!this.options.vertical&&2===labels.length){var rotateLabel=function(label,tickPositions,index){var width=2*Math.abs(tickPositions[index+1]-tickPositions[index]),angle=this$1.autoRotateLabelAngle(label.box,width);0!==angle&&(label.options.rotation=angle,label.reflow(new core_box))},tickPositions=this.getMajorTickPositions();rotateLabel(labels[0],tickPositions,0),rotateLabel(labels[1],tickPositions,tickPositions.length-2)}},DateCategoryAxis.prototype.categoryIndex=function categoryIndex(value){return this.dataRange.valueIndex(value)},DateCategoryAxis.prototype.slot=function slot(from,to,limit){var dateRange=this.dataRange,start=from,end=to;start instanceof Date&&(start=dateRange.dateIndex(start)),end instanceof Date&&(end=dateRange.dateIndex(end));var slot=this.getSlot(start,end,limit);if(slot)return slot.toRect()},DateCategoryAxis.prototype.getSlot=function getSlot(a,b,limit){var start=a,end=b;return"object"==typeof start&&(start=this.categoryIndex(start)),"object"==typeof end&&(end=this.categoryIndex(end)),CategoryAxis.prototype.getSlot.call(this,start,end,limit)},DateCategoryAxis.prototype.valueRange=function valueRange(){var range=categoryRange(this.options.srcCategories);return{min:toDate(range.min),max:toDate(range.max)}},DateCategoryAxis.prototype.categoryAt=function categoryAt(index,total){return this.dataRange.dateAt(index,total)},DateCategoryAxis.prototype.categoriesCount=function categoriesCount(){return this.dataRange.valuesCount()},DateCategoryAxis.prototype.rangeIndices=function rangeIndices(){return this.dataRange.displayIndices()},DateCategoryAxis.prototype.labelsBetweenTicks=function labelsBetweenTicks(){return!this.divisionRange.options.justified},DateCategoryAxis.prototype.prepareUserOptions=function prepareUserOptions(){this.isEmpty()||(this.options.categories=this.dataRange.values())},DateCategoryAxis.prototype.getCategory=function getCategory(point){var index=this.pointCategoryIndex(point);return null===index?null:this.dataRange.dateAt(index)},DateCategoryAxis.prototype.totalIndex=function totalIndex(value){return this.dataRange.totalIndex(value)},DateCategoryAxis.prototype.currentRangeIndices=function currentRangeIndices(){var range=this.dataRange.valueRange();return{min:this.dataRange.totalIndex(range.min),max:this.dataRange.totalIndex(range.max)}},DateCategoryAxis.prototype.totalRange=function totalRange(){return this.dataRange.total()},DateCategoryAxis.prototype.totalRangeIndices=function totalRangeIndices(){var range=this.dataRange.total();return{min:this.dataRange.totalIndex(range.min),max:this.dataRange.totalIndex(range.max)}},DateCategoryAxis.prototype.totalCount=function totalCount(){return this.dataRange.totalCount()},DateCategoryAxis.prototype.isEmpty=function isEmpty(){return!this.options.srcCategories.length},DateCategoryAxis.prototype.roundedRange=function roundedRange(){if(!1!==this.options.roundToBaseUnit||this.isEmpty())return this.range();var options=this.options,datesRange=categoryRange(options.srcCategories);return new DateRange(datesRange.min,datesRange.max,Object.assign({},options,{justified:!1,roundToBaseUnit:!0,justifyEnd:!1})).displayRange()},DateCategoryAxis}(category_axis);setDefaultOptions(DateCategoryAxis,{type:DATE,labels:{dateFormats:DateLabelFormats},rangeLabels:{visible:!1},autoBaseUnitSteps:{milliseconds:[1,10,100],seconds:[1,2,5,15,30],minutes:[1,2,5,15,30],hours:[1,2,3],days:[1,2,3],weeks:[1,2],months:[1,2,3,6],years:[1,2,3,5,10,25,50]},maxDateGroups:10});const date_category_axis=DateCategoryAxis;function floor(value,step){return drawing_utils_round(Math.floor(value/step)*step,10)}function ceil(value,step){return drawing_utils_round(Math.ceil(value/step)*step,10)}function limitCoordinate(value){return Math.max(Math.min(value,3e5),-3e5)}var MIN_VALUE_RANGE=Math.pow(10,-9),NumericAxis=function(Axis){function NumericAxis(seriesMin,seriesMax,options,chartService){Axis.call(this,Object.assign({},options,{seriesMin,seriesMax}),chartService)}return Axis&&(NumericAxis.__proto__=Axis),NumericAxis.prototype=Object.create(Axis&&Axis.prototype),NumericAxis.prototype.constructor=NumericAxis,NumericAxis.prototype.initUserOptions=function initUserOptions(options){var autoOptions=function autoAxisOptions(seriesMin,seriesMax,options){var narrowRange=options.narrowRange,autoMin=function autoAxisMin(min,max,narrow){if(!min&&!max)return 0;var axisMin;if(min>=0&&max>=0){var minValue=min===max?0:min;if(!1===narrow||!narrow&&(max-minValue)/max>.2)return 0;axisMin=Math.max(0,minValue-(max-minValue)/2)}else axisMin=min;return axisMin}(seriesMin,seriesMax,narrowRange),autoMax=function autoAxisMax(min,max,narrow){if(!min&&!max)return 1;var axisMax;if(min<=0&&max<=0){var maxValue=min===max?0:max,diff=Math.abs((maxValue-min)/maxValue);if(!1===narrow||!narrow&&diff>.2)return 0;axisMax=Math.min(0,maxValue-(min-maxValue)/2)}else axisMax=max;return axisMax}(seriesMin,seriesMax,narrowRange),majorUnit=autoMajorUnit(autoMin,autoMax),autoOptions={majorUnit};!1!==options.roundToMajorUnit&&(autoMin<0&&remainderClose(autoMin,majorUnit,1/3)&&(autoMin-=majorUnit),autoMax>0&&remainderClose(autoMax,majorUnit,1/3)&&(autoMax+=majorUnit));return autoOptions.min=floor(autoMin,majorUnit),autoOptions.max=ceil(autoMax,majorUnit),autoOptions}(options.seriesMin,options.seriesMax,options);return this.totalOptions=function totalAxisOptions(autoOptions,options){return{min:drawing_utils_defined(options.min)?Math.min(autoOptions.min,options.min):autoOptions.min,max:drawing_utils_defined(options.max)?Math.max(autoOptions.max,options.max):autoOptions.max,majorUnit:autoOptions.majorUnit}}(autoOptions,options),function axisOptions(autoOptions,userOptions){var userSetMin,userSetMax,options=userOptions;if(userOptions){!function clearNullValues(options,fields){for(var idx=0;idx<fields.length;idx++){var field=fields[idx];null===options[field]&&(options[field]=void 0)}}(userOptions,["min","max"]),userSetMin=drawing_utils_defined(userOptions.min),userSetMax=drawing_utils_defined(userOptions.max);var userSetLimits=userSetMin||userSetMax;userSetLimits&&userOptions.min===userOptions.max&&(userOptions.min>0?userOptions.min=0:userOptions.max=1),userOptions.majorUnit?(autoOptions.min=floor(autoOptions.min,userOptions.majorUnit),autoOptions.max=ceil(autoOptions.max,userOptions.majorUnit)):userSetLimits&&(options=deepExtend(autoOptions,userOptions),autoOptions.majorUnit=autoMajorUnit(options.min,options.max))}autoOptions.minorUnit=(options.majorUnit||autoOptions.majorUnit)/5;var result=deepExtend(autoOptions,options);result.min>=result.max&&(userSetMin&&!userSetMax?result.max=result.min+result.majorUnit:!userSetMin&&userSetMax&&(result.min=result.max-result.majorUnit));return result}(autoOptions,options)},NumericAxis.prototype.initFields=function initFields(){this.totalMin=this.totalOptions.min,this.totalMax=this.totalOptions.max,this.totalMajorUnit=this.totalOptions.majorUnit,this.seriesMin=this.options.seriesMin,this.seriesMax=this.options.seriesMax},NumericAxis.prototype.clone=function clone(){return new NumericAxis(this.seriesMin,this.seriesMax,Object.assign({},this.options),this.chartService)},NumericAxis.prototype.startValue=function startValue(){return 0},NumericAxis.prototype.range=function range(){var options=this.options;return{min:options.min,max:options.max}},NumericAxis.prototype.getDivisions=function getDivisions(stepValue){if(0===stepValue)return 1;var options=this.options,range=options.max-options.min;return Math.floor(drawing_utils_round(range/stepValue,3))+1},NumericAxis.prototype.getTickPositions=function getTickPositions(unit,skipUnit){var options=this.options,ref=this.lineInfo(),axisDir=ref.axisDir,axisOrigin=ref.axisOrigin,lineBox=ref.lineBox,step=unit*(ref.lineSize/(options.max-options.min)),divisions=this.getDivisions(unit),positions=[],pos=lineBox[axisOrigin],skipStep=0;skipUnit&&(skipStep=skipUnit/unit);for(var idx=0;idx<divisions;idx++)idx%skipStep!==0&&positions.push(drawing_utils_round(pos,3)),pos+=step*axisDir;return positions},NumericAxis.prototype.getMajorTickPositions=function getMajorTickPositions(){return this.getTickPositions(this.options.majorUnit)},NumericAxis.prototype.getMinorTickPositions=function getMinorTickPositions(){return this.getTickPositions(this.options.minorUnit)},NumericAxis.prototype.getSlot=function getSlot(a,b,limit){void 0===limit&&(limit=!1);var options=this.options,ref=this.lineInfo(),axis=ref.axis,axisDir=ref.axisDir,lineBox=ref.lineBox,lineSize=ref.lineSize,lineStart=ref.lineStart,step=axisDir*(lineSize/(options.max-options.min)),start=valueOrDefault(a,b||0),end=valueOrDefault(b,a||0);limit&&(start=limitValue(start,options.min,options.max),end=limitValue(end,options.min,options.max));var p1=Math.min(start,end)-options.min,p2=Math.max(start,end)-options.min,slotBox=new core_box(lineBox.x1,lineBox.y1,lineBox.x1,lineBox.y1);return slotBox[axis+1]=limitCoordinate(lineStart+step*(axisDir>0?p1:p2)),slotBox[axis+2]=limitCoordinate(lineStart+step*(axisDir>0?p2:p1)),slotBox},NumericAxis.prototype.getValue=function getValue(point){var options=this.options,max=Number(options.max),min=Number(options.min),offset=this.pointOffset(point);return offset<0||offset>1?null:drawing_utils_round(min+offset*(max-min),10)},NumericAxis.prototype.translateRange=function translateRange(delta){var options=this.options,vertical=options.vertical,reverse=options.reverse,max=options.max,min=options.min,lineSize=this.lineInfo().lineSize,offset=drawing_utils_round(delta/(lineSize/(max-min)),10);return!vertical&&!reverse||vertical&&reverse||(offset=-offset),{min:min+offset,max:max+offset,offset}},NumericAxis.prototype.labelsCount=function labelsCount(){return this.getDivisions(this.options.majorUnit)},NumericAxis.prototype.createAxisLabel=function createAxisLabel(index,labelOptions,labelContext){var options=this.options,value=drawing_utils_round(options.min+index*options.majorUnit,10),text=this.axisLabelText(value,labelOptions,labelContext);return new axis_label(value,text,index,null,labelOptions)},NumericAxis.prototype.shouldRenderNote=function shouldRenderNote(value){var range=this.range();return range.min<=value&&value<=range.max},NumericAxis.prototype.pan=function pan(delta){var range=this.translateRange(delta);return this.limitRange(range.min,range.max,this.totalMin,this.totalMax,range.offset)},NumericAxis.prototype.pointsRange=function pointsRange(start,end){var startValue=this.getValue(start),endValue=this.getValue(end),min=Math.min(startValue,endValue),max=Math.max(startValue,endValue);if(this.isValidRange(min,max))return{min,max}},NumericAxis.prototype.scaleRange=function scaleRange(scale,cursor){var position=Math.abs(this.pointOffset(cursor)),range=this.options.max-this.options.min,delta=this.scaleToDelta(scale,range),minDelta=position*delta,maxDelta=(1-position)*delta,min=drawing_utils_round(this.options.min+minDelta,10),max=drawing_utils_round(this.options.max-maxDelta,10);return max-min<MIN_VALUE_RANGE&&(max=min+MIN_VALUE_RANGE),{min,max}},NumericAxis.prototype.zoomRange=function zoomRange(scale,cursor){var totalMin=this.totalMin,totalMax=this.totalMax,range=this.scaleRange(scale,cursor);return{min:limitValue(range.min,totalMin,totalMax),max:limitValue(range.max,totalMin,totalMax),narrowRange:!1}},NumericAxis.prototype.isValidRange=function isValidRange(min,max){return max-min>MIN_VALUE_RANGE},NumericAxis}(axis);function remainderClose(value,divisor,ratio){var remainder=drawing_utils_round(Math.abs(value%divisor),10);return 0===remainder||remainder>divisor*(1-ratio)}setDefaultOptions(NumericAxis,{type:"numeric",min:0,max:1,vertical:!0,majorGridLines:{visible:!0,width:1,color:BLACK},labels:{format:"#.####################"},zIndex:1});const numeric_axis=NumericAxis;var DateValueAxis=function(Axis){function DateValueAxis(seriesMin,seriesMax,axisOptions,chartService){var min=toDate(seriesMin),max=toDate(seriesMax),intlService=chartService.intl,options=axisOptions||{};options=function applyDefaults(seriesMin,seriesMax,options){var min=options.min||seriesMin,max=options.max||seriesMax,baseUnit=options.baseUnit||(max&&min?function timeUnits(delta){var unit="hours";delta>=31536e6?unit=YEARS:delta>=26784e5?unit="months":delta>=6048e5?unit="weeks":delta>=864e5&&(unit=DAYS);return unit}(absoluteDateDiff(max,min)):"hours"),baseUnitTime=TIME_PER_UNIT[baseUnit],weekStartDay=options.weekStartDay||0,autoMin=floorDate(toTime(min)-1,baseUnit,weekStartDay)||toDate(max),autoMax=ceilDate(toTime(max)+1,baseUnit,weekStartDay),userMajorUnit=options.majorUnit?options.majorUnit:void 0,majorUnit=userMajorUnit||ceil(autoMajorUnit(autoMin.getTime(),autoMax.getTime()),baseUnitTime)/baseUnitTime,actualUnits=duration(autoMin,autoMax,baseUnit),unitsToAdd=ceil(actualUnits,majorUnit)-actualUnits,head=Math.floor(unitsToAdd/2),tail=unitsToAdd-head;options.baseUnit||delete options.baseUnit;return options.baseUnit=options.baseUnit||baseUnit,options.min=options.min||addDuration(autoMin,-head,baseUnit,weekStartDay),options.max=options.max||addDuration(autoMax,tail,baseUnit,weekStartDay),options.minorUnit=options.minorUnit||majorUnit/5,options.majorUnit=majorUnit,options}(min,max,options=deepExtend(options||{},{min:parseDate(intlService,options.min),max:parseDate(intlService,options.max),axisCrossingValue:parseDates(intlService,options.axisCrossingValues||options.axisCrossingValue),weekStartDay:firstDay(options,intlService)})),Axis.call(this,options,chartService),this.intlService=intlService,this.seriesMin=min,this.seriesMax=max;var weekStartDay=options.weekStartDay||0;this.totalMin=toTime(floorDate(toTime(min)-1,options.baseUnit,weekStartDay)),this.totalMax=toTime(ceilDate(toTime(max)+1,options.baseUnit,weekStartDay))}return Axis&&(DateValueAxis.__proto__=Axis),DateValueAxis.prototype=Object.create(Axis&&Axis.prototype),DateValueAxis.prototype.constructor=DateValueAxis,DateValueAxis.prototype.clone=function clone(){return new DateValueAxis(this.seriesMin,this.seriesMax,Object.assign({},this.options),this.chartService)},DateValueAxis.prototype.range=function range(){var options=this.options;return{min:options.min,max:options.max}},DateValueAxis.prototype.getDivisions=function getDivisions(stepValue){var options=this.options;return Math.floor(duration(options.min,options.max,options.baseUnit)/stepValue+1)},DateValueAxis.prototype.getTickPositions=function getTickPositions(step){for(var options=this.options,ref=this.lineInfo(),dir=ref.axisDir,lineSize=ref.lineSize,start=ref.lineStart,divisions=this.getDivisions(step),scale=lineSize/dateDiff(options.max,options.min),weekStartDay=options.weekStartDay||0,positions=[start],i=1;i<divisions;i++){var pos=start+dateDiff(addDuration(options.min,i*step,options.baseUnit,weekStartDay),options.min)*scale*dir;positions.push(drawing_utils_round(pos,3))}return positions},DateValueAxis.prototype.getMajorTickPositions=function getMajorTickPositions(){return this.getTickPositions(this.options.majorUnit)},DateValueAxis.prototype.getMinorTickPositions=function getMinorTickPositions(){return this.getTickPositions(this.options.minorUnit)},DateValueAxis.prototype.getSlot=function getSlot(a,b,limit){return numeric_axis.prototype.getSlot.call(this,parseDate(this.intlService,a),parseDate(this.intlService,b),limit)},DateValueAxis.prototype.getValue=function getValue(point){var value=numeric_axis.prototype.getValue.call(this,point);return null!==value?toDate(value):null},DateValueAxis.prototype.labelsCount=function labelsCount(){return this.getDivisions(this.options.majorUnit)},DateValueAxis.prototype.createAxisLabel=function createAxisLabel(index,labelOptions,labelContext){var options=this.options,offset=index*options.majorUnit,weekStartDay=options.weekStartDay||0,date=options.min;offset>0&&(date=addDuration(date,offset,options.baseUnit,weekStartDay));var unitFormat=labelOptions.dateFormats[options.baseUnit];labelOptions.format=labelOptions.format||unitFormat;var text=this.axisLabelText(date,labelOptions,labelContext);return new axis_label(date,text,index,null,labelOptions)},DateValueAxis.prototype.translateRange=function translateRange(delta){var options=this.options,lineBox=this.lineBox(),vertical=options.vertical,reverse=options.reverse,size=vertical?lineBox.height():lineBox.width(),range=this.range(),scale=size/dateDiff(range.max,range.min),offset=drawing_utils_round(delta/scale,10);return!vertical&&!reverse||vertical&&reverse||(offset=-offset),{min:addTicks(options.min,offset),max:addTicks(options.max,offset),offset}},DateValueAxis.prototype.shouldRenderNote=function shouldRenderNote(value){var range=this.range();return dateComparer(value,range.min)>=0&&dateComparer(value,range.max)<=0},DateValueAxis.prototype.pan=function pan(delta){var range=this.translateRange(delta,!0),limittedRange=this.limitRange(toTime(range.min),toTime(range.max),this.totalMin,this.totalMax,range.offset);if(limittedRange)return{min:toDate(limittedRange.min),max:toDate(limittedRange.max)}},DateValueAxis.prototype.pointsRange=function pointsRange(start,end){var startValue=this.getValue(start),endValue=this.getValue(end),min=Math.min(startValue,endValue),max=Math.max(startValue,endValue);return{min:toDate(min),max:toDate(max)}},DateValueAxis.prototype.scaleRange=function scaleRange(scale,cursor){var position=Math.abs(this.pointOffset(cursor)),range=this.options.max-this.options.min,delta=this.scaleToDelta(scale,range),minDelta=position*delta,maxDelta=(1-position)*delta,min=toDate(toTime(this.options.min)+minDelta),max=toDate(toTime(this.options.max)-maxDelta);return max-min<1e3&&(max=toDate(toTime(min)+1e3)),{min,max}},DateValueAxis.prototype.zoomRange=function zoomRange(scale,cursor){var range=this.scaleRange(scale,cursor);return{min:toDate(limitValue(toTime(range.min),this.totalMin,this.totalMax)),max:toDate(limitValue(toTime(range.max),this.totalMin,this.totalMax))}},DateValueAxis}(axis);setDefaultOptions(DateValueAxis,{type:DATE,majorGridLines:{visible:!0,width:1,color:BLACK},labels:{dateFormats:DateLabelFormats}});const date_value_axis=DateValueAxis;var LogarithmicAxis=function(Axis){function LogarithmicAxis(seriesMin,seriesMax,options,chartService){var axisOptions=deepExtend({majorUnit:10,min:seriesMin,max:seriesMax},options),base=axisOptions.majorUnit,autoMax=function logarithmic_axis_autoAxisMax(max,base){var autoMax,logMaxRemainder=drawing_utils_round(log(max,base),10)%1;autoMax=max<=0?base:0!==logMaxRemainder&&(logMaxRemainder<.3||logMaxRemainder>.9)?Math.pow(base,log(max,base)+.2):Math.pow(base,Math.ceil(log(max,base)));return autoMax}(seriesMax,base),autoMin=function logarithmic_axis_autoAxisMin(min,max,options){var base=options.majorUnit,autoMin=min;min<=0?autoMin=max<=1?Math.pow(base,-2):1:options.narrowRange||(autoMin=Math.pow(base,Math.floor(log(min,base))));return autoMin}(seriesMin,seriesMax,axisOptions),range=function initRange(autoMin,autoMax,axisOptions,options){var min=axisOptions.min,max=axisOptions.max;drawing_utils_defined(axisOptions.axisCrossingValue)&&axisOptions.axisCrossingValue<=0&&throwNegativeValuesError();drawing_utils_defined(options.max)?options.max<=0&&throwNegativeValuesError():max=autoMax;drawing_utils_defined(options.min)?options.min<=0&&throwNegativeValuesError():min=autoMin;return{min,max}}(autoMin,autoMax,axisOptions,options);axisOptions.max=range.max,axisOptions.min=range.min,axisOptions.minorUnit=options.minorUnit||drawing_utils_round(base-1,10),Axis.call(this,axisOptions,chartService),this.totalMin=drawing_utils_defined(options.min)?Math.min(autoMin,options.min):autoMin,this.totalMax=drawing_utils_defined(options.max)?Math.max(autoMax,options.max):autoMax,this.logMin=drawing_utils_round(log(range.min,base),10),this.logMax=drawing_utils_round(log(range.max,base),10),this.seriesMin=seriesMin,this.seriesMax=seriesMax,this.createLabels()}return Axis&&(LogarithmicAxis.__proto__=Axis),LogarithmicAxis.prototype=Object.create(Axis&&Axis.prototype),LogarithmicAxis.prototype.constructor=LogarithmicAxis,LogarithmicAxis.prototype.clone=function clone(){return new LogarithmicAxis(this.seriesMin,this.seriesMax,Object.assign({},this.options),this.chartService)},LogarithmicAxis.prototype.startValue=function startValue(){return this.options.min},LogarithmicAxis.prototype.getSlot=function getSlot(a,b,limit){var options=this.options,logMin=this.logMin,logMax=this.logMax,base=options.majorUnit,min=options.min,max=options.max,ref$1=this.lineInfo(),axis=ref$1.axis,axisDir=ref$1.axisDir,lineBox=ref$1.lineBox,lineSize=ref$1.lineSize,lineStart=ref$1.lineStart,step=axisDir*(lineSize/(logMax-logMin)),start=valueOrDefault(a,b||1),end=valueOrDefault(b,a||1);if(start<=0||end<=0)return null;limit&&(start=limitValue(start,min,max),end=limitValue(end,min,max)),start=log(start,base),end=log(end,base);var p1=Math.min(start,end)-logMin,p2=Math.max(start,end)-logMin,slotBox=new core_box(lineBox.x1,lineBox.y1,lineBox.x1,lineBox.y1);return slotBox[axis+1]=limitCoordinate(lineStart+step*(axisDir>0?p1:p2)),slotBox[axis+2]=limitCoordinate(lineStart+step*(axisDir>0?p2:p1)),slotBox},LogarithmicAxis.prototype.getValue=function getValue(point){var options=this.options,logMin=this.logMin,logMax=this.logMax,base=options.majorUnit,ref$1=this.lineInfo(),axis=ref$1.axis,axisDir=ref$1.axisDir,lineStart=ref$1.lineStart,lineSize=ref$1.lineSize,step=(logMax-logMin)/lineSize,offset=axisDir*(point[axis]-lineStart);if(offset<0||offset>lineSize)return null;var value=logMin+offset*step;return drawing_utils_round(Math.pow(base,value),10)},LogarithmicAxis.prototype.range=function range(){var options=this.options;return{min:options.min,max:options.max}},LogarithmicAxis.prototype.translateRange=function translateRange(delta){var options=this.options,logMin=this.logMin,logMax=this.logMax,reverse=options.reverse,vertical=options.vertical,base=options.majorUnit,lineBox=this.lineBox(),size=vertical?lineBox.height():lineBox.width(),offset=drawing_utils_round(delta/(size/(logMax-logMin)),10);return!vertical&&!reverse||vertical&&reverse||(offset=-offset),{min:Math.pow(base,logMin+offset),max:Math.pow(base,logMax+offset),offset}},LogarithmicAxis.prototype.labelsCount=function labelsCount(){var floorMax=Math.floor(this.logMax);return Math.floor(floorMax-this.logMin)+1},LogarithmicAxis.prototype.getMajorTickPositions=function getMajorTickPositions(){var ticks=[];return this.traverseMajorTicksPositions((function(position){ticks.push(position)}),{step:1,skip:0}),ticks},LogarithmicAxis.prototype.createTicks=function createTicks(lineGroup){var options=this.options,majorTicks=options.majorTicks,minorTicks=options.minorTicks,vertical=options.vertical,mirror=options.labels.mirror,lineBox=this.lineBox(),tickLineOptions={vertical};function render(tickPosition,tickOptions){tickLineOptions.tickX=mirror?lineBox.x2:lineBox.x2-tickOptions.size,tickLineOptions.tickY=mirror?lineBox.y1-tickOptions.size:lineBox.y1,tickLineOptions.position=tickPosition,lineGroup.append(createAxisTick(tickLineOptions,tickOptions))}return majorTicks.visible&&this.traverseMajorTicksPositions(render,majorTicks),minorTicks.visible&&this.traverseMinorTicksPositions(render,minorTicks),[]},LogarithmicAxis.prototype.createGridLines=function createGridLines(altAxis){var options=this.options,minorGridLines=options.minorGridLines,majorGridLines=options.majorGridLines,vertical=options.vertical,lineBox=altAxis.lineBox(),lineOptions={lineStart:lineBox[vertical?"x1":"y1"],lineEnd:lineBox[vertical?"x2":"y2"],vertical},majorTicks=[],container=this.gridLinesVisual();function render(tickPosition,gridLine){inArray(tickPosition,majorTicks)||(lineOptions.position=tickPosition,container.append(createAxisGridLine(lineOptions,gridLine)),majorTicks.push(tickPosition))}return majorGridLines.visible&&this.traverseMajorTicksPositions(render,majorGridLines),minorGridLines.visible&&this.traverseMinorTicksPositions(render,minorGridLines),container.children},LogarithmicAxis.prototype.traverseMajorTicksPositions=function traverseMajorTicksPositions(callback,tickOptions){for(var ref=this.lineInfo(),lineStart=ref.lineStart,step=ref.step,logMin=this.logMin,logMax=this.logMax,power=Math.ceil(logMin)+tickOptions.skip;power<=logMax;power+=tickOptions.step){callback(drawing_utils_round(lineStart+step*(power-logMin),10),tickOptions)}},LogarithmicAxis.prototype.traverseMinorTicksPositions=function traverseMinorTicksPositions(callback,tickOptions){for(var ref=this.options,min=ref.min,max=ref.max,minorUnit=ref.minorUnit,base=ref.majorUnit,ref$1=this.lineInfo(),lineStart=ref$1.lineStart,step=ref$1.step,logMin=this.logMin,logMax=this.logMax,power=Math.floor(logMin);power<logMax;power++)for(var minorOptions=this._minorIntervalOptions(power),idx=tickOptions.skip;idx<minorUnit;idx+=tickOptions.step){var value=minorOptions.value+idx*minorOptions.minorStep;if(value>max)break;if(value>=min)callback(drawing_utils_round(lineStart+step*(log(value,base)-logMin),10),tickOptions)}},LogarithmicAxis.prototype.createAxisLabel=function createAxisLabel(index,labelOptions,labelContext){var power=Math.ceil(this.logMin+index),value=Math.pow(this.options.majorUnit,power),text=this.axisLabelText(value,labelOptions,labelContext);return new axis_label(value,text,index,null,labelOptions)},LogarithmicAxis.prototype.shouldRenderNote=function shouldRenderNote(value){var range=this.range();return range.min<=value&&value<=range.max},LogarithmicAxis.prototype.pan=function pan(delta){var range=this.translateRange(delta);return this.limitRange(range.min,range.max,this.totalMin,this.totalMax,range.offset)},LogarithmicAxis.prototype.pointsRange=function pointsRange(start,end){var startValue=this.getValue(start),endValue=this.getValue(end);return{min:Math.min(startValue,endValue),max:Math.max(startValue,endValue)}},LogarithmicAxis.prototype.scaleRange=function scaleRange(scale,cursor){var base=this.options.majorUnit,logMin=log(this.options.min,base),logMax=log(this.options.max,base),position=Math.abs(this.pointOffset(cursor)),range=logMax-logMin,delta=this.scaleToDelta(scale,range),min=Math.pow(base,logMin+position*delta),max=Math.pow(base,logMax-(1-position)*delta);return max-min<1e-6&&(max=min+1e-6),{min,max}},LogarithmicAxis.prototype.zoomRange=function zoomRange(scale,cursor){var range=this.scaleRange(scale,cursor),totalMin=this.totalMin,totalMax=this.totalMax;return{min:limitValue(range.min,totalMin,totalMax),max:limitValue(range.max,totalMin,totalMax)}},LogarithmicAxis.prototype._minorIntervalOptions=function _minorIntervalOptions(power){var ref=this.options,minorUnit=ref.minorUnit,base=ref.majorUnit,value=Math.pow(base,power);return{value,minorStep:(Math.pow(base,power+1)-value)/minorUnit}},LogarithmicAxis.prototype.lineInfo=function lineInfo(){var info=Axis.prototype.lineInfo.call(this);return info.step=info.axisDir*(info.lineSize/(this.logMax-this.logMin)),info},LogarithmicAxis}(axis);function throwNegativeValuesError(){throw new Error("Non positive values cannot be used for a logarithmic axis")}function log(x,base){return Math.log(x)/Math.log(base)}setDefaultOptions(LogarithmicAxis,{type:"log",majorUnit:10,minorUnit:1,axisCrossingValue:1,vertical:!0,majorGridLines:{visible:!0,width:1,color:BLACK},zIndex:1,_deferLabels:!0});const logarithmic_axis=LogarithmicAxis;const grid_lines_mixin={createGridLines:function(altAxis){var majorAngles,minorAngles,options=this.options,radius=Math.abs(this.box.center().y-altAxis.lineBox().y1),gridLines=[],skipMajor=!1;return options.majorGridLines.visible&&(majorAngles=this.majorGridLineAngles(altAxis),skipMajor=!0,gridLines=this.renderMajorGridLines(majorAngles,radius,options.majorGridLines)),options.minorGridLines.visible&&(minorAngles=this.minorGridLineAngles(altAxis,skipMajor),append(gridLines,this.renderMinorGridLines(minorAngles,radius,options.minorGridLines,altAxis,skipMajor))),gridLines},renderMajorGridLines:function(angles,radius,options){return this.renderGridLines(angles,radius,options)},renderMinorGridLines:function(angles,radius,options,altAxis,skipMajor){var radiusCallback=this.radiusCallback&&this.radiusCallback(radius,altAxis,skipMajor);return this.renderGridLines(angles,radius,options,radiusCallback)},renderGridLines:function(angles,radius,options,radiusCallback){for(var style={stroke:{width:options.width,color:options.color,dashType:options.dashType}},center=this.box.center(),circle=new geometry_circle.A([center.x,center.y],radius),container=this.gridLinesVisual(),i=0;i<angles.length;i++){var line=new shapes_path.w(style);radiusCallback&&(circle.radius=radiusCallback(angles[i])),line.moveTo(circle.center).lineTo(circle.pointAt(angles[i]+180)),container.append(line)}return container.children},gridLineAngles:function(altAxis,size,skip,step,skipAngles){var this$1=this,divs=this.intervals(size,skip,step,skipAngles),options=altAxis.options,altAxisVisible=options.visible&&!1!==(options.line||{}).visible;return map(divs,(function(d){var alpha=this$1.intervalAngle(d);if(!altAxisVisible||90!==alpha)return alpha}))}};var RadarCategoryAxis=function(CategoryAxis){function RadarCategoryAxis(){CategoryAxis.apply(this,arguments)}return CategoryAxis&&(RadarCategoryAxis.__proto__=CategoryAxis),RadarCategoryAxis.prototype=Object.create(CategoryAxis&&CategoryAxis.prototype),RadarCategoryAxis.prototype.constructor=RadarCategoryAxis,RadarCategoryAxis.prototype.range=function range(){return{min:0,max:this.options.categories.length}},RadarCategoryAxis.prototype.reflow=function reflow(box){this.box=box,this.reflowLabels()},RadarCategoryAxis.prototype.lineBox=function lineBox(){return this.box},RadarCategoryAxis.prototype.reflowLabels=function reflowLabels(){for(var labels=this.labels,labelOptions=this.options.labels,skip=labelOptions.skip||0,step=labelOptions.step||1,measureBox=new core_box,i=0;i<labels.length;i++){labels[i].reflow(measureBox);var labelBox=labels[i].box;labels[i].reflow(this.getSlot(skip+i*step).adjacentBox(0,labelBox.width(),labelBox.height()))}},RadarCategoryAxis.prototype.intervals=function intervals(size,skipOption,stepOption,skipAngles){void 0===skipAngles&&(skipAngles=!1);for(var options=this.options,divCount=options.categories.length/size||1,divAngle=360/divCount,step=stepOption||1,divs=[],angle=0,i=skipOption||0;i<divCount;i+=step)angle=options.reverse?360-i*divAngle:i*divAngle,angle=drawing_utils_round(angle,3)%360,skipAngles&&inArray(angle,skipAngles)||divs.push(angle);return divs},RadarCategoryAxis.prototype.majorIntervals=function majorIntervals(){return this.intervals(1)},RadarCategoryAxis.prototype.minorIntervals=function minorIntervals(){return this.intervals(.5)},RadarCategoryAxis.prototype.intervalAngle=function intervalAngle(interval){return(360+interval+this.options.startAngle)%360},RadarCategoryAxis.prototype.majorAngles=function majorAngles(){var this$1=this;return map(this.majorIntervals(),(function(interval){return this$1.intervalAngle(interval)}))},RadarCategoryAxis.prototype.createLine=function createLine(){return[]},RadarCategoryAxis.prototype.majorGridLineAngles=function majorGridLineAngles(altAxis){var majorGridLines=this.options.majorGridLines;return this.gridLineAngles(altAxis,1,majorGridLines.skip,majorGridLines.step)},RadarCategoryAxis.prototype.minorGridLineAngles=function minorGridLineAngles(altAxis,skipMajor){var ref=this.options,minorGridLines=ref.minorGridLines,majorGridLines=ref.majorGridLines,majorGridLineAngles=skipMajor?this.intervals(1,majorGridLines.skip,majorGridLines.step):null;return this.gridLineAngles(altAxis,.5,minorGridLines.skip,minorGridLines.step,majorGridLineAngles)},RadarCategoryAxis.prototype.radiusCallback=function radiusCallback(radius,altAxis,skipMajor){if(altAxis.options.type!==ARC){var minorAngle=rad(360/(2*this.options.categories.length)),minorRadius=Math.cos(minorAngle)*radius,majorAngles=this.majorAngles(),radiusCallback=function(angle){return!skipMajor&&inArray(angle,majorAngles)?radius:minorRadius};return radiusCallback}},RadarCategoryAxis.prototype.createPlotBands=function createPlotBands(){for(var plotBands=this.options.plotBands||[],group=this._plotbandGroup=new shapes_group.A({zIndex:-1}),i=0;i<plotBands.length;i++){var band=plotBands[i],slot=this.plotBandSlot(band),singleSlot=this.getSlot(band.from),head=band.from-Math.floor(band.from);slot.startAngle+=head*singleSlot.angle;var tail=Math.ceil(band.to)-band.to;slot.angle-=(tail+head)*singleSlot.angle;var ring=shape_builder.current.createRing(slot,{fill:{color:band.color,opacity:band.opacity},stroke:{opacity:band.opacity}});group.append(ring)}this.appendVisual(group)},RadarCategoryAxis.prototype.plotBandSlot=function plotBandSlot(band){return this.getSlot(band.from,band.to-1)},RadarCategoryAxis.prototype.getSlot=function getSlot(from,to){var options=this.options,justified=options.justified,box=this.box,divs=this.majorAngles(),totalDivs=divs.length,slotAngle=360/totalDivs,fromValue=from;options.reverse&&!justified&&(fromValue=(fromValue+1)%totalDivs);var slotStart=divs[fromValue=limitValue(Math.floor(fromValue),0,totalDivs-1)];justified&&(slotStart-=slotAngle/2)<0&&(slotStart+=360);var angle=slotAngle*(limitValue(Math.ceil(to||fromValue),fromValue,totalDivs-1)-fromValue+1);return new core_ring(box.center(),0,box.height()/2,slotStart,angle)},RadarCategoryAxis.prototype.slot=function slot(from,to){var slot=this.getSlot(from,to),startAngle=slot.startAngle+180,endAngle=startAngle+slot.angle;return new geometry_arc.A([slot.center.x,slot.center.y],{startAngle,endAngle,radiusX:slot.radius,radiusY:slot.radius})},RadarCategoryAxis.prototype.pointCategoryIndex=function pointCategoryIndex(point){for(var length=this.options.categories.length,index=null,i=0;i<length;i++){if(this.getSlot(i).containsPoint(point)){index=i;break}}return index},RadarCategoryAxis}(category_axis);setDefaultOptions(RadarCategoryAxis,{startAngle:90,labels:{margin:getSpacing(10)},majorGridLines:{visible:!0},justified:!0}),deepExtend(RadarCategoryAxis.prototype,grid_lines_mixin);const radar_category_axis=RadarCategoryAxis;var PolarAxis=function(Axis){function PolarAxis(options,chartService){Axis.call(this,options,chartService);var instanceOptions=this.options;instanceOptions.minorUnit=instanceOptions.minorUnit||instanceOptions.majorUnit/2}return Axis&&(PolarAxis.__proto__=Axis),PolarAxis.prototype=Object.create(Axis&&Axis.prototype),PolarAxis.prototype.constructor=PolarAxis,PolarAxis.prototype.getDivisions=function getDivisions(stepValue){return numeric_axis.prototype.getDivisions.call(this,stepValue)-1},PolarAxis.prototype.reflow=function reflow(box){this.box=box,this.reflowLabels()},PolarAxis.prototype.reflowLabels=function reflowLabels(){for(var options=this.options,labels=this.labels,labelOptions=this.options.labels,skip=labelOptions.skip||0,step=labelOptions.step||1,measureBox=new core_box,divs=this.intervals(options.majorUnit,skip,step),i=0;i<labels.length;i++){labels[i].reflow(measureBox);var labelBox=labels[i].box;labels[i].reflow(this.getSlot(divs[i]).adjacentBox(0,labelBox.width(),labelBox.height()))}},PolarAxis.prototype.lineBox=function lineBox(){return this.box},PolarAxis.prototype.intervals=function intervals(size,skipOption,stepOption,skipAngles){void 0===skipAngles&&(skipAngles=!1);for(var min=this.options.min,divisions=this.getDivisions(size),divs=[],step=stepOption||1,i=skipOption||0;i<divisions;i+=step){var current=(360+min+i*size)%360;skipAngles&&inArray(current,skipAngles)||divs.push(current)}return divs},PolarAxis.prototype.majorIntervals=function majorIntervals(){return this.intervals(this.options.majorUnit)},PolarAxis.prototype.minorIntervals=function minorIntervals(){return this.intervals(this.options.minorUnit)},PolarAxis.prototype.intervalAngle=function intervalAngle(i){return(540-i-this.options.startAngle)%360},PolarAxis.prototype.createLine=function createLine(){return[]},PolarAxis.prototype.majorGridLineAngles=function majorGridLineAngles(altAxis){var majorGridLines=this.options.majorGridLines;return this.gridLineAngles(altAxis,this.options.majorUnit,majorGridLines.skip,majorGridLines.step)},PolarAxis.prototype.minorGridLineAngles=function minorGridLineAngles(altAxis,skipMajor){var options=this.options,minorGridLines=options.minorGridLines,majorGridLines=options.majorGridLines,majorGridLineAngles=skipMajor?this.intervals(options.majorUnit,majorGridLines.skip,majorGridLines.step):null;return this.gridLineAngles(altAxis,options.minorUnit,minorGridLines.skip,minorGridLines.step,majorGridLineAngles)},PolarAxis.prototype.plotBandSlot=function plotBandSlot(band){return this.getSlot(band.from,band.to)},PolarAxis.prototype.getSlot=function getSlot(a,b){var options=this.options,box=this.box,startAngle=options.startAngle,start=limitValue(a,options.min,options.max),end=limitValue(b||start,start,options.max);if(options.reverse&&(start*=-1,end*=-1),(end=(540-end-startAngle)%360)<(start=(540-start-startAngle)%360)){var tmp=start;start=end,end=tmp}return new core_ring(box.center(),0,box.height()/2,start,end-start)},PolarAxis.prototype.slot=function slot(from,to){void 0===to&&(to=from);var startAngle,endAngle,options=this.options,start=360-options.startAngle,slot=this.getSlot(from,to),min=Math.min(from,to),max=Math.max(from,to);return options.reverse?(startAngle=min,endAngle=max):(startAngle=360-max,endAngle=360-min),startAngle=(startAngle+start)%360,endAngle=(endAngle+start)%360,new geometry_arc.A([slot.center.x,slot.center.y],{startAngle,endAngle,radiusX:slot.radius,radiusY:slot.radius})},PolarAxis.prototype.getValue=function getValue(point){var options=this.options,center=this.box.center(),dx=point.x-center.x,dy=point.y-center.y,theta=Math.round(deg(Math.atan2(dy,dx))),start=options.startAngle;return options.reverse||(theta*=-1,start*=-1),(theta+start+360)%360},PolarAxis.prototype.valueRange=function valueRange(){return{min:0,max:2*Math.PI}},PolarAxis}(axis);setDefaultOptions(PolarAxis,{type:"polar",startAngle:0,reverse:!1,majorUnit:60,min:0,max:360,labels:{margin:getSpacing(10)},majorGridLines:{color:BLACK,visible:!0,width:1},minorGridLines:{color:"#aaa"}}),deepExtend(PolarAxis.prototype,grid_lines_mixin,{createPlotBands:radar_category_axis.prototype.createPlotBands,majorAngles:radar_category_axis.prototype.majorAngles,range:numeric_axis.prototype.range,labelsCount:numeric_axis.prototype.labelsCount,createAxisLabel:numeric_axis.prototype.createAxisLabel});const polar_axis=PolarAxis;var RadarNumericAxisMixin={options:{majorGridLines:{visible:!0}},createPlotBands:function(){var ref=this.options,type=ref.majorGridLines.type,plotBands=ref.plotBands;void 0===plotBands&&(plotBands=[]);for(var altAxis=this.plotArea.polarAxis,majorAngles=altAxis.majorAngles(),center=altAxis.box.center(),group=this._plotbandGroup=new shapes_group.A({zIndex:-1}),i=0;i<plotBands.length;i++){var band=plotBands[i],bandStyle={fill:{color:band.color,opacity:band.opacity},stroke:{opacity:band.opacity}},slot=this.getSlot(band.from,band.to,!0),ring=new core_ring(center,center.y-slot.y2,center.y-slot.y1,0,360),shape=void 0;shape=type===ARC?shape_builder.current.createRing(ring,bandStyle):shapes_path.w.fromPoints(this.plotBandPoints(ring,majorAngles),bandStyle).close(),group.append(shape)}this.appendVisual(group)},plotBandPoints:function(ring,angles){for(var innerPoints=[],outerPoints=[],center=[ring.center.x,ring.center.y],innerCircle=new geometry_circle.A(center,ring.innerRadius),outerCircle=new geometry_circle.A(center,ring.radius),i=0;i<angles.length;i++)innerPoints.push(innerCircle.pointAt(angles[i]+180)),outerPoints.push(outerCircle.pointAt(angles[i]+180));return innerPoints.reverse(),innerPoints.push(innerPoints[0]),outerPoints.push(outerPoints[0]),outerPoints.concat(innerPoints)},createGridLines:function(altAxis){var options=this.options,majorTicks=this.radarMajorGridLinePositions(),majorAngles=altAxis.majorAngles(),center=altAxis.box.center(),gridLines=[];if(options.majorGridLines.visible&&(gridLines=this.renderGridLines(center,majorTicks,majorAngles,options.majorGridLines)),options.minorGridLines.visible){var minorTicks=this.radarMinorGridLinePositions();append(gridLines,this.renderGridLines(center,minorTicks,majorAngles,options.minorGridLines))}return gridLines},renderGridLines:function(center,ticks,angles,options){var style={stroke:{width:options.width,color:options.color,dashType:options.dashType}},skip=options.skip;void 0===skip&&(skip=0);var step=options.step;void 0===step&&(step=0);for(var container=this.gridLinesVisual(),tickIx=skip;tickIx<ticks.length;tickIx+=step){var tickRadius=center.y-ticks[tickIx];if(tickRadius>0){var circle=new geometry_circle.A([center.x,center.y],tickRadius);if(options.type===ARC)container.append(new shapes_circle.A(circle,style));else{for(var line=new shapes_path.w(style),angleIx=0;angleIx<angles.length;angleIx++)line.lineTo(circle.pointAt(angles[angleIx]+180));line.close(),container.append(line)}}}return container.children},getValue:function(point){var lineBox=this.lineBox(),altAxis=this.plotArea.polarAxis,majorAngles=altAxis.majorAngles(),center=altAxis.box.center(),radius=point.distanceTo(center),distance=radius;if(this.options.majorGridLines.type!==ARC&&majorAngles.length>1){var dx=point.x-center.x,dy=point.y-center.y,theta=(deg(Math.atan2(dy,dx))+540)%360;majorAngles.sort((function(a,b){return angularDistance(a,theta)-angularDistance(b,theta)}));var gamma=90-angularDistance(majorAngles[0],majorAngles[1])/2,beta=180-angularDistance(theta,majorAngles[0])-gamma;distance=radius*(Math.sin(rad(beta))/Math.sin(rad(gamma)))}return this.axisType().prototype.getValue.call(this,new core_point(lineBox.x1,lineBox.y2-distance))}};function angularDistance(a,b){return 180-Math.abs(Math.abs(a-b)-180)}const radar_numeric_axis_mixin=RadarNumericAxisMixin;var RadarNumericAxis=function(NumericAxis){function RadarNumericAxis(){NumericAxis.apply(this,arguments)}return NumericAxis&&(RadarNumericAxis.__proto__=NumericAxis),RadarNumericAxis.prototype=Object.create(NumericAxis&&NumericAxis.prototype),RadarNumericAxis.prototype.constructor=RadarNumericAxis,RadarNumericAxis.prototype.radarMajorGridLinePositions=function radarMajorGridLinePositions(){return this.getTickPositions(this.options.majorUnit)},RadarNumericAxis.prototype.radarMinorGridLinePositions=function radarMinorGridLinePositions(){var options=this.options,minorSkipStep=0;return options.majorGridLines.visible&&(minorSkipStep=options.majorUnit),this.getTickPositions(options.minorUnit,minorSkipStep)},RadarNumericAxis.prototype.axisType=function axisType(){return NumericAxis},RadarNumericAxis}(numeric_axis);deepExtend(RadarNumericAxis.prototype,radar_numeric_axis_mixin);const radar_numeric_axis=RadarNumericAxis;var RadarLogarithmicAxis=function(LogarithmicAxis){function RadarLogarithmicAxis(){LogarithmicAxis.apply(this,arguments)}return LogarithmicAxis&&(RadarLogarithmicAxis.__proto__=LogarithmicAxis),RadarLogarithmicAxis.prototype=Object.create(LogarithmicAxis&&LogarithmicAxis.prototype),RadarLogarithmicAxis.prototype.constructor=RadarLogarithmicAxis,RadarLogarithmicAxis.prototype.radarMajorGridLinePositions=function radarMajorGridLinePositions(){var positions=[];return this.traverseMajorTicksPositions((function(position){positions.push(position)}),this.options.majorGridLines),positions},RadarLogarithmicAxis.prototype.radarMinorGridLinePositions=function radarMinorGridLinePositions(){var positions=[];return this.traverseMinorTicksPositions((function(position){positions.push(position)}),this.options.minorGridLines),positions},RadarLogarithmicAxis.prototype.axisType=function axisType(){return LogarithmicAxis},RadarLogarithmicAxis}(logarithmic_axis);deepExtend(RadarLogarithmicAxis.prototype,radar_numeric_axis_mixin);const radar_logarithmic_axis=RadarLogarithmicAxis;var geometry_segment=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/geometry/segment.js");function numberSign(value){return value<=0?-1:1}const curve_processor=function(Class){function CurveProcessor(closed){Class.call(this),this.closed=closed}return Class&&(CurveProcessor.__proto__=Class),CurveProcessor.prototype=Object.create(Class&&Class.prototype),CurveProcessor.prototype.constructor=CurveProcessor,CurveProcessor.prototype.process=function process(dataPoints){var points=dataPoints.slice(0),segments=[],closed=this.closed,length=points.length;if(length>2&&(this.removeDuplicates(0,points),length=points.length),length<2||2===length&&points[0].equals(points[1]))return segments;var initialControlPoint,lastControlPoint,p0=points[0],p1=points[1],p2=points[2];for(segments.push(new geometry_segment.A(p0));p0.equals(points[length-1]);)closed=!0,points.pop(),length--;if(2===length){var tangent=this.tangent(p0,p1,X,Y);return last(segments).controlOut(this.firstControlPoint(tangent,p0,p1,X,Y)),segments.push(new geometry_segment.A(p1,this.secondControlPoint(tangent,p0,p1,X,Y))),segments}if(closed){p0=points[length-1],p1=points[0],p2=points[1];var controlPoints=this.controlPoints(p0,p1,p2);initialControlPoint=controlPoints[1],lastControlPoint=controlPoints[0]}else{var tangent$1=this.tangent(p0,p1,X,Y);initialControlPoint=this.firstControlPoint(tangent$1,p0,p1,X,Y)}for(var cp0=initialControlPoint,idx=0;idx<=length-3;idx++)if(this.removeDuplicates(idx,points),idx+3<=(length=points.length)){p0=points[idx],p1=points[idx+1],p2=points[idx+2];var controlPoints$1=this.controlPoints(p0,p1,p2);last(segments).controlOut(cp0),cp0=controlPoints$1[1];var cp1=controlPoints$1[0];segments.push(new geometry_segment.A(p1,cp1))}if(closed){p0=points[length-2],p1=points[length-1],p2=points[0];var controlPoints$2=this.controlPoints(p0,p1,p2);last(segments).controlOut(cp0),segments.push(new geometry_segment.A(p1,controlPoints$2[0])),last(segments).controlOut(controlPoints$2[1]),segments.push(new geometry_segment.A(p2,lastControlPoint))}else{var tangent$2=this.tangent(p1,p2,X,Y);last(segments).controlOut(cp0),segments.push(new geometry_segment.A(p2,this.secondControlPoint(tangent$2,p1,p2,X,Y)))}return segments},CurveProcessor.prototype.removeDuplicates=function removeDuplicates(idx,points){for(;points[idx+1]&&(points[idx].equals(points[idx+1])||points[idx+1].equals(points[idx+2]));)points.splice(idx+1,1)},CurveProcessor.prototype.invertAxis=function invertAxis(p0,p1,p2){var invertAxis=!1;if(p0.x===p1.x)invertAxis=!0;else if(p1.x===p2.x)(p1.y<p2.y&&p0.y<=p1.y||p2.y<p1.y&&p1.y<=p0.y)&&(invertAxis=!0);else{var fn=this.lineFunction(p0,p1),y2=this.calculateFunction(fn,p2.x);p0.y<=p1.y&&p2.y<=y2||p1.y<=p0.y&&p2.y>=y2||(invertAxis=!0)}return invertAxis},CurveProcessor.prototype.isLine=function isLine(p0,p1,p2){var fn=this.lineFunction(p0,p1),y2=this.calculateFunction(fn,p2.x);return p0.x===p1.x&&p1.x===p2.x||drawing_utils_round(y2,1)===drawing_utils_round(p2.y,1)},CurveProcessor.prototype.lineFunction=function lineFunction(p1,p2){var a=(p2.y-p1.y)/(p2.x-p1.x);return[p1.y-a*p1.x,a]},CurveProcessor.prototype.controlPoints=function controlPoints(p0,p1,p2){var tangent,xField=X,yField=Y,restrict=!1,switchOrientation=!1;if(this.isLine(p0,p1,p2))tangent=this.tangent(p0,p1,X,Y);else{var monotonic={x:this.isMonotonicByField(p0,p1,p2,X),y:this.isMonotonicByField(p0,p1,p2,Y)};if(monotonic.x&&monotonic.y)tangent=this.tangent(p0,p2,X,Y),restrict=!0;else if(this.invertAxis(p0,p1,p2)&&(xField=Y,yField=X),monotonic[xField])tangent=0;else tangent=.01*(p2[yField]<p0[yField]&&p0[yField]<=p1[yField]||p0[yField]<p2[yField]&&p1[yField]<=p0[yField]?numberSign((p2[yField]-p0[yField])*(p1[xField]-p0[xField])):-numberSign((p2[xField]-p0[xField])*(p1[yField]-p0[yField]))),switchOrientation=!0}var secondControlPoint=this.secondControlPoint(tangent,p0,p1,xField,yField);if(switchOrientation){var oldXField=xField;xField=yField,yField=oldXField}var firstControlPoint=this.firstControlPoint(tangent,p1,p2,xField,yField);return restrict&&(this.restrictControlPoint(p0,p1,secondControlPoint,tangent),this.restrictControlPoint(p1,p2,firstControlPoint,tangent)),[secondControlPoint,firstControlPoint]},CurveProcessor.prototype.restrictControlPoint=function restrictControlPoint(p1,p2,cp,tangent){p1.y<p2.y?p2.y<cp.y?(cp.x=p1.x+(p2.y-p1.y)/tangent,cp.y=p2.y):cp.y<p1.y&&(cp.x=p2.x-(p2.y-p1.y)/tangent,cp.y=p1.y):cp.y<p2.y?(cp.x=p1.x-(p1.y-p2.y)/tangent,cp.y=p2.y):p1.y<cp.y&&(cp.x=p2.x+(p1.y-p2.y)/tangent,cp.y=p1.y)},CurveProcessor.prototype.tangent=function tangent(p0,p1,xField,yField){var tangent,x=p1[xField]-p0[xField],y=p1[yField]-p0[yField];return tangent=0===x?0:y/x,tangent},CurveProcessor.prototype.isMonotonicByField=function isMonotonicByField(p0,p1,p2,field){return p2[field]>p1[field]&&p1[field]>p0[field]||p2[field]<p1[field]&&p1[field]<p0[field]},CurveProcessor.prototype.firstControlPoint=function firstControlPoint(tangent,p0,p3,xField,yField){var t1=p0[xField],distance=.333*(p3[xField]-t1);return this.point(t1+distance,p0[yField]+distance*tangent,xField,yField)},CurveProcessor.prototype.secondControlPoint=function secondControlPoint(tangent,p0,p3,xField,yField){var t1=p0[xField],t2=p3[xField],distance=.333*(t2-t1);return this.point(t2-distance,p3[yField]-distance*tangent,xField,yField)},CurveProcessor.prototype.point=function point(xValue,yValue,xField,yField){var controlPoint=new geometry_point.A;return controlPoint[xField]=xValue,controlPoint[yField]=yValue,controlPoint},CurveProcessor.prototype.calculateFunction=function calculateFunction(fn,x){for(var length=fn.length,result=0,i=0;i<length;i++)result+=Math.pow(x,i)*fn[i];return result},CurveProcessor}(common_class.A);var ChartAxis=function(Class){function ChartAxis(axis){Class.call(this),this._axis=axis,this.options=axis.options}return Class&&(ChartAxis.__proto__=Class),ChartAxis.prototype=Object.create(Class&&Class.prototype),ChartAxis.prototype.constructor=ChartAxis,ChartAxis.prototype.value=function value(point){var axis=this._axis,value=axis.getCategory?axis.getCategory(point):axis.getValue(point);return value},ChartAxis.prototype.slot=function slot(from,to,limit){return void 0===limit&&(limit=!0),this._axis.slot(from,to,limit)},ChartAxis.prototype.range=function range(){return this._axis.range()},ChartAxis.prototype.valueRange=function valueRange(){return this._axis.valueRange()},ChartAxis}(common_class.A);const chart_axis=ChartAxis;function findAxisByName(name,axes){for(var idx=0;idx<axes.length;idx++)if(axes[idx].options.name===name)return axes[idx].prepareUserOptions(),new chart_axis(axes[idx])}var ChartPane=function ChartPane(pane){this.visual=pane.visual,this.chartsVisual=pane.chartContainer.visual,this._pane=pane};ChartPane.prototype.findAxisByName=function findAxisByName$1(name){return findAxisByName(name,this._pane.axes)};const chart_pane=ChartPane;const chart_plotarea=function(Class){function ChartPlotArea(plotArea){Class.call(this),this._plotArea=plotArea,this.visual=plotArea.visual,this.backgroundVisual=plotArea._bgVisual}return Class&&(ChartPlotArea.__proto__=Class),ChartPlotArea.prototype=Object.create(Class&&Class.prototype),ChartPlotArea.prototype.constructor=ChartPlotArea,ChartPlotArea}(common_class.A);function countNumbers(values){for(var length=values.length,count=0,i=0;i<length;i++){isNumber(values[i])&&count++}return count}var Aggregates={min:function(values){for(var length=values.length,min=MAX_VALUE,i=0;i<length;i++){var value=values[i];isNumber(value)&&(min=Math.min(min,value))}return min===MAX_VALUE?values[0]:min},max:function(values){for(var length=values.length,max=MIN_VALUE,i=0;i<length;i++){var value=values[i];isNumber(value)&&(max=Math.max(max,value))}return max===MIN_VALUE?values[0]:max},sum:function(values){for(var length=values.length,sum=0,i=0;i<length;i++){var value=values[i];isNumber(value)&&(sum+=value)}return sum},sumOrNull:function(values){var result=null;return countNumbers(values)&&(result=Aggregates.sum(values)),result},count:function(values){for(var length=values.length,count=0,i=0;i<length;i++){var value=values[i];null!==value&&drawing_utils_defined(value)&&count++}return count},avg:function(values){var count=countNumbers(values),result=values[0];return count>0&&(result=Aggregates.sum(values)/count),result},first:function(values){for(var length=values.length,i=0;i<length;i++){var value=values[i];if(null!==value&&drawing_utils_defined(value))return value}return values[0]}};const aggregates=Aggregates;function getField(field,row){return null===row?row:getter(field)(row)}var SeriesBinder=function(Class){function SeriesBinder(){Class.call(this),this._valueFields={},this._otherFields={},this._nullValue={},this._undefinedValue={}}return Class&&(SeriesBinder.__proto__=Class),SeriesBinder.prototype=Object.create(Class&&Class.prototype),SeriesBinder.prototype.constructor=SeriesBinder,SeriesBinder.prototype.register=function register(seriesTypes,valueFields,otherFields){void 0===valueFields&&(valueFields=[VALUE]),void 0===otherFields&&(otherFields={});for(var i=0;i<seriesTypes.length;i++){var type=seriesTypes[i];this._valueFields[type]=valueFields,this._otherFields[type]=otherFields,this._nullValue[type]=this._makeValue(valueFields,null),this._undefinedValue[type]=this._makeValue(valueFields,void 0)}},SeriesBinder.prototype.canonicalFields=function canonicalFields(series){return this.valueFields(series).concat(this.otherFields(series))},SeriesBinder.prototype.valueFields=function valueFields(series){return this._valueFields[series.type]||[VALUE]},SeriesBinder.prototype.otherFields=function otherFields(series){return this._otherFields[series.type]||[VALUE]},SeriesBinder.prototype.bindPoint=function bindPoint(series,pointIx,item){var fields,value,data=series.data,pointData=drawing_utils_defined(item)?item:data[pointIx],result={valueFields:{value:pointData}},valueFields=this.valueFields(series),otherFields=this._otherFields[series.type];if(null===pointData)value=this._nullValue[series.type];else if(drawing_utils_defined(pointData)){if(Array.isArray(pointData)){var fieldData=pointData.slice(valueFields.length);value=this._bindFromArray(pointData,valueFields),fields=this._bindFromArray(fieldData,otherFields)}else if("object"==typeof pointData){var srcValueFields=this.sourceFields(series,valueFields),srcPointFields=this.sourceFields(series,otherFields);value=this._bindFromObject(pointData,valueFields,srcValueFields),fields=this._bindFromObject(pointData,otherFields,srcPointFields)}}else value=this._undefinedValue[series.type];return drawing_utils_defined(value)&&(1===valueFields.length?result.valueFields.value=value[valueFields[0]]:result.valueFields=value),result.fields=fields||{},result},SeriesBinder.prototype._makeValue=function _makeValue(fields,initialValue){for(var value={},length=fields.length,i=0;i<length;i++){value[fields[i]]=initialValue}return value},SeriesBinder.prototype._bindFromArray=function _bindFromArray(array,fields){var value={};if(fields)for(var length=Math.min(fields.length,array.length),i=0;i<length;i++)value[fields[i]]=array[i];return value},SeriesBinder.prototype._bindFromObject=function _bindFromObject(object,fields,srcFields){void 0===srcFields&&(srcFields=fields);var value={};if(fields)for(var length=fields.length,i=0;i<length;i++){var fieldName=fields[i],srcFieldName=srcFields[i];null!==srcFieldName&&(value[fieldName]=getField(srcFieldName,object))}return value},SeriesBinder.prototype.sourceFields=function sourceFields(series,canonicalFields){var sourceFields=[];if(canonicalFields)for(var length=canonicalFields.length,i=0;i<length;i++){var fieldName=canonicalFields[i],sourceFieldName=fieldName===VALUE?"field":fieldName+"Field";sourceFields.push(null!==series[sourceFieldName]?series[sourceFieldName]||fieldName:null)}return sourceFields},SeriesBinder}(common_class.A);SeriesBinder.current=new SeriesBinder;const series_binder=SeriesBinder;var percentRegex=/percent(?:\w*)\((\d+)\)/,standardDeviationRegex=new RegExp("^stddev(?:\\((\\d+(?:\\.\\d+)?)\\))?$"),ErrorRangeCalculator=function(Class){function ErrorRangeCalculator(errorValue,series,field){Class.call(this),this.initGlobalRanges(errorValue,series,field)}return Class&&(ErrorRangeCalculator.__proto__=Class),ErrorRangeCalculator.prototype=Object.create(Class&&Class.prototype),ErrorRangeCalculator.prototype.constructor=ErrorRangeCalculator,ErrorRangeCalculator.prototype.initGlobalRanges=function initGlobalRanges(errorValue,series,field){var data=series.data,deviationMatch=standardDeviationRegex.exec(errorValue);if(deviationMatch){this.valueGetter=this.createValueGetter(series,field);var average=this.getAverage(data),deviation=this.getStandardDeviation(data,average,!1),multiple=deviationMatch[1]?parseFloat(deviationMatch[1]):1,errorRange={low:average.value-deviation*multiple,high:average.value+deviation*multiple};this.globalRange=function(){return errorRange}}else if(errorValue.indexOf&&errorValue.indexOf("stderr")>=0){this.valueGetter=this.createValueGetter(series,field);var standardError=this.getStandardError(data,this.getAverage(data));this.globalRange=function(value){return{low:value-standardError,high:value+standardError}}}},ErrorRangeCalculator.prototype.createValueGetter=function createValueGetter(series,field){var valueGetter,data=series.data,binder=series_binder.current,valueFields=binder.valueFields(series),item=drawing_utils_defined(data[0])?data[0]:{};if(isArray(item))valueGetter=getter("["+(field?valueFields.indexOf(field):0)+"]");else if(isNumber(item))valueGetter=getter();else if("object"==typeof item){valueGetter=getter(binder.sourceFields(series,valueFields)[valueFields.indexOf(field)])}return valueGetter},ErrorRangeCalculator.prototype.getErrorRange=function getErrorRange(pointValue,errorValue){var low,high,value;if(!drawing_utils_defined(errorValue))return null;if(this.globalRange)return this.globalRange(pointValue);if(isArray(errorValue))low=pointValue-errorValue[0],high=pointValue+errorValue[1];else if(isNumber(value=parseFloat(errorValue)))low=pointValue-value,high=pointValue+value;else{if(!(value=percentRegex.exec(errorValue)))throw new Error("Invalid ErrorBar value: "+errorValue);var percentValue=pointValue*(parseFloat(value[1])/100);low=pointValue-Math.abs(percentValue),high=pointValue+Math.abs(percentValue)}return{low,high}},ErrorRangeCalculator.prototype.getStandardError=function getStandardError(data,average){return this.getStandardDeviation(data,average,!0)/Math.sqrt(average.count)},ErrorRangeCalculator.prototype.getStandardDeviation=function getStandardDeviation(data,average,isSample){for(var length=data.length,total=isSample?average.count-1:average.count,squareDifferenceSum=0,idx=0;idx<length;idx++){var value=this.valueGetter(data[idx]);isNumber(value)&&(squareDifferenceSum+=Math.pow(value-average.value,2))}return Math.sqrt(squareDifferenceSum/total)},ErrorRangeCalculator.prototype.getAverage=function getAverage(data){for(var length=data.length,sum=0,count=0,idx=0;idx<length;idx++){var value=this.valueGetter(data[idx]);isNumber(value)&&(sum+=value,count++)}return{value:sum/count,count}},ErrorRangeCalculator}(common_class.A);const error_range_calculator=ErrorRangeCalculator;var constants_browser=support.A.browser||{},START_SCALE=constants_browser.msie?.001:0,ZERO="zero",AREA="area",BAR="bar",BOX_PLOT="boxPlot",BUBBLE="bubble",BULLET="bullet",CANDLESTICK="candlestick",COLUMN="column",HORIZONTAL_WATERFALL="horizontalWaterfall",LINE="line",OHLC="ohlc",PIE="pie",POLAR_AREA="polarArea",POLAR_LINE="polarLine",POLAR_SCATTER="polarScatter",RADAR_AREA="radarArea",RADAR_COLUMN="radarColumn",RADAR_LINE="radarLine",RANGE_AREA="rangeArea",RANGE_BAR="rangeBar",RANGE_COLUMN="rangeColumn",SCATTER="scatter",SCATTER_LINE="scatterLine",VERTICAL_AREA="verticalArea",VERTICAL_BOX_PLOT="verticalBoxPlot",VERTICAL_BULLET="verticalBullet",VERTICAL_LINE="verticalLine",VERTICAL_RANGE_AREA="verticalRangeArea",WATERFALL="waterfall",EQUALLY_SPACED_SERIES=[BAR,COLUMN,OHLC,CANDLESTICK,BOX_PLOT,VERTICAL_BOX_PLOT,BULLET,RANGE_COLUMN,RANGE_BAR,WATERFALL,HORIZONTAL_WATERFALL],TRENDLINE_SERIES=["linearTrendline","movingAverageTrendline"],ErrorBarBase=function(ChartElement){function ErrorBarBase(low,high,isVertical,chart,series,options){ChartElement.call(this,options),this.low=low,this.high=high,this.isVertical=isVertical,this.chart=chart,this.series=series}return ChartElement&&(ErrorBarBase.__proto__=ChartElement),ErrorBarBase.prototype=Object.create(ChartElement&&ChartElement.prototype),ErrorBarBase.prototype.constructor=ErrorBarBase,ErrorBarBase.prototype.reflow=function reflow(targetBox){var linePoints,endCaps=this.options.endCaps,isVertical=this.isVertical,valueBox=this.getAxis().getSlot(this.low,this.high),centerBox=targetBox.center(),capsWidth=this.getCapsWidth(targetBox,isVertical),capValue=isVertical?centerBox.x:centerBox.y,capStart=capValue-capsWidth,capEnd=capValue+capsWidth;isVertical?(linePoints=[new core_point(centerBox.x,valueBox.y1),new core_point(centerBox.x,valueBox.y2)],endCaps&&linePoints.push(new core_point(capStart,valueBox.y1),new core_point(capEnd,valueBox.y1),new core_point(capStart,valueBox.y2),new core_point(capEnd,valueBox.y2)),this.box=new core_box(capStart,valueBox.y1,capEnd,valueBox.y2)):(linePoints=[new core_point(valueBox.x1,centerBox.y),new core_point(valueBox.x2,centerBox.y)],endCaps&&linePoints.push(new core_point(valueBox.x1,capStart),new core_point(valueBox.x1,capEnd),new core_point(valueBox.x2,capStart),new core_point(valueBox.x2,capEnd)),this.box=new core_box(valueBox.x1,capStart,valueBox.x2,capEnd)),this.linePoints=linePoints},ErrorBarBase.prototype.getCapsWidth=function getCapsWidth(box,isVertical){var boxSize=isVertical?box.width():box.height();return Math.min(Math.floor(boxSize/2),4)||4},ErrorBarBase.prototype.createVisual=function createVisual(){var this$1=this,options=this.options,visual=options.visual;visual?this.visual=visual({low:this.low,high:this.high,rect:this.box.toRect(),sender:this.getSender(),options:{endCaps:options.endCaps,color:options.color,line:options.line},createVisual:function(){this$1.createDefaultVisual();var defaultVisual=this$1.visual;return delete this$1.visual,defaultVisual}}):this.createDefaultVisual()},ErrorBarBase.prototype.createDefaultVisual=function createDefaultVisual(){var options=this.options,linePoints=this.linePoints,lineOptions={stroke:{color:options.color,width:options.line.width,dashType:options.line.dashType}};ChartElement.prototype.createVisual.call(this);for(var idx=0;idx<linePoints.length;idx+=2){var line=new shapes_path.w(lineOptions).moveTo(linePoints[idx].x,linePoints[idx].y).lineTo(linePoints[idx+1].x,linePoints[idx+1].y);alignPathToPixel(line),this.visual.append(line)}},ErrorBarBase}(chart_element);setDefaultOptions(ErrorBarBase,{animation:{type:"fadeIn",delay:600},endCaps:!0,line:{width:2},zIndex:1});const error_bar_base=ErrorBarBase;var CategoricalErrorBar=function(ErrorBarBase){function CategoricalErrorBar(){ErrorBarBase.apply(this,arguments)}return ErrorBarBase&&(CategoricalErrorBar.__proto__=ErrorBarBase),CategoricalErrorBar.prototype=Object.create(ErrorBarBase&&ErrorBarBase.prototype),CategoricalErrorBar.prototype.constructor=CategoricalErrorBar,CategoricalErrorBar.prototype.getAxis=function getAxis(){return this.chart.seriesValueAxis(this.series)},CategoricalErrorBar}(error_bar_base);const categorical_error_bar=CategoricalErrorBar;function anyHasZIndex(elements){for(var idx=0;idx<elements.length;idx++)if(drawing_utils_defined(elements[idx].zIndex))return!0}function appendIfNotNull(array,element){null!==element&&array.push(element)}function areNumbers(values){return countNumbers(values)===values.length}function segmentVisible(series,fields,index){var visible=fields.visible;if(drawing_utils_defined(visible))return visible;var pointVisibility=series.pointVisibility;return pointVisibility?pointVisibility[index]:void 0}function bindSegments(series){for(var data=series.data,points=[],sum=0,count=0,idx=0;idx<data.length;idx++){var pointData=series_binder.current.bindPoint(series,idx),value=pointData.valueFields.value;isString(value)&&(value=parseFloat(value)),isNumber(value)?(pointData.visible=!1!==segmentVisible(series,pointData.fields,idx),pointData.value=Math.abs(value),points.push(pointData),pointData.visible&&(sum+=pointData.value),0!==value&&count++):points.push(null)}return{total:sum,points,count}}function categoriesCount(series){for(var seriesCount=series.length,categories=0,i=0;i<seriesCount;i++)categories=Math.max(categories,series[i].data.length);return categories}function equalsIgnoreCase(a,b){return a&&b?a.toLowerCase()===b.toLowerCase():a===b}function evalOptions(options,context,state,dryRun){void 0===state&&(state={}),void 0===dryRun&&(dryRun=!1);var defaults=state.defaults=state.defaults||{},depth=state.depth=state.depth||0,needsEval=!1;if(state.excluded=state.excluded||[],depth>5)return null;for(var property in options)if(!inArray(property,state.excluded)&&options.hasOwnProperty(property)){var propValue=options[property];isFunction(propValue)?(needsEval=!0,dryRun||(options[property]=valueOrDefault(propValue(context),defaults[property]))):isObject(propValue)&&(dryRun||(state.defaults=defaults[property]),state.depth++,needsEval=evalOptions(propValue,context,state,dryRun)||needsEval,state.depth--)}return needsEval}function filterSeriesByType(series,types){for(var result=[],seriesTypes=[].concat(types),idx=0;idx<series.length;idx++){var currentSeries=series[idx];inArray(currentSeries.type,seriesTypes)&&result.push(currentSeries)}return result}function getDateField(field,row,intlService){if(null===row)return row;var key="_date_"+field,value=row[key];return value||(value=parseDate(intlService,getter(field)(row)),row[key]=value),value}function hasGradientOverlay(options){var overlay=options.overlay;return overlay&&overlay.gradient&&"none"!==overlay.gradient}function hasValue(value){return drawing_utils_defined(value)&&null!==value}function isDateAxis(axisOptions,sampleCategory){var type=axisOptions.type,dateCategory=sampleCategory instanceof Date;return!type&&dateCategory||equalsIgnoreCase(type,DATE)}function singleItemOrArray(array){return 1===array.length?array[0]:array}var AREA_REGEX=/area/i;function create_out_of_range_points_hasValue(series,item){var valueFields=series_binder.current.bindPoint(series,null,item).valueFields;for(var field in valueFields)if(convertableToNumber(valueFields[field]))return!0}function findNext(ref){var pointHasValue,outPoint,start=ref.start,dir=ref.dir,min=ref.min,max=ref.max,getter=ref.getter,hasItem=ref.hasItem,series=ref.series,idx=start;do{hasItem(idx+=dir)&&(pointHasValue=create_out_of_range_points_hasValue(series,(outPoint=getter(idx)).item))}while(min<=idx&&idx<=max&&!pointHasValue);if(pointHasValue)return outPoint}function createOutOfRangePoints(series,range,count,getter,hasItem){var min=range.min,max=range.max,hasMinPoint=min>0&&min<count,hasMaxPoint=max+1<count;if(hasMinPoint||hasMaxPoint){var minPoint,maxPoint,outPoint,missingValues=function seriesMissingValues(series){return series.missingValues?series.missingValues:AREA_REGEX.test(series.type)||series.stack?ZERO:"interpolate"}(series);if("interpolate"!==missingValues)hasMinPoint&&(minPoint=getter(min-1)),hasMaxPoint&&(maxPoint=getter(max+1));else hasMinPoint&&(minPoint=create_out_of_range_points_hasValue(series,(outPoint=getter(min-1)).item)?outPoint:findNext({start:min,dir:-1,min:0,max:count-1,getter,hasItem,series})),hasMaxPoint&&(maxPoint=create_out_of_range_points_hasValue(series,(outPoint=getter(max+1)).item)?outPoint:findNext({start:max,dir:1,min:0,max:count-1,getter,hasItem,series}));minPoint&&(series._outOfRangeMinPoint=minPoint),maxPoint&&(series._outOfRangeMaxPoint=maxPoint)}}var CategoricalChart=function(ChartElement){function CategoricalChart(plotArea,options){ChartElement.call(this,options),this.plotArea=plotArea,this.chartService=plotArea.chartService,this.categoryAxis=plotArea.seriesCategoryAxis(options.series[0]),this.valueAxisRanges={},this.points=[],this.categoryPoints=[],this.seriesPoints=[],this.seriesOptions=[],this._evalSeries=[],this.render()}return ChartElement&&(CategoricalChart.__proto__=ChartElement),CategoricalChart.prototype=Object.create(ChartElement&&ChartElement.prototype),CategoricalChart.prototype.constructor=CategoricalChart,CategoricalChart.prototype.render=function render(){this.traverseDataPoints(this.addValue.bind(this))},CategoricalChart.prototype.pointOptions=function pointOptions(series,seriesIx){var options=this.seriesOptions[seriesIx];if(!options){var defaults=this.pointType().prototype.defaults;this.seriesOptions[seriesIx]=options=deepExtend({},defaults,{vertical:!this.options.invertAxes},series)}return options},CategoricalChart.prototype.plotValue=function plotValue(point){if(!point)return 0;if(this.options.isStacked100&&isNumber(point.value)){for(var categoryIx=point.categoryIx,categoryPoints=this.categoryPoints[categoryIx],otherValues=[],categorySum=0,i=0;i<categoryPoints.length;i++){var other=categoryPoints[i];if(other){var stack=point.series.stack,otherStack=other.series.stack;if(stack&&otherStack&&stack.group!==otherStack.group)continue;isNumber(other.value)&&(categorySum+=Math.abs(other.value),otherValues.push(Math.abs(other.value)))}}if(categorySum>0)return point.value/categorySum}return point.value},CategoricalChart.prototype.plotRange=function plotRange(point,startValue){void 0===startValue&&(startValue=0);var categoryPoints=this.categoryPoints[point.categoryIx];if(this.options.isStacked){for(var plotValue=this.plotValue(point),positive=plotValue>=0,prevValue=startValue,isStackedBar=!1,i=0;i<categoryPoints.length;i++){var other=categoryPoints[i];if(point===other)break;var stack=point.series.stack,otherStack=other.series.stack;if(stack&&otherStack){if("string"==typeof stack&&stack!==otherStack)continue;if(stack.group&&stack.group!==otherStack.group)continue}var otherValue=this.plotValue(other);(otherValue>=0&&positive||otherValue<0&&!positive)&&(prevValue+=otherValue,plotValue+=otherValue,isStackedBar=!0,this.options.isStacked100&&(plotValue=Math.min(plotValue,1)))}return isStackedBar&&(prevValue-=startValue),[prevValue,plotValue]}var series=point.series,valueAxis=this.seriesValueAxis(series),axisCrossingValue=this.categoryAxisCrossingValue(valueAxis);return[axisCrossingValue,convertableToNumber(point.value)?point.value:axisCrossingValue]},CategoricalChart.prototype.stackLimits=function stackLimits(axisName,stackName){for(var min=MAX_VALUE,max=MIN_VALUE,i=0;i<this.categoryPoints.length;i++){var categoryPoints=this.categoryPoints[i];if(categoryPoints)for(var pIx=0;pIx<categoryPoints.length;pIx++){var point=categoryPoints[pIx];if(point&&(point.series.stack===stackName||point.series.axis===axisName)){var to=this.plotRange(point,0)[1];drawing_utils_defined(to)&&isFinite(to)&&(max=Math.max(max,to),min=Math.min(min,to))}}}return{min,max}},CategoricalChart.prototype.updateStackRange=function updateStackRange(){var ref=this.options,isStacked=ref.isStacked,chartSeries=ref.series,limitsCache={};if(isStacked)for(var i=0;i<chartSeries.length;i++){var series=chartSeries[i],axisName=series.axis,key=axisName+series.stack,limits=limitsCache[key];if(!limits){limits=this.stackLimits(axisName,series.stack);var errorTotals=this.errorTotals;errorTotals&&(errorTotals.negative.length&&(limits.min=Math.min(limits.min,sparseArrayLimits(errorTotals.negative).min)),errorTotals.positive.length&&(limits.max=Math.max(limits.max,sparseArrayLimits(errorTotals.positive).max))),limits.min!==MAX_VALUE||limits.max!==MIN_VALUE?limitsCache[key]=limits:limits=null}limits&&(this.valueAxisRanges[axisName]=limits)}},CategoricalChart.prototype.addErrorBar=function addErrorBar(point,data,categoryIx){var errorRange,value=point.value,series=point.series,seriesIx=point.seriesIx,errorBars=point.options.errorBars,lowValue=data.fields.errorLow,highValue=data.fields.errorHigh;isNumber(lowValue)&&isNumber(highValue)?errorRange={low:lowValue,high:highValue}:errorBars&&drawing_utils_defined(errorBars.value)&&(this.seriesErrorRanges=this.seriesErrorRanges||[],this.seriesErrorRanges[seriesIx]=this.seriesErrorRanges[seriesIx]||new error_range_calculator(errorBars.value,series,VALUE),errorRange=this.seriesErrorRanges[seriesIx].getErrorRange(value,errorBars.value)),errorRange&&(point.low=errorRange.low,point.high=errorRange.high,this.addPointErrorBar(point,categoryIx))},CategoricalChart.prototype.addPointErrorBar=function addPointErrorBar(point,categoryIx){var isVertical=!this.options.invertAxes,options=point.options.errorBars,series=point.series,low=point.low,high=point.high;if(this.options.isStacked){var stackedErrorRange=this.stackedErrorRange(point,categoryIx);low=stackedErrorRange.low,high=stackedErrorRange.high}else{var fields={categoryIx,series};this.updateRange({value:low},fields),this.updateRange({value:high},fields)}var errorBar=new categorical_error_bar(low,high,isVertical,this,series,options);point.errorBars=[errorBar],point.append(errorBar)},CategoricalChart.prototype.stackedErrorRange=function stackedErrorRange(point,categoryIx){var plotValue=this.plotRange(point,0)[1]-point.value,low=point.low+plotValue,high=point.high+plotValue;return this.errorTotals=this.errorTotals||{positive:[],negative:[]},low<0&&(this.errorTotals.negative[categoryIx]=Math.min(this.errorTotals.negative[categoryIx]||0,low)),high>0&&(this.errorTotals.positive[categoryIx]=Math.max(this.errorTotals.positive[categoryIx]||0,high)),{low,high}},CategoricalChart.prototype.addValue=function addValue(data,fields){var categoryIx=fields.categoryIx,series=fields.series,seriesIx=fields.seriesIx,categoryPoints=this.categoryPoints[categoryIx];categoryPoints||(this.categoryPoints[categoryIx]=categoryPoints=[]);var seriesPoints=this.seriesPoints[seriesIx];seriesPoints||(this.seriesPoints[seriesIx]=seriesPoints=[]);var point=this.createPoint(data,fields);point&&(Object.assign(point,fields),point.owner=this,point.noteText=data.fields.noteText,drawing_utils_defined(point.dataItem)||(point.dataItem=series.data[categoryIx]),this.addErrorBar(point,data,categoryIx)),this.points.push(point),seriesPoints.push(point),categoryPoints.push(point),this.updateRange(data.valueFields,fields)},CategoricalChart.prototype.evalPointOptions=function evalPointOptions(options,value,fields){var categoryIx=fields.categoryIx,category=fields.category,series=fields.series,seriesIx=fields.seriesIx,state={defaults:series._defaults,excluded:["data","aggregate","_events","tooltip","content","template","visual","toggle","_outOfRangeMinPoint","_outOfRangeMaxPoint","drilldownSeriesFactory"]},doEval=this._evalSeries[seriesIx];drawing_utils_defined(doEval)||(this._evalSeries[seriesIx]=doEval=evalOptions(options,{},state,!0));var pointOptions=options;return doEval&&evalOptions(pointOptions=deepExtend({},pointOptions),{value,category,index:categoryIx,series,dataItem:series.data[categoryIx]},state),pointOptions},CategoricalChart.prototype.updateRange=function updateRange(data,fields){var axisName=fields.series.axis,value=data.value,axisRange=this.valueAxisRanges[axisName];isFinite(value)&&null!==value&&((axisRange=this.valueAxisRanges[axisName]=axisRange||{min:MAX_VALUE,max:MIN_VALUE}).min=Math.min(axisRange.min,value),axisRange.max=Math.max(axisRange.max,value))},CategoricalChart.prototype.seriesValueAxis=function seriesValueAxis(series){var plotArea=this.plotArea,axisName=series.axis,axis=axisName?plotArea.namedValueAxes[axisName]:plotArea.valueAxis;if(!axis)throw new Error("Unable to locate value axis with name "+axisName);return axis},CategoricalChart.prototype.reflow=function reflow(targetBox){var this$1=this,categorySlots=this.categorySlots=[],chartPoints=this.points,categoryAxis=this.categoryAxis,pointIx=0;this.traverseDataPoints((function(data,fields){var categoryIx=fields.categoryIx,currentSeries=fields.series,valueAxis=this$1.seriesValueAxis(currentSeries),point=chartPoints[pointIx++],categorySlot=categorySlots[categoryIx];if(categorySlot||(categorySlots[categoryIx]=categorySlot=this$1.categorySlot(categoryAxis,categoryIx,valueAxis)),point){var plotRange=this$1.plotRange(point,valueAxis.startValue()),valueSlot=this$1.valueSlot(valueAxis,plotRange);if(valueSlot){var pointSlot=this$1.pointSlot(categorySlot,valueSlot);point.aboveAxis=this$1.aboveAxis(point,valueAxis),point.stackValue=plotRange[1],this$1.options.isStacked100&&(point.percentage=this$1.plotValue(point)),this$1.reflowPoint(point,pointSlot)}else point.visible=!1}})),this.reflowCategories(categorySlots),!this.options.clip&&this.options.limitPoints&&this.points.length&&this.limitPoints(),this.box=targetBox},CategoricalChart.prototype.valueSlot=function valueSlot(valueAxis,plotRange){return valueAxis.getSlot(plotRange[0],plotRange[1],!this.options.clip)},CategoricalChart.prototype.limitPoints=function limitPoints(){for(var categoryPoints=this.categoryPoints,points=categoryPoints[0].concat(last(categoryPoints)),idx=0;idx<points.length;idx++)points[idx]&&this.limitPoint(points[idx])},CategoricalChart.prototype.limitPoint=function limitPoint(point){var limitedSlot=this.categoryAxis.limitSlot(point.box);limitedSlot.equals(point.box)||point.reflow(limitedSlot)},CategoricalChart.prototype.aboveAxis=function aboveAxis(point,valueAxis){var axisCrossingValue=this.categoryAxisCrossingValue(valueAxis),value=point.value;return valueAxis.options.reverse?value<axisCrossingValue:value>=axisCrossingValue},CategoricalChart.prototype.categoryAxisCrossingValue=function categoryAxisCrossingValue(valueAxis){var categoryAxis=this.categoryAxis,options=valueAxis.options;return[].concat(options.axisCrossingValues||options.axisCrossingValue)[categoryAxis.axisIndex||0]||0},CategoricalChart.prototype.reflowPoint=function reflowPoint(point,pointSlot){point.reflow(pointSlot)},CategoricalChart.prototype.reflowCategories=function reflowCategories(){},CategoricalChart.prototype.pointSlot=function pointSlot(categorySlot,valueSlot){var invertAxes=this.options.invertAxes,slotX=invertAxes?valueSlot:categorySlot,slotY=invertAxes?categorySlot:valueSlot;return new core_box(slotX.x1,slotY.y1,slotX.x2,slotY.y2)},CategoricalChart.prototype.categorySlot=function categorySlot(categoryAxis,categoryIx){return categoryAxis.getSlot(categoryIx)},CategoricalChart.prototype.traverseDataPoints=function traverseDataPoints(callback){for(var series=this.options.series,count=categoriesCount(series),seriesCount=series.length,seriesIx=0;seriesIx<seriesCount;seriesIx++)this._outOfRangeCallback(series[seriesIx],"_outOfRangeMinPoint",seriesIx,callback);for(var categoryIx=0;categoryIx<count;categoryIx++)for(var seriesIx$1=0;seriesIx$1<seriesCount;seriesIx$1++){var currentSeries=series[seriesIx$1],currentCategory=this.categoryAxis.categoryAt(categoryIx);callback(this.plotArea.bindPoint(currentSeries,categoryIx),{category:currentCategory,categoryIx,categoriesCount:count,series:currentSeries,seriesIx:seriesIx$1})}for(var seriesIx$2=0;seriesIx$2<seriesCount;seriesIx$2++)this._outOfRangeCallback(series[seriesIx$2],"_outOfRangeMaxPoint",seriesIx$2,callback)},CategoricalChart.prototype._outOfRangeCallback=function _outOfRangeCallback(series,field,seriesIx,callback){var outOfRangePoint=series[field];if(outOfRangePoint){var categoryIx=outOfRangePoint.categoryIx;callback(this.plotArea.bindPoint(series,categoryIx,outOfRangePoint.item),{category:outOfRangePoint.category,categoryIx,series,seriesIx,dataItem:outOfRangePoint.item})}},CategoricalChart.prototype.formatPointValue=function formatPointValue(point,format){return null===point.value?"":this.chartService.format.auto(format,point.value)},CategoricalChart.prototype.pointValue=function pointValue(data){return data.valueFields.value},CategoricalChart}(chart_element);setDefaultOptions(CategoricalChart,{series:[],invertAxes:!1,isStacked:!1,clip:!0,limitPoints:!0});const categorical_chart=CategoricalChart;var PointEventsMixin={click:function(chart,e){return chart.trigger("seriesClick",this.eventArgs(e))},hover:function(chart,e){return chart.trigger("seriesHover",this.eventArgs(e))},over:function(chart,e){return chart.trigger("seriesOver",this.eventArgs(e))},out:function(chart,e){return chart.trigger("seriesLeave",this.eventArgs(e))},eventArgs:function(e){return{value:this.value,percentage:this.percentage,stackValue:this.stackValue,category:this.category,series:this.series,dataItem:this.dataItem,runningTotal:this.runningTotal,total:this.total,element:eventElement(e),originalEvent:e,point:this}}};const point_events_mixin=PointEventsMixin;const note_mixin={createNote:function(){var options=this.options.notes,text=this.noteText||options.label.text;!1!==options.visible&&drawing_utils_defined(text)&&null!==text&&(this.note=new core_note({value:this.value,text,dataItem:this.dataItem,category:this.category,series:this.series},this.options.notes,this.owner.chartService),this.append(this.note))}};var LinePoint=function(ChartElement){function LinePoint(value,options){ChartElement.call(this),this.value=value,this.options=options,this.aboveAxis=valueOrDefault(this.options.aboveAxis,!0),this.tooltipTracking=!0}return ChartElement&&(LinePoint.__proto__=ChartElement),LinePoint.prototype=Object.create(ChartElement&&ChartElement.prototype),LinePoint.prototype.constructor=LinePoint,LinePoint.prototype.render=function render(){var ref=this.options,markers=ref.markers,labels=ref.labels;if(!this._rendered){if(this._rendered=!0,markers.visible&&markers.size&&(this.marker=this.createMarker(),this.append(this.marker)),labels.visible){var labelTemplate=getTemplate(labels),pointData=this.pointData(),labelText=this.value;labelTemplate?labelText=labelTemplate(pointData):labels.format&&(labelText=this.formatValue(labels.format)),this.label=new text_box(labelText,deepExtend({align:CENTER,vAlign:CENTER,margin:{left:5,right:5},zIndex:valueOrDefault(labels.zIndex,this.series.zIndex)},labels),pointData),this.append(this.label)}this.createNote(),this.errorBar&&this.append(this.errorBar)}},LinePoint.prototype.markerBorder=function markerBorder(){var options=this.options.markers,background=options.background,border=deepExtend({color:this.color},options.border);return drawing_utils_defined(border.color)||(border.color=new color_color.A(background).brightness(.8).toHex()),border},LinePoint.prototype.createVisual=function createVisual(){},LinePoint.prototype.createMarker=function createMarker(){var options=this.options.markers;return new shape_element({type:options.type,width:options.size,height:options.size,rotation:options.rotation,background:options.background,border:this.markerBorder(),opacity:options.opacity,zIndex:valueOrDefault(options.zIndex,this.series.zIndex),animation:options.animation,visual:options.visual},{dataItem:this.dataItem,value:this.value,series:this.series,category:this.category})},LinePoint.prototype.markerBox=function markerBox(){return this.marker||(this.marker=this.createMarker(),this.marker.reflow(this._childBox)),this.marker.box},LinePoint.prototype.reflow=function reflow(targetBox){var options=this.options,aboveAxis=this.aboveAxis,vertical=options.vertical;this.render(),this.box=targetBox;var childBox=targetBox.clone();if(vertical?aboveAxis?childBox.y1-=childBox.height():childBox.y2+=childBox.height():aboveAxis?childBox.x1+=childBox.width():childBox.x2-=childBox.width(),this._childBox=childBox,this.marker&&this.marker.reflow(childBox),this.reflowLabel(childBox),this.errorBars)for(var i=0;i<this.errorBars.length;i++)this.errorBars[i].reflow(childBox);if(this.note){var noteTargetBox=this.markerBox();if(!options.markers.visible||!options.markers.size){var center=noteTargetBox.center();noteTargetBox=new core_box(center.x,center.y,center.x,center.y)}this.note.reflow(noteTargetBox)}},LinePoint.prototype.reflowLabel=function reflowLabel(box){var options=this.options,label=this.label,anchor=options.labels.position;label&&(anchor="below"===(anchor="above"===anchor?TOP:anchor)?BOTTOM:anchor,label.reflow(box),label.box.alignTo(this.markerBox(),anchor),label.reflow(label.box))},LinePoint.prototype.createHighlight=function createHighlight(){var markers=this.options.highlight.markers,defaultColor=this.markerBorder().color,options=this.options.markers,size=options.size+(options.border.width||0)+(markers.border.width||0),shadow=new shape_element({type:options.type,width:size,height:size,rotation:options.rotation,background:markers.color||defaultColor,border:{color:markers.border.color,width:markers.border.width,opacity:valueOrDefault(markers.border.opacity,1)},opacity:valueOrDefault(markers.opacity,1)});return shadow.reflow(this._childBox),shadow.getElement()},LinePoint.prototype.highlightVisual=function highlightVisual(){return(this.marker||{}).visual},LinePoint.prototype.highlightVisualArgs=function highlightVisualArgs(){var visual,rect,marker=this.marker;if(marker)rect=marker.paddingBox.toRect(),visual=marker.visual;else{var size=this.options.markers.size,halfSize=size/2,center=this.box.center();rect=new geometry_rect.A([center.x-halfSize,center.y-halfSize],[size,size])}return{options:this.options,rect,visual}},LinePoint.prototype.tooltipAnchor=function tooltipAnchor(){var markerBox=this.markerBox(),clipBox=this.owner.pane.clipBox();if(!clipBox||clipBox.overlaps(markerBox)){var y,verticalAlign,x=markerBox.x2+5,horizontalAlign=LEFT;return this.aboveAxis?(y=markerBox.y1,verticalAlign=BOTTOM):(y=markerBox.y2,verticalAlign=TOP),{point:new core_point(x,y),align:{horizontal:horizontalAlign,vertical:verticalAlign}}}},LinePoint.prototype.formatValue=function formatValue(format){return this.owner.formatPointValue(this,format)},LinePoint.prototype.overlapsBox=function overlapsBox(box){return this.markerBox().overlaps(box)},LinePoint.prototype.unclipElements=function unclipElements(){this.label&&(this.label.options.noclip=!0),this.note&&(this.note.options.noclip=!0)},LinePoint.prototype.pointData=function pointData(){return{dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,stackValue:this.stackValue,series:this.series}},LinePoint}(chart_element);LinePoint.prototype.defaults={vertical:!0,markers:{visible:!0,background:WHITE,size:8,type:CIRCLE,border:{width:2},opacity:1},labels:{visible:!1,position:"above",margin:getSpacing(3),padding:getSpacing(4),animation:{type:"fadeIn",delay:600}},notes:{label:{}},highlight:{markers:{border:{color:"#fff",width:2}},zIndex:100},errorBars:{line:{width:1}}},deepExtend(LinePoint.prototype,point_events_mixin),deepExtend(LinePoint.prototype,note_mixin);const line_point=LinePoint;var LineSegment=function(ChartElement){function LineSegment(linePoints,series,seriesIx){ChartElement.call(this),this.linePoints=linePoints,this.series=series,this.seriesIx=seriesIx}return ChartElement&&(LineSegment.__proto__=ChartElement),LineSegment.prototype=Object.create(ChartElement&&ChartElement.prototype),LineSegment.prototype.constructor=LineSegment,LineSegment.prototype.points=function points(){return this.toGeometryPoints(this.linePoints)},LineSegment.prototype.toGeometryPoints=function toGeometryPoints(points){for(var result=[],i=0,length=points.length;i<length;i++)points[i]&&!1!==points[i].visible&&result.push(points[i]._childBox.toRect().center());return result},LineSegment.prototype.createVisual=function createVisual(){var this$1=this,customVisual=this.series.visual;customVisual?(this.visual=customVisual({points:this.toGeometryPoints(this.linePoints),series:this.series,sender:this.getSender(),createVisual:function(){return this$1.segmentVisual(),this$1.visual}}),this.visual&&!drawing_utils_defined(this.visual.options.zIndex)&&(this.visual.options.zIndex=this.series.zIndex)):this.segmentVisual()},LineSegment.prototype.segmentVisual=function segmentVisual(){var options=this.options,series=this.series,color=series.color,defaults=series._defaults;isFunction(color)&&defaults&&(color=defaults.color);var line=shapes_path.w.fromPoints(this.points(),{stroke:{color,width:series.width,opacity:series.opacity,dashType:series.dashType},zIndex:series.zIndex});options.closed&&line.close(),this.visual=line},LineSegment.prototype.aliasFor=function aliasFor(e,coords){return this.parent.getNearestPoint(coords.x,coords.y,this.seriesIx)},LineSegment}(chart_element);setDefaultOptions(LineSegment,{closed:!1});const line_segment=LineSegment;var StepLineMixin={calculateStepPoints:function(points){for(var ref=this.parent.plotArea.seriesCategoryAxis(this.series).options,justified=ref.justified,vertical=ref.vertical,reverse=ref.reverse,stepAxis=vertical?X:Y,axis=vertical?Y:X,stepDir=reverse?2:1,dir=stepDir,previousPoint=toGeometryPoint(points[0],stepAxis,stepDir,axis,dir),result=[previousPoint],idx=1;idx<points.length;idx++){var point=toGeometryPoint(points[idx],stepAxis,stepDir,axis,dir);if(previousPoint[stepAxis]!==point[stepAxis]){var stepPoint=new geometry_point.A;stepPoint[stepAxis]=previousPoint[stepAxis],stepPoint[axis]=point[axis],result.push(stepPoint,point)}previousPoint=point}return justified?previousPoint!==last(result)&&result.push(previousPoint):result.push(toGeometryPoint(last(points),stepAxis,stepDir,axis,reverse?1:2)),result}};function toGeometryPoint(lintPoint,stepAxis,stepDir,axis,dir){var box=lintPoint.box,result=new geometry_point.A;return result[stepAxis]=box[stepAxis+stepDir],result[axis]=box[axis+dir],result}const step_line_mixin=StepLineMixin;var StepLineSegment=function(LineSegment){function StepLineSegment(){LineSegment.apply(this,arguments)}return LineSegment&&(StepLineSegment.__proto__=LineSegment),StepLineSegment.prototype=Object.create(LineSegment&&LineSegment.prototype),StepLineSegment.prototype.constructor=StepLineSegment,StepLineSegment.prototype.points=function points(){return this.calculateStepPoints(this.linePoints)},StepLineSegment}(line_segment);deepExtend(StepLineSegment.prototype,step_line_mixin);const step_line_segment=StepLineSegment;var SplineSegment=function(LineSegment){function SplineSegment(){LineSegment.apply(this,arguments)}return LineSegment&&(SplineSegment.__proto__=LineSegment),SplineSegment.prototype=Object.create(LineSegment&&LineSegment.prototype),SplineSegment.prototype.constructor=SplineSegment,SplineSegment.prototype.segmentVisual=function segmentVisual(){var series=this.series,defaults=series._defaults,color=series.color;isFunction(color)&&defaults&&(color=defaults.color);var segments=new curve_processor(this.options.closed).process(this.points()),curve=new shapes_path.w({stroke:{color,width:series.width,opacity:series.opacity,dashType:series.dashType},zIndex:series.zIndex});curve.segments.push.apply(curve.segments,segments),this.visual=curve},SplineSegment}(line_segment);const spline_segment=SplineSegment;var LineChartMixin={renderSegments:function(){var lastSegment,options=this.options,seriesPoints=this.seriesPoints,series=options.series,seriesCount=seriesPoints.length;this._segments=[];for(var seriesIx=0;seriesIx<seriesCount;seriesIx++){for(var currentSeries=series[seriesIx],sortedPoints=this.sortPoints(seriesPoints[seriesIx]),pointCount=sortedPoints.length,linePoints=[],pointIx=0;pointIx<pointCount;pointIx++){var point=sortedPoints[pointIx];point?linePoints.push(point):"interpolate"!==this.seriesMissingValues(currentSeries)&&(linePoints.length>1&&(lastSegment=this.createSegment(linePoints,currentSeries,seriesIx,lastSegment),this._addSegment(lastSegment)),linePoints=[])}linePoints.length>1&&(lastSegment=this.createSegment(linePoints,currentSeries,seriesIx,lastSegment),this._addSegment(lastSegment))}this.children.unshift.apply(this.children,this._segments)},_addSegment:function(segment){this._segments.push(segment),segment.parent=this},sortPoints:function(points){return points},seriesMissingValues:function(series){var missingValues=series.missingValues;return!missingValues&&this.options.isStacked?ZERO:missingValues||"interpolate"},getNearestPoint:function(x,y,seriesIx){for(var nearestPoint,target=new core_point(x,y),allPoints=this.seriesPoints[seriesIx],nearestPointDistance=MAX_VALUE,i=0;i<allPoints.length;i++){var point=allPoints[i];if(point&&drawing_utils_defined(point.value)&&null!==point.value&&!1!==point.visible){var pointDistance=point.box.center().distanceTo(target);pointDistance<nearestPointDistance&&(nearestPoint=point,nearestPointDistance=pointDistance)}}return nearestPoint}};const line_chart_mixin=LineChartMixin;var ClipAnimation=function(superclass){function ClipAnimation(){superclass.apply(this,arguments)}return superclass&&(ClipAnimation.__proto__=superclass),ClipAnimation.prototype=Object.create(superclass&&superclass.prototype),ClipAnimation.prototype.constructor=ClipAnimation,ClipAnimation.prototype.setup=function setup(){this._setEnd(this.options.box.x1)},ClipAnimation.prototype.step=function step(pos){var box=this.options.box;this._setEnd(interpolateValue(box.x1,box.x2,pos))},ClipAnimation.prototype._setEnd=function _setEnd(x){var element=this.element,segments=element.segments,topRight=segments[1].anchor(),bottomRight=segments[2].anchor();element.suspend(),topRight.setX(x),element.resume(),bottomRight.setX(x)},ClipAnimation}(animation);setDefaultOptions(ClipAnimation,{duration:600}),animation_factory.current.register("clip",ClipAnimation);const clip_animation=ClipAnimation;const clip_animation_mixin={createAnimation:function(){var root=this.getRoot();if(root&&!1!==(root.options||{}).transitions){var box=root.size(),clipPath=shapes_path.w.fromRect(box.toRect());this.visual.clip(clipPath),this.animation=new clip_animation(clipPath,{box}),anyHasZIndex(this.options.series)&&this._setChildrenAnimation(clipPath)}},_setChildrenAnimation:function(clipPath){for(var points=this.animationPoints(),idx=0;idx<points.length;idx++){var point=points[idx];point&&point.visual&&drawing_utils_defined(point.visual.options.zIndex)&&point.visual.clip(clipPath)}}};var LineChart=function(CategoricalChart){function LineChart(){CategoricalChart.apply(this,arguments)}return CategoricalChart&&(LineChart.__proto__=CategoricalChart),LineChart.prototype=Object.create(CategoricalChart&&CategoricalChart.prototype),LineChart.prototype.constructor=LineChart,LineChart.prototype.render=function render(){CategoricalChart.prototype.render.call(this),this.updateStackRange(),this.renderSegments()},LineChart.prototype.pointType=function pointType(){return line_point},LineChart.prototype.createPoint=function createPoint(data,fields){var series=fields.series,seriesIx=fields.seriesIx,missingValues=this.seriesMissingValues(series),value=data.valueFields.value;if(!drawing_utils_defined(value)||null===value){if(missingValues!==ZERO)return null;value=0}var pointOptions=this.pointOptions(series,seriesIx);pointOptions=this.evalPointOptions(pointOptions,value,fields);var color=data.fields.color||series.color;isFunction(series.color)&&(color=pointOptions.color);var point=new line_point(value,pointOptions);return point.color=color,this.append(point),point},LineChart.prototype.plotRange=function plotRange(point){var plotValue=this.plotValue(point);if(this.options.isStacked)for(var categoryIx=point.categoryIx,categoryPoints=this.categoryPoints[categoryIx],i=0;i<categoryPoints.length;i++){var other=categoryPoints[i];if(point===other)break;plotValue+=this.plotValue(other),this.options.isStacked100&&(plotValue=Math.min(plotValue,1))}return[plotValue,plotValue]},LineChart.prototype.createSegment=function createSegment(linePoints,currentSeries,seriesIx){var style=currentSeries.style;return new("step"===style?step_line_segment:"smooth"===style?spline_segment:line_segment)(linePoints,currentSeries,seriesIx)},LineChart.prototype.animationPoints=function animationPoints(){for(var points=this.points,result=[],idx=0;idx<points.length;idx++)result.push((points[idx]||{}).marker);return result.concat(this._segments)},LineChart.prototype.supportsPointInactiveOpacity=function supportsPointInactiveOpacity(){return!1},LineChart}(categorical_chart);deepExtend(LineChart.prototype,line_chart_mixin,clip_animation_mixin);const line_chart=LineChart;var AreaSegment=function(LineSegment){function AreaSegment(linePoints,currentSeries,seriesIx,prevSegment,stackPoints){LineSegment.call(this,linePoints,currentSeries,seriesIx),this.prevSegment=prevSegment,this.stackPoints=stackPoints}return LineSegment&&(AreaSegment.__proto__=LineSegment),AreaSegment.prototype=Object.create(LineSegment&&LineSegment.prototype),AreaSegment.prototype.constructor=AreaSegment,AreaSegment.prototype.createVisual=function createVisual(){var series=this.series,defaults=series._defaults,lineOptions=series.line||{},color=series.color;isFunction(color)&&defaults&&(color=defaults.color),this.visual=new shapes_group.A({zIndex:series.zIndex}),this.createFill({fill:{color,opacity:series.opacity},stroke:null}),lineOptions.width>0&&!1!==lineOptions.visible&&this.createStroke({stroke:deepExtend({color,opacity:series.opacity,lineCap:"butt"},lineOptions)})},AreaSegment.prototype.strokeSegments=function strokeSegments(){var segments=this._strokeSegments;return segments||(segments=this._strokeSegments=this.createStrokeSegments()),segments},AreaSegment.prototype.createStrokeSegments=function createStrokeSegments(){return this.segmentsFromPoints(this.points())},AreaSegment.prototype.stackSegments=function stackSegments(){return this.prevSegment?this.prevSegment.createStackSegments(this.stackPoints):this.createStackSegments(this.stackPoints)},AreaSegment.prototype.createStackSegments=function createStackSegments(stackPoints){return this.segmentsFromPoints(this.toGeometryPoints(stackPoints)).reverse()},AreaSegment.prototype.segmentsFromPoints=function segmentsFromPoints(points){return points.map((function(point){return new geometry_segment.A(point)}))},AreaSegment.prototype.createStroke=function createStroke(style){var stroke=new shapes_path.w(style);stroke.segments.push.apply(stroke.segments,this.strokeSegments()),this.visual.append(stroke)},AreaSegment.prototype.hasStackSegment=function hasStackSegment(){return this.prevSegment||this.stackPoints&&this.stackPoints.length},AreaSegment.prototype.createFill=function createFill(style){var strokeSegments=this.strokeSegments(),fillSegments=strokeSegments.slice(0),hasStackSegments=this.hasStackSegment();if(hasStackSegments){var stackSegments=this.stackSegments();append(fillSegments,stackSegments)}var fill=new shapes_path.w(style);fill.segments.push.apply(fill.segments,fillSegments),!hasStackSegments&&strokeSegments.length>1&&this.fillToAxes(fill),this.visual.append(fill)},AreaSegment.prototype.fillToAxes=function fillToAxes(fillPath){var chart=this.parent,invertAxes=chart.options.invertAxes,valueAxis=chart.seriesValueAxis(this.series),crossingValue=chart.categoryAxisCrossingValue(valueAxis),endSlot=valueAxis.getSlot(crossingValue,crossingValue,!0),segments=this.strokeSegments(),firstPoint=segments[0].anchor(),lastPoint=last(segments).anchor(),end=invertAxes?endSlot.x1:endSlot.y1;invertAxes?fillPath.lineTo(end,lastPoint.y).lineTo(end,firstPoint.y):fillPath.lineTo(lastPoint.x,end).lineTo(firstPoint.x,end)},AreaSegment}(line_segment);const area_segment=AreaSegment;var StepAreaSegment=function(AreaSegment){function StepAreaSegment(){AreaSegment.apply(this,arguments)}return AreaSegment&&(StepAreaSegment.__proto__=AreaSegment),StepAreaSegment.prototype=Object.create(AreaSegment&&AreaSegment.prototype),StepAreaSegment.prototype.constructor=StepAreaSegment,StepAreaSegment.prototype.createStrokeSegments=function createStrokeSegments(){return this.segmentsFromPoints(this.calculateStepPoints(this.linePoints))},StepAreaSegment.prototype.createStackSegments=function createStackSegments(stackPoints){return this.segmentsFromPoints(this.calculateStepPoints(stackPoints)).reverse()},StepAreaSegment}(area_segment);deepExtend(StepAreaSegment.prototype,step_line_mixin);const step_area_segment=StepAreaSegment;var SplineAreaSegment=function(AreaSegment){function SplineAreaSegment(){AreaSegment.apply(this,arguments)}return AreaSegment&&(SplineAreaSegment.__proto__=AreaSegment),SplineAreaSegment.prototype=Object.create(AreaSegment&&AreaSegment.prototype),SplineAreaSegment.prototype.constructor=SplineAreaSegment,SplineAreaSegment.prototype.createStrokeSegments=function createStrokeSegments(){var curveProcessor=new curve_processor(this.options.closed),linePoints=this.points();return curveProcessor.process(linePoints)},SplineAreaSegment.prototype.createStackSegments=function createStackSegments(){for(var strokeSegments=this.strokeSegments(),stackSegments=[],idx=strokeSegments.length-1;idx>=0;idx--){var segment=strokeSegments[idx];stackSegments.push(new geometry_segment.A(segment.anchor(),segment.controlOut(),segment.controlIn()))}return stackSegments},SplineAreaSegment}(area_segment);const spline_area_segment=SplineAreaSegment;var AreaChart=function(LineChart){function AreaChart(){LineChart.apply(this,arguments)}return LineChart&&(AreaChart.__proto__=LineChart),AreaChart.prototype=Object.create(LineChart&&LineChart.prototype),AreaChart.prototype.constructor=AreaChart,AreaChart.prototype.createSegment=function createSegment(linePoints,currentSeries,seriesIx,prevSegment){var previousSegment,stackPoints,isStacked=this.options.isStacked,style=(currentSeries.line||{}).style;isStacked&&seriesIx>0&&prevSegment&&("gap"!==this.seriesMissingValues(currentSeries)?(stackPoints=prevSegment.linePoints,previousSegment=prevSegment):stackPoints=this._gapStackPoints(linePoints,seriesIx,style));return new("step"===style?step_area_segment:"smooth"===style?spline_area_segment:area_segment)(linePoints,currentSeries,seriesIx,previousSegment,stackPoints)},AreaChart.prototype.reflow=function reflow(targetBox){LineChart.prototype.reflow.call(this,targetBox);var stackPoints=this._stackPoints;if(stackPoints)for(var idx=0;idx<stackPoints.length;idx++){var stackPoint=stackPoints[idx],pointSlot=this.categoryAxis.getSlot(stackPoint.categoryIx);stackPoint.reflow(pointSlot)}},AreaChart.prototype._gapStackPoints=function _gapStackPoints(linePoints,seriesIx,style){var seriesPoints=this.seriesPoints,startIdx=linePoints[0].categoryIx,length=linePoints.length;startIdx<0&&(startIdx=0,length--);var endIdx=startIdx+length,pointOffset=this.seriesOptions[0]._outOfRangeMinPoint?1:0,stackPoints=[];this._stackPoints=this._stackPoints||[];for(var categoryIx=startIdx;categoryIx<endIdx;categoryIx++){var pointIx=categoryIx+pointOffset,currentSeriesIx=seriesIx,point=void 0;do{point=seriesPoints[--currentSeriesIx][pointIx]}while(currentSeriesIx>0&&!point);if(point)"step"!==style&&categoryIx>startIdx&&!seriesPoints[currentSeriesIx][pointIx-1]&&stackPoints.push(this._previousSegmentPoint(categoryIx,pointIx,pointIx-1,currentSeriesIx)),stackPoints.push(point),"step"!==style&&categoryIx+1<endIdx&&!seriesPoints[currentSeriesIx][pointIx+1]&&stackPoints.push(this._previousSegmentPoint(categoryIx,pointIx,pointIx+1,currentSeriesIx));else{var gapStackPoint=this._createGapStackPoint(categoryIx);this._stackPoints.push(gapStackPoint),stackPoints.push(gapStackPoint)}}return stackPoints},AreaChart.prototype._previousSegmentPoint=function _previousSegmentPoint(categoryIx,pointIx,segmentIx,seriesIdx){for(var point,seriesPoints=this.seriesPoints,index=seriesIdx;index>0&&!point;)point=seriesPoints[--index][segmentIx];return point?point=seriesPoints[index][pointIx]:(point=this._createGapStackPoint(categoryIx),this._stackPoints.push(point)),point},AreaChart.prototype._createGapStackPoint=function _createGapStackPoint(categoryIx){var options=this.pointOptions({},0),point=new line_point(0,options);return point.categoryIx=categoryIx,point.series={},point},AreaChart.prototype.seriesMissingValues=function seriesMissingValues(series){return series.missingValues||ZERO},AreaChart.prototype.supportsPointInactiveOpacity=function supportsPointInactiveOpacity(){return!1},AreaChart}(line_chart);const area_chart=AreaChart;var AxisGroupRangeTracker=function(Class){function AxisGroupRangeTracker(){Class.call(this),this.axisRanges={}}return Class&&(AxisGroupRangeTracker.__proto__=Class),AxisGroupRangeTracker.prototype=Object.create(Class&&Class.prototype),AxisGroupRangeTracker.prototype.constructor=AxisGroupRangeTracker,AxisGroupRangeTracker.prototype.update=function update(chartAxisRanges){var axisRanges=this.axisRanges;for(var axisName in chartAxisRanges){var chartRange=chartAxisRanges[axisName],range=axisRanges[axisName];axisRanges[axisName]=range=range||{min:MAX_VALUE,max:MIN_VALUE},range.min=Math.min(range.min,chartRange.min),range.max=Math.max(range.max,chartRange.max)}},AxisGroupRangeTracker.prototype.reset=function reset(axisName){this.axisRanges[axisName]=void 0},AxisGroupRangeTracker.prototype.query=function query(axisName){return this.axisRanges[axisName]},AxisGroupRangeTracker}(common_class.A);const axis_group_range_tracker=AxisGroupRangeTracker;var BarLabel=function(ChartElement){function BarLabel(content,options,pointData){ChartElement.call(this,options),this.textBox=new text_box(content,this.options,pointData),this.append(this.textBox)}return ChartElement&&(BarLabel.__proto__=ChartElement),BarLabel.prototype=Object.create(ChartElement&&ChartElement.prototype),BarLabel.prototype.constructor=BarLabel,BarLabel.prototype.createVisual=function createVisual(){this.textBox.options.noclip=this.options.noclip},BarLabel.prototype.reflow=function reflow(targetBox){var options=this.options,vertical=options.vertical,aboveAxis=options.aboveAxis,text=this.children[0],textOptions=text.options,box=text.box,padding=text.options.padding,labelBox=targetBox;textOptions.align=vertical?CENTER:LEFT,textOptions.vAlign=vertical?TOP:CENTER,"insideEnd"===options.position?vertical?(textOptions.vAlign=TOP,!aboveAxis&&box.height()<targetBox.height()&&(textOptions.vAlign=BOTTOM)):textOptions.align=aboveAxis?RIGHT:LEFT:options.position===CENTER?(textOptions.vAlign=CENTER,textOptions.align=CENTER):"insideBase"===options.position?vertical?textOptions.vAlign=aboveAxis?BOTTOM:TOP:textOptions.align=aboveAxis?LEFT:RIGHT:"outsideEnd"===options.position&&(vertical?labelBox=aboveAxis?new core_box(targetBox.x1,targetBox.y1-box.height(),targetBox.x2,targetBox.y1):new core_box(targetBox.x1,targetBox.y2,targetBox.x2,targetBox.y2+box.height()):(textOptions.align=CENTER,labelBox=aboveAxis?new core_box(targetBox.x2,targetBox.y1,targetBox.x2+box.width(),targetBox.y2):new core_box(targetBox.x1-box.width(),targetBox.y1,targetBox.x1,targetBox.y2))),options.rotation||(vertical?padding.left=padding.right=(labelBox.width()-text.contentBox.width())/2:padding.top=padding.bottom=(labelBox.height()-text.contentBox.height())/2),text.reflow(labelBox)},BarLabel.prototype.alignToClipBox=function alignToClipBox(clipBox){var field=this.options.vertical?Y:X,start=field+"1",end=field+"2",text=this.children[0],parentBox=this.parent.box;if(parentBox[start]<clipBox[start]||clipBox[end]<parentBox[end]){var targetBox=text.paddingBox.clone();targetBox[start]=Math.max(parentBox[start],clipBox[start]),targetBox[end]=Math.min(parentBox[end],clipBox[end]),this.reflow(targetBox)}},BarLabel}(chart_element);setDefaultOptions(BarLabel,{position:"outsideEnd",margin:getSpacing(3),padding:getSpacing(4),color:BLACK,background:"",border:{width:1,color:""},aboveAxis:!0,vertical:!1,animation:{type:"fadeIn",delay:600},zIndex:2});const bar_label=BarLabel;var Bar=function(ChartElement){function Bar(value,options){ChartElement.call(this),this.options=options,this.color=options.color||WHITE,this.aboveAxis=valueOrDefault(this.options.aboveAxis,!0),this.value=value}return ChartElement&&(Bar.__proto__=ChartElement),Bar.prototype=Object.create(ChartElement&&ChartElement.prototype),Bar.prototype.constructor=Bar,Bar.prototype.render=function render(){this._rendered||(this._rendered=!0,this.createLabel(),this.createNote(),this.errorBar&&this.append(this.errorBar))},Bar.prototype.createLabel=function createLabel(){var options=this.options,labels=options.labels;if(labels.visible){var labelText,pointData=this.pointData(),labelTemplate=getTemplate(labels);labelText=labelTemplate?labelTemplate(pointData):this.formatValue(labels.format),this.label=new bar_label(labelText,deepExtend({vertical:options.vertical},labels),pointData),this.append(this.label)}},Bar.prototype.formatValue=function formatValue(format){return this.owner.formatPointValue(this,format)},Bar.prototype.reflow=function reflow(targetBox){this.render();var label=this.label;if(this.box=targetBox,label&&(label.options.aboveAxis=this.aboveAxis,label.reflow(targetBox)),this.note&&this.note.reflow(targetBox),this.errorBars)for(var i=0;i<this.errorBars.length;i++)this.errorBars[i].reflow(targetBox)},Bar.prototype.createVisual=function createVisual(){var this$1=this,box=this.box,options=this.options,customVisual=options.visual;if(!1!==this.visible)if(ChartElement.prototype.createVisual.call(this),customVisual){var visual=this.rectVisual=customVisual({category:this.category,dataItem:this.dataItem,value:this.value,sender:this.getSender(),series:this.series,percentage:this.percentage,stackValue:this.stackValue,runningTotal:this.runningTotal,total:this.total,rect:box.toRect(),createVisual:function(){var group=new shapes_group.A;return this$1.createRect(group),group},options});visual&&this.visual.append(visual)}else box.width()>0&&box.height()>0&&this.createRect(this.visual)},Bar.prototype.createRect=function createRect(visual){var options=this.options,border=options.border,strokeOpacity=drawing_utils_defined(border.opacity)?border.opacity:options.opacity,rect=this.box.toRect();rect.size.width=Math.round(rect.size.width);var path=this.rectVisual=shapes_path.w.fromRect(rect,{fill:{color:this.color,opacity:options.opacity},stroke:{color:this.getBorderColor(),width:border.width,opacity:strokeOpacity,dashType:border.dashType}}),width=this.box.width(),height=this.box.height();if((options.vertical?width:height)>6&&(alignPathToPixel(path),(width<1||height<1)&&(path.options.stroke.lineJoin="round")),visual.append(path),hasGradientOverlay(options)){var overlay=this.createGradientOverlay(path,{baseColor:this.color},deepExtend({end:options.vertical?void 0:[0,1]},options.overlay));visual.append(overlay)}},Bar.prototype.createHighlight=function createHighlight(style){return alignPathToPixel(shapes_path.w.fromRect(this.box.toRect(),style))},Bar.prototype.highlightVisual=function highlightVisual(){return this.rectVisual},Bar.prototype.highlightVisualArgs=function highlightVisualArgs(){return{options:this.options,rect:this.box.toRect(),visual:this.rectVisual}},Bar.prototype.getBorderColor=function getBorderColor(){var color=this.color,border=this.options.border,brightness=border._brightness||.8,borderColor=border.color;return drawing_utils_defined(borderColor)||(borderColor=new color_color.A(color).brightness(brightness).toHex()),borderColor},Bar.prototype.tooltipAnchor=function tooltipAnchor(){var x,y,options=this.options,box=this.box,aboveAxis=this.aboveAxis,clipBox=this.owner.pane.clipBox()||box,horizontalAlign=LEFT,verticalAlign=TOP;if(options.vertical)x=Math.min(box.x2,clipBox.x2)+5,aboveAxis?y=Math.max(box.y1,clipBox.y1):(y=Math.min(box.y2,clipBox.y2),verticalAlign=BOTTOM);else{var x1=Math.max(box.x1,clipBox.x1),x2=Math.min(box.x2,clipBox.x2);options.isStacked?(verticalAlign=BOTTOM,aboveAxis?(horizontalAlign=RIGHT,x=x2):x=x1,y=Math.max(box.y1,clipBox.y1)-5):(aboveAxis?x=x2+5:(x=x1-5,horizontalAlign=RIGHT),y=Math.max(box.y1,clipBox.y1))}return{point:new core_point(x,y),align:{horizontal:horizontalAlign,vertical:verticalAlign}}},Bar.prototype.overlapsBox=function overlapsBox(box){return this.box.overlaps(box)},Bar.prototype.pointData=function pointData(){return{dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,stackValue:this.stackValue,runningTotal:this.runningTotal,total:this.total,series:this.series}},Bar}(chart_element);deepExtend(Bar.prototype,point_events_mixin),deepExtend(Bar.prototype,note_mixin),Bar.prototype.defaults={border:{width:1},vertical:!0,overlay:{gradient:"glass"},labels:{visible:!1,format:"{0}"},opacity:1,notes:{label:{}}};const bar=Bar;function forEach(elements,callback){elements.forEach(callback)}function forEachReverse(elements,callback){for(var length=elements.length,idx=length-1;idx>=0;idx--)callback(elements[idx],idx-length-1)}var ClusterLayout=function(ChartElement){function ClusterLayout(options){ChartElement.call(this,options),this.forEach=options.rtl?forEachReverse:forEach}return ChartElement&&(ClusterLayout.__proto__=ChartElement),ClusterLayout.prototype=Object.create(ChartElement&&ChartElement.prototype),ClusterLayout.prototype.constructor=ClusterLayout,ClusterLayout.prototype.reflow=function reflow(box){var ref=this.options,vertical=ref.vertical,gap=ref.gap,spacing=ref.spacing,children=this.children,count=children.length,axis=vertical?Y:X,slots=count+gap+spacing*(count-1),slotSize=(vertical?box.height():box.width())/slots,position=box[axis+1]+slotSize*(gap/2);this.forEach(children,(function(child,idx){var childBox=(child.box||box).clone();childBox[axis+1]=position,childBox[axis+2]=position+slotSize,child.reflow(childBox),idx<count-1&&(position+=slotSize*spacing),position+=slotSize}))},ClusterLayout}(chart_element);setDefaultOptions(ClusterLayout,{vertical:!1,gap:0,spacing:0});const cluster_layout=ClusterLayout;var StackWrap=function(ChartElement){function StackWrap(){ChartElement.apply(this,arguments)}return ChartElement&&(StackWrap.__proto__=ChartElement),StackWrap.prototype=Object.create(ChartElement&&ChartElement.prototype),StackWrap.prototype.constructor=StackWrap,StackWrap.prototype.reflow=function reflow(targetBox){for(var positionAxis=this.options.vertical?X:Y,children=this.children,childrenCount=children.length,box=this.box=new core_box,i=0;i<childrenCount;i++){var currentChild=children[i];if(!1!==currentChild.visible){var childBox=currentChild.box.clone();childBox.snapTo(targetBox,positionAxis),0===i&&(box=this.box=childBox.clone()),currentChild.reflow(childBox),box.wrap(childBox)}}},StackWrap}(chart_element);setDefaultOptions(StackWrap,{vertical:!0});const stack_wrap=StackWrap;var BarChart=function(CategoricalChart){function BarChart(){CategoricalChart.apply(this,arguments)}return CategoricalChart&&(BarChart.__proto__=CategoricalChart),BarChart.prototype=Object.create(CategoricalChart&&CategoricalChart.prototype),BarChart.prototype.constructor=BarChart,BarChart.prototype.render=function render(){CategoricalChart.prototype.render.call(this),this.updateStackRange()},BarChart.prototype.pointType=function pointType(){return bar},BarChart.prototype.clusterType=function clusterType(){return cluster_layout},BarChart.prototype.stackType=function stackType(){return stack_wrap},BarChart.prototype.stackLimits=function stackLimits(axisName,stackName){return CategoricalChart.prototype.stackLimits.call(this,axisName,stackName)},BarChart.prototype.createPoint=function createPoint(data,fields){var categoryIx=fields.categoryIx,series=fields.series,seriesIx=fields.seriesIx,options=this.options,children=this.children,isStacked=options.isStacked,value=this.pointValue(data),pointOptions=this.pointOptions(series,seriesIx),labelOptions=pointOptions.labels;isStacked&&"outsideEnd"===labelOptions.position&&(labelOptions.position="insideEnd"),pointOptions.isStacked=isStacked;var color=data.fields.color||series.color;value<0&&pointOptions.negativeColor&&(color=pointOptions.negativeColor),pointOptions=this.evalPointOptions(pointOptions,value,fields),isFunction(series.color)&&(color=pointOptions.color);var point=new(this.pointType())(value,pointOptions);point.color=color;var cluster=children[categoryIx];cluster||(cluster=new(this.clusterType())({vertical:options.invertAxes,gap:options.gap,spacing:options.spacing,rtl:!options.invertAxes&&(this.chartService||{}).rtl}),this.append(cluster));isStacked?this.getStackWrap(series,cluster).append(point):cluster.append(point);return point},BarChart.prototype.getStackWrap=function getStackWrap(series,cluster){var stackWrap,stack=series.stack,stackGroup=stack&&stack.group||stack,wraps=cluster.children;if("string"==typeof stackGroup){for(var i=0;i<wraps.length;i++)if(wraps[i]._stackGroup===stackGroup){stackWrap=wraps[i];break}}else stackWrap=wraps[0];stackWrap||((stackWrap=new(this.stackType())({vertical:!this.options.invertAxes}))._stackGroup=stackGroup,cluster.append(stackWrap));return stackWrap},BarChart.prototype.categorySlot=function categorySlot(categoryAxis,categoryIx,valueAxis){var options=this.options,categorySlot=categoryAxis.getSlot(categoryIx),startValue=valueAxis.startValue();if(options.isStacked){var zeroSlot=valueAxis.getSlot(startValue,startValue,!0),stackAxis=options.invertAxes?X:Y;categorySlot[stackAxis+1]=categorySlot[stackAxis+2]=zeroSlot[stackAxis+1]}return categorySlot},BarChart.prototype.reflowCategories=function reflowCategories(categorySlots){for(var children=this.children,childrenLength=children.length,i=0;i<childrenLength;i++)children[i].reflow(categorySlots[i])},BarChart.prototype.createAnimation=function createAnimation(){this._setAnimationOptions(),CategoricalChart.prototype.createAnimation.call(this),anyHasZIndex(this.options.series)&&this._setChildrenAnimation()},BarChart.prototype._setChildrenAnimation=function _setChildrenAnimation(){for(var points=this.points,idx=0;idx<points.length;idx++){var point=points[idx],pointVisual=point.visual;pointVisual&&drawing_utils_defined(pointVisual.options.zIndex)&&(point.options.animation=this.options.animation,point.createAnimation())}},BarChart.prototype._setAnimationOptions=function _setAnimationOptions(){var origin,options=this.options,animation=options.animation||{};if(options.isStacked){var valueAxis=this.seriesValueAxis(options.series[0]);origin=valueAxis.getSlot(valueAxis.startValue())}else origin=this.categoryAxis.getSlot(0);animation.origin=new geometry_point.A(origin.x1,origin.y1),animation.vertical=!options.invertAxes},BarChart}(categorical_chart);setDefaultOptions(BarChart,{animation:{type:BAR}});const bar_chart=BarChart;var Candlestick=function(ChartElement){function Candlestick(value,options){ChartElement.call(this,options),this.value=value}return ChartElement&&(Candlestick.__proto__=ChartElement),Candlestick.prototype=Object.create(ChartElement&&ChartElement.prototype),Candlestick.prototype.constructor=Candlestick,Candlestick.prototype.reflow=function reflow(box){var options=this.options,value=this.value,valueAxis=this.owner.seriesValueAxis(options),ocSlot=valueAxis.getSlot(value.open,value.close),lhSlot=valueAxis.getSlot(value.low,value.high);ocSlot.x1=lhSlot.x1=box.x1,ocSlot.x2=lhSlot.x2=box.x2,this.realBody=ocSlot;var mid=lhSlot.center().x,points=[];points.push([[mid,lhSlot.y1],[mid,ocSlot.y1]]),points.push([[mid,ocSlot.y2],[mid,lhSlot.y2]]),this.lines=points,this.box=lhSlot.clone().wrap(ocSlot),this._rendered||(this._rendered=!0,this.createNote()),this.reflowNote()},Candlestick.prototype.reflowNote=function reflowNote(){this.note&&this.note.reflow(this.box)},Candlestick.prototype.createVisual=function createVisual(){ChartElement.prototype.createVisual.call(this),this._mainVisual=this.mainVisual(this.options),this.visual.append(this._mainVisual),this.createOverlay()},Candlestick.prototype.mainVisual=function mainVisual(options){var group=new shapes_group.A;return this.createBody(group,options),this.createLines(group,options),group},Candlestick.prototype.createBody=function createBody(container,options){var body=shapes_path.w.fromRect(this.realBody.toRect(),{fill:{color:this.color,opacity:options.opacity},stroke:null});options.border.width>0&&body.options.set("stroke",{color:this.getBorderColor(),width:options.border.width,dashType:options.border.dashType,opacity:valueOrDefault(options.border.opacity,options.opacity)}),alignPathToPixel(body),container.append(body),hasGradientOverlay(options)&&container.append(this.createGradientOverlay(body,{baseColor:this.color},deepExtend({end:options.vertical?void 0:[0,1]},options.overlay)))},Candlestick.prototype.createLines=function createLines(container,options){this.drawLines(container,options,this.lines,options.line)},Candlestick.prototype.drawLines=function drawLines(container,options,lines,lineOptions){if(lines)for(var lineStyle={stroke:{color:lineOptions.color||this.color,opacity:valueOrDefault(lineOptions.opacity,options.opacity),width:lineOptions.width,dashType:lineOptions.dashType,lineCap:"butt"}},i=0;i<lines.length;i++){var line=shapes_path.w.fromPoints(lines[i],lineStyle);alignPathToPixel(line),container.append(line)}},Candlestick.prototype.getBorderColor=function getBorderColor(){var border=this.options.border,borderColor=border.color;return drawing_utils_defined(borderColor)||(borderColor=new color_color.A(this.color).brightness(border._brightness).toHex()),borderColor},Candlestick.prototype.createOverlay=function createOverlay(){var overlay=shapes_path.w.fromRect(this.box.toRect(),{fill:{color:WHITE,opacity:0},stroke:null});this.visual.append(overlay)},Candlestick.prototype.createHighlight=function createHighlight(){var highlight=this.options.highlight,normalColor=this.color;this.color=highlight.color||this.color;var overlay=this.mainVisual(deepExtend({},this.options,{line:{color:this.getBorderColor()}},highlight));return this.color=normalColor,overlay},Candlestick.prototype.highlightVisual=function highlightVisual(){return this._mainVisual},Candlestick.prototype.highlightVisualArgs=function highlightVisualArgs(){return{options:this.options,rect:this.box.toRect(),visual:this._mainVisual}},Candlestick.prototype.tooltipAnchor=function tooltipAnchor(){var box=this.box,clipBox=this.owner.pane.clipBox()||box;return{point:new core_point(box.x2+5,Math.max(box.y1,clipBox.y1)+5),align:{horizontal:LEFT,vertical:TOP}}},Candlestick.prototype.formatValue=function formatValue(format){return this.owner.formatPointValue(this,format)},Candlestick.prototype.overlapsBox=function overlapsBox(box){return this.box.overlaps(box)},Candlestick}(chart_element);setDefaultOptions(Candlestick,{vertical:!0,border:{_brightness:.8},line:{width:2},overlay:{gradient:"glass"},tooltip:{format:"<table><tr><th colspan='2'>{4:d}</th></tr><tr><td>Open:</td><td>{0:C}</td></tr><tr><td>High:</td><td>{1:C}</td></tr><tr><td>Low:</td><td>{2:C}</td></tr><tr><td>Close:</td><td>{3:C}</td></tr></table>"},highlight:{opacity:1,border:{width:1,opacity:1},line:{width:1,opacity:1}},notes:{visible:!0,label:{}}}),deepExtend(Candlestick.prototype,point_events_mixin),deepExtend(Candlestick.prototype,note_mixin);const candlestick=Candlestick;var CandlestickChart=function(CategoricalChart){function CandlestickChart(){CategoricalChart.apply(this,arguments)}return CategoricalChart&&(CandlestickChart.__proto__=CategoricalChart),CandlestickChart.prototype=Object.create(CategoricalChart&&CategoricalChart.prototype),CandlestickChart.prototype.constructor=CandlestickChart,CandlestickChart.prototype.reflowCategories=function reflowCategories(categorySlots){for(var children=this.children,childrenLength=children.length,i=0;i<childrenLength;i++)children[i].reflow(categorySlots[i])},CandlestickChart.prototype.addValue=function addValue(data,fields){var point,categoryIx=fields.categoryIx,category=fields.category,series=fields.series,seriesIx=fields.seriesIx,children=this.children,options=this.options,value=data.valueFields,hasValue=areNumbers(this.splitValue(value)),dataItem=series.data[categoryIx],categoryPoints=this.categoryPoints[categoryIx];categoryPoints||(this.categoryPoints[categoryIx]=categoryPoints=[]),hasValue&&(point=this.createPoint(data,fields));var cluster=children[categoryIx];cluster||(cluster=new cluster_layout({vertical:options.invertAxes,gap:options.gap,spacing:options.spacing,rtl:!options.invertAxes&&(this.chartService||{}).rtl}),this.append(cluster)),point&&(this.updateRange(value,fields),cluster.append(point),point.categoryIx=categoryIx,point.category=category,point.series=series,point.seriesIx=seriesIx,point.owner=this,point.dataItem=dataItem,point.noteText=data.fields.noteText),this.points.push(point),categoryPoints.push(point)},CandlestickChart.prototype.pointType=function pointType(){return candlestick},CandlestickChart.prototype.createPoint=function createPoint(data,fields){var series=fields.series,pointType=this.pointType(),value=data.valueFields,pointOptions=deepExtend({},series),color=data.fields.color||series.color;pointOptions=this.evalPointOptions(pointOptions,value,fields),series.type!==CANDLESTICK&&series.type!==OHLC||value.open>value.close&&(color=data.fields.downColor||series.downColor||series.color),isFunction(series.color)&&(color=pointOptions.color),pointOptions.vertical=!this.options.invertAxes;var point=new pointType(value,pointOptions);return point.color=color,point},CandlestickChart.prototype.splitValue=function splitValue(value){return[value.low,value.open,value.close,value.high]},CandlestickChart.prototype.updateRange=function updateRange(value,fields){var axisName=fields.series.axis,parts=this.splitValue(value),axisRange=this.valueAxisRanges[axisName];axisRange=this.valueAxisRanges[axisName]=axisRange||{min:MAX_VALUE,max:MIN_VALUE},axisRange=this.valueAxisRanges[axisName]={min:Math.min.apply(Math,parts.concat([axisRange.min])),max:Math.max.apply(Math,parts.concat([axisRange.max]))}},CandlestickChart.prototype.formatPointValue=function formatPointValue(point,format){var value=point.value;return this.chartService.format.auto(format,value.open,value.high,value.low,value.close,point.category)},CandlestickChart.prototype.animationPoints=function animationPoints(){return this.points},CandlestickChart}(categorical_chart);deepExtend(CandlestickChart.prototype,clip_animation_mixin);const candlestick_chart=CandlestickChart;var BoxPlot=function(Candlestick){function BoxPlot(value,options){Candlestick.call(this,value,options),this.createNote()}return Candlestick&&(BoxPlot.__proto__=Candlestick),BoxPlot.prototype=Object.create(Candlestick&&Candlestick.prototype),BoxPlot.prototype.constructor=BoxPlot,BoxPlot.prototype.reflow=function reflow(box){var whiskerSlot,boxSlot,options=this.options,value=this.value,valueAxis=this.owner.seriesValueAxis(options);this.boxSlot=boxSlot=valueAxis.getSlot(value.q1,value.q3),this.realBody=boxSlot,this.reflowBoxSlot(box),this.whiskerSlot=whiskerSlot=valueAxis.getSlot(value.lower,value.upper),this.reflowWhiskerSlot(box);var medianSlot=valueAxis.getSlot(value.median);if(value.mean){var meanSlot=valueAxis.getSlot(value.mean);this.meanPoints=this.calcMeanPoints(box,meanSlot)}this.whiskerPoints=this.calcWhiskerPoints(boxSlot,whiskerSlot),this.medianPoints=this.calcMedianPoints(box,medianSlot),this.box=whiskerSlot.clone().wrap(boxSlot),this.reflowNote()},BoxPlot.prototype.reflowBoxSlot=function reflowBoxSlot(box){this.boxSlot.x1=box.x1,this.boxSlot.x2=box.x2},BoxPlot.prototype.reflowWhiskerSlot=function reflowWhiskerSlot(box){this.whiskerSlot.x1=box.x1,this.whiskerSlot.x2=box.x2},BoxPlot.prototype.calcMeanPoints=function calcMeanPoints(box,meanSlot){return[[[box.x1,meanSlot.y1],[box.x2,meanSlot.y1]]]},BoxPlot.prototype.calcWhiskerPoints=function calcWhiskerPoints(boxSlot,whiskerSlot){var mid=whiskerSlot.center().x;return[[[mid-5,whiskerSlot.y1],[mid+5,whiskerSlot.y1],[mid,whiskerSlot.y1],[mid,boxSlot.y1]],[[mid-5,whiskerSlot.y2],[mid+5,whiskerSlot.y2],[mid,whiskerSlot.y2],[mid,boxSlot.y2]]]},BoxPlot.prototype.calcMedianPoints=function calcMedianPoints(box,medianSlot){return[[[box.x1,medianSlot.y1],[box.x2,medianSlot.y1]]]},BoxPlot.prototype.renderOutliers=function renderOutliers(options){for(var value=this.value,outliers=value.outliers||[],outerFence=3*Math.abs(value.q3-value.q1),elements=[],markers=options.markers||{},i=0;i<outliers.length;i++){var outlierValue=outliers[i],markersBorder=deepExtend({},(markers=outlierValue<value.q3+outerFence&&outlierValue>value.q1-outerFence?options.outliers:options.extremes).border);drawing_utils_defined(markersBorder.color)||(drawing_utils_defined(this.color)?markersBorder.color=this.color:markersBorder.color=new color_color.A(markers.background).brightness(.8).toHex());var shape=new shape_element({type:markers.type,width:markers.size,height:markers.size,rotation:markers.rotation,background:markers.background,border:markersBorder,opacity:markers.opacity});shape.value=outlierValue,elements.push(shape)}return this.reflowOutliers(elements),elements},BoxPlot.prototype.reflowOutliers=function reflowOutliers(outliers){for(var valueAxis=this.owner.seriesValueAxis(this.options),center=this.box.center(),i=0;i<outliers.length;i++){var outlierValue=outliers[i].value,markerBox=valueAxis.getSlot(outlierValue);this.options.vertical?markerBox.move(center.x):markerBox.move(void 0,center.y),this.box=this.box.wrap(markerBox),outliers[i].reflow(markerBox)}},BoxPlot.prototype.mainVisual=function mainVisual(options){for(var group=Candlestick.prototype.mainVisual.call(this,options),outliers=this.renderOutliers(options),i=0;i<outliers.length;i++){var element=outliers[i].getElement();element&&group.append(element)}return group},BoxPlot.prototype.createLines=function createLines(container,options){this.drawLines(container,options,this.whiskerPoints,options.whiskers),this.drawLines(container,options,this.medianPoints,options.median),this.drawLines(container,options,this.meanPoints,options.mean)},BoxPlot.prototype.getBorderColor=function getBorderColor(){return(this.options.border||{}).color?this.options.border.color:this.color?this.color:Candlestick.prototype.getBorderColor.call(this)},BoxPlot}(candlestick);setDefaultOptions(BoxPlot,{border:{_brightness:.8},line:{width:2},median:{color:"#f6f6f6"},mean:{width:2,dashType:"dash",color:"#f6f6f6"},overlay:{gradient:"glass"},tooltip:{format:"<table><tr><th colspan='2'>{6:d}</th></tr><tr><td>Lower:</td><td>{0:C}</td></tr><tr><td>Q1:</td><td>{1:C}</td></tr><tr><td>Median:</td><td>{2:C}</td></tr><tr><td>Mean:</td><td>{5:C}</td></tr><tr><td>Q3:</td><td>{3:C}</td></tr><tr><td>Upper:</td><td>{4:C}</td></tr></table>"},highlight:{opacity:1,border:{width:1,opacity:1},line:{width:1,opacity:1}},notes:{visible:!0,label:{}},outliers:{visible:!0,size:8,type:"cross",background:WHITE,border:{width:2,opacity:1},opacity:0},extremes:{visible:!0,size:8,type:CIRCLE,background:WHITE,border:{width:2,opacity:1},opacity:0}}),deepExtend(BoxPlot.prototype,point_events_mixin);const box_plot=BoxPlot;var VerticalBoxPlot=function(BoxPlot){function VerticalBoxPlot(){BoxPlot.apply(this,arguments)}return BoxPlot&&(VerticalBoxPlot.__proto__=BoxPlot),VerticalBoxPlot.prototype=Object.create(BoxPlot&&BoxPlot.prototype),VerticalBoxPlot.prototype.constructor=VerticalBoxPlot,VerticalBoxPlot.prototype.reflowBoxSlot=function reflowBoxSlot(box){this.boxSlot.y1=box.y1,this.boxSlot.y2=box.y2},VerticalBoxPlot.prototype.reflowWhiskerSlot=function reflowWhiskerSlot(box){this.whiskerSlot.y1=box.y1,this.whiskerSlot.y2=box.y2},VerticalBoxPlot.prototype.calcMeanPoints=function calcMeanPoints(box,meanSlot){return[[[meanSlot.x1,box.y1],[meanSlot.x1,box.y2]]]},VerticalBoxPlot.prototype.calcWhiskerPoints=function calcWhiskerPoints(boxSlot,whiskerSlot){var mid=whiskerSlot.center().y;return[[[whiskerSlot.x1,mid-5],[whiskerSlot.x1,mid+5],[whiskerSlot.x1,mid],[boxSlot.x1,mid]],[[whiskerSlot.x2,mid-5],[whiskerSlot.x2,mid+5],[whiskerSlot.x2,mid],[boxSlot.x2,mid]]]},VerticalBoxPlot.prototype.calcMedianPoints=function calcMedianPoints(box,medianSlot){return[[[medianSlot.x1,box.y1],[medianSlot.x1,box.y2]]]},VerticalBoxPlot}(box_plot);const vertical_box_plot=VerticalBoxPlot;var BoxPlotChart=function(CandlestickChart){function BoxPlotChart(){CandlestickChart.apply(this,arguments)}return CandlestickChart&&(BoxPlotChart.__proto__=CandlestickChart),BoxPlotChart.prototype=Object.create(CandlestickChart&&CandlestickChart.prototype),BoxPlotChart.prototype.constructor=BoxPlotChart,BoxPlotChart.prototype.addValue=function addValue(data,fields){var point,categoryIx=fields.categoryIx,category=fields.category,series=fields.series,seriesIx=fields.seriesIx,children=this.children,options=this.options,value=data.valueFields,hasValue=areNumbers(this.splitValue(value)),dataItem=series.data[categoryIx],categoryPoints=this.categoryPoints[categoryIx];categoryPoints||(this.categoryPoints[categoryIx]=categoryPoints=[]),hasValue&&(point=this.createPoint(data,fields));var cluster=children[categoryIx];cluster||(cluster=new cluster_layout({vertical:options.invertAxes,gap:options.gap,spacing:options.spacing,rtl:!options.invertAxes&&(this.chartService||{}).rtl}),this.append(cluster)),point&&(this.updateRange(value,fields),cluster.append(point),point.categoryIx=categoryIx,point.category=category,point.series=series,point.seriesIx=seriesIx,point.owner=this,point.dataItem=dataItem),this.points.push(point),categoryPoints.push(point)},BoxPlotChart.prototype.pointType=function pointType(){return this.options.invertAxes?vertical_box_plot:box_plot},BoxPlotChart.prototype.splitValue=function splitValue(value){return[value.lower,value.q1,value.median,value.q3,value.upper]},BoxPlotChart.prototype.updateRange=function updateRange(value,fields){var axisName=fields.series.axis,axisRange=this.valueAxisRanges[axisName],parts=this.splitValue(value).concat(this.filterOutliers(value.outliers));drawing_utils_defined(value.mean)&&(parts=parts.concat(value.mean)),axisRange=this.valueAxisRanges[axisName]=axisRange||{min:MAX_VALUE,max:MIN_VALUE},axisRange=this.valueAxisRanges[axisName]={min:Math.min.apply(Math,parts.concat([axisRange.min])),max:Math.max.apply(Math,parts.concat([axisRange.max]))}},BoxPlotChart.prototype.formatPointValue=function formatPointValue(point,format){var value=point.value;return this.chartService.format.auto(format,value.lower,value.q1,value.median,value.q3,value.upper,value.mean,point.category)},BoxPlotChart.prototype.filterOutliers=function filterOutliers(items){for(var length=(items||[]).length,result=[],i=0;i<length;i++){var item=items[i];drawing_utils_defined(item)&&null!==item&&result.push(item)}return result},BoxPlotChart.prototype.supportsPointInactiveOpacity=function supportsPointInactiveOpacity(){return!1},BoxPlotChart}(candlestick_chart);const box_plot_chart=BoxPlotChart;var ScatterErrorBar=function(ErrorBarBase){function ScatterErrorBar(){ErrorBarBase.apply(this,arguments)}return ErrorBarBase&&(ScatterErrorBar.__proto__=ErrorBarBase),ScatterErrorBar.prototype=Object.create(ErrorBarBase&&ErrorBarBase.prototype),ScatterErrorBar.prototype.constructor=ScatterErrorBar,ScatterErrorBar.prototype.getAxis=function getAxis(){var axes=this.chart.seriesAxes(this.series);return this.isVertical?axes.y:axes.x},ScatterErrorBar}(error_bar_base);const scatter_error_bar=ScatterErrorBar;var ScatterChart=function(ChartElement){function ScatterChart(plotArea,options){ChartElement.call(this,options),this.plotArea=plotArea,this.chartService=plotArea.chartService,this._initFields(),this.render()}return ChartElement&&(ScatterChart.__proto__=ChartElement),ScatterChart.prototype=Object.create(ChartElement&&ChartElement.prototype),ScatterChart.prototype.constructor=ScatterChart,ScatterChart.prototype._initFields=function _initFields(){this.xAxisRanges={},this.yAxisRanges={},this.points=[],this.seriesPoints=[],this.seriesOptions=[],this._evalSeries=[]},ScatterChart.prototype.render=function render(){this.traverseDataPoints(this.addValue.bind(this))},ScatterChart.prototype.addErrorBar=function addErrorBar(point,field,fields){var errorRange,value=point.value[field],valueErrorField=field+"Value",lowField=field+"ErrorLow",highField=field+"ErrorHigh",seriesIx=fields.seriesIx,series=fields.series,errorBars=point.options.errorBars,lowValue=fields[lowField],highValue=fields[highField];isNumber(value)&&(isNumber(lowValue)&&isNumber(highValue)&&(errorRange={low:lowValue,high:highValue}),errorBars&&drawing_utils_defined(errorBars[valueErrorField])&&(this.seriesErrorRanges=this.seriesErrorRanges||{x:[],y:[]},this.seriesErrorRanges[field][seriesIx]=this.seriesErrorRanges[field][seriesIx]||new error_range_calculator(errorBars[valueErrorField],series,field),errorRange=this.seriesErrorRanges[field][seriesIx].getErrorRange(value,errorBars[valueErrorField])),errorRange&&this.addPointErrorBar(errorRange,point,field))},ScatterChart.prototype.addPointErrorBar=function addPointErrorBar(errorRange,point,field){var low=errorRange.low,high=errorRange.high,series=point.series,options=point.options.errorBars,isVertical=field===Y,item={};point[field+"Low"]=low,point[field+"High"]=high,point.errorBars=point.errorBars||[];var errorBar=new scatter_error_bar(low,high,isVertical,this,series,options);point.errorBars.push(errorBar),point.append(errorBar),item[field]=low,this.updateRange(item,series),item[field]=high,this.updateRange(item,series)},ScatterChart.prototype.addValue=function addValue(value,fields){var point,x=value.x,y=value.y,seriesIx=fields.seriesIx,series=this.options.series[seriesIx],missingValues=this.seriesMissingValues(series),seriesPoints=this.seriesPoints[seriesIx],pointValue=value;hasValue(x)&&hasValue(y)||(pointValue=this.createMissingValue(pointValue,missingValues)),pointValue&&((point=this.createPoint(pointValue,fields))&&(Object.assign(point,fields),this.addErrorBar(point,X,fields),this.addErrorBar(point,Y,fields)),this.updateRange(pointValue,fields.series)),this.points.push(point),seriesPoints.push(point)},ScatterChart.prototype.seriesMissingValues=function seriesMissingValues(series){return series.missingValues},ScatterChart.prototype.createMissingValue=function createMissingValue(){},ScatterChart.prototype.updateRange=function updateRange(value,series){var intlService=this.chartService.intl,xAxisName=series.xAxis,yAxisName=series.yAxis,x=value.x,y=value.y,xAxisRange=this.xAxisRanges[xAxisName],yAxisRange=this.yAxisRanges[yAxisName];hasValue(x)&&(xAxisRange=this.xAxisRanges[xAxisName]=xAxisRange||{min:MAX_VALUE,max:MIN_VALUE},isString(x)&&(x=parseDate(intlService,x)),xAxisRange.min=Math.min(xAxisRange.min,x),xAxisRange.max=Math.max(xAxisRange.max,x)),hasValue(y)&&(yAxisRange=this.yAxisRanges[yAxisName]=yAxisRange||{min:MAX_VALUE,max:MIN_VALUE},isString(y)&&(y=parseDate(intlService,y)),yAxisRange.min=Math.min(yAxisRange.min,y),yAxisRange.max=Math.max(yAxisRange.max,y))},ScatterChart.prototype.evalPointOptions=function evalPointOptions(options,value,fields){var series=fields.series,seriesIx=fields.seriesIx,state={defaults:series._defaults,excluded:["data","tooltip","content","template","visual","toggle","_outOfRangeMinPoint","_outOfRangeMaxPoint","drilldownSeriesFactory"]},doEval=this._evalSeries[seriesIx];drawing_utils_defined(doEval)||(this._evalSeries[seriesIx]=doEval=evalOptions(options,{},state,!0));var pointOptions=options;return doEval&&evalOptions(pointOptions=deepExtend({},options),{value,series,dataItem:fields.dataItem},state),pointOptions},ScatterChart.prototype.pointType=function pointType(){return line_point},ScatterChart.prototype.pointOptions=function pointOptions(series,seriesIx){var options=this.seriesOptions[seriesIx];if(!options){var defaults=this.pointType().prototype.defaults;this.seriesOptions[seriesIx]=options=deepExtend({},defaults,{markers:{opacity:series.opacity},tooltip:{format:this.options.tooltip.format},labels:{format:this.options.labels.format}},series)}return options},ScatterChart.prototype.createPoint=function createPoint(value,fields){var series=fields.series,pointOptions=this.pointOptions(series,fields.seriesIx),color=fields.color||series.color;pointOptions=this.evalPointOptions(pointOptions,value,fields),isFunction(series.color)&&(color=pointOptions.color);var point=new line_point(value,pointOptions);return point.color=color,this.append(point),point},ScatterChart.prototype.seriesAxes=function seriesAxes(series){var xAxisName=series.xAxis,yAxisName=series.yAxis,plotArea=this.plotArea,xAxis=xAxisName?plotArea.namedXAxes[xAxisName]:plotArea.axisX,yAxis=yAxisName?plotArea.namedYAxes[yAxisName]:plotArea.axisY;if(!xAxis)throw new Error("Unable to locate X axis with name "+xAxisName);if(!yAxis)throw new Error("Unable to locate Y axis with name "+yAxisName);return{x:xAxis,y:yAxis}},ScatterChart.prototype.reflow=function reflow(targetBox){var this$1=this,chartPoints=this.points,limit=!this.options.clip,pointIx=0;this.traverseDataPoints((function(value,fields){var point=chartPoints[pointIx++],seriesAxes=this$1.seriesAxes(fields.series),slotX=seriesAxes.x.getSlot(value.x,value.x,limit),slotY=seriesAxes.y.getSlot(value.y,value.y,limit);if(point)if(slotX&&slotY){var pointSlot=this$1.pointSlot(slotX,slotY);point.reflow(pointSlot)}else point.visible=!1})),this.box=targetBox},ScatterChart.prototype.pointSlot=function pointSlot(slotX,slotY){return new core_box(slotX.x1,slotY.y1,slotX.x2,slotY.y2)},ScatterChart.prototype.traverseDataPoints=function traverseDataPoints(callback){for(var series=this.options.series,seriesPoints=this.seriesPoints,seriesIx=0;seriesIx<series.length;seriesIx++){var currentSeries=series[seriesIx];seriesPoints[seriesIx]||(seriesPoints[seriesIx]=[]);for(var pointIx=0;pointIx<currentSeries.data.length;pointIx++){var ref$1=this.plotArea.bindPoint(currentSeries,pointIx),value=ref$1.valueFields,fields=ref$1.fields;callback(value,deepExtend({pointIx,series:currentSeries,seriesIx,dataItem:currentSeries.data[pointIx],owner:this},fields))}}},ScatterChart.prototype.formatPointValue=function formatPointValue(point,format){var value=point.value;return this.chartService.format.auto(format,value.x,value.y)},ScatterChart.prototype.animationPoints=function animationPoints(){for(var points=this.points,result=[],idx=0;idx<points.length;idx++)result.push((points[idx]||{}).marker);return result},ScatterChart}(chart_element);setDefaultOptions(ScatterChart,{series:[],tooltip:{format:"{0}, {1}"},labels:{format:"{0}, {1}"},clip:!0}),deepExtend(ScatterChart.prototype,clip_animation_mixin);const scatter_chart=ScatterChart;var Bubble=function(LinePoint){function Bubble(value,options){LinePoint.call(this,value,options),this.category=value.category}return LinePoint&&(Bubble.__proto__=LinePoint),Bubble.prototype=Object.create(LinePoint&&LinePoint.prototype),Bubble.prototype.constructor=Bubble,Bubble.prototype.createHighlight=function createHighlight(){var highlight=this.options.highlight,border=highlight.border,markers=this.options.markers,center=this.box.center(),radius=(markers.size+markers.border.width+border.width)/2,highlightGroup=new shapes_group.A,shadow=new shapes_circle.A(new geometry_circle.A([center.x,center.y+radius/5+border.width/2],radius+border.width/2),{stroke:{color:"none"},fill:this.createGradient({gradient:"bubbleShadow",color:markers.background,stops:[{offset:0,color:markers.background,opacity:.3},{offset:1,color:markers.background,opacity:0}]})}),overlay=new shapes_circle.A(new geometry_circle.A([center.x,center.y],radius),{stroke:{color:border.color||new color_color.A(markers.background).brightness(.8).toHex(),width:border.width,opacity:border.opacity},fill:{color:markers.background,opacity:highlight.opacity}});return highlightGroup.append(shadow,overlay),highlightGroup},Bubble}(line_point);Bubble.prototype.defaults=deepExtend({},Bubble.prototype.defaults,{labels:{position:CENTER},highlight:{opacity:1,border:{color:"#fff",width:2,opacity:1}}}),Bubble.prototype.defaults.highlight.zIndex=void 0;const bubble=Bubble;var BubbleChart=function(ScatterChart){function BubbleChart(){ScatterChart.apply(this,arguments)}return ScatterChart&&(BubbleChart.__proto__=ScatterChart),BubbleChart.prototype=Object.create(ScatterChart&&ScatterChart.prototype),BubbleChart.prototype.constructor=BubbleChart,BubbleChart.prototype._initFields=function _initFields(){this._maxSize=MIN_VALUE,ScatterChart.prototype._initFields.call(this)},BubbleChart.prototype.addValue=function addValue(value,fields){null!==value.size&&(value.size>0||value.size<0&&fields.series.negativeValues.visible)?(this._maxSize=Math.max(this._maxSize,Math.abs(value.size)),ScatterChart.prototype.addValue.call(this,value,fields)):(this.points.push(null),this.seriesPoints[fields.seriesIx].push(null))},BubbleChart.prototype.reflow=function reflow(box){this.updateBubblesSize(box),ScatterChart.prototype.reflow.call(this,box)},BubbleChart.prototype.pointType=function pointType(){return bubble},BubbleChart.prototype.createPoint=function createPoint(value,fields){var series=fields.series,pointsCount=series.data.length,delay=fields.pointIx*(600/pointsCount),animationOptions={delay,duration:600-delay,type:BUBBLE},color=fields.color||series.color;value.size<0&&series.negativeValues.visible&&(color=valueOrDefault(series.negativeValues.color,color));var pointOptions=deepExtend({labels:{animation:{delay,duration:600-delay}}},this.pointOptions(series,fields.seriesIx),{markers:{type:CIRCLE,border:series.border,opacity:series.opacity,animation:animationOptions}});pointOptions=this.evalPointOptions(pointOptions,value,fields),isFunction(series.color)&&(color=pointOptions.color),pointOptions.markers.background=color;var point=new bubble(value,pointOptions);return point.color=color,this.append(point),point},BubbleChart.prototype.updateBubblesSize=function updateBubblesSize(box){for(var series=this.options.series,boxSize=Math.min(box.width(),box.height()),seriesIx=0;seriesIx<series.length;seriesIx++)for(var currentSeries=series[seriesIx],seriesPoints=this.seriesPoints[seriesIx],minR=(currentSeries.minSize||Math.max(.02*boxSize,10))/2,maxR=(currentSeries.maxSize||.2*boxSize)/2,minArea=Math.PI*minR*minR,areaRatio=(Math.PI*maxR*maxR-minArea)/this._maxSize,pointIx=0;pointIx<seriesPoints.length;pointIx++){var point=seriesPoints[pointIx];if(point){var area=Math.abs(point.value.size)*areaRatio,radius=Math.sqrt((minArea+area)/Math.PI),zIndex=valueOrDefault(point.options.zIndex,0)+(1-radius/maxR);deepExtend(point.options,{zIndex,markers:{size:2*radius,zIndex},labels:{zIndex:zIndex+1}})}}},BubbleChart.prototype.formatPointValue=function formatPointValue(point,format){var value=point.value;return this.chartService.format.auto(format,value.x,value.y,value.size,point.category)},BubbleChart.prototype.createAnimation=function createAnimation(){},BubbleChart.prototype.createVisual=function createVisual(){},BubbleChart}(scatter_chart);setDefaultOptions(BubbleChart,{tooltip:{format:"{3}"},labels:{format:"{3}"}});const bubble_chart=BubbleChart;var Target=function(ShapeElement){function Target(){ShapeElement.apply(this,arguments)}return ShapeElement&&(Target.__proto__=ShapeElement),Target.prototype=Object.create(ShapeElement&&ShapeElement.prototype),Target.prototype.constructor=Target,Target}(shape_element);deepExtend(Target.prototype,point_events_mixin);const target=Target;var Bullet=function(ChartElement){function Bullet(value,options){ChartElement.call(this,options),this.aboveAxis=this.options.aboveAxis,this.color=options.color||WHITE,this.value=value}return ChartElement&&(Bullet.__proto__=ChartElement),Bullet.prototype=Object.create(ChartElement&&ChartElement.prototype),Bullet.prototype.constructor=Bullet,Bullet.prototype.render=function render(){var options=this.options;this._rendered||(this._rendered=!0,drawing_utils_defined(this.value.target)&&(this.target=new target({type:options.target.shape,background:options.target.color||this.color,opacity:options.opacity,zIndex:options.zIndex,border:options.target.border,vAlign:TOP,align:RIGHT}),this.target.value=this.value,this.target.dataItem=this.dataItem,this.target.series=this.series,this.append(this.target)),this.createLabel(),this.createNote())},Bullet.prototype.createLabel=function createLabel(){var labels=this.options.labels;if(labels.visible){var labelText,pointData=this.pointData(),labelTemplate=getTemplate(labels);labelText=labelTemplate?labelTemplate(pointData):this.formatValue(labels.format),this.label=new bar_label(labelText,labels,pointData),this.append(this.label)}},Bullet.prototype.reflow=function reflow(box){this.render();var options=this.options,target=this.target,chart=this.owner,invertAxes=options.invertAxes,valueAxis=chart.seriesValueAxis(this.options),categorySlot=chart.categorySlot(chart.categoryAxis,options.categoryIx,valueAxis),targetValueSlot=valueAxis.getSlot(this.value.target),targetSlotX=invertAxes?targetValueSlot:categorySlot,targetSlotY=invertAxes?categorySlot:targetValueSlot;if(target){var targetSlot=new core_box(targetSlotX.x1,targetSlotY.y1,targetSlotX.x2,targetSlotY.y2);target.options.height=invertAxes?targetSlot.height():options.target.line.width,target.options.width=invertAxes?options.target.line.width:targetSlot.width(),target.reflow(targetSlot)}var label=this.label;label&&(label.options.aboveAxis=this.aboveAxis,label.reflow(box)),this.note&&this.note.reflow(box),this.box=box},Bullet.prototype.createVisual=function createVisual(){ChartElement.prototype.createVisual.call(this);var options=this.options,body=shapes_path.w.fromRect(this.box.toRect(),{fill:{color:this.color,opacity:options.opacity},stroke:null});options.border.width>0&&body.options.set("stroke",{color:options.border.color||this.color,width:options.border.width,dashType:options.border.dashType,opacity:valueOrDefault(options.border.opacity,options.opacity)}),this.bodyVisual=body,alignPathToPixel(body),this.visual.append(body)},Bullet.prototype.createAnimation=function createAnimation(){this.bodyVisual&&(this.animation=animation.create(this.bodyVisual,this.options.animation))},Bullet.prototype.createHighlight=function createHighlight(style){return shapes_path.w.fromRect(this.box.toRect(),style)},Bullet.prototype.highlightVisual=function highlightVisual(){return this.bodyVisual},Bullet.prototype.highlightVisualArgs=function highlightVisualArgs(){return{rect:this.box.toRect(),visual:this.bodyVisual,options:this.options}},Bullet.prototype.formatValue=function formatValue(format){return this.owner.formatPointValue(this,format)},Bullet.prototype.pointData=function pointData(){return{dataItem:this.dataItem,category:this.category,value:this.value,series:this.series}},Bullet.prototype.overlapsBox=function overlapsBox(box){return this.box.overlaps(box)},Bullet}(chart_element);Bullet.prototype.tooltipAnchor=bar.prototype.tooltipAnchor,setDefaultOptions(Bullet,{border:{width:1},vertical:!1,opacity:1,target:{shape:"",border:{width:0,color:"green"},line:{width:2}},labels:{visible:!1},tooltip:{format:"Current: {0}<br />Target: {1}"},notes:{label:{}}}),deepExtend(Bullet.prototype,point_events_mixin),deepExtend(Bullet.prototype,note_mixin);const bullet_chart_bullet=Bullet;var BulletChart=function(CategoricalChart){function BulletChart(plotArea,options){!function wrapData(options){for(var series=options.series,i=0;i<series.length;i++){var seriesItem=series[i],data=seriesItem.data;!data||isArray(data[0])||isObject(data[0])||(seriesItem.data=[data])}}(options),CategoricalChart.call(this,plotArea,options)}return CategoricalChart&&(BulletChart.__proto__=CategoricalChart),BulletChart.prototype=Object.create(CategoricalChart&&CategoricalChart.prototype),BulletChart.prototype.constructor=BulletChart,BulletChart.prototype.reflowCategories=function reflowCategories(categorySlots){for(var children=this.children,childrenLength=children.length,i=0;i<childrenLength;i++)children[i].reflow(categorySlots[i])},BulletChart.prototype.plotRange=function plotRange(point){var series=point.series,valueAxis=this.seriesValueAxis(series),axisCrossingValue=this.categoryAxisCrossingValue(valueAxis);return[axisCrossingValue,point.value.current||axisCrossingValue]},BulletChart.prototype.createPoint=function createPoint(data,fields){var categoryIx=fields.categoryIx,series=fields.series,options=this.options,children=this.children,value=data.valueFields,bulletOptions=deepExtend({vertical:!options.invertAxes,overlay:series.overlay,categoryIx,invertAxes:options.invertAxes},series),color=data.fields.color||series.color;bulletOptions=this.evalPointOptions(bulletOptions,value,fields),isFunction(series.color)&&(color=bulletOptions.color);var bullet=new bullet_chart_bullet(value,bulletOptions);bullet.color=color;var cluster=children[categoryIx];return cluster||(cluster=new cluster_layout({vertical:options.invertAxes,gap:options.gap,spacing:options.spacing,rtl:!options.invertAxes&&(this.chartService||{}).rtl}),this.append(cluster)),cluster.append(bullet),bullet},BulletChart.prototype.updateRange=function updateRange(value,fields){var current=value.current,target=value.target,axisName=fields.series.axis,axisRange=this.valueAxisRanges[axisName];drawing_utils_defined(current)&&!isNaN(current)&&drawing_utils_defined(target&&!isNaN(target))&&((axisRange=this.valueAxisRanges[axisName]=axisRange||{min:MAX_VALUE,max:MIN_VALUE}).min=Math.min(axisRange.min,current,target),axisRange.max=Math.max(axisRange.max,current,target))},BulletChart.prototype.formatPointValue=function formatPointValue(point,format){return this.chartService.format.auto(format,point.value.current,point.value.target)},BulletChart.prototype.pointValue=function pointValue(data){return data.valueFields.current},BulletChart.prototype.aboveAxis=function aboveAxis(point){return point.value.current>0},BulletChart.prototype.createAnimation=function createAnimation(){var points=this.points;this._setAnimationOptions();for(var idx=0;idx<points.length;idx++){var point=points[idx];point.options.animation=this.options.animation,point.createAnimation()}},BulletChart}(categorical_chart);BulletChart.prototype._setAnimationOptions=bar_chart.prototype._setAnimationOptions,setDefaultOptions(BulletChart,{animation:{type:BAR}});const bullet_chart=BulletChart;var BaseTooltip=function(Class){function BaseTooltip(chartService,options){Class.call(this),this.chartService=chartService,this.options=deepExtend({},this.options,options)}return Class&&(BaseTooltip.__proto__=Class),BaseTooltip.prototype=Object.create(Class&&Class.prototype),BaseTooltip.prototype.constructor=BaseTooltip,BaseTooltip.prototype.getStyle=function getStyle(options,point){var background=options.background,border=options.border.color;if(point){var pointColor=point.color||point.options.color;background=valueOrDefault(background,pointColor),border=valueOrDefault(border,pointColor)}var padding=getSpacing(options.padding||{},"auto");return{backgroundColor:background,borderColor:border,font:options.font,color:options.color,opacity:options.opacity,borderWidth:styleValue(options.border.width),paddingTop:styleValue(padding.top),paddingBottom:styleValue(padding.bottom),paddingLeft:styleValue(padding.left),paddingRight:styleValue(padding.right)}},BaseTooltip.prototype.show=function show(options,tooltipOptions,point){options.format=tooltipOptions.format;var style=this.getStyle(tooltipOptions,point);options.style=style;var background=new color_color.A(style.backgroundColor);drawing_utils_defined(tooltipOptions.color)||background.isDark()||(options.className="k-chart-tooltip-inverse"),this.chartService.notify("showTooltip",options),this.visible=!0},BaseTooltip.prototype.hide=function hide(){this.chartService&&this.chartService.notify("hideTooltip"),this.visible=!1},BaseTooltip.prototype.destroy=function destroy(){delete this.chartService},BaseTooltip}(common_class.A);setDefaultOptions(BaseTooltip,{border:{width:1},opacity:1});const base_tooltip=BaseTooltip;var CrosshairTooltip=function(BaseTooltip){function CrosshairTooltip(chartService,crosshair,options){BaseTooltip.call(this,chartService,options),this.crosshair=crosshair,this.formatService=chartService.format,this.initAxisName()}return BaseTooltip&&(CrosshairTooltip.__proto__=BaseTooltip),CrosshairTooltip.prototype=Object.create(BaseTooltip&&BaseTooltip.prototype),CrosshairTooltip.prototype.constructor=CrosshairTooltip,CrosshairTooltip.prototype.initAxisName=function initAxisName(){var name,axis=this.crosshair.axis;name=axis.plotArea.categoryAxis?axis.getCategory?"categoryAxis":"valueAxis":axis.options.vertical?"yAxis":"xAxis",this.axisName=name},CrosshairTooltip.prototype.showAt=function showAt(point){var axis=this.crosshair.axis,options=this.options,value=axis[options.stickyMode?"getCategory":"getValue"](point),formattedValue=value;options.format?formattedValue=this.formatService.auto(options.format,value):axis.options.type===DATE&&(formattedValue=this.formatService.auto(axis.options.labels.dateFormats[axis.options.baseUnit],value)),this.show({point,anchor:this.getAnchor(),crosshair:this.crosshair,value:formattedValue,axisName:this.axisName,axisIndex:this.crosshair.axis.axisIndex},this.options)},CrosshairTooltip.prototype.hide=function hide(){this.chartService.notify("hideTooltip",{crosshair:this.crosshair,axisName:this.axisName,axisIndex:this.crosshair.axis.axisIndex})},CrosshairTooltip.prototype.getAnchor=function getAnchor(){var horizontalAlign,verticalAlign,point,crosshair=this.crosshair,ref_options=this.options,position=ref_options.position,padding=ref_options.padding,vertical=!crosshair.axis.options.vertical,lineBox=crosshair.line.bbox();return vertical?(horizontalAlign=CENTER,position===BOTTOM?(verticalAlign=TOP,point=lineBox.bottomLeft().translate(0,padding)):(verticalAlign=BOTTOM,point=lineBox.topLeft().translate(0,-padding))):(verticalAlign=CENTER,position===LEFT?(horizontalAlign=RIGHT,point=lineBox.topLeft().translate(-padding,0)):(horizontalAlign=LEFT,point=lineBox.topRight().translate(padding,0))),{point,align:{horizontal:horizontalAlign,vertical:verticalAlign}}},CrosshairTooltip}(base_tooltip);setDefaultOptions(CrosshairTooltip,{padding:10});const crosshair_tooltip=CrosshairTooltip;var Crosshair=function(ChartElement){function Crosshair(chartService,axis,options){ChartElement.call(this,options),this.axis=axis,this.stickyMode=axis instanceof category_axis;var tooltipOptions=this.options.tooltip;tooltipOptions.visible&&(this.tooltip=new crosshair_tooltip(chartService,this,deepExtend({},tooltipOptions,{stickyMode:this.stickyMode})))}return ChartElement&&(Crosshair.__proto__=ChartElement),Crosshair.prototype=Object.create(ChartElement&&ChartElement.prototype),Crosshair.prototype.constructor=Crosshair,Crosshair.prototype.showAt=function showAt(point){this.point=point,this.moveLine(),this.line.visible(!0),this.tooltip&&this.tooltip.showAt(point)},Crosshair.prototype.hide=function hide(){this.line.visible(!1),this.tooltip&&this.tooltip.hide()},Crosshair.prototype.moveLine=function moveLine(){var lineEnd,axis=this.axis,point=this.point,vertical=axis.options.vertical,box=this.getBox(),dim=vertical?Y:X,lineStart=new geometry_point.A(box.x1,box.y1);if(lineEnd=vertical?new geometry_point.A(box.x2,box.y1):new geometry_point.A(box.x1,box.y2),point)if(this.stickyMode){var slot=axis.getSlot(axis.pointCategoryIndex(point));lineStart[dim]=lineEnd[dim]=slot.center()[dim]}else lineStart[dim]=lineEnd[dim]=point[dim];this.box=box,this.line.moveTo(lineStart).lineTo(lineEnd)},Crosshair.prototype.getBox=function getBox(){for(var axisLineBox,axis=this.axis,axes=axis.pane.axes,length=axes.length,vertical=axis.options.vertical,box=axis.lineBox().clone(),dim=vertical?X:Y,i=0;i<length;i++){var currentAxis=axes[i];currentAxis.options.vertical!==vertical&&(axisLineBox?axisLineBox.wrap(currentAxis.lineBox()):axisLineBox=currentAxis.lineBox().clone())}return box[dim+1]=axisLineBox[dim+1],box[dim+2]=axisLineBox[dim+2],box},Crosshair.prototype.createVisual=function createVisual(){ChartElement.prototype.createVisual.call(this);var options=this.options;this.line=new shapes_path.w({stroke:{color:options.color,width:options.width,opacity:options.opacity,dashType:options.dashType},visible:!1}),this.moveLine(),this.visual.append(this.line)},Crosshair.prototype.destroy=function destroy(){this.tooltip&&this.tooltip.destroy(),ChartElement.prototype.destroy.call(this)},Crosshair}(chart_element);setDefaultOptions(Crosshair,{color:BLACK,width:2,zIndex:-1,tooltip:{visible:!1}});const crosshair=Crosshair;var ChartContainer=function(ChartElement){function ChartContainer(options,pane){ChartElement.call(this,options),this.pane=pane}return ChartElement&&(ChartContainer.__proto__=ChartElement),ChartContainer.prototype=Object.create(ChartElement&&ChartElement.prototype),ChartContainer.prototype.constructor=ChartContainer,ChartContainer.prototype.shouldClip=function shouldClip(){for(var children=this.children,length=children.length,i=0;i<length;i++)if(!0===children[i].options.clip)return!0;return!1},ChartContainer.prototype._clipBox=function _clipBox(){return this.pane.chartsBox()},ChartContainer.prototype.createVisual=function createVisual(){if(this.visual=new shapes_group.A({zIndex:0}),this.shouldClip()){var clipRect=(this.clipBox=this._clipBox()).toRect(),clipPath=shapes_path.w.fromRect(clipRect);alignPathToPixel(clipPath),this.visual.clip(clipPath),this.unclipLabels()}},ChartContainer.prototype.stackRoot=function stackRoot(){return this},ChartContainer.prototype.unclipLabels=function unclipLabels(){for(var charts=this.children,clipBox=this.clipBox,i=0;i<charts.length;i++)for(var points=charts[i].points||{},length=points.length,j=0;j<length;j++){var point=points[j];if(point&&!1!==point.visible&&point.overlapsBox&&point.overlapsBox(clipBox))if(point.unclipElements)point.unclipElements();else{var label=point.label,note=point.note;label&&label.options.visible&&(label.alignToClipBox&&label.alignToClipBox(clipBox),label.options.noclip=!0),note&&note.options.visible&&(note.options.noclip=!0)}}},ChartContainer.prototype.destroy=function destroy(){ChartElement.prototype.destroy.call(this),delete this.parent},ChartContainer}(chart_element);ChartContainer.prototype.isStackRoot=!0;const chart_container=ChartContainer;var Pane=function(BoxElement){function Pane(options){BoxElement.call(this,options),this.id=function paneID(){return"pane"+ID++}(),this.createTitle(),this.content=new chart_element,this.chartContainer=new chart_container({},this),this.append(this.content),this.axes=[],this.charts=[]}return BoxElement&&(Pane.__proto__=BoxElement),Pane.prototype=Object.create(BoxElement&&BoxElement.prototype),Pane.prototype.constructor=Pane,Pane.prototype.createTitle=function createTitle(){var titleOptions=this.options.title;isObject(titleOptions)&&(titleOptions=deepExtend({},titleOptions,{align:titleOptions.position,position:TOP})),this.title=core_title.buildTitle(titleOptions,Pane.prototype.options.title),this.title&&this.append(this.title)},Pane.prototype.appendAxis=function appendAxis(axis){this.content.append(axis),this.axes.push(axis),axis.pane=this},Pane.prototype.appendAxisAt=function appendAxisAt(axis,pos){this.content.append(axis),this.axes.splice(pos,0,axis),axis.pane=this},Pane.prototype.appendChart=function appendChart(chart){this.chartContainer.parent!==this.content&&this.content.append(this.chartContainer),this.charts.push(chart),this.chartContainer.append(chart),chart.pane=this},Pane.prototype.empty=function empty(){var plotArea=this.parent;if(plotArea){for(var i=0;i<this.axes.length;i++)plotArea.removeAxis(this.axes[i]);for(var i$1=0;i$1<this.charts.length;i$1++)plotArea.removeChart(this.charts[i$1])}this.axes=[],this.charts=[],this.content.destroy(),this.content.children=[],this.chartContainer.children=[]},Pane.prototype.reflow=function reflow(targetBox){var content;last(this.children)===this.content&&(content=this.children.pop()),BoxElement.prototype.reflow.call(this,targetBox),content&&this.children.push(content),this.title&&(this.contentBox.y1+=this.title.box.height())},Pane.prototype.visualStyle=function visualStyle(){var style=BoxElement.prototype.visualStyle.call(this);return style.zIndex=-10,style},Pane.prototype.renderComplete=function renderComplete(){this.options.visible&&this.createGridLines()},Pane.prototype.stackRoot=function stackRoot(){return this},Pane.prototype.clipRoot=function clipRoot(){return this},Pane.prototype.createGridLines=function createGridLines(){for(var axes=this.axes,allAxes=axes.concat(this.parent.axes),vGridLines=[],hGridLines=[],i=0;i<axes.length;i++)for(var axis=axes[i],vertical=axis.options.vertical,gridLines=vertical?vGridLines:hGridLines,j=0;j<allAxes.length;j++)if(0===gridLines.length){var altAxis=allAxes[j];vertical!==altAxis.options.vertical&&append(gridLines,axis.createGridLines(altAxis))}},Pane.prototype.refresh=function refresh(){this.visual.clear(),this.content.parent=null,this.content.createGradient=this.createGradient.bind(this),this.content.renderVisual(),this.content.parent=this,this.title&&this.visual.append(this.title.visual),this.visual.append(this.content.visual),this.renderComplete(),this.notifyRender()},Pane.prototype.chartsBox=function chartsBox(){for(var axes=this.axes,length=axes.length,chartsBox=new core_box,idx=0;idx<length;idx++){var axis=axes[idx],axisValueField=axis.options.vertical?Y:X,lineBox=axis.lineBox();chartsBox[axisValueField+1]=lineBox[axisValueField+1],chartsBox[axisValueField+2]=lineBox[axisValueField+2]}if(0===chartsBox.x2)for(var allAxes=this.parent.axes,length$1=allAxes.length,idx$1=0;idx$1<length$1;idx$1++){var axis$1=allAxes[idx$1];if(!axis$1.options.vertical){var lineBox$1=axis$1.lineBox();chartsBox.x1=lineBox$1.x1,chartsBox.x2=lineBox$1.x2}}return chartsBox},Pane.prototype.clipBox=function clipBox(){return this.chartContainer.clipBox},Pane.prototype.notifyRender=function notifyRender(){var service=this.getService();service&&service.notify("paneRender",{pane:new chart_pane(this),index:this.paneIndex,name:this.options.name})},Pane}(box_element),ID=1;Pane.prototype.isStackRoot=!0,setDefaultOptions(Pane,{zIndex:-1,shrinkToFit:!0,title:{align:LEFT},visible:!0});const pane=Pane;var PlotAreaBase=function(ChartElement){function PlotAreaBase(series,options,chartService){ChartElement.call(this,options),this.initFields(series,options),this.series=series,this.initSeries(),this.charts=[],this.options.legend=this.options.legend||{},this.options.legend.items=[],this.axes=[],this.crosshairs=[],this.chartService=chartService,this.originalOptions=options,this.originalSeries=series,this._bindCache=new WeakMap,this.createPanes(),this.render(),this.createCrosshairs()}return ChartElement&&(PlotAreaBase.__proto__=ChartElement),PlotAreaBase.prototype=Object.create(ChartElement&&ChartElement.prototype),PlotAreaBase.prototype.constructor=PlotAreaBase,PlotAreaBase.prototype.initFields=function initFields(){},PlotAreaBase.prototype.initSeries=function initSeries(){for(var series=this.series,i=0;i<series.length;i++)series[i].index=i},PlotAreaBase.prototype.bindPoint=function bindPoint(series,pointIx,item){var cached=this._bindCache.get(series);cached||(cached=[],this._bindCache.set(series,cached));var data=cached[pointIx];return data||(data=cached[pointIx]=series_binder.current.bindPoint(series,pointIx,item)),data},PlotAreaBase.prototype.createPanes=function createPanes(){for(var titleOptions=this.options.title||{},paneDefaults=this.options.paneDefaults,paneOptions=this.options.panes||[],panesLength=Math.max(paneOptions.length,1),panes=[],defaults=deepExtend({title:{color:titleOptions.color}},paneDefaults),i=0;i<panesLength;i++){var options=deepExtend({},defaults,paneOptions[i]);isString(options.title)&&(options.title=deepExtend({text:options.title},defaults.title));var currentPane=new pane(options);currentPane.paneIndex=i,panes.push(currentPane),this.append(currentPane)}this.panes=panes},PlotAreaBase.prototype.crosshairOptions=function crosshairOptions(axis){return axis.options.crosshair},PlotAreaBase.prototype.createCrosshairs=function createCrosshairs(panes){void 0===panes&&(panes=this.panes);for(var i=0;i<panes.length;i++)for(var pane=panes[i],j=0;j<pane.axes.length;j++){var axis=pane.axes[j],options=this.crosshairOptions(axis);if(options&&options.visible){var currentCrosshair=new crosshair(this.chartService,axis,options);this.crosshairs.push(currentCrosshair),pane.content.append(currentCrosshair)}}},PlotAreaBase.prototype.removeCrosshairs=function removeCrosshairs(pane){for(var crosshairs=this.crosshairs,axes=pane.axes,i=crosshairs.length-1;i>=0;i--)for(var j=0;j<axes.length;j++)if(crosshairs[i].axis===axes[j]){crosshairs.splice(i,1);break}},PlotAreaBase.prototype.hideCrosshairs=function hideCrosshairs(){for(var crosshairs=this.crosshairs,idx=0;idx<crosshairs.length;idx++)crosshairs[idx].hide()},PlotAreaBase.prototype.findPane=function findPane(name){for(var matchingPane,panes=this.panes,i=0;i<panes.length;i++)if(panes[i].options.name===name){matchingPane=panes[i];break}return matchingPane||panes[0]},PlotAreaBase.prototype.findPointPane=function findPointPane(point){for(var matchingPane,panes=this.panes,i=0;i<panes.length;i++)if(panes[i].box.containsPoint(point)){matchingPane=panes[i];break}return matchingPane},PlotAreaBase.prototype.appendAxis=function appendAxis(axis){this.findPane(axis.options.pane).appendAxis(axis),this.axes.push(axis),axis.plotArea=this},PlotAreaBase.prototype.removeAxis=function removeAxis(axisToRemove){for(var filteredAxes=[],i=0;i<this.axes.length;i++){var axis=this.axes[i];axisToRemove!==axis?filteredAxes.push(axis):axis.destroy()}this.axes=filteredAxes},PlotAreaBase.prototype.appendChart=function appendChart(chart,pane){this.charts.push(chart),pane?pane.appendChart(chart):this.append(chart)},PlotAreaBase.prototype.removeChart=function removeChart(chartToRemove){for(var filteredCharts=[],i=0;i<this.charts.length;i++){var chart=this.charts[i];chart!==chartToRemove?filteredCharts.push(chart):chart.destroy()}this.charts=filteredCharts},PlotAreaBase.prototype.addToLegend=function addToLegend(series){for(var count=series.length,legend=this.options.legend,labels=legend.labels||{},inactiveItems=legend.inactiveItems||{},inactiveItemsLabels=inactiveItems.labels||{},data=[],i=0;i<count;i++){var currentSeries=series[i],seriesVisible=!1!==currentSeries.visible;if(!1!==currentSeries.visibleInLegend){var text=currentSeries.name,labelTemplate=seriesVisible?getTemplate(labels):getTemplate(inactiveItemsLabels)||getTemplate(labels);labelTemplate&&(text=labelTemplate({text:hasValue(text)?text:"",series:currentSeries}));var defaults=currentSeries._defaults,color=currentSeries.color;isFunction(color)&&defaults&&(color=defaults.color);var itemLabelOptions=void 0,markerColor=void 0;seriesVisible?(itemLabelOptions={},markerColor=color):(itemLabelOptions={color:inactiveItemsLabels.color,font:inactiveItemsLabels.font},markerColor=inactiveItems.markers.color),hasValue(text)&&""!==text&&data.push({text,labels:itemLabelOptions,markerColor,series:currentSeries,active:seriesVisible})}}append(legend.items,data)},PlotAreaBase.prototype.groupAxes=function groupAxes(panes){for(var xAxes=[],yAxes=[],paneIx=0;paneIx<panes.length;paneIx++)for(var paneAxes=panes[paneIx].axes,axisIx=0;axisIx<paneAxes.length;axisIx++){var axis=paneAxes[axisIx];axis.options.vertical?yAxes.push(axis):xAxes.push(axis)}return{x:xAxes,y:yAxes,any:xAxes.concat(yAxes)}},PlotAreaBase.prototype.groupSeriesByPane=function groupSeriesByPane(){for(var series=this.series,seriesByPane={},i=0;i<series.length;i++){var currentSeries=series[i],pane=this.seriesPaneName(currentSeries);seriesByPane[pane]?seriesByPane[pane].push(currentSeries):seriesByPane[pane]=[currentSeries]}return seriesByPane},PlotAreaBase.prototype.filterVisibleSeries=function filterVisibleSeries(series){for(var result=[],i=0;i<series.length;i++){var currentSeries=series[i];!1!==currentSeries.visible&&result.push(currentSeries)}return result},PlotAreaBase.prototype.reflow=function reflow(targetBox){var options=this.options.plotArea,panes=this.panes,margin=getSpacing(options.margin);this.box=targetBox.clone().unpad(margin),this.reflowPanes(),this.detachLabels(),this.reflowAxes(panes),this.reflowCharts(panes)},PlotAreaBase.prototype.redraw=function redraw(panes){var panesArray=[].concat(panes);this.initSeries();var root=this.getRoot();root&&root.cleanGradients();for(var i=0;i<panesArray.length;i++)this.removeCrosshairs(panesArray[i]),panesArray[i].empty();this._bindCache=new WeakMap,this.render(panesArray),this.detachLabels(),this.reflowAxes(this.panes),this.reflowCharts(panesArray),this.createCrosshairs(panesArray);for(var i$1=0;i$1<panesArray.length;i$1++)panesArray[i$1].refresh()},PlotAreaBase.prototype.axisCrossingValues=function axisCrossingValues(axis,crossingAxes){for(var options=axis.options,crossingValues=[].concat(options.axisCrossingValues||options.axisCrossingValue),valuesToAdd=crossingAxes.length-crossingValues.length,defaultValue=crossingValues[0]||0,i=0;i<valuesToAdd;i++)crossingValues.push(defaultValue);return crossingValues},PlotAreaBase.prototype.alignAxisTo=function alignAxisTo(axis,targetAxis,crossingValue,targetCrossingValue){var slot=axis.getSlot(crossingValue,crossingValue,!0),slotEdge=axis.options.reverse?2:1,targetSlot=targetAxis.getSlot(targetCrossingValue,targetCrossingValue,!0),targetEdge=targetAxis.options.reverse?2:1,axisBox=axis.box.translate(targetSlot[X+targetEdge]-slot[X+slotEdge],targetSlot[Y+targetEdge]-slot[Y+slotEdge]);axis.pane!==targetAxis.pane&&axisBox.translate(0,axis.pane.box.y1-targetAxis.pane.box.y1),axis.reflow(axisBox)},PlotAreaBase.prototype.alignAxes=function alignAxes(xAxes,yAxes){for(var xAnchor=xAxes[0],yAnchor=yAxes[0],xAnchorCrossings=this.axisCrossingValues(xAnchor,yAxes),yAnchorCrossings=this.axisCrossingValues(yAnchor,xAxes),leftAnchors={},rightAnchors={},topAnchors={},bottomAnchors={},i=0;i<yAxes.length;i++){var axis=yAxes[i],pane=axis.pane,paneId=pane.id,visible=!1!==axis.options.visible,anchor=paneAnchor(xAxes,pane)||xAnchor,anchorCrossings=xAnchorCrossings;anchor!==xAnchor&&(anchorCrossings=this.axisCrossingValues(anchor,yAxes)),this.alignAxisTo(axis,anchor,yAnchorCrossings[i],anchorCrossings[i]),axis.options._overlap||(drawing_utils_round(axis.lineBox().x1)===drawing_utils_round(anchor.lineBox().x1)&&(leftAnchors[paneId]&&axis.reflow(axis.box.alignTo(leftAnchors[paneId].box,LEFT).translate(-axis.options.margin,0)),visible&&(leftAnchors[paneId]=axis)),drawing_utils_round(axis.lineBox().x2)===drawing_utils_round(anchor.lineBox().x2)&&(axis._mirrored||(axis.options.labels.mirror=!axis.options.labels.mirror,axis._mirrored=!0),this.alignAxisTo(axis,anchor,yAnchorCrossings[i],anchorCrossings[i]),rightAnchors[paneId]&&axis.reflow(axis.box.alignTo(rightAnchors[paneId].box,RIGHT).translate(axis.options.margin,0)),visible&&(rightAnchors[paneId]=axis)),0!==i&&yAnchor.pane===axis.pane&&(axis.alignTo(yAnchor),axis.reflow(axis.box)))}for(var i$1=0;i$1<xAxes.length;i$1++){var axis$1=xAxes[i$1],pane$1=axis$1.pane,paneId$1=pane$1.id,visible$1=!1!==axis$1.options.visible,anchor$1=paneAnchor(yAxes,pane$1)||yAnchor,anchorCrossings$1=yAnchorCrossings;anchor$1!==yAnchor&&(anchorCrossings$1=this.axisCrossingValues(anchor$1,xAxes)),this.alignAxisTo(axis$1,anchor$1,xAnchorCrossings[i$1],anchorCrossings$1[i$1]),axis$1.options._overlap||(drawing_utils_round(axis$1.lineBox().y1)===drawing_utils_round(anchor$1.lineBox().y1)&&(axis$1._mirrored||(axis$1.options.labels.mirror=!axis$1.options.labels.mirror,axis$1._mirrored=!0),this.alignAxisTo(axis$1,anchor$1,xAnchorCrossings[i$1],anchorCrossings$1[i$1]),topAnchors[paneId$1]&&axis$1.reflow(axis$1.box.alignTo(topAnchors[paneId$1].box,TOP).translate(0,-axis$1.options.margin)),visible$1&&(topAnchors[paneId$1]=axis$1)),drawing_utils_round(axis$1.lineBox().y2,3)===drawing_utils_round(anchor$1.lineBox().y2,3)&&(bottomAnchors[paneId$1]&&axis$1.reflow(axis$1.box.alignTo(bottomAnchors[paneId$1].box,BOTTOM).translate(0,axis$1.options.margin)),visible$1&&(bottomAnchors[paneId$1]=axis$1)),0!==i$1&&(axis$1.alignTo(xAnchor),axis$1.reflow(axis$1.box)))}},PlotAreaBase.prototype.shrinkAxisWidth=function shrinkAxisWidth(panes){for(var axes=this.groupAxes(panes).any,axisBox=axisGroupBox(axes),overflowX=0,i=0;i<panes.length;i++){var currentPane=panes[i];currentPane.axes.length>0&&(overflowX=Math.max(overflowX,axisBox.width()-currentPane.contentBox.width()))}if(0!==overflowX)for(var i$1=0;i$1<axes.length;i$1++){var currentAxis=axes[i$1];currentAxis.options.vertical||currentAxis.reflow(currentAxis.box.shrink(overflowX,0))}},PlotAreaBase.prototype.shrinkAxisHeight=function shrinkAxisHeight(panes){for(var shrinked,i=0;i<panes.length;i++){var currentPane=panes[i],axes=currentPane.axes,overflowY=Math.max(0,axisGroupBox(axes).height()-currentPane.contentBox.height());if(0!==overflowY){for(var j=0;j<axes.length;j++){var currentAxis=axes[j];currentAxis.options.vertical&&currentAxis.reflow(currentAxis.box.shrink(0,overflowY))}shrinked=!0}}return shrinked},PlotAreaBase.prototype.fitAxes=function fitAxes(panes){for(var axes=this.groupAxes(panes).any,offsetX=0,i=0;i<panes.length;i++){var currentPane=panes[i],paneAxes=currentPane.axes,paneBox=currentPane.contentBox;if(paneAxes.length>0){var axisBox=axisGroupBox(paneAxes),offsetY=Math.max(paneBox.y1-axisBox.y1,paneBox.y2-axisBox.y2);offsetX=Math.max(offsetX,paneBox.x1-axisBox.x1);for(var j=0;j<paneAxes.length;j++){var currentAxis=paneAxes[j];currentAxis.reflow(currentAxis.box.translate(0,offsetY))}}}for(var i$1=0;i$1<axes.length;i$1++){var currentAxis$1=axes[i$1];currentAxis$1.reflow(currentAxis$1.box.translate(offsetX,0))}},PlotAreaBase.prototype.reflowAxes=function reflowAxes(panes){for(var axes=this.groupAxes(panes),i=0;i<panes.length;i++)this.reflowPaneAxes(panes[i]);axes.x.length>0&&axes.y.length>0&&(this.alignAxes(axes.x,axes.y),this.shrinkAxisWidth(panes),this.autoRotateAxisLabels(axes),this.alignAxes(axes.x,axes.y),this.shrinkAxisWidth(panes)&&this.alignAxes(axes.x,axes.y),this.shrinkAxisHeight(panes),this.alignAxes(axes.x,axes.y),this.shrinkAxisHeight(panes)&&this.alignAxes(axes.x,axes.y),this.fitAxes(panes))},PlotAreaBase.prototype.autoRotateAxisLabels=function autoRotateAxisLabels(groupedAxes){for(var rotated,panes=this.panes,axes=allPaneAxes(panes),idx=0;idx<axes.length;idx++){axes[idx].autoRotateLabels()&&(rotated=!0)}if(rotated){for(var idx$1=0;idx$1<panes.length;idx$1++)this.reflowPaneAxes(panes[idx$1]);groupedAxes.x.length>0&&groupedAxes.y.length>0&&(this.alignAxes(groupedAxes.x,groupedAxes.y),this.shrinkAxisWidth(panes))}},PlotAreaBase.prototype.reflowPaneAxes=function reflowPaneAxes(pane){var axes=pane.axes,length=axes.length;if(length>0)for(var i=0;i<length;i++)axes[i].reflow(pane.contentBox)},PlotAreaBase.prototype.reflowCharts=function reflowCharts(panes){for(var charts=this.charts,count=charts.length,box=this.box,i=0;i<count;i++){var chartPane=charts[i].pane;chartPane&&!inArray(chartPane,panes)||charts[i].reflow(box)}},PlotAreaBase.prototype.reflowPanes=function reflowPanes(){for(var box=this.box,panes=this.panes,panesLength=panes.length,remainingHeight=box.height(),autoHeightPanes=0,top=box.y1,i=0;i<panesLength;i++){var currentPane=panes[i],height=currentPane.options.height;if(currentPane.options.width=box.width(),currentPane.options.height){if(height.indexOf&&height.indexOf("%")){var percents=parseInt(height,10)/100;currentPane.options.height=percents*box.height()}currentPane.reflow(box.clone()),remainingHeight-=currentPane.options.height}else autoHeightPanes++}for(var i$1=0;i$1<panesLength;i$1++){var currentPane$1=panes[i$1];currentPane$1.options.height||(currentPane$1.options.height=remainingHeight/autoHeightPanes)}for(var i$2=0;i$2<panesLength;i$2++){var currentPane$2=panes[i$2],paneBox=box.clone().move(box.x1,top);currentPane$2.reflow(paneBox),top+=currentPane$2.options.height}},PlotAreaBase.prototype.backgroundBox=function backgroundBox(){for(var box,axes=this.axes,axesCount=axes.length,i=0;i<axesCount;i++)for(var axisA=axes[i],j=0;j<axesCount;j++){var axisB=axes[j];if(axisA.options.vertical!==axisB.options.vertical){var lineBox=axisA.lineBox().clone().wrap(axisB.lineBox());box=box?box.wrap(lineBox):lineBox}}return box||this.box},PlotAreaBase.prototype.chartsBoxes=function chartsBoxes(){for(var panes=this.panes,boxes=[],idx=0;idx<panes.length;idx++)boxes.push(panes[idx].chartsBox());return boxes},PlotAreaBase.prototype.addBackgroundPaths=function addBackgroundPaths(multipath){for(var boxes=this.chartsBoxes(),idx=0;idx<boxes.length;idx++)multipath.paths.push(shapes_path.w.fromRect(boxes[idx].toRect()))},PlotAreaBase.prototype.backgroundContainsPoint=function backgroundContainsPoint(point){for(var boxes=this.chartsBoxes(),idx=0;idx<boxes.length;idx++)if(boxes[idx].containsPoint(point))return!0},PlotAreaBase.prototype.createVisual=function createVisual(){ChartElement.prototype.createVisual.call(this);var options=this.options.plotArea,opacity=options.opacity,background=options.background,border=options.border;void 0===border&&(border={}),function isTransparent(color){return""===color||null===color||"none"===color||"transparent"===color||!drawing_utils_defined(color)}(background)&&(background=WHITE,opacity=0);var bg=this._bgVisual=new shapes_path.P({fill:{color:background,opacity},stroke:{color:border.width?border.color:"",width:border.width,dashType:border.dashType},zIndex:-1});this.addBackgroundPaths(bg),this.appendVisual(bg)},PlotAreaBase.prototype.pointsByCategoryIndex=function pointsByCategoryIndex(categoryIndex){var charts=this.charts,result=[];if(null!==categoryIndex)for(var i=0;i<charts.length;i++){if("_navigator"!==charts[i].pane.options.name){var points=charts[i].categoryPoints[categoryIndex];if(points&&points.length)for(var j=0;j<points.length;j++){var point=points[j];point&&drawing_utils_defined(point.value)&&null!==point.value&&result.push(point)}}}return result},PlotAreaBase.prototype.pointsBySeriesIndex=function pointsBySeriesIndex(seriesIndex){return this.filterPoints((function(point){return point.series.index===seriesIndex}))},PlotAreaBase.prototype.pointsBySeriesName=function pointsBySeriesName(name){return this.filterPoints((function(point){return point.series.name===name}))},PlotAreaBase.prototype.filterPoints=function filterPoints(callback){for(var charts=this.charts,result=[],i=0;i<charts.length;i++)for(var points=charts[i].points,j=0;j<points.length;j++){var point=points[j];point&&!1!==point.visible&&callback(point)&&result.push(point)}return result},PlotAreaBase.prototype.findPoint=function findPoint(callback){for(var charts=this.charts,i=0;i<charts.length;i++)for(var points=charts[i].points,j=0;j<points.length;j++){var point=points[j];if(point&&!1!==point.visible&&callback(point))return point}},PlotAreaBase.prototype.paneByPoint=function paneByPoint(point){for(var panes=this.panes,i=0;i<panes.length;i++){var pane=panes[i];if(pane.box.containsPoint(point))return pane}},PlotAreaBase.prototype.detachLabels=function detachLabels(){var axes=this.groupAxes(this.panes),xAxes=axes.x,yAxes=axes.y;this.detachAxisGroupLabels(yAxes,xAxes),this.detachAxisGroupLabels(xAxes,yAxes)},PlotAreaBase.prototype.detachAxisGroupLabels=function detachAxisGroupLabels(axes,crossingAxes){for(var labelAxisCount=0,i=0;i<axes.length;i++){var axis=axes[i],pane=axis.pane,anchor=paneAnchor(crossingAxes,pane)||crossingAxes[0],axisIndex=i+labelAxisCount,labelAxis=this.createLabelAxis(axis,axisIndex,anchor);if(labelAxis){labelAxisCount++;var pos=pane.axes.indexOf(axis)+labelAxisCount;pane.appendAxisAt(labelAxis,pos)}}},PlotAreaBase.prototype.createLabelAxis=function createLabelAxis(axis,axisIndex,anchor){var labelOptions=axis.options.labels,position=labelOptions.position,onAxis="end"!==position&&"start"!==position,visible=labelOptions.visible;if(onAxis||!1===visible)return null;var allAxes=this.groupAxes(this.panes),crossingAxes=anchor.options.vertical?allAxes.x:allAxes.y,anchorCrossings=this.axisCrossingValues(anchor,crossingAxes),end="end"===position,range=anchor.range(),edge=end?range.max:range.min;if(limitValue(anchorCrossings[axisIndex],range.min,range.max)-edge===0)return null;anchorCrossings.splice(axisIndex+1,0,edge),anchor.options.axisCrossingValues=anchorCrossings;var labelAxis=axis.clone();return axis.clear(),labelAxis.options.name=void 0,labelAxis.options.line.visible=!1,labelAxis.options.crosshair=void 0,labelAxis.options.notes=void 0,labelAxis.options.plotBands=void 0,labelAxis},PlotAreaBase.prototype.isTrendline=function isTrendline(series){return series&&inArray(series.type,TRENDLINE_SERIES)},PlotAreaBase.prototype.trendlineFactory=function trendlineFactory(){},PlotAreaBase.prototype.createTrendlineSeries=function createTrendlineSeries(){var this$1=this,modifiedSeries=[];return this.series=this.series.map((function(series){if(!this$1.isTrendline(series))return series;var forSeries=this$1.seriesByName(series.for);if(!forSeries)throw new Error('Invalid Configuration: Unable to locate linked series "'+series.for+'" for trendline "'+series.name+'".');var valueFields=series_binder.current.valueFields(forSeries),field=last(valueFields),trendlineSeries=this$1.trendlineFactory(Object.assign({},{field},series),forSeries);return trendlineSeries&&(!1===forSeries.visible&&(trendlineSeries.visible=!1),"inherit"===trendlineSeries.color&&(trendlineSeries.color=forSeries.color),modifiedSeries.push(trendlineSeries)),trendlineSeries})).filter((function(series){return null!==series})),modifiedSeries},PlotAreaBase.prototype.seriesByName=function seriesByName(name){return this.series.find((function(series){return series.name===name}))},PlotAreaBase}(chart_element);function isSingleAxis(axis){return!axis.pane.axes.some((function(a){return a.options.vertical===axis.options.vertical&&a!==axis&&!1!==a.options.visible}))}function axisGroupBox(axes){for(var box,length=axes.length,i=0;i<length;i++){var axis=axes[i],visible=!1!==axis.options.visible;if(visible||isSingleAxis(axis)){var axisBox=visible?axis.contentBox():axis.lineBox();box?box.wrap(axisBox):box=axisBox.clone()}}return box||new core_box}function paneAnchor(axes,pane){for(var i=0;i<axes.length;i++){var anchor=axes[i];if(anchor&&anchor.pane===pane)return anchor}}var allPaneAxes=function(panes){return panes.reduce((function(acc,pane){return acc.concat(pane.axes)}),[])};setDefaultOptions(PlotAreaBase,{series:[],plotArea:{margin:{}},background:"",border:{color:BLACK,width:0},paneDefaults:{title:{}},legend:{inactiveItems:{labels:{color:"#919191"},markers:{color:"#919191"}}}});const plotarea_base=PlotAreaBase;var PlotAreaEventsMixin={hover:function(chart,e){this._dispatchEvent(chart,e,"plotAreaHover")},click:function(chart,e){this._dispatchEvent(chart,e,"plotAreaClick")}};const plotarea_events_mixin=PlotAreaEventsMixin;function setValue(fieldName,target,value){var parentObj=target,field=fieldName;if(fieldName.indexOf(".")>-1){for(var parts=fieldName.split(".");parts.length>1;)field=parts.shift(),drawing_utils_defined(parentObj[field])||(parentObj[field]={}),parentObj=parentObj[field];field=parts.shift()}parentObj[field]=value}const series_aggregator=function(Class){function SeriesAggregator(series,binder,defaultAggregates){Class.call(this);var canonicalFields=binder.canonicalFields(series),valueFields=binder.valueFields(series),sourceFields=binder.sourceFields(series,canonicalFields),seriesFields=this._seriesFields=[],defaults=defaultAggregates.query(series.type),rootAggregate=series.aggregate||defaults;this._series=series,this._binder=binder;for(var i=0;i<canonicalFields.length;i++){var field=canonicalFields[i],fieldAggregate=void 0;if(isObject(rootAggregate))fieldAggregate=rootAggregate[field];else{if(0!==i&&!inArray(field,valueFields))break;fieldAggregate=rootAggregate}fieldAggregate&&seriesFields.push({canonicalName:field,name:sourceFields[i],transform:isFunction(fieldAggregate)?fieldAggregate:aggregates[fieldAggregate]})}}return Class&&(SeriesAggregator.__proto__=Class),SeriesAggregator.prototype=Object.create(Class&&Class.prototype),SeriesAggregator.prototype.constructor=SeriesAggregator,SeriesAggregator.prototype.aggregatePoints=function aggregatePoints(srcPoints,group){var series=this._series,seriesFields=this._seriesFields,data=this._bindPoints(srcPoints||[]),firstDataItem=data.dataItems[0],result={};if(firstDataItem&&!isNumber(firstDataItem)&&!isArray(firstDataItem)){var fn=function(){};fn.prototype=firstDataItem,result=new fn}for(var i=0;i<seriesFields.length;i++){var field=seriesFields[i],srcValues=this._bindField(data.values,field.canonicalName),value=field.transform(srcValues,series,data.dataItems,group);if(!(null===value||!isObject(value)||drawing_utils_defined(value.length)||value instanceof Date)){result=value;break}drawing_utils_defined(value)&&setValue(field.name,result,value)}return result},SeriesAggregator.prototype._bindPoints=function _bindPoints(points){for(var binder=this._binder,series=this._series,values=[],dataItems=[],i=0;i<points.length;i++){var pointIx=points[i];values.push(binder.bindPoint(series,pointIx)),dataItems.push(series.data[pointIx])}return{values,dataItems}},SeriesAggregator.prototype._bindField=function _bindField(data,field){for(var values=[],count=data.length,i=0;i<count;i++){var item=data[i],valueFields=item.valueFields,value=void 0;value=drawing_utils_defined(valueFields[field])?valueFields[field]:item.fields[field],values.push(value)}return values},SeriesAggregator}(common_class.A);var DefaultAggregates=function(Class){function DefaultAggregates(){Class.call(this),this._defaults={}}return Class&&(DefaultAggregates.__proto__=Class),DefaultAggregates.prototype=Object.create(Class&&Class.prototype),DefaultAggregates.prototype.constructor=DefaultAggregates,DefaultAggregates.prototype.register=function register(seriesTypes,aggregates){for(var i=0;i<seriesTypes.length;i++)this._defaults[seriesTypes[i]]=aggregates},DefaultAggregates.prototype.query=function query(seriesType){return this._defaults[seriesType]},DefaultAggregates}(common_class.A);DefaultAggregates.current=new DefaultAggregates;const default_aggregates=DefaultAggregates;var RangeBar=function(Bar){function RangeBar(){Bar.apply(this,arguments)}return Bar&&(RangeBar.__proto__=Bar),RangeBar.prototype=Object.create(Bar&&Bar.prototype),RangeBar.prototype.constructor=RangeBar,RangeBar.prototype.createLabel=function createLabel(){var labels=this.options.labels,fromOptions=deepExtend({},labels,labels.from),toOptions=deepExtend({},labels,labels.to);fromOptions.visible&&(this.labelFrom=this._createLabel(fromOptions),this.append(this.labelFrom)),toOptions.visible&&(this.labelTo=this._createLabel(toOptions),this.append(this.labelTo))},RangeBar.prototype._createLabel=function _createLabel(options){var labelText,labelTemplate=getTemplate(options),pointData=this.pointData();return labelText=labelTemplate?labelTemplate(pointData):this.formatValue(options.format),new bar_label(labelText,deepExtend({vertical:this.options.vertical},options),pointData)},RangeBar.prototype.reflow=function reflow(targetBox){this.render();var labelFrom=this.labelFrom,labelTo=this.labelTo,value=this.value;this.box=targetBox,labelFrom&&(labelFrom.options.aboveAxis=value.from>value.to,labelFrom.reflow(targetBox)),labelTo&&(labelTo.options.aboveAxis=value.to>value.from,labelTo.reflow(targetBox)),this.note&&this.note.reflow(targetBox)},RangeBar}(bar);RangeBar.prototype.defaults=deepExtend({},RangeBar.prototype.defaults,{labels:{format:"{0} - {1}"},tooltip:{format:"{1}"}});const range_bar=RangeBar;var RangeBarChart=function(BarChart){function RangeBarChart(){BarChart.apply(this,arguments)}return BarChart&&(RangeBarChart.__proto__=BarChart),RangeBarChart.prototype=Object.create(BarChart&&BarChart.prototype),RangeBarChart.prototype.constructor=RangeBarChart,RangeBarChart.prototype.pointType=function pointType(){return range_bar},RangeBarChart.prototype.pointValue=function pointValue(data){return data.valueFields},RangeBarChart.prototype.formatPointValue=function formatPointValue(point,format){return null===point.value.from&&null===point.value.to?"":this.chartService.format.auto(format,point.value.from,point.value.to)},RangeBarChart.prototype.plotRange=function plotRange(point){return point?[point.value.from,point.value.to]:0},RangeBarChart.prototype.updateRange=function updateRange(value,fields){var axisName=fields.series.axis,from=value.from,to=value.to,axisRange=this.valueAxisRanges[axisName];null!==value&&isNumber(from)&&isNumber(to)&&((axisRange=this.valueAxisRanges[axisName]=axisRange||{min:MAX_VALUE,max:MIN_VALUE}).min=Math.min(axisRange.min,from),axisRange.max=Math.max(axisRange.max,from),axisRange.min=Math.min(axisRange.min,to),axisRange.max=Math.max(axisRange.max,to))},RangeBarChart.prototype.aboveAxis=function aboveAxis(point){var value=point.value;return value.from<value.to},RangeBarChart}(bar_chart);RangeBarChart.prototype.plotLimits=categorical_chart.prototype.plotLimits;const range_bar_chart=RangeBarChart;var RangeLinePoint=function(LinePoint){function RangeLinePoint(){LinePoint.apply(this,arguments)}return LinePoint&&(RangeLinePoint.__proto__=LinePoint),RangeLinePoint.prototype=Object.create(LinePoint&&LinePoint.prototype),RangeLinePoint.prototype.constructor=RangeLinePoint,RangeLinePoint.prototype.aliasFor=function aliasFor(){return this.parent},RangeLinePoint}(line_point);const range_line_point=RangeLinePoint;var RangeAreaPoint=function(ChartElement){function RangeAreaPoint(value,options){ChartElement.call(this),this.value=value,this.options=options,this.aboveAxis=valueOrDefault(this.options.aboveAxis,!0),this.tooltipTracking=!0,this.initLabelsFormat()}return ChartElement&&(RangeAreaPoint.__proto__=ChartElement),RangeAreaPoint.prototype=Object.create(ChartElement&&ChartElement.prototype),RangeAreaPoint.prototype.constructor=RangeAreaPoint,RangeAreaPoint.prototype.render=function render(){if(!this._rendered){this._rendered=!0;var ref=this.options,markers=ref.markers,labels=ref.labels,value=this.value,fromPoint=this.fromPoint=new range_line_point(value,deepExtend({},this.options,{labels:labels.from,markers:markers.from})),toPoint=this.toPoint=new range_line_point(value,deepExtend({},this.options,{labels:labels.to,markers:markers.to}));this.copyFields(fromPoint),this.copyFields(toPoint),this.append(fromPoint),this.append(toPoint)}},RangeAreaPoint.prototype.reflow=function reflow(targetBox){this.render();var fromBox=targetBox.from,toBox=targetBox.to;this.positionLabels(fromBox,toBox),this.fromPoint.reflow(fromBox),this.toPoint.reflow(toBox),this.box=this.fromPoint.markerBox().clone().wrap(this.toPoint.markerBox())},RangeAreaPoint.prototype.createHighlight=function createHighlight(){var group=new shapes_group.A;return group.append(this.fromPoint.createHighlight()),group.append(this.toPoint.createHighlight()),group},RangeAreaPoint.prototype.highlightVisual=function highlightVisual(){return this.visual},RangeAreaPoint.prototype.highlightVisualArgs=function highlightVisualArgs(){return{options:this.options,from:this.fromPoint.highlightVisualArgs(),to:this.toPoint.highlightVisualArgs()}},RangeAreaPoint.prototype.tooltipAnchor=function tooltipAnchor(){var clipBox=this.owner.pane.clipBox();if(!clipBox||clipBox.overlaps(this.box)){var x,y,verticalAlign,box=this.box,center=box.center(),horizontalAlign=LEFT;return this.options.vertical?(x=center.x,y=box.y1-5,verticalAlign=BOTTOM):(x=box.x2+5,y=center.y,verticalAlign=CENTER),{point:new core_point(x,y),align:{horizontal:horizontalAlign,vertical:verticalAlign}}}},RangeAreaPoint.prototype.formatValue=function formatValue(format){return this.owner.formatPointValue(this,format)},RangeAreaPoint.prototype.overlapsBox=function overlapsBox(box){return this.box.overlaps(box)},RangeAreaPoint.prototype.unclipElements=function unclipElements(){this.fromPoint.unclipElements(),this.toPoint.unclipElements()},RangeAreaPoint.prototype.initLabelsFormat=function initLabelsFormat(){var labels=this.options.labels;labels.format||(labels.from&&labels.from.format||(labels.from=Object.assign({},labels.from,{format:"{0}"})),labels.to&&labels.to.format||(labels.to=Object.assign({},labels.to,{format:"{1}"})))},RangeAreaPoint.prototype.positionLabels=function positionLabels(fromBox,toBox){var fromLabelPosition,toLabelPosition,ref=this.options,labels=ref.labels,vertical=ref.vertical;"auto"===labels.position&&(vertical?toBox.y1<=fromBox.y1?(toLabelPosition="above",fromLabelPosition="below"):(toLabelPosition="below",fromLabelPosition="above"):toBox.x1<=fromBox.x1?(toLabelPosition=LEFT,fromLabelPosition=RIGHT):(toLabelPosition=RIGHT,fromLabelPosition=LEFT),labels.from&&labels.from.position||(this.fromPoint.options.labels.position=fromLabelPosition),labels.to&&labels.to.position||(this.toPoint.options.labels.position=toLabelPosition))},RangeAreaPoint.prototype.copyFields=function copyFields(point){point.dataItem=this.dataItem,point.category=this.category,point.series=this.series,point.color=this.color,point.owner=this.owner},RangeAreaPoint}(chart_element);deepExtend(RangeAreaPoint.prototype,point_events_mixin),deepExtend(RangeAreaPoint.prototype,note_mixin),RangeAreaPoint.prototype.defaults={markers:{visible:!1,background:WHITE,size:8,type:CIRCLE,border:{width:2},opacity:1},labels:{visible:!1,margin:getSpacing(3),padding:getSpacing(4),animation:{type:"fadeIn",delay:600},position:"auto"},notes:{label:{}},highlight:{markers:{border:{color:WHITE,width:2}},zIndex:100},tooltip:{format:"{0} - {1}"}};const range_area_point=RangeAreaPoint;var RangeAreaSegment=function(AreaSegment){function RangeAreaSegment(){AreaSegment.apply(this,arguments)}return AreaSegment&&(RangeAreaSegment.__proto__=AreaSegment),RangeAreaSegment.prototype=Object.create(AreaSegment&&AreaSegment.prototype),RangeAreaSegment.prototype.constructor=RangeAreaSegment,RangeAreaSegment.prototype.createStrokeSegments=function createStrokeSegments(){return this.segmentsFromPoints(this.toGeometryPoints(this.toPoints()))},RangeAreaSegment.prototype.stackSegments=function stackSegments(){var fromSegments=this.fromSegments;return this.fromSegments||(fromSegments=this.fromSegments=this.segmentsFromPoints(this.toGeometryPoints(this.fromPoints().reverse()))),fromSegments},RangeAreaSegment.prototype.createStroke=function createStroke(style){var toPath=new shapes_path.w(style),fromPath=new shapes_path.w(style);toPath.segments.push.apply(toPath.segments,this.strokeSegments()),fromPath.segments.push.apply(fromPath.segments,this.stackSegments()),this.visual.append(toPath),this.visual.append(fromPath)},RangeAreaSegment.prototype.hasStackSegment=function hasStackSegment(){return!0},RangeAreaSegment.prototype.fromPoints=function fromPoints(){return this.linePoints.map((function(point){return point.fromPoint}))},RangeAreaSegment.prototype.toPoints=function toPoints(){return this.linePoints.map((function(point){return point.toPoint}))},RangeAreaSegment}(area_segment);const range_area_segment=RangeAreaSegment;var SplineRangeAreaSegment=function(RangeAreaSegment){function SplineRangeAreaSegment(){RangeAreaSegment.apply(this,arguments)}return RangeAreaSegment&&(SplineRangeAreaSegment.__proto__=RangeAreaSegment),SplineRangeAreaSegment.prototype=Object.create(RangeAreaSegment&&RangeAreaSegment.prototype),SplineRangeAreaSegment.prototype.constructor=SplineRangeAreaSegment,SplineRangeAreaSegment.prototype.createStrokeSegments=function createStrokeSegments(){return this.createCurveSegments(this.toPoints())},SplineRangeAreaSegment.prototype.stackSegments=function stackSegments(){var fromSegments=this.fromSegments;return this.fromSegments||(fromSegments=this.fromSegments=this.createCurveSegments(this.fromPoints().reverse())),fromSegments},SplineRangeAreaSegment.prototype.createCurveSegments=function createCurveSegments(points){return(new curve_processor).process(this.toGeometryPoints(points))},SplineRangeAreaSegment}(range_area_segment);const spline_range_area_segment=SplineRangeAreaSegment;var StepRangeAreaSegment=function(RangeAreaSegment){function StepRangeAreaSegment(){RangeAreaSegment.apply(this,arguments)}return RangeAreaSegment&&(StepRangeAreaSegment.__proto__=RangeAreaSegment),StepRangeAreaSegment.prototype=Object.create(RangeAreaSegment&&RangeAreaSegment.prototype),StepRangeAreaSegment.prototype.constructor=StepRangeAreaSegment,StepRangeAreaSegment.prototype.createStrokeSegments=function createStrokeSegments(){return this.segmentsFromPoints(this.calculateStepPoints(this.toPoints()))},StepRangeAreaSegment.prototype.stackSegments=function stackSegments(){var fromSegments=this.fromSegments;return this.fromSegments||(fromSegments=this.fromSegments=this.segmentsFromPoints(this.calculateStepPoints(this.fromPoints()))).reverse(),fromSegments},StepRangeAreaSegment}(range_area_segment);deepExtend(StepRangeAreaSegment.prototype,step_line_mixin);const step_range_area_segment=StepRangeAreaSegment;var RangeAreaChart=function(CategoricalChart){function RangeAreaChart(){CategoricalChart.apply(this,arguments)}return CategoricalChart&&(RangeAreaChart.__proto__=CategoricalChart),RangeAreaChart.prototype=Object.create(CategoricalChart&&CategoricalChart.prototype),RangeAreaChart.prototype.constructor=RangeAreaChart,RangeAreaChart.prototype.render=function render(){CategoricalChart.prototype.render.call(this),this.renderSegments()},RangeAreaChart.prototype.pointType=function pointType(){return range_area_point},RangeAreaChart.prototype.createPoint=function createPoint(data,fields){var series=fields.series,seriesIx=fields.seriesIx,value=data.valueFields;if(!hasValue(value.from)&&!hasValue(value.to)){if(this.seriesMissingValues(series)!==ZERO)return null;value={from:0,to:0}}var pointOptions=this.pointOptions(series,seriesIx);pointOptions=this.evalPointOptions(pointOptions,value,fields);var color=data.fields.color||series.color;isFunction(series.color)&&(color=pointOptions.color);var point=new range_area_point(value,pointOptions);return point.color=color,this.append(point),point},RangeAreaChart.prototype.createSegment=function createSegment(linePoints,currentSeries,seriesIx){var style=(currentSeries.line||{}).style;return new("smooth"===style?spline_range_area_segment:"step"===style?step_range_area_segment:range_area_segment)(linePoints,currentSeries,seriesIx)},RangeAreaChart.prototype.plotRange=function plotRange(point,startValue){return point?[point.value.from,point.value.to]:[startValue,startValue]},RangeAreaChart.prototype.valueSlot=function valueSlot(valueAxis,plotRange){var fromSlot=valueAxis.getSlot(plotRange[0],plotRange[0],!this.options.clip),toSlot=valueAxis.getSlot(plotRange[1],plotRange[1],!this.options.clip);if(fromSlot&&toSlot)return{from:fromSlot,to:toSlot}},RangeAreaChart.prototype.pointSlot=function pointSlot(categorySlot,valueSlot){var fromSlot,toSlot,from=valueSlot.from,to=valueSlot.to;return this.options.invertAxes?(fromSlot=new core_box(from.x1,categorySlot.y1,from.x2,categorySlot.y2),toSlot=new core_box(to.x1,categorySlot.y1,to.x2,categorySlot.y2)):(fromSlot=new core_box(categorySlot.x1,from.y1,categorySlot.x2,from.y2),toSlot=new core_box(categorySlot.x1,to.y1,categorySlot.x2,to.y2)),{from:fromSlot,to:toSlot}},RangeAreaChart.prototype.addValue=function addValue(data,fields){var valueFields=data.valueFields;isNumber(valueFields.from)||(valueFields.from=valueFields.to),isNumber(valueFields.to)||(valueFields.to=valueFields.from),CategoricalChart.prototype.addValue.call(this,data,fields)},RangeAreaChart.prototype.updateRange=function updateRange(value,fields){if(null!==value&&isNumber(value.from)&&isNumber(value.to)){var axisName=fields.series.axis,axisRange=this.valueAxisRanges[axisName]=this.valueAxisRanges[axisName]||{min:MAX_VALUE,max:MIN_VALUE},from=value.from,to=value.to;axisRange.min=Math.min(axisRange.min,from,to),axisRange.max=Math.max(axisRange.max,from,to)}},RangeAreaChart.prototype.formatPointValue=function formatPointValue(point,format){var value=point.value;return this.chartService.format.auto(format,value.from,value.to)},RangeAreaChart.prototype.animationPoints=function animationPoints(){for(var points=this.points,result=[],idx=0;idx<points.length;idx++){var point=points[idx];point&&(result.push((point.fromPoint||{}).marker),result.push((point.toPoint||{}).marker))}return result.concat(this._segments)},RangeAreaChart}(categorical_chart);deepExtend(RangeAreaChart.prototype,line_chart_mixin,clip_animation_mixin);const range_area_chart=RangeAreaChart;var OHLCPoint=function(Candlestick){function OHLCPoint(){Candlestick.apply(this,arguments)}return Candlestick&&(OHLCPoint.__proto__=Candlestick),OHLCPoint.prototype=Object.create(Candlestick&&Candlestick.prototype),OHLCPoint.prototype.constructor=OHLCPoint,OHLCPoint.prototype.reflow=function reflow(box){var options=this.options,value=this.value,valueAxis=this.owner.seriesValueAxis(options),oPoints=[],cPoints=[],lhPoints=[],lhSlot=valueAxis.getSlot(value.low,value.high),oSlot=valueAxis.getSlot(value.open,value.open),cSlot=valueAxis.getSlot(value.close,value.close);oSlot.x1=cSlot.x1=lhSlot.x1=box.x1,oSlot.x2=cSlot.x2=lhSlot.x2=box.x2;var mid=lhSlot.center().x;oPoints.push([oSlot.x1,oSlot.y1]),oPoints.push([mid,oSlot.y1]),cPoints.push([mid,cSlot.y1]),cPoints.push([cSlot.x2,cSlot.y1]),lhPoints.push([mid,lhSlot.y1]),lhPoints.push([mid,lhSlot.y2]),this.lines=[oPoints,cPoints,lhPoints],this.box=lhSlot.clone().wrap(oSlot.clone().wrap(cSlot)),this.reflowNote()},OHLCPoint.prototype.createBody=function createBody(){},OHLCPoint}(candlestick);const ohlc_point=OHLCPoint;var OHLCChart=function(CandlestickChart){function OHLCChart(){CandlestickChart.apply(this,arguments)}return CandlestickChart&&(OHLCChart.__proto__=CandlestickChart),OHLCChart.prototype=Object.create(CandlestickChart&&CandlestickChart.prototype),OHLCChart.prototype.constructor=OHLCChart,OHLCChart.prototype.pointType=function pointType(){return ohlc_point},OHLCChart}(candlestick_chart);const ohlc_chart=OHLCChart;var WaterfallSegment=function(ChartElement){function WaterfallSegment(from,to,series){ChartElement.call(this),this.from=from,this.to=to,this.series=series}return ChartElement&&(WaterfallSegment.__proto__=ChartElement),WaterfallSegment.prototype=Object.create(ChartElement&&ChartElement.prototype),WaterfallSegment.prototype.constructor=WaterfallSegment,WaterfallSegment.prototype.linePoints=function linePoints(){var from=this.from,fromBox=this.from.box,toBox=this.to.box,points=[];if(from.isVertical){var y=from.aboveAxis?fromBox.y1:fromBox.y2;points.push([fromBox.x1,y],[toBox.x2,y])}else{var x=from.aboveAxis?fromBox.x2:fromBox.x1;points.push([x,fromBox.y1],[x,toBox.y2])}return points},WaterfallSegment.prototype.createVisual=function createVisual(){ChartElement.prototype.createVisual.call(this);var line=this.series.line||{},path=shapes_path.w.fromPoints(this.linePoints(),{stroke:{color:line.color,width:line.width,opacity:line.opacity,dashType:line.dashType}});alignPathToPixel(path),this.visual.append(path)},WaterfallSegment}(chart_element);setDefaultOptions(WaterfallSegment,{animation:{type:"fadeIn",delay:600}});const waterfall_segment=WaterfallSegment;var WaterfallChart=function(BarChart){function WaterfallChart(){BarChart.apply(this,arguments)}return BarChart&&(WaterfallChart.__proto__=BarChart),WaterfallChart.prototype=Object.create(BarChart&&BarChart.prototype),WaterfallChart.prototype.constructor=WaterfallChart,WaterfallChart.prototype.render=function render(){BarChart.prototype.render.call(this),this.createSegments()},WaterfallChart.prototype.traverseDataPoints=function traverseDataPoints(callback){for(var series=this.options.series,totalCategories=categoriesCount(series),isVertical=!this.options.invertAxes,seriesIx=0;seriesIx<series.length;seriesIx++)for(var currentSeries=series[seriesIx],total=0,runningTotal=0,categoryIx=0;categoryIx<totalCategories;categoryIx++){var data=series_binder.current.bindPoint(currentSeries,categoryIx),value=data.valueFields.value,summary=data.fields.summary,from=total,to=void 0;summary?"total"===summary.toLowerCase()?(data.valueFields.value=total,from=0,to=total):(data.valueFields.value=runningTotal,to=from-runningTotal,runningTotal=0):isNumber(value)&&(runningTotal+=value,to=total+=value),callback(data,{category:this.categoryAxis.categoryAt(categoryIx),categoryIx,series:currentSeries,seriesIx,total,runningTotal,from,to,isVertical})}},WaterfallChart.prototype.updateRange=function updateRange(value,fields){BarChart.prototype.updateRange.call(this,{value:fields.to},fields)},WaterfallChart.prototype.aboveAxis=function aboveAxis(point){return point.value>=0},WaterfallChart.prototype.plotRange=function plotRange(point){return[point.from,point.to]},WaterfallChart.prototype.createSegments=function createSegments(){for(var series=this.options.series,seriesPoints=this.seriesPoints,segments=this.segments=[],seriesIx=0;seriesIx<series.length;seriesIx++){var currentSeries=series[seriesIx],points=seriesPoints[seriesIx];if(points)for(var prevPoint=void 0,pointIx=0;pointIx<points.length;pointIx++){var point=points[pointIx];if(point&&prevPoint){var segment=new waterfall_segment(prevPoint,point,currentSeries);segments.push(segment),this.append(segment)}prevPoint=point}}},WaterfallChart}(bar_chart);const waterfall_chart=WaterfallChart;const trendline_factory=function trendlineFactory(registry,type,context){var impl=registry[String(type)];return impl?impl(context):null};const calculate_slope=function calculateSlope(sourceValues,valueGetter){for(var slope,intercept,x=0,y=0,x2=0,xy=0,count=0,xMin=Number.MAX_VALUE,xMax=Number.MIN_VALUE,i=0;i<sourceValues.length;i++){var ref=valueGetter(sourceValues[i]),xValue=ref.xValue,yValue=ref.yValue;isFinite(xValue)&&null!==xValue&&isFinite(yValue)&&null!==yValue&&(xMin=Math.min(xValue,xMin),xMax=Math.max(xValue,xMax),count++,x+=xValue,y+=yValue,x2+=Math.pow(xValue,2),xy+=xValue*yValue)}return count>0&&(intercept=(y-(slope=(count*xy-x*y)/(count*x2-Math.pow(x,2)))*x)/count),{slope,intercept,count,xMin,xMax}};var valueGetter=function(fieldName){return function(ref){return{xValue:ref.categoryIx+1,yValue:ref.valueFields[fieldName]}}};const linear_trendline=function linearTrendline(context){var options=context.options,categoryAxis=context.categoryAxis,ref=function getData(ref){var seriesValues=ref.seriesValues,categoryAxis=ref.categoryAxis,options=ref.options,ref$1=calculate_slope(seriesValues(),valueGetter(options.field)),slope=ref$1.slope,intercept=ref$1.intercept;if(ref$1.count>0){for(var data=[],totalRange=categoryAxis.totalRangeIndices(),currentRange=categoryAxis.currentRangeIndices(),range={min:Math.floor(Math.max(currentRange.min-1,totalRange.min)),max:Math.ceil(Math.min(currentRange.max+2,totalRange.max))},i=range.min;i<range.max;i++)data[i]={category:categoryAxis.categoryAt(i,!0),value:slope*(i+1)+intercept};return{data}}return{data:null}}({seriesValues:context.seriesValues,categoryAxis,options}),data=ref.data;return data?Object.assign({},options,{type:"line",data,categoryField:"category",field:"value"}):null};const calculate_moving_average=function calculateMovingAverage(sourceValues,valueGetter,period){for(var averagePoints=[],values=[],start=Math.max(2,period)-1,end=0,sum=0,i=0;i<sourceValues.length;i++){var ref=valueGetter(sourceValues[i]),xValue=ref.xValue,yValue=ref.yValue;if(isFinite(yValue)&&null!==yValue?(values.push(yValue),sum+=yValue,end=Math.max(i,end)):values.push(null),i>=start){var count=values.filter((function(value){return null!==value})).length,lastValue=values.shift()||0;if(count>0){var average=sum/count;averagePoints.push([xValue,average]),sum-=lastValue;continue}}averagePoints.push([xValue,null])}return averagePoints.slice(0,end+1)};var moving_average_valueGetter=function(fieldName){return function(ref){return{xValue:ref.categoryIx,yValue:ref.valueFields[fieldName]}}};const moving_average=function movingAverageTrendline(context){var options=context.options,ref=function moving_average_getData(context){var categoryAxis=context.categoryAxis,points=function calculatePoints(ref){var options=ref.options,categoryAxis=ref.categoryAxis,seriesValues=ref.seriesValues,period=(options.trendline||{}).period||2,totalRange=categoryAxis.totalRangeIndices(),currentRange=categoryAxis.currentRangeIndices(),range={min:Math.floor(Math.max(currentRange.min-period,totalRange.min)),max:Math.ceil(Math.min(currentRange.max+period+2,totalRange.max))};return calculate_moving_average(seriesValues(range),moving_average_valueGetter(options.field),period)}(context),data=[];if(points.forEach((function(ref){var categoryIx=ref[0],value=ref[1];data[categoryIx]={category:categoryAxis.categoryAt(categoryIx,!0),value}})),data.length>0)return{data};return{data:null}}(context),data=ref.data;return data?Object.assign({},options,{type:"line",data,categoryField:"category",field:"value"}):null};var registry={};registry.linearTrendline=linear_trendline,registry.movingAverageTrendline=moving_average;const trendline_registry=registry;var AREA_SERIES=[AREA,VERTICAL_AREA,RANGE_AREA,VERTICAL_RANGE_AREA],OUT_OF_RANGE_SERIES=[LINE,VERTICAL_LINE].concat(AREA_SERIES),CategoricalPlotArea=function(PlotAreaBase){function CategoricalPlotArea(){PlotAreaBase.apply(this,arguments)}return PlotAreaBase&&(CategoricalPlotArea.__proto__=PlotAreaBase),CategoricalPlotArea.prototype=Object.create(PlotAreaBase&&PlotAreaBase.prototype),CategoricalPlotArea.prototype.constructor=CategoricalPlotArea,CategoricalPlotArea.prototype.initFields=function initFields(series){if(this.namedCategoryAxes={},this.namedValueAxes={},this.valueAxisRangeTracker=new axis_group_range_tracker,this._seriesPointsCache={},this._currentPointsCache={},series.length>0){this.invertAxes=inArray(series[0].type,[BAR,BULLET,VERTICAL_LINE,VERTICAL_AREA,VERTICAL_RANGE_AREA,RANGE_BAR,HORIZONTAL_WATERFALL,VERTICAL_BOX_PLOT]);for(var i=0;i<series.length;i++){var stack=series[i].stack;if(stack&&"100%"===stack.type){this.stack100=!0;break}}}},CategoricalPlotArea.prototype.render=function render(panes){void 0===panes&&(panes=this.panes),this.series=[].concat(this.originalSeries),this.createCategoryAxes(panes),this.aggregateCategories(panes),this.createTrendlineSeries(panes),this.createCategoryAxesLabels(panes),this.createCharts(panes),this.createValueAxes(panes)},CategoricalPlotArea.prototype.removeAxis=function removeAxis(axis){var axisName=axis.options.name;PlotAreaBase.prototype.removeAxis.call(this,axis),axis instanceof category_axis?delete this.namedCategoryAxes[axisName]:(this.valueAxisRangeTracker.reset(axisName),delete this.namedValueAxes[axisName]),axis===this.categoryAxis&&delete this.categoryAxis,axis===this.valueAxis&&delete this.valueAxis},CategoricalPlotArea.prototype.trendlineFactory=function trendlineFactory$1(options,series){var categoryAxis=this.seriesCategoryAxis(options),seriesValues=this.seriesValues.bind(this,series.index),trendline=trendline_factory(trendline_registry,options.type,{options,categoryAxis,seriesValues});return trendline?(trendline.categoryAxis=series.categoryAxis,trendline.valueAxis=series.valueAxis,this.filterSeries(trendline,categoryAxis)):trendline},CategoricalPlotArea.prototype.trendlineAggregateForecast=function trendlineAggregateForecast(){return this.series.map((function(series){return(series.trendline||{}).forecast})).filter((function(forecast){return void 0!==forecast})).reduce((function(result,forecast){return{before:Math.max(result.before,forecast.before||0),after:Math.max(result.after,forecast.after||0)}}),{before:0,after:0})},CategoricalPlotArea.prototype.seriesValues=function seriesValues(seriesIx,range){var result=[],series=this.srcSeries[seriesIx],categoryAxis=this.seriesCategoryAxis(series);equalsIgnoreCase(categoryAxis.options.type,DATE)&&(this._seriesPointsCache={},this._currentPointsCache={},categoryAxis.options.dataItems=[],series=this.aggregateSeries(series,categoryAxis,categoryAxis.totalRangeIndices()));for(var min=range?range.min:0,max=range?range.max:series.data.length,categoryIx=min;categoryIx<max;categoryIx++){var data=this.bindPoint(series,categoryIx);result.push({categoryIx,category:data.fields.category,valueFields:data.valueFields})}return result},CategoricalPlotArea.prototype.createCharts=function createCharts(panes){for(var seriesByPane=this.groupSeriesByPane(),i=0;i<panes.length;i++){var pane=panes[i],paneSeries=seriesByPane[pane.options.name||"default"]||[];this.addToLegend(paneSeries);var visibleSeries=this.filterVisibleSeries(paneSeries);if(visibleSeries)for(var groups=this.groupSeriesByCategoryAxis(visibleSeries),groupIx=0;groupIx<groups.length;groupIx++)this.createChartGroup(groups[groupIx],pane)}},CategoricalPlotArea.prototype.createChartGroup=function createChartGroup(series,pane){this.createAreaChart(filterSeriesByType(series,[AREA,VERTICAL_AREA]),pane),this.createRangeAreaChart(filterSeriesByType(series,[RANGE_AREA,VERTICAL_RANGE_AREA]),pane),this.createBarChart(filterSeriesByType(series,[COLUMN,BAR]),pane),this.createRangeBarChart(filterSeriesByType(series,[RANGE_COLUMN,RANGE_BAR]),pane),this.createBulletChart(filterSeriesByType(series,[BULLET,VERTICAL_BULLET]),pane),this.createCandlestickChart(filterSeriesByType(series,CANDLESTICK),pane),this.createBoxPlotChart(filterSeriesByType(series,[BOX_PLOT,VERTICAL_BOX_PLOT]),pane),this.createOHLCChart(filterSeriesByType(series,OHLC),pane),this.createWaterfallChart(filterSeriesByType(series,[WATERFALL,HORIZONTAL_WATERFALL]),pane),this.createLineChart(filterSeriesByType(series,[LINE,VERTICAL_LINE]),pane)},CategoricalPlotArea.prototype.aggregateCategories=function aggregateCategories(panes){var series=[].concat(this.series),processedSeries=[];this._currentPointsCache={},this._seriesPointsCache=this._seriesPointsCache||{};for(var i=0;i<series.length;i++){var currentSeries=series[i];if(!this.isTrendline(currentSeries)){var categoryAxis=this.seriesCategoryAxis(currentSeries),axisPane=this.findPane(categoryAxis.options.pane);currentSeries=(equalsIgnoreCase(categoryAxis.options.type,DATE)||currentSeries.categoryField)&&inArray(axisPane,panes)?this.aggregateSeries(currentSeries,categoryAxis,categoryAxis.currentRangeIndices()):this.filterSeries(currentSeries,categoryAxis)}processedSeries.push(currentSeries)}this._seriesPointsCache=this._currentPointsCache,this._currentPointsCache=null,this.srcSeries=series,this.series=processedSeries},CategoricalPlotArea.prototype.filterSeries=function filterSeries(series,categoryAxis){var dataLength=(series.data||{}).length;if(categoryAxis._seriesMax=Math.max(categoryAxis._seriesMax||0,dataLength),!drawing_utils_defined(categoryAxis.options.min)&&!drawing_utils_defined(categoryAxis.options.max))return series;var range=categoryAxis.currentRangeIndices(),outOfRangePoints=inArray(series.type,OUT_OF_RANGE_SERIES),currentSeries=deepExtend({},series);return currentSeries.data=(currentSeries.data||[]).slice(range.min,range.max+1),outOfRangePoints&&createOutOfRangePoints(currentSeries,range,dataLength,(function(idx){return{item:series.data[idx],category:categoryAxis.categoryAt(idx,!0),categoryIx:idx-range.min}}),(function(idx){return drawing_utils_defined(series.data[idx])})),currentSeries},CategoricalPlotArea.prototype.clearSeriesPointsCache=function clearSeriesPointsCache(){this._seriesPointsCache={}},CategoricalPlotArea.prototype.seriesSourcePoints=function seriesSourcePoints(series,categoryAxis){var key=series.index+";"+categoryAxis.categoriesHash();if(this._seriesPointsCache&&this._seriesPointsCache[key])return this._currentPointsCache[key]=this._seriesPointsCache[key],this._seriesPointsCache[key];var axisOptions=categoryAxis.options,srcCategories=axisOptions.srcCategories,dateAxis=equalsIgnoreCase(axisOptions.type,DATE),srcData=series.data,getFn=dateAxis?getDateField:getField,result=[];dateAxis||categoryAxis.mapCategories();for(var idx=0;idx<srcData.length;idx++){var category=void 0;if(category=series.categoryField?getFn(series.categoryField,srcData[idx],this.chartService.intl):srcCategories[idx],drawing_utils_defined(category)&&null!==category){var categoryIx=categoryAxis.totalIndex(category);result[categoryIx]=result[categoryIx]||{items:[],category},result[categoryIx].items.push(idx)}}return this._currentPointsCache[key]=result,result},CategoricalPlotArea.prototype.aggregateSeries=function aggregateSeries(series,categoryAxis,range){if(!series.data.length)return series;for(var srcPoints=this.seriesSourcePoints(series,categoryAxis),result=deepExtend({},series),aggregator=new series_aggregator(deepExtend({},series),series_binder.current,default_aggregates.current),data=result.data=[],dataItems=categoryAxis.options.dataItems||[],categoryItem=function(idx){var categoryIdx=idx-range.min,point=srcPoints[idx];if(point||(point=srcPoints[idx]={}),point.categoryIx=categoryIdx,!point.item){var category=categoryAxis.categoryAt(idx,!0);point.category=category,point.item=aggregator.aggregatePoints(point.items,category)}return point},idx=range.min;idx<=range.max;idx++){var point=categoryItem(idx);data[point.categoryIx]=point.item,point.items&&point.items.length&&(dataItems[point.categoryIx]=point.item)}return inArray(result.type,OUT_OF_RANGE_SERIES)&&createOutOfRangePoints(result,range,categoryAxis.totalCount(),categoryItem,(function(idx){return srcPoints[idx]})),categoryAxis.options.dataItems=dataItems,result},CategoricalPlotArea.prototype.appendChart=function appendChart(chart,pane){var series=chart.options.series,categoryAxis=this.seriesCategoryAxis(series[0]),categories=categoryAxis.options.categories,categoriesToAdd=Math.max(0,categoriesCount(series)-categories.length);if(categoriesToAdd>0)for(categories=categoryAxis.options.categories=categoryAxis.options.categories.slice(0);categoriesToAdd--;)categories.push("");this.valueAxisRangeTracker.update(chart.valueAxisRanges),PlotAreaBase.prototype.appendChart.call(this,chart,pane)},CategoricalPlotArea.prototype.seriesPaneName=function seriesPaneName(series){var options=this.options,axisName=series.axis,axis=grep([].concat(options.valueAxis),(function(a){return a.name===axisName}))[0],defaultPaneName=((options.panes||[{}])[0]||{}).name||"default";return(axis||{}).pane||defaultPaneName},CategoricalPlotArea.prototype.seriesCategoryAxis=function seriesCategoryAxis(series){var axisName=series.categoryAxis,axis=axisName?this.namedCategoryAxes[axisName]:this.categoryAxis;if(!axis)throw new Error("Unable to locate category axis with name "+axisName);return axis},CategoricalPlotArea.prototype.stackableChartOptions=function stackableChartOptions(firstSeries,pane){var stack=firstSeries.stack;return{isStacked:stack,isStacked100:stack&&"100%"===stack.type,clip:pane.options.clip}},CategoricalPlotArea.prototype.groupSeriesByCategoryAxis=function groupSeriesByCategoryAxis(series){for(var categoryAxes=[],unique={},idx=0;idx<series.length;idx++){var name=series[idx].categoryAxis||"$$default$$";unique.hasOwnProperty(name)||(unique[name]=!0,categoryAxes.push(name))}for(var groups=[],axisIx=0;axisIx<categoryAxes.length;axisIx++){var axisSeries=groupSeries(series,categoryAxes[axisIx],axisIx);0!==axisSeries.length&&groups.push(axisSeries)}return groups},CategoricalPlotArea.prototype.createBarChart=function createBarChart(series,pane){if(0!==series.length){var firstSeries=series[0],barChart=new bar_chart(this,Object.assign({series,invertAxes:this.invertAxes,gap:firstSeries.gap,spacing:firstSeries.spacing},this.stackableChartOptions(firstSeries,pane)));this.appendChart(barChart,pane)}},CategoricalPlotArea.prototype.createRangeBarChart=function createRangeBarChart(series,pane){if(0!==series.length){var firstSeries=series[0],rangeColumnChart=new range_bar_chart(this,{series,invertAxes:this.invertAxes,gap:firstSeries.gap,spacing:firstSeries.spacing});this.appendChart(rangeColumnChart,pane)}},CategoricalPlotArea.prototype.createBulletChart=function createBulletChart(series,pane){if(0!==series.length){var firstSeries=series[0],bulletChart=new bullet_chart(this,{series,invertAxes:this.invertAxes,gap:firstSeries.gap,spacing:firstSeries.spacing,clip:pane.options.clip});this.appendChart(bulletChart,pane)}},CategoricalPlotArea.prototype.createLineChart=function createLineChart(series,pane){if(0!==series.length){var firstSeries=series[0],lineChart=new line_chart(this,Object.assign({invertAxes:this.invertAxes,series},this.stackableChartOptions(firstSeries,pane)));this.appendChart(lineChart,pane)}},CategoricalPlotArea.prototype.createAreaChart=function createAreaChart(series,pane){if(0!==series.length){var firstSeries=series[0],areaChart=new area_chart(this,Object.assign({invertAxes:this.invertAxes,series},this.stackableChartOptions(firstSeries,pane)));this.appendChart(areaChart,pane)}},CategoricalPlotArea.prototype.createRangeAreaChart=function createRangeAreaChart(series,pane){if(0!==series.length){var rangeAreaChart=new range_area_chart(this,{invertAxes:this.invertAxes,series,clip:pane.options.clip});this.appendChart(rangeAreaChart,pane)}},CategoricalPlotArea.prototype.createOHLCChart=function createOHLCChart(series,pane){if(0!==series.length){var firstSeries=series[0],chart=new ohlc_chart(this,{invertAxes:this.invertAxes,gap:firstSeries.gap,series,spacing:firstSeries.spacing,clip:pane.options.clip});this.appendChart(chart,pane)}},CategoricalPlotArea.prototype.createCandlestickChart=function createCandlestickChart(series,pane){if(0!==series.length){var firstSeries=series[0],chart=new candlestick_chart(this,{invertAxes:this.invertAxes,gap:firstSeries.gap,series,spacing:firstSeries.spacing,clip:pane.options.clip});this.appendChart(chart,pane)}},CategoricalPlotArea.prototype.createBoxPlotChart=function createBoxPlotChart(series,pane){if(0!==series.length){var firstSeries=series[0],chart=new box_plot_chart(this,{invertAxes:this.invertAxes,gap:firstSeries.gap,series,spacing:firstSeries.spacing,clip:pane.options.clip});this.appendChart(chart,pane)}},CategoricalPlotArea.prototype.createWaterfallChart=function createWaterfallChart(series,pane){if(0!==series.length){var firstSeries=series[0],waterfallChart=new waterfall_chart(this,{series,invertAxes:this.invertAxes,gap:firstSeries.gap,spacing:firstSeries.spacing});this.appendChart(waterfallChart,pane)}},CategoricalPlotArea.prototype.axisRequiresRounding=function axisRequiresRounding(categoryAxisName,categoryAxisIndex){for(var centeredSeries=filterSeriesByType(this.series,EQUALLY_SPACED_SERIES),seriesIx=0;seriesIx<this.series.length;seriesIx++){var currentSeries=this.series[seriesIx];if(inArray(currentSeries.type,AREA_SERIES)){var line=currentSeries.line;line&&"step"===line.style&&centeredSeries.push(currentSeries)}}for(var seriesIx$1=0;seriesIx$1<centeredSeries.length;seriesIx$1++){var seriesAxis=centeredSeries[seriesIx$1].categoryAxis||"";if(seriesAxis===categoryAxisName||!seriesAxis&&0===categoryAxisIndex)return!0}},CategoricalPlotArea.prototype.aggregatedAxis=function aggregatedAxis(categoryAxisName,categoryAxisIndex){for(var series=this.series,seriesIx=0;seriesIx<series.length;seriesIx++){var seriesAxis=series[seriesIx].categoryAxis||"";if((seriesAxis===categoryAxisName||!seriesAxis&&0===categoryAxisIndex)&&series[seriesIx].categoryField)return!0}},CategoricalPlotArea.prototype.createCategoryAxesLabels=function createCategoryAxesLabels(){for(var axes=this.axes,i=0;i<axes.length;i++)axes[i]instanceof category_axis&&axes[i].createLabels()},CategoricalPlotArea.prototype.createCategoryAxes=function createCategoryAxes(panes){for(var invertAxes=this.invertAxes,definitions=[].concat(this.options.categoryAxis),axes=[],i=0;i<definitions.length;i++){var axisOptions=definitions[i];if(inArray(this.findPane(axisOptions.pane),panes)){var name=axisOptions.name,categories=axisOptions.categories;void 0===categories&&(categories=[]),axisOptions=deepExtend({vertical:invertAxes,reverse:!invertAxes&&this.chartService.rtl,axisCrossingValue:invertAxes?MAX_VALUE:0},axisOptions),drawing_utils_defined(axisOptions.justified)||(axisOptions.justified=this.isJustified()),this.axisRequiresRounding(name,i)&&(axisOptions.justified=!1);var categoryAxis=void 0;if(isDateAxis(axisOptions,categories[0])?(axisOptions._forecast=this.trendlineAggregateForecast(),categoryAxis=new date_category_axis(axisOptions,this.chartService)):categoryAxis=new category_axis(axisOptions,this.chartService),definitions[i].categories=categoryAxis.options.srcCategories,name){if(this.namedCategoryAxes[name])throw new Error("Category axis with name "+name+" is already defined");this.namedCategoryAxes[name]=categoryAxis}categoryAxis.axisIndex=i,axes.push(categoryAxis),this.appendAxis(categoryAxis)}}var primaryAxis=this.categoryAxis||axes[0];this.categoryAxis=primaryAxis,invertAxes?this.axisY=primaryAxis:this.axisX=primaryAxis},CategoricalPlotArea.prototype.isJustified=function isJustified(){for(var series=this.series,i=0;i<series.length;i++){if(!inArray(series[i].type,AREA_SERIES))return!1}return!0},CategoricalPlotArea.prototype.createValueAxes=function createValueAxes(panes){var tracker=this.valueAxisRangeTracker,defaultRange=tracker.query(),definitions=[].concat(this.options.valueAxis),invertAxes=this.invertAxes,baseOptions={vertical:!invertAxes,reverse:invertAxes&&this.chartService.rtl},axes=[];this.stack100&&(baseOptions.roundToMajorUnit=!1,baseOptions.labels={format:"P0"});for(var i=0;i<definitions.length;i++){var axisOptions=definitions[i];if(inArray(this.findPane(axisOptions.pane),panes)){var name=axisOptions.name,defaultAxisRange=equalsIgnoreCase(axisOptions.type,"log")?{min:.1,max:1}:{min:0,max:1},range=tracker.query(name)||defaultRange||defaultAxisRange;0===i&&range&&defaultRange&&(range.min=Math.min(range.min,defaultRange.min),range.max=Math.max(range.max,defaultRange.max));var valueAxis=new(equalsIgnoreCase(axisOptions.type,"log")?logarithmic_axis:numeric_axis)(range.min,range.max,deepExtend({},baseOptions,axisOptions),this.chartService);if(name){if(this.namedValueAxes[name])throw new Error("Value axis with name "+name+" is already defined");this.namedValueAxes[name]=valueAxis}valueAxis.axisIndex=i,axes.push(valueAxis),this.appendAxis(valueAxis)}}var primaryAxis=this.valueAxis||axes[0];this.valueAxis=primaryAxis,invertAxes?this.axisX=primaryAxis:this.axisY=primaryAxis},CategoricalPlotArea.prototype._dispatchEvent=function _dispatchEvent(chart,e,eventType){var coords=chart._eventCoordinates(e),point=new core_point(coords.x,coords.y),pane=this.pointPane(point),categories=[],values=[];if(pane){for(var allAxes=pane.axes,i=0;i<allAxes.length;i++){var axis=allAxes[i];axis.getValue?appendIfNotNull(values,axis.getValue(point)):appendIfNotNull(categories,axis.getCategory(point))}0===categories.length&&appendIfNotNull(categories,this.categoryAxis.getCategory(point)),categories.length>0&&values.length>0&&chart.trigger(eventType,{element:eventElement(e),originalEvent:e,category:singleItemOrArray(categories),value:singleItemOrArray(values)})}},CategoricalPlotArea.prototype.pointPane=function pointPane(point){for(var panes=this.panes,i=0;i<panes.length;i++){var currentPane=panes[i];if(currentPane.contentBox.containsPoint(point))return currentPane}},CategoricalPlotArea.prototype.updateAxisOptions=function updateAxisOptions$1(axis,options){updateAxisOptions(this.options,axis,options),updateAxisOptions(this.originalOptions,axis,options)},CategoricalPlotArea}(plotarea_base);function updateAxisOptions(targetOptions,axis,options){deepExtend([].concat(axis instanceof category_axis?targetOptions.categoryAxis:targetOptions.valueAxis)[axis.axisIndex],options)}function groupSeries(series,axis,axisIx){return grep(series,(function(s){return 0===axisIx&&!s.categoryAxis||s.categoryAxis===axis}))}setDefaultOptions(CategoricalPlotArea,{categoryAxis:{},valueAxis:{}}),deepExtend(CategoricalPlotArea.prototype,plotarea_events_mixin);const categorical_plotarea=CategoricalPlotArea;var es_surface=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/surface.js"),throttle=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/common/throttle.js"),Highlight=function(Class){function Highlight(){Class.call(this),this._points=[]}return Class&&(Highlight.__proto__=Class),Highlight.prototype=Object.create(Class&&Class.prototype),Highlight.prototype.constructor=Highlight,Highlight.prototype.destroy=function destroy(){this._points=[]},Highlight.prototype.show=function show(points,opacity){var arrayPoints=[].concat(points);this.hide();for(var i=0;i<arrayPoints.length;i++){var point=arrayPoints[i];point&&point.toggleHighlight&&point.hasHighlight()&&(this.togglePointHighlight(point,!0,opacity),this._points.push(point))}},Highlight.prototype.togglePointHighlight=function togglePointHighlight(point,show,opacity){var toggleHandler=(point.options.highlight||{}).toggle;if(toggleHandler){var eventArgs={category:point.category,series:point.series,dataItem:point.dataItem,value:point.value,stackValue:point.stackValue,preventDefault,visual:point.highlightVisual(),show};toggleHandler(eventArgs),eventArgs._defaultPrevented||point.toggleHighlight(show,opacity)}else point.toggleHighlight(show,opacity)},Highlight.prototype.hide=function hide(){for(var points=this._points;points.length;)this.togglePointHighlight(points.pop(),!1)},Highlight.prototype.isHighlighted=function isHighlighted(element){for(var points=this._points,i=0;i<points.length;i++){if(element===points[i])return!0}return!1},Highlight}(common_class.A);function preventDefault(){this._defaultPrevented=!0}const highlight=Highlight;function acceptKey(e,mouseKey){var key=(mouseKey||"").toLowerCase(),event=e.event;return"none"===key&&!(event.ctrlKey||event.shiftKey||event.altKey)||event[key+"Key"]}function toChartAxisRanges(axisRanges){for(var ranges={},idx=0;idx<axisRanges.length;idx++){var axisRange=axisRanges[idx];axisRange.axis.options.name&&(ranges[axisRange.axis.options.name]={min:axisRange.range.min,max:axisRange.range.max})}return ranges}var Pannable=function(Class){function Pannable(plotArea,options){Class.call(this),this.plotArea=plotArea,this.options=deepExtend({},this.options,options)}return Class&&(Pannable.__proto__=Class),Pannable.prototype=Object.create(Class&&Class.prototype),Pannable.prototype.constructor=Pannable,Pannable.prototype.start=function start(e){return this._active=acceptKey(e,this.options.key),this._active},Pannable.prototype.move=function move(e){if(this._active){var axisRanges=this.axisRanges=this._panAxes(e,X).concat(this._panAxes(e,Y));if(axisRanges.length)return this.axisRanges=axisRanges,toChartAxisRanges(axisRanges)}},Pannable.prototype.end=function end(){var active=this._active;return this._active=!1,active},Pannable.prototype.pan=function pan(){var plotArea=this.plotArea,axisRanges=this.axisRanges;if(axisRanges.length){for(var idx=0;idx<axisRanges.length;idx++){var range=axisRanges[idx];plotArea.updateAxisOptions(range.axis,range.range)}plotArea.redraw(plotArea.panes)}},Pannable.prototype.destroy=function destroy(){delete this.plotArea},Pannable.prototype._panAxes=function _panAxes(e,position){var plotArea=this.plotArea,delta=-e[position].delta,lock=(this.options.lock||"").toLowerCase(),updatedAxes=[];if(0!==delta&&(lock||"").toLowerCase()!==position)for(var axes=plotArea.axes,idx=0;idx<axes.length;idx++){var axis=axes[idx];if(position===X&&!axis.options.vertical||position===Y&&axis.options.vertical){var range=axis.pan(delta);range&&(range.limitRange=!0,updatedAxes.push({axis,range}))}}return updatedAxes},Pannable}(common_class.A);Pannable.prototype.options={key:"none",lock:"none"};const pannable=Pannable;var ZoomSelection=function(Class){function ZoomSelection(chart,options){Class.call(this),this.chart=chart,this.options=deepExtend({},this.options,options),this.createElement()}return Class&&(ZoomSelection.__proto__=Class),ZoomSelection.prototype=Object.create(Class&&Class.prototype),ZoomSelection.prototype.constructor=ZoomSelection,ZoomSelection.prototype.createElement=function createElement(){var marquee=this._marquee=document.createElement("div");marquee.className="k-marquee";var marqueeColor=document.createElement("div");marqueeColor.className="k-marquee-color",marquee.appendChild(marqueeColor)},ZoomSelection.prototype.removeElement=function removeElement(){this._marquee.parentNode&&this._marquee.parentNode.removeChild(this._marquee)},ZoomSelection.prototype.setStyles=function setStyles(styles){elementStyles(this._marquee,styles)},ZoomSelection.prototype.start=function start(e){if(acceptKey(e,this.options.key)){var chart=this.chart,point=chart._eventCoordinates(e),zoomPane=this._zoomPane=chart._plotArea.paneByPoint(point),clipBox=zoomPane?zoomPane.chartsBox().clone():null;if(zoomPane&&clipBox){var offset=this._elementOffset();return clipBox.translate(offset.left,offset.top),this._zoomPaneClipBox=clipBox,document.body.appendChild(this._marquee),this.setStyles({left:e.pageX+1,top:e.pageY+1,width:0,height:0}),!0}}return!1},ZoomSelection.prototype._elementOffset=function _elementOffset(){var chartElement=this.chart.element,ref=elementStyles(chartElement,["paddingLeft","paddingTop"]),paddingLeft=ref.paddingLeft,paddingTop=ref.paddingTop,offset=elementOffset(chartElement);return{left:paddingLeft+offset.left,top:paddingTop+offset.top}},ZoomSelection.prototype.move=function move(e){this._zoomPane&&this.setStyles(this._selectionPosition(e))},ZoomSelection.prototype.end=function end(e){if(this._zoomPane){var elementOffset=this._elementOffset(),selectionPosition=this._selectionPosition(e);selectionPosition.left-=elementOffset.left,selectionPosition.top-=elementOffset.top;var start={x:selectionPosition.left,y:selectionPosition.top},end={x:selectionPosition.left+selectionPosition.width,y:selectionPosition.top+selectionPosition.height};return this._updateAxisRanges(start,end),this.removeElement(),delete this._zoomPane,toChartAxisRanges(this.axisRanges)}},ZoomSelection.prototype.zoom=function zoom(){var axisRanges=this.axisRanges;if(axisRanges&&axisRanges.length){for(var plotArea=this.chart._plotArea,idx=0;idx<axisRanges.length;idx++){var axisRange=axisRanges[idx];plotArea.updateAxisOptions(axisRange.axis,axisRange.range)}plotArea.redraw(plotArea.panes)}},ZoomSelection.prototype.destroy=function destroy(){this.removeElement(),delete this._marquee,delete this.chart},ZoomSelection.prototype._updateAxisRanges=function _updateAxisRanges(start,end){for(var lock=(this.options.lock||"").toLowerCase(),axisRanges=[],axes=this._zoomPane.axes,idx=0;idx<axes.length;idx++){var axis=axes[idx],vertical=axis.options.vertical;if((lock!==X||vertical)&&(lock!==Y||!vertical)&&drawing_utils_defined(axis.axisIndex)){var range=axis.pointsRange(start,end);range&&axisRanges.push({axis,range})}}this.axisRanges=axisRanges},ZoomSelection.prototype._selectionPosition=function _selectionPosition(e){var clipBox=this._zoomPaneClipBox,startLocation={x:e.x.startLocation,y:e.y.startLocation},pageX=e.x.location,pageY=e.y.location,lock=(this.options.lock||"").toLowerCase(),left=Math.min(startLocation.x,pageX),top=Math.min(startLocation.y,pageY),width=Math.abs(startLocation.x-pageX),height=Math.abs(startLocation.y-pageY);return lock===X&&(left=clipBox.x1,width=clipBox.width()),lock===Y&&(top=clipBox.y1,height=clipBox.height()),pageX>clipBox.x2&&(width=clipBox.x2-startLocation.x),pageX<clipBox.x1&&(width=startLocation.x-clipBox.x1),pageY>clipBox.y2&&(height=clipBox.y2-startLocation.y),pageY<clipBox.y1&&(height=startLocation.y-clipBox.y1),{left:Math.max(left,clipBox.x1),top:Math.max(top,clipBox.y1),width,height}},ZoomSelection}(common_class.A);ZoomSelection.prototype.options={key:"shift",lock:"none"};const zoom_selection=ZoomSelection;var MousewheelZoom=function(Class){function MousewheelZoom(chart,options){Class.call(this),this.chart=chart,this.options=deepExtend({rate:.3},this.options,options)}return Class&&(MousewheelZoom.__proto__=Class),MousewheelZoom.prototype=Object.create(Class&&Class.prototype),MousewheelZoom.prototype.constructor=MousewheelZoom,MousewheelZoom.prototype.updateRanges=function updateRanges(delta,coords){for(var lock=(this.options.lock||"").toLowerCase(),axisRanges=[],axes=this.chart._plotArea.axes,idx=0;idx<axes.length;idx++){var axis=axes[idx],vertical=axis.options.vertical;if((lock!==X||vertical)&&(lock!==Y||!vertical)&&axis.zoomRange){var rate=limitValue(this.options.rate,.01,.9),range=axis.zoomRange(-delta*rate,coords);range&&axisRanges.push({axis,range})}}return this.axisRanges=axisRanges,toChartAxisRanges(axisRanges)},MousewheelZoom.prototype.zoom=function zoom(){var axisRanges=this.axisRanges,plotArea=this.chart._plotArea;if(axisRanges&&axisRanges.length&&plotArea.updateAxisOptions){for(var idx=0;idx<axisRanges.length;idx++){var axisRange=axisRanges[idx];plotArea.updateAxisOptions(axisRange.axis,axisRange.range)}plotArea.redraw(plotArea.panes)}},MousewheelZoom.prototype.destroy=function destroy(){delete this.chart},MousewheelZoom}(common_class.A);const mousewheel_zoom=MousewheelZoom;var geometry_size=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/geometry/size.js");function alignStart(size,rect,align,axis,sizeField){return"start"===align?rect.origin[axis]:"end"===align?rect.origin[axis]+rect.size[sizeField]-size:rect.origin[axis]+(rect.size[sizeField]-size)/2}function alignStartReverse(size,rect,align,axis,sizeField){return"start"===align?rect.origin[axis]+rect.size[sizeField]-size:"end"===align?rect.origin[axis]:rect.origin[axis]+(rect.size[sizeField]-size)/2}var DEFAULT_OPTIONS={alignContent:"start",justifyContent:"start",alignItems:"start",spacing:0,orientation:"horizontal",lineSpacing:0,wrap:!0,revers:!1},layout_forEach=function(elements,callback){elements.forEach(callback)},layout_forEachReverse=function(elements,callback){for(var idx=elements.length-1;idx>=0;idx--)callback(elements[idx],idx)},Layout=function(Group){function Layout(rect,options){Group.call(this,Object.assign({},DEFAULT_OPTIONS,options)),this._rect=rect,this._fieldMap={}}return Group&&(Layout.__proto__=Group),Layout.prototype=Object.create(Group&&Group.prototype),Layout.prototype.constructor=Layout,Layout.prototype.rect=function rect(value){return value?(this._rect=value,this):this._rect},Layout.prototype._initMap=function _initMap(){var options=this.options,fieldMap=this._fieldMap;"horizontal"===options.orientation?(fieldMap.sizeField="width",fieldMap.groupsSizeField="height",fieldMap.groupAxis="x",fieldMap.groupsAxis="y"):(fieldMap.sizeField="height",fieldMap.groupsSizeField="width",fieldMap.groupAxis="y",fieldMap.groupsAxis="x"),options.reverse?(this.forEach=layout_forEachReverse,this.justifyAlign=alignStartReverse):(this.forEach=layout_forEach,this.justifyAlign=alignStart)},Layout.prototype.reflow=function reflow(){if(this._rect&&0!==this.children.length){this._initMap(),this.options.transform&&this.transform(null);for(var elementStart,group,groupBox,options=this.options,rect=this._rect,ref=this._initGroups(),groups=ref.groups,groupsSize=ref.groupsSize,ref$1=this._fieldMap,sizeField=ref$1.sizeField,groupsSizeField=ref$1.groupsSizeField,groupAxis=ref$1.groupAxis,groupsAxis=ref$1.groupsAxis,groupOrigin=new geometry_point.A,elementOrigin=new geometry_point.A,size=new geometry_size.A,groupStart=alignStart(groupsSize,rect,options.alignContent,groupsAxis,groupsSizeField),arrangeElements=function(bbox,idx){var element=group.elements[idx];elementOrigin[groupAxis]=elementStart,elementOrigin[groupsAxis]=alignStart(bbox.size[groupsSizeField],groupBox,options.alignItems,groupsAxis,groupsSizeField),function translateToPoint(point,bbox,element){var transofrm=element.transform()||(0,geometry_transform.A)(),matrix=transofrm.matrix();matrix.e+=point.x-bbox.origin.x,matrix.f+=point.y-bbox.origin.y,transofrm.matrix(matrix),element.transform(transofrm)}(elementOrigin,bbox,element),elementStart+=bbox.size[sizeField]+options.spacing},groupIdx=0;groupIdx<groups.length;groupIdx++)group=groups[groupIdx],groupOrigin[groupAxis]=elementStart=this.justifyAlign(group.size,rect,options.justifyContent,groupAxis,sizeField),groupOrigin[groupsAxis]=groupStart,size[sizeField]=group.size,size[groupsSizeField]=group.lineSize,groupBox=new geometry_rect.A(groupOrigin,size),this.forEach(group.bboxes,arrangeElements),groupStart+=group.lineSize+options.lineSpacing;if(!options.wrap&&group.size>rect.size[sizeField]){var scale=rect.size[sizeField]/groupBox.size[sizeField],scaledStart=groupBox.topLeft().scale(scale,scale),newStart=alignStart(groupBox.size[groupsSizeField]*scale,rect,options.alignContent,groupsAxis,groupsSizeField),transform=(0,geometry_transform.A)();"x"===groupAxis?transform.translate(rect.origin.x-scaledStart.x,newStart-scaledStart.y):transform.translate(newStart-scaledStart.x,rect.origin.y-scaledStart.y),transform.scale(scale,scale),this.transform(transform)}}},Layout.prototype._initGroups=function _initGroups(){for(var options=this.options,children=this.children,lineSpacing=options.lineSpacing,wrap=options.wrap,spacing=options.spacing,sizeField=this._fieldMap.sizeField,group=this._newGroup(),groups=[],addGroup=function(){groups.push(group),groupsSize+=group.lineSize+lineSpacing},groupsSize=-lineSpacing,idx=0;idx<children.length;idx++){var element=children[idx],bbox=children[idx].clippedBBox();element.visible()&&bbox&&(wrap&&group.size+bbox.size[sizeField]+spacing>this._rect.size[sizeField]?0===group.bboxes.length?(this._addToGroup(group,bbox,element),addGroup(),group=this._newGroup()):(addGroup(),group=this._newGroup(),this._addToGroup(group,bbox,element)):this._addToGroup(group,bbox,element))}return group.bboxes.length&&addGroup(),{groups,groupsSize}},Layout.prototype._addToGroup=function _addToGroup(group,bbox,element){group.size+=bbox.size[this._fieldMap.sizeField]+this.options.spacing,group.lineSize=Math.max(bbox.size[this._fieldMap.groupsSizeField],group.lineSize),group.bboxes.push(bbox),group.elements.push(element)},Layout.prototype._newGroup=function _newGroup(){return{lineSize:0,size:-this.options.spacing,bboxes:[],elements:[]}},Layout}(shapes_group.A);const layout=Layout;var LegendLayout=function(ChartElement){function LegendLayout(options,chartService){ChartElement.call(this,options),this.chartService=chartService}return ChartElement&&(LegendLayout.__proto__=ChartElement),LegendLayout.prototype=Object.create(ChartElement&&ChartElement.prototype),LegendLayout.prototype.constructor=LegendLayout,LegendLayout.prototype.render=function render(){var children=this.children,options=this.options,vertical=options.vertical;this.visual=new layout(null,{spacing:vertical?0:options.spacing,lineSpacing:vertical?options.spacing:0,orientation:vertical?"vertical":"horizontal",reverse:options.rtl,alignItems:vertical?"start":"center"});for(var idx=0;idx<children.length;idx++){var legendItem=children[idx];legendItem.reflow(new core_box),legendItem.renderVisual()}},LegendLayout.prototype.reflow=function reflow(box){this.visual.rect(box.toRect()),this.visual.reflow();var bbox=this.visual.clippedBBox();this.box=bbox?rectToBox(bbox):new core_box},LegendLayout.prototype.renderVisual=function renderVisual(){this.addVisual()},LegendLayout.prototype.createVisual=function createVisual(){},LegendLayout}(chart_element);const legend_layout=LegendLayout;var LegendItem=function(BoxElement){function LegendItem(options){BoxElement.call(this,options),this.createContainer(),options.rtl?(this.createLabel(),this.createMarker()):(this.createMarker(),this.createLabel())}return BoxElement&&(LegendItem.__proto__=BoxElement),LegendItem.prototype=Object.create(BoxElement&&BoxElement.prototype),LegendItem.prototype.constructor=LegendItem,LegendItem.prototype.createContainer=function createContainer(){this.container=new float_element({vertical:!1,wrap:!1,align:CENTER,spacing:this.options.spacing}),this.append(this.container)},LegendItem.prototype.createMarker=function createMarker(){this.container.append(new shape_element(this.markerOptions()))},LegendItem.prototype.markerOptions=function markerOptions(){var options=this.options,markerColor=options.markerColor;return deepExtend({},options.markers,{background:markerColor,border:{color:markerColor}})},LegendItem.prototype.createLabel=function createLabel(){var options=this.options,labelOptions=deepExtend({},options.labels);this.container.append(new text_box(options.text,labelOptions))},LegendItem.prototype.renderComplete=function renderComplete(){BoxElement.prototype.renderComplete.call(this);var cursor=this.options.cursor||{},eventSink=this._itemOverlay=shapes_path.w.fromRect(this.container.box.toRect(),{fill:{color:WHITE,opacity:0},stroke:null,cursor:cursor.style||cursor});this.appendVisual(eventSink)},LegendItem.prototype.click=function click(widget,e){var args=this.eventArgs(e);!widget.trigger("legendItemClick",args)&&e&&"contextmenu"===e.type&&e.preventDefault()},LegendItem.prototype.over=function over(widget,e){var args=this.eventArgs(e);return widget.trigger("legendItemHover",args)||widget._legendItemHover(args.seriesIndex,args.pointIndex),!0},LegendItem.prototype.out=function out(widget,e){widget._unsetActivePoint(),widget.trigger("legendItemLeave",this.eventArgs(e))},LegendItem.prototype.eventArgs=function eventArgs(e){var options=this.options;return{element:eventElement(e),text:options.text,series:options.series,seriesIndex:options.series.index,pointIndex:options.pointIndex}},LegendItem.prototype.renderVisual=function renderVisual(){var this$1=this,options=this.options,customVisual=options.visual;customVisual?(this.visual=customVisual({active:options.active,series:options.series,sender:this.getSender(),pointIndex:options.pointIndex,options:{markers:this.markerOptions(),labels:options.labels},createVisual:function(){this$1.createVisual(),this$1.renderChildren(),this$1.renderComplete();var defaultVisual=this$1.visual;return delete this$1.visual,defaultVisual}}),this.addVisual()):BoxElement.prototype.renderVisual.call(this)},LegendItem}(box_element);const legend_item=LegendItem;var Legend=function(ChartElement){function Legend(options,chartService){void 0===chartService&&(chartService={}),ChartElement.call(this,options),this.chartService=chartService,inArray(this.options.position,[TOP,RIGHT,BOTTOM,LEFT,"custom"])||(this.options.position=RIGHT),this.createContainers(),this.createLegendTitle(options.title),this.createItems()}return ChartElement&&(Legend.__proto__=ChartElement),Legend.prototype=Object.create(ChartElement&&ChartElement.prototype),Legend.prototype.constructor=Legend,Legend.prototype.createContainers=function createContainers(){var options=this.options,position=options.position,userAlign=options.align,align=position,vAlign=CENTER;"custom"===position?align=LEFT:inArray(position,[TOP,BOTTOM])?(align="start"===userAlign?LEFT:"end"===userAlign?RIGHT:CENTER,vAlign=position):userAlign&&("start"===userAlign?vAlign=TOP:"end"===userAlign&&(vAlign=BOTTOM)),this.container=new box_element({margin:options.margin,padding:options.padding,background:options.background,border:options.border,vAlign,align,zIndex:options.zIndex,shrinkToFit:!0}),this.hasTitle()?this.itemsContainer=new box_element({vAlign,align,zIndex:options.zIndex,shrinkToFit:!0}):this.itemsContainer=this.container,this.append(this.container)},Legend.prototype.createItems=function createItems(){var chartService=this.getService(),options=this.options,vertical=this.isVertical(),innerElement=new legend_layout({vertical,spacing:options.spacing,rtl:chartService.rtl},chartService),items=options.items;options.reverse&&(items=items.slice(0).reverse());for(var count=items.length,i=0;i<count;i++){var item=items[i];innerElement.append(new legend_item(deepExtend({},{markers:options.markers,labels:options.labels,rtl:chartService.rtl},options.item,item)))}innerElement.render(),this.itemsContainer.append(innerElement)},Legend.prototype.isVertical=function isVertical(){var ref=this.options,orientation=ref.orientation,position=ref.position;return"custom"===position&&"horizontal"!==orientation||(drawing_utils_defined(orientation)?"horizontal"!==orientation:inArray(position,[LEFT,RIGHT]))},Legend.prototype.hasItems=function hasItems(){return this.container.children[0].children.length>0},Legend.prototype.reflow=function reflow(targetBox){var options=this.options,legendBox=targetBox.clone();this.hasItems()?("custom"===options.position?(this.containerCustomReflow(legendBox),this.box=legendBox):this.containerReflow(legendBox),this.hasTitle()&&this.title.reflow(new core_box(this.container.box.x1,this.title.box.y1,this.container.box.x2,this.title.box.y2))):this.box=legendBox},Legend.prototype.containerReflow=function containerReflow(targetBox){var options=this.options,container=this.container,position=options.position,width=options.width,height=options.height,pos=position===TOP||position===BOTTOM?X:Y,vertical=this.isVertical(),alignTarget=targetBox.clone(),containerBox=targetBox.clone();position!==LEFT&&position!==RIGHT||(containerBox.y1=alignTarget.y1=0),vertical&&height?(containerBox.y2=containerBox.y1+height,containerBox.align(alignTarget,Y,container.options.vAlign)):!vertical&&width&&(containerBox.x2=containerBox.x1+width,containerBox.align(alignTarget,X,container.options.align)),container.reflow(containerBox);var box=(containerBox=container.box).clone();(options.offsetX||options.offsetY)&&(containerBox.translate(options.offsetX,options.offsetY),container.reflow(containerBox)),box[pos+1]=targetBox[pos+1],box[pos+2]=targetBox[pos+2],this.box=box},Legend.prototype.containerCustomReflow=function containerCustomReflow(targetBox){var options=this.options,container=this.container,offsetX=options.offsetX,offsetY=options.offsetY,width=options.width,height=options.height,vertical=this.isVertical(),containerBox=targetBox.clone();vertical&&height?containerBox.y2=containerBox.y1+height:!vertical&&width&&(containerBox.x2=containerBox.x1+width),container.reflow(containerBox),containerBox=container.box,container.reflow(new core_box(offsetX,offsetY,offsetX+containerBox.width(),offsetY+containerBox.height()))},Legend.prototype.renderVisual=function renderVisual(){this.hasItems()&&ChartElement.prototype.renderVisual.call(this)},Legend.prototype.createLegendTitle=function createLegendTitle(title){var titleOptions=deepExtend({},{color:BLACK,position:TOP,align:CENTER},title),text=titleOptions.text;if(title&&!1!==title.visible){if(drawing_utils_defined(titleOptions)&&titleOptions.visible){var labelTemplate=getTemplate(titleOptions);labelTemplate?text=labelTemplate({text}):titleOptions.format&&(text=this.chartService.format.auto(titleOptions.format,text))}this.title=new text_box(text,titleOptions),this.createTitleLayout(),this.appendTitleLayoutContent()}},Legend.prototype.createTitleLayout=function createTitleLayout(){this.layout=new float_element({vertical:!0,wrap:!1}),this.container.append(this.layout)},Legend.prototype.hasTitle=function hasTitle(){return Boolean(this.options.title&&!1!==this.options.title.visible)},Legend.prototype.appendTitleLayoutContent=function appendTitleLayoutContent(){this.options.title.position===BOTTOM?(this.layout.append(this.itemsContainer),this.layout.append(this.title)):(this.layout.append(this.title),this.layout.append(this.itemsContainer))},Legend}(chart_element);setDefaultOptions(Legend,{position:RIGHT,items:[],offsetX:0,offsetY:0,margin:getSpacing(5),padding:getSpacing(5),border:{color:BLACK,width:0},item:{cursor:"pointer",spacing:6},spacing:6,background:"",zIndex:1,markers:{border:{width:0},width:15,height:3,type:"rect",align:LEFT,vAlign:CENTER}});const legend=Legend;var PlotAreaFactory=function(Class){function PlotAreaFactory(){Class.call(this),this._registry=[]}return Class&&(PlotAreaFactory.__proto__=Class),PlotAreaFactory.prototype=Object.create(Class&&Class.prototype),PlotAreaFactory.prototype.constructor=PlotAreaFactory,PlotAreaFactory.prototype.register=function register(type,seriesTypes){this._registry.push({type,seriesTypes})},PlotAreaFactory.prototype.create=function create(srcSeries,options,chartService){for(var series,registry=this._registry,match=registry[0],idx=0;idx<registry.length;idx++){var entry=registry[idx];series=filterSeriesByType(srcSeries,entry.seriesTypes);var trendlines=filterSeriesByType(srcSeries,TRENDLINE_SERIES);if(series.length-trendlines.length>0){match=entry;break}}return new match.type(series,options,chartService)},PlotAreaFactory}(common_class.A);PlotAreaFactory.current=new PlotAreaFactory;const plotarea_factory=PlotAreaFactory;function createDiv(classNames){var element=document.createElement("div");return classNames&&(element.className=classNames),element}function closestHandle(element){for(var current=element;current&&!hasClasses(current,"k-handle");)current=current.parentNode;return current}var Selection=function(Class){function Selection(chart,categoryAxis,options,observer){Class.call(this);var chartElement=chart.element;this.options=deepExtend({},this.options,options),this.chart=chart,this.observer=observer,this.chartElement=chartElement,this.categoryAxis=categoryAxis,this._dateAxis=this.categoryAxis instanceof date_category_axis,this.initOptions(),this.visible=this.options.visible&&chartElement.offsetHeight,this.visible&&(this.createElements(),this.set(this._index(this.options.from),this._index(this.options.to)),this.bindEvents())}return Class&&(Selection.__proto__=Class),Selection.prototype=Object.create(Class&&Class.prototype),Selection.prototype.constructor=Selection,Selection.prototype.onPane=function onPane(pane){return this.categoryAxis.pane===pane},Selection.prototype.createElements=function createElements(){var options=this.options,wrapper=this.wrapper=createDiv("k-selector k-pointer-events-none");elementStyles(wrapper,{top:options.offset.top,left:options.offset.left,width:options.width,height:options.height,direction:"ltr"});var selection=this.selection=createDiv("k-selection k-pointer-events-none");this.leftMask=createDiv("k-mask k-pointer-events-none"),this.rightMask=createDiv("k-mask k-pointer-events-none"),wrapper.appendChild(this.leftMask),wrapper.appendChild(this.rightMask),wrapper.appendChild(selection);var body=this.body=createDiv("k-selection-bg k-pointer-events-none");selection.appendChild(body);var leftHandle=this.leftHandle=createDiv("k-handle k-left-handle k-pointer-events-auto"),rightHandle=this.rightHandle=createDiv("k-handle k-right-handle k-pointer-events-auto");leftHandle.appendChild(createDiv()),rightHandle.appendChild(createDiv()),selection.appendChild(leftHandle),selection.appendChild(rightHandle),this.chartElement.appendChild(wrapper);var selectionStyles=elementStyles(selection,["borderLeftWidth","borderRightWidth","height"]),leftHandleHeight=elementStyles(leftHandle,"height").height,rightHandleHeight=elementStyles(rightHandle,"height").height;options.selection={border:{left:selectionStyles.borderLeftWidth,right:selectionStyles.borderRightWidth}},elementStyles(leftHandle,{top:(selectionStyles.height-leftHandleHeight)/2}),elementStyles(rightHandle,{top:(selectionStyles.height-rightHandleHeight)/2}),wrapper.style.cssText=wrapper.style.cssText},Selection.prototype.bindEvents=function bindEvents$1(){var obj;!1!==this.options.mousewheel&&(this._mousewheelHandler=this._mousewheel.bind(this),bindEvents(this.chartElement,((obj={}).wheel=this._mousewheelHandler,obj))),this._domEvents=dom_events_builder.create(this.chartElement,{stopPropagation:!0,start:this._start.bind(this),move:this._move.bind(this),end:this._end.bind(this),tap:this._tap.bind(this),press:this._press.bind(this),gesturestart:this._gesturestart.bind(this),gesturechange:this._gesturechange.bind(this),gestureend:this._gestureend.bind(this)})},Selection.prototype.initOptions=function initOptions(){var options=this.options,box=this.categoryAxis.pane.chartsBox(),intlService=this.chart.chartService.intl;this._dateAxis&&deepExtend(options,{min:parseDate(intlService,options.min),max:parseDate(intlService,options.max),from:parseDate(intlService,options.from),to:parseDate(intlService,options.to)});var ref$1=elementStyles(this.chartElement,["paddingLeft","paddingTop"]),paddingLeft=ref$1.paddingLeft,paddingTop=ref$1.paddingTop;this.options=deepExtend({},{width:box.width(),height:box.height()+.1,padding:{left:paddingLeft,top:paddingTop},offset:{left:box.x1+paddingLeft,top:box.y1+paddingTop},from:options.min,to:options.max},options)},Selection.prototype.destroy=function destroy(){var obj;this._domEvents&&(this._domEvents.destroy(),delete this._domEvents),clearTimeout(this._mwTimeout),this._state=null,this.wrapper&&(this._mousewheelHandler&&(unbindEvents(this.chartElement,((obj={}).wheel=this._mousewheelHandler,obj)),this._mousewheelHandler=null),this.chartElement.removeChild(this.wrapper),this.wrapper=null)},Selection.prototype._rangeEventArgs=function _rangeEventArgs(range){return{axis:this.categoryAxis.options,from:this._value(range.from),to:this._value(range.to)}},Selection.prototype._pointInPane=function _pointInPane(x,y){var paneBox=this.categoryAxis.pane.box,modelCoords=this.chart._toModelCoordinates(x,y);return paneBox.containsPoint(modelCoords)},Selection.prototype._start=function _start(e){var options=this.options,target=eventElement(e);if(!this._state&&target){var coords=eventCoordinates(e);if(this._pointInPane(coords.x,coords.y)){var handle=closestHandle(target),bodyRect=this.body.getBoundingClientRect(),inBody=!handle&&coords.x>=bodyRect.x&&coords.x<=bodyRect.x+bodyRect.width&&coords.y>=bodyRect.y&&coords.y<=bodyRect.y+bodyRect.height;this.chart._unsetActivePoint(),this._state={moveTarget:handle,startLocation:e.x?e.x.location:0,inBody,range:{from:this._index(options.from),to:this._index(options.to)}};var args=this._rangeEventArgs({from:this._index(options.from),to:this._index(options.to)});this.trigger("selectStart",args)&&(this._state=null)}}},Selection.prototype._press=function _press(e){var handle;(handle=this._state?this._state.moveTarget:closestHandle(eventElement(e)))&&addClass(handle,"k-handle-active")},Selection.prototype._move=function _move(e){if(this._state){var state=this._state,options=this.options,categoryAxis=this.categoryAxis,range=state.range,target=state.moveTarget,reverse=categoryAxis.options.reverse,from=this._index(options.from),to=this._index(options.to),min=this._index(options.min),max=this._index(options.max),delta=state.startLocation-e.x.location,oldRange_from=range.from,oldRange_to=range.to,span=range.to-range.from,scale=elementStyles(this.wrapper,"width").width/(categoryAxis.categoriesCount()-1),offset=Math.round(delta/scale)*(reverse?-1:1);if(target||state.inBody){var leftHandle=target&&hasClasses(target,"k-left-handle"),rightHandle=target&&hasClasses(target,"k-right-handle");state.inBody?(range.from=Math.min(Math.max(min,from-offset),max-span),range.to=Math.min(range.from+span,max)):leftHandle&&!reverse||rightHandle&&reverse?(range.from=Math.min(Math.max(min,from-offset),max-1),range.to=Math.max(range.from+1,range.to)):(leftHandle&&reverse||rightHandle&&!reverse)&&(range.to=Math.min(Math.max(min+1,to-offset),max),range.from=Math.min(range.to-1,range.from)),range.from===oldRange_from&&range.to===oldRange_to||(this.move(range.from,range.to),this.trigger("select",this._rangeEventArgs(range)))}}},Selection.prototype._end=function _end(){if(this._state){var moveTarget=this._state.moveTarget;moveTarget&&removeClass(moveTarget,"k-handle-active");var range=this._state.range;this.set(range.from,range.to),this.trigger("selectEnd",this._rangeEventArgs(range)),delete this._state}},Selection.prototype._tap=function _tap(e){var options=this.options,categoryAxis=this.categoryAxis,coords=this.chart._eventCoordinates(e),categoryIx=categoryAxis.pointCategoryIndex(new core_point(coords.x,categoryAxis.box.y1)),from=this._index(options.from),to=this._index(options.to),min=this._index(options.min),max=this._index(options.max),span=to-from,mid=from+span/2,range={},rightClick=3===e.event.which,offset=Math.round(mid-categoryIx);this._state||rightClick||(this.chart._unsetActivePoint(),categoryAxis.options.justified||offset--,range.from=Math.min(Math.max(min,from-offset),max-span),range.to=Math.min(range.from+span,max),this._start(e),this._state&&(this._state.range=range,this.trigger("select",this._rangeEventArgs(range)),this._end()))},Selection.prototype._mousewheel=function _mousewheel(e){var this$1=this,delta=mousewheelDelta(e);if(this._start(e),this._state){var range=this._state.range;e.preventDefault(),e.stopPropagation(),Math.abs(delta)>1&&(delta*=3),this.options.mousewheel.reverse&&(delta*=-1),this.expand(delta)&&this.trigger("select",{axis:this.categoryAxis.options,delta,originalEvent:e,from:this._value(range.from),to:this._value(range.to)}),this._mwTimeout&&clearTimeout(this._mwTimeout),this._mwTimeout=setTimeout((function(){this$1._end()}),150)}},Selection.prototype._gesturestart=function _gesturestart(e){var options=this.options,touch=e.touches[0];if(this._pointInPane(touch.pageX,touch.pageY)){this._state={range:{from:this._index(options.from),to:this._index(options.to)}};var args=this._rangeEventArgs(this._state.range);this.trigger("selectStart",args)?this._state=null:e.preventDefault()}},Selection.prototype._gestureend=function _gestureend(){this._state&&(this.trigger("selectEnd",this._rangeEventArgs(this._state.range)),delete this._state)},Selection.prototype._gesturechange=function _gesturechange(e){if(this._state){var chart=this.chart,state=this._state,options=this.options,categoryAxis=this.categoryAxis,range=state.range,p0=chart._toModelCoordinates(e.touches[0].x.location).x,p1=chart._toModelCoordinates(e.touches[1].x.location).x,left=Math.min(p0,p1),right=Math.max(p0,p1);e.preventDefault(),range.from=categoryAxis.pointCategoryIndex(new core_point(left))||options.min,range.to=categoryAxis.pointCategoryIndex(new core_point(right))||options.max,this.move(range.from,range.to),this.trigger("select",this._rangeEventArgs(range))}},Selection.prototype._index=function _index(value){var index=value;return value instanceof Date&&(index=this.categoryAxis.categoryIndex(value)),index},Selection.prototype._value=function _value(index){var value=index;return this._dateAxis&&(value=this.categoryAxis.categoryAt(index))>this.options.max&&(value=this.options.max),value},Selection.prototype._slot=function _slot(value){var categoryAxis=this.categoryAxis,index=this._index(value);return categoryAxis.getSlot(index,index,!0)},Selection.prototype.move=function move(from,to){var options=this.options,reverse=this.categoryAxis.options.reverse,offset=options.offset,padding=options.padding,border=options.selection.border,left=reverse?to:from,right=reverse?from:to,edge="x"+(reverse?2:1),box=this._slot(left),leftMaskWidth=drawing_utils_round(box[edge]-offset.left+padding.left);elementStyles(this.leftMask,{width:leftMaskWidth}),elementStyles(this.selection,{left:leftMaskWidth}),box=this._slot(right);var rightMaskWidth=drawing_utils_round(options.width-(box[edge]-offset.left+padding.left));elementStyles(this.rightMask,{width:rightMaskWidth});var distance=options.width-rightMaskWidth;distance!==options.width&&(distance+=border.right),elementStyles(this.rightMask,{left:distance}),elementStyles(this.selection,{width:Math.max(options.width-(leftMaskWidth+rightMaskWidth)-border.right,0)})},Selection.prototype.set=function set(from,to){var options=this.options,min=this._index(options.min),max=this._index(options.max),fromValue=limitValue(this._index(from),min,max),toValue=limitValue(this._index(to),fromValue+1,max);options.visible&&this.move(fromValue,toValue),options.from=this._value(fromValue),options.to=this._value(toValue)},Selection.prototype.expand=function expand(delta){var options=this.options,min=this._index(options.min),max=this._index(options.max),zDir=options.mousewheel.zoom,from=this._index(options.from),to=this._index(options.to),range={from,to},oldRange=deepExtend({},range);if(this._state&&(range=this._state.range),zDir!==RIGHT&&(range.from=limitValue(limitValue(from-delta,0,to-1),min,max)),zDir!==LEFT&&(range.to=limitValue(limitValue(to+delta,range.from+1,max),min,max)),range.from!==oldRange.from||range.to!==oldRange.to)return this.set(range.from,range.to),!0},Selection.prototype.zoom=function zoom(delta,coords){var options=this.options,min=this._index(options.min),max=this._index(options.max),from=this._index(options.from),to=this._index(options.to),range={from,to},oldRange=deepExtend({},range),reverse=this.categoryAxis.options.reverse,origin=X+(reverse?"2":"1"),lineBox=this.categoryAxis.lineBox(),relative=Math.abs(lineBox[origin]-coords[X]),size=lineBox.width(),position=drawing_utils_round(relative/size,2),minDelta=drawing_utils_round(position*delta),maxDelta=drawing_utils_round((1-position)*delta);if(this._state&&(range=this._state.range),range.from=limitValue(limitValue(from-minDelta,0,to-1),min,max),range.to=limitValue(limitValue(to+maxDelta,range.from+1,max),min,max),range.from!==oldRange.from||range.to!==oldRange.to)return this.set(range.from,range.to),!0},Selection.prototype.trigger=function trigger(name,args){return(this.observer||this.chart).trigger(name,args)},Selection}(common_class.A);setDefaultOptions(Selection,{visible:!0,mousewheel:{zoom:"both"},min:MIN_VALUE,max:MAX_VALUE});const chart_selection=Selection;var Tooltip=function(BaseTooltip){function Tooltip(){BaseTooltip.apply(this,arguments)}return BaseTooltip&&(Tooltip.__proto__=BaseTooltip),Tooltip.prototype=Object.create(BaseTooltip&&BaseTooltip.prototype),Tooltip.prototype.constructor=Tooltip,Tooltip.prototype.show=function show(point){if(point&&point.tooltipAnchor&&(!this._current||this._current!==point)){var options=deepExtend({},this.options,point.options.tooltip),anchor=point.tooltipAnchor();anchor?(this._current=point,BaseTooltip.prototype.show.call(this,{point,anchor},options,point)):this.hide()}},Tooltip.prototype.hide=function hide(){delete this._current,BaseTooltip.prototype.hide.call(this)},Tooltip}(base_tooltip);const tooltip_tooltip=Tooltip;var SharedTooltip=function(BaseTooltip){function SharedTooltip(plotArea,options){BaseTooltip.call(this,plotArea.chartService,options),this.plotArea=plotArea,this.formatService=plotArea.chartService.format}return BaseTooltip&&(SharedTooltip.__proto__=BaseTooltip),SharedTooltip.prototype=Object.create(BaseTooltip&&BaseTooltip.prototype),SharedTooltip.prototype.constructor=SharedTooltip,SharedTooltip.prototype.showAt=function showAt(points,coords){var tooltipPoints=grep(points,(function(point){var tooltip=point.series.tooltip;return!(tooltip&&!1===tooltip.visible)}));if(tooltipPoints.length>0){var point=tooltipPoints[0],slot=this.plotArea.categoryAxis.getSlot(point.categoryIx),anchor=coords?this._slotAnchor(coords,slot):this._defaultAnchor(point,slot);this.show({anchor,shared:!0,points,category:point.category,categoryText:this.formatService.auto(this.options.categoryFormat,point.category),series:this.plotArea.series},this.options)}},SharedTooltip.prototype._slotAnchor=function _slotAnchor(point,slot){return this.plotArea.categoryAxis.options.vertical||(point.x=slot.center().x),{point,align:{horizontal:"left",vertical:"center"}}},SharedTooltip.prototype._defaultAnchor=function _defaultAnchor(point,slot){var box=point.owner.pane.chartsBox(),vertical=this.plotArea.categoryAxis.options.vertical,center=box.center(),slotCenter=slot.center();return{point:vertical?new core_point(center.x,slotCenter.y):new core_point(slotCenter.x,center.y),align:{horizontal:"center",vertical:"center"}}},SharedTooltip}(base_tooltip);setDefaultOptions(SharedTooltip,{categoryFormat:"{0:d}"});const shared_tooltip=SharedTooltip;var BarChartAnimation=function(superclass){function BarChartAnimation(){superclass.apply(this,arguments)}return superclass&&(BarChartAnimation.__proto__=superclass),BarChartAnimation.prototype=Object.create(superclass&&superclass.prototype),BarChartAnimation.prototype.constructor=BarChartAnimation,BarChartAnimation.prototype.setup=function setup(){var element=this.element,options=this.options;if(element.bbox()){this.origin=options.origin;var axis=options.vertical?Y:X,fromScale=this.fromScale=new geometry_point.A(1,1);fromScale[axis]=START_SCALE,element.transform(geometry_transform.A().scale(fromScale.x,fromScale.y))}else this.abort()},BarChartAnimation.prototype.step=function step(pos){var scaleX=interpolateValue(this.fromScale.x,1,pos),scaleY=interpolateValue(this.fromScale.y,1,pos);this.element.transform(geometry_transform.A().scale(scaleX,scaleY,this.origin))},BarChartAnimation.prototype.abort=function abort(){superclass.prototype.abort.call(this),this.element.transform(null)},BarChartAnimation}(animation);setDefaultOptions(BarChartAnimation,{duration:600}),animation_factory.current.register(BAR,BarChartAnimation);var BubbleAnimation=function(superclass){function BubbleAnimation(){superclass.apply(this,arguments)}return superclass&&(BubbleAnimation.__proto__=superclass),BubbleAnimation.prototype=Object.create(superclass&&superclass.prototype),BubbleAnimation.prototype.constructor=BubbleAnimation,BubbleAnimation.prototype.setup=function setup(){var center=this.center=this.element.bbox().center();this.element.transform(geometry_transform.A().scale(START_SCALE,START_SCALE,center))},BubbleAnimation.prototype.step=function step(pos){this.element.transform(geometry_transform.A().scale(pos,pos,this.center))},BubbleAnimation}(animation);setDefaultOptions(BubbleAnimation,{easing:"easeOutElastic"}),animation_factory.current.register(BUBBLE,BubbleAnimation);var FadeInAnimation=function(superclass){function FadeInAnimation(){superclass.apply(this,arguments)}return superclass&&(FadeInAnimation.__proto__=superclass),FadeInAnimation.prototype=Object.create(superclass&&superclass.prototype),FadeInAnimation.prototype.constructor=FadeInAnimation,FadeInAnimation.prototype.setup=function setup(){this.fadeTo=this.element.opacity(),this.element.opacity(0)},FadeInAnimation.prototype.step=function step(pos){this.element.opacity(pos*this.fadeTo)},FadeInAnimation}(animation);setDefaultOptions(FadeInAnimation,{duration:200,easing:"linear"}),animation_factory.current.register("fadeIn",FadeInAnimation);var PieAnimation=function(superclass){function PieAnimation(){superclass.apply(this,arguments)}return superclass&&(PieAnimation.__proto__=superclass),PieAnimation.prototype=Object.create(superclass&&superclass.prototype),PieAnimation.prototype.constructor=PieAnimation,PieAnimation.prototype.setup=function setup(){this.element.transform(geometry_transform.A().scale(START_SCALE,START_SCALE,this.options.center))},PieAnimation.prototype.step=function step(pos){this.element.transform(geometry_transform.A().scale(pos,pos,this.options.center))},PieAnimation}(animation);setDefaultOptions(PieAnimation,{easing:"easeOutElastic",duration:600}),animation_factory.current.register(PIE,PieAnimation);var ScatterLineChart=function(ScatterChart){function ScatterLineChart(){ScatterChart.apply(this,arguments)}return ScatterChart&&(ScatterLineChart.__proto__=ScatterChart),ScatterLineChart.prototype=Object.create(ScatterChart&&ScatterChart.prototype),ScatterLineChart.prototype.constructor=ScatterLineChart,ScatterLineChart.prototype.render=function render(){ScatterChart.prototype.render.call(this),this.renderSegments()},ScatterLineChart.prototype.createSegment=function createSegment(linePoints,currentSeries,seriesIx){return new("smooth"===currentSeries.style?spline_segment:line_segment)(linePoints,currentSeries,seriesIx)},ScatterLineChart.prototype.animationPoints=function animationPoints(){return ScatterChart.prototype.animationPoints.call(this).concat(this._segments)},ScatterLineChart.prototype.createMissingValue=function createMissingValue(value,missingValues){if(missingValues===ZERO){var missingValue={x:value.x,y:value.y};return hasValue(missingValue.x)||(missingValue.x=0),hasValue(missingValue.y)||(missingValue.y=0),missingValue}},ScatterLineChart}(scatter_chart);deepExtend(ScatterLineChart.prototype,line_chart_mixin);const scatter_line_chart=ScatterLineChart;const scatter_value_getter=function(fieldName){return function(ref){var valueFields=ref.valueFields;return{xValue:valueFields.x,yValue:valueFields[fieldName]}}};const scatter_linear_trendline=function scatterLinearTrendLine(context){var options=context.options,data=function scatter_linear_trendline_getData(ref){var seriesValues=ref.seriesValues,options=ref.options,ref$1=calculate_slope(seriesValues(),scatter_value_getter(options.field)),slope=ref$1.slope,intercept=ref$1.intercept,count=ref$1.count,xMin=ref$1.xMin,xMax=ref$1.xMax;if(count>0){var data=[],forecast=(options.trendline||{}).forecast;forecast&&(forecast.before>0&&(xMin-=forecast.before),forecast.after>0&&(xMax+=forecast.after));var samplingInterval=(options.trendline||{}).samplingInterval,delta=valueOrDefault(samplingInterval,autoMajorUnit(xMin,xMax)/10);samplingInterval<=0&&(delta=xMax-xMin);for(var x=xMin;x<=xMax;x+=delta)data.push([x,slope*x+intercept]);return data}return null}({seriesValues:context.seriesValues,options});return data?Object.assign({},options,{type:"scatterLine",data}):null};const scatter_moving_average=function scatterMovingAverageTrendline(context){var options=context.options,data=function scatter_moving_average_getData(ref){var options=ref.options,seriesValues=ref.seriesValues,period=(options.trendline||{}).period||2,data=calculate_moving_average(seriesValues({before:period,after:period}),scatter_value_getter(options.field),period);if(data.length>0)return data;return null}(context);return data?Object.assign({},options,{type:"scatterLine",data}):null};var scatterRegistry={};scatterRegistry.linearTrendline=scatter_linear_trendline,scatterRegistry.movingAverageTrendline=scatter_moving_average;const scatter_trendline_registry=scatterRegistry;var XYPlotArea=function(PlotAreaBase){function XYPlotArea(){PlotAreaBase.apply(this,arguments)}return PlotAreaBase&&(XYPlotArea.__proto__=PlotAreaBase),XYPlotArea.prototype=Object.create(PlotAreaBase&&PlotAreaBase.prototype),XYPlotArea.prototype.constructor=XYPlotArea,XYPlotArea.prototype.initFields=function initFields(){this.namedXAxes={},this.namedYAxes={},this.xAxisRangeTracker=new axis_group_range_tracker,this.yAxisRangeTracker=new axis_group_range_tracker},XYPlotArea.prototype.render=function render(panes){void 0===panes&&(panes=this.panes),this.series=[].concat(this.originalSeries),this.createTrendlineSeries();for(var seriesByPane=this.groupSeriesByPane(),i=0;i<panes.length;i++){var pane=panes[i],paneSeries=seriesByPane[pane.options.name||"default"]||[];this.addToLegend(paneSeries);var filteredSeries=this.filterVisibleSeries(paneSeries);filteredSeries&&(this.createScatterChart(filterSeriesByType(filteredSeries,SCATTER),pane),this.createScatterLineChart(filterSeriesByType(filteredSeries,SCATTER_LINE),pane),this.createBubbleChart(filterSeriesByType(filteredSeries,BUBBLE),pane))}this.createAxes(panes)},XYPlotArea.prototype.appendChart=function appendChart(chart,pane){this.xAxisRangeTracker.update(chart.xAxisRanges),this.yAxisRangeTracker.update(chart.yAxisRanges),PlotAreaBase.prototype.appendChart.call(this,chart,pane)},XYPlotArea.prototype.removeAxis=function removeAxis(axis){var axisName=axis.options.name;PlotAreaBase.prototype.removeAxis.call(this,axis),axis.options.vertical?(this.yAxisRangeTracker.reset(axisName),delete this.namedYAxes[axisName]):(this.xAxisRangeTracker.reset(axisName),delete this.namedXAxes[axisName]),axis===this.axisX&&delete this.axisX,axis===this.axisY&&delete this.axisY},XYPlotArea.prototype.seriesPaneName=function seriesPaneName(series){var options=this.options,xAxisName=series.xAxis,xAxis=grep([].concat(options.xAxis),(function(a){return a.name===xAxisName}))[0],yAxisName=series.yAxis,yAxis=grep([].concat(options.yAxis),(function(a){return a.name===yAxisName}))[0],defaultPaneName=(options.panes||[{}])[0].name||"default";return(xAxis||{}).pane||(yAxis||{}).pane||defaultPaneName},XYPlotArea.prototype.createScatterChart=function createScatterChart(series,pane){series.length>0&&this.appendChart(new scatter_chart(this,{series,clip:pane.options.clip}),pane)},XYPlotArea.prototype.createScatterLineChart=function createScatterLineChart(series,pane){series.length>0&&this.appendChart(new scatter_line_chart(this,{series,clip:pane.options.clip}),pane)},XYPlotArea.prototype.createBubbleChart=function createBubbleChart(series,pane){series.length>0&&this.appendChart(new bubble_chart(this,{series,clip:pane.options.clip}),pane)},XYPlotArea.prototype.createXYAxis=function createXYAxis(options,vertical,axisIndex){for(var inferredDate,axisName=options.name,namedAxes=vertical?this.namedYAxes:this.namedXAxes,tracker=vertical?this.yAxisRangeTracker:this.xAxisRangeTracker,axisOptions=deepExtend({reverse:!vertical&&this.chartService.rtl},options,{vertical}),isLog=equalsIgnoreCase(axisOptions.type,"log"),defaultRange=tracker.query(),defaultAxisRange=isLog?{min:.1,max:1}:{min:0,max:1},range=tracker.query(axisName)||defaultRange||defaultAxisRange,typeSamples=[axisOptions.min,axisOptions.max],series=this.series,seriesIx=0;seriesIx<series.length;seriesIx++){var currentSeries=series[seriesIx],seriesAxisName=currentSeries[vertical?"yAxis":"xAxis"];if(seriesAxisName===axisOptions.name||0===axisIndex&&!seriesAxisName){var firstPointValue=series_binder.current.bindPoint(currentSeries,0).valueFields;typeSamples.push(firstPointValue[vertical?"y":"x"]);break}}0===axisIndex&&defaultRange&&(range.min=Math.min(range.min,defaultRange.min),range.max=Math.max(range.max,defaultRange.max));for(var i=0;i<typeSamples.length;i++)if(typeSamples[i]instanceof Date){inferredDate=!0;break}var axis=new(equalsIgnoreCase(axisOptions.type,DATE)||!axisOptions.type&&inferredDate?date_value_axis:isLog?logarithmic_axis:numeric_axis)(range.min,range.max,axisOptions,this.chartService);if(axis.axisIndex=axisIndex,axisName){if(namedAxes[axisName])throw new Error((vertical?"Y":"X")+" axis with name "+axisName+" is already defined");namedAxes[axisName]=axis}return this.appendAxis(axis),axis},XYPlotArea.prototype.createAxes=function createAxes(panes){for(var options=this.options,xAxesOptions=[].concat(options.xAxis),xAxes=[],yAxesOptions=[].concat(options.yAxis),yAxes=[],idx=0;idx<xAxesOptions.length;idx++){inArray(this.findPane(xAxesOptions[idx].pane),panes)&&xAxes.push(this.createXYAxis(xAxesOptions[idx],!1,idx))}for(var idx$1=0;idx$1<yAxesOptions.length;idx$1++){inArray(this.findPane(yAxesOptions[idx$1].pane),panes)&&yAxes.push(this.createXYAxis(yAxesOptions[idx$1],!0,idx$1))}this.axisX=this.axisX||xAxes[0],this.axisY=this.axisY||yAxes[0]},XYPlotArea.prototype._dispatchEvent=function _dispatchEvent(chart,e,eventType){for(var coords=chart._eventCoordinates(e),point=new core_point(coords.x,coords.y),allAxes=this.axes,length=allAxes.length,xValues=[],yValues=[],i=0;i<length;i++){var axis=allAxes[i],values=axis.options.vertical?yValues:xValues,currentValue=axis.getValue(point);null!==currentValue&&values.push(currentValue)}xValues.length>0&&yValues.length>0&&chart.trigger(eventType,{element:eventElement(e),originalEvent:e,x:singleItemOrArray(xValues),y:singleItemOrArray(yValues)})},XYPlotArea.prototype.updateAxisOptions=function updateAxisOptions$1(axis,options){var vertical=axis.options.vertical,axes=this.groupAxes(this.panes),index=(vertical?axes.y:axes.x).indexOf(axis);xy_plotarea_updateAxisOptions(this.options,index,vertical,options),xy_plotarea_updateAxisOptions(this.originalOptions,index,vertical,options)},XYPlotArea.prototype.trendlineFactory=function trendlineFactory$1(options,series){var seriesValues=this.seriesValues.bind(this,series.index),trendline=trendline_factory(scatter_trendline_registry,options.type,{options,seriesValues});return trendline&&(trendline.xAxis=series.xAxis,trendline.yAxis=series.yAxis),trendline},XYPlotArea.prototype.seriesValues=function seriesValues(seriesIx){for(var result=[],currentSeries=this.series[seriesIx],pointIx=0;pointIx<currentSeries.data.length;pointIx++){var data=this.bindPoint(currentSeries,pointIx);result.push({pointIx,valueFields:data.valueFields})}return result},XYPlotArea}(plotarea_base);function xy_plotarea_updateAxisOptions(targetOptions,axisIndex,vertical,options){deepExtend([].concat(vertical?targetOptions.yAxis:targetOptions.xAxis)[axisIndex],options)}setDefaultOptions(XYPlotArea,{xAxis:{},yAxis:{}}),deepExtend(XYPlotArea.prototype,plotarea_events_mixin);const xy_plotarea=XYPlotArea;var PieSegment=function(ChartElement){function PieSegment(value,sector,options){ChartElement.call(this,options),this.value=value,this.sector=sector}return ChartElement&&(PieSegment.__proto__=ChartElement),PieSegment.prototype=Object.create(ChartElement&&ChartElement.prototype),PieSegment.prototype.constructor=PieSegment,PieSegment.prototype.render=function render(){var labels=this.options.labels,chartService=this.owner.chartService,labelText=this.value;if(!this._rendered&&!1!==this.visible){this._rendered=!0;var labelTemplate=getTemplate(labels),pointData=this.pointData();if(labelTemplate?labelText=labelTemplate(pointData):labels.format&&(labelText=chartService.format.auto(labels.format,labelText)),labels.visible&&(labelText||0===labelText)){if(labels.position===CENTER||"insideEnd"===labels.position)labels.color||(labels.color=auto_text_color(this.options.color)),labels.background||(labels.background=this.options.color);else{var themeLabels=chartService.theme.seriesDefaults.labels;labels.color=labels.color||themeLabels.color,labels.background=labels.background||themeLabels.background}this.label=new text_box(labelText,deepExtend({},labels,{align:CENTER,vAlign:"",animation:{type:"fadeIn",delay:this.animationDelay}}),pointData),this.append(this.label)}}},PieSegment.prototype.reflow=function reflow(targetBox){this.render(),this.box=targetBox,this.reflowLabel()},PieSegment.prototype.reflowLabel=function reflowLabel(){var labelsOptions=this.options.labels,label=this.label,sector=this.sector.clone(),labelsDistance=labelsOptions.distance,angle=sector.middle();if(label){var lp,labelHeight=label.box.height(),labelWidth=label.box.width();if(labelsOptions.position===CENTER)sector.radius=Math.abs((sector.radius-labelHeight)/2)+labelHeight,lp=sector.point(angle),label.reflow(new core_box(lp.x,lp.y-labelHeight/2,lp.x,lp.y));else if("insideEnd"===labelsOptions.position)sector.radius=sector.radius-labelHeight/2,lp=sector.point(angle),label.reflow(new core_box(lp.x,lp.y-labelHeight/2,lp.x,lp.y));else{var x1;(lp=sector.clone().expand(labelsDistance).point(angle)).x>=sector.center.x?(x1=lp.x+labelWidth,label.orientation=RIGHT):(x1=lp.x-labelWidth,label.orientation=LEFT),label.reflow(new core_box(x1,lp.y-labelHeight,lp.x,lp.y))}}},PieSegment.prototype.createVisual=function createVisual(){var this$1=this,sector=this.sector,options=this.options;if(ChartElement.prototype.createVisual.call(this),this.value)if(options.visual){var startAngle=(sector.startAngle+180)%360,visual=options.visual({category:this.category,dataItem:this.dataItem,value:this.value,series:this.series,percentage:this.percentage,center:new geometry_point.A(sector.center.x,sector.center.y),radius:sector.radius,innerRadius:sector.innerRadius,startAngle,endAngle:startAngle+sector.angle,options,sender:this.getSender(),createVisual:function(){var group=new shapes_group.A;return this$1.createSegmentVisual(group),group}});visual&&this.visual.append(visual)}else this.createSegmentVisual(this.visual)},PieSegment.prototype.createSegmentVisual=function createSegmentVisual(group){var sector=this.sector,options=this.options,borderOptions=options.border||{},border=borderOptions.width>0?{stroke:{color:borderOptions.color,width:borderOptions.width,opacity:borderOptions.opacity,dashType:borderOptions.dashType}}:{},color=options.color,fill={color,opacity:options.opacity},visual=this.createSegment(sector,deepExtend({fill,stroke:{opacity:options.opacity},zIndex:options.zIndex},border));group.append(visual),hasGradientOverlay(options)&&group.append(this.createGradientOverlay(visual,{baseColor:color,fallbackFill:fill},deepExtend({center:[sector.center.x,sector.center.y],innerRadius:sector.innerRadius,radius:sector.radius,userSpace:!0},options.overlay)))},PieSegment.prototype.createSegment=function createSegment(sector,options){return options.singleSegment?new shapes_circle.A(new geometry_circle.A(new geometry_point.A(sector.center.x,sector.center.y),sector.radius),options):shape_builder.current.createRing(sector,options)},PieSegment.prototype.createAnimation=function createAnimation(){var options=this.options,center=this.sector.center;deepExtend(options,{animation:{center:[center.x,center.y],delay:this.animationDelay}}),ChartElement.prototype.createAnimation.call(this)},PieSegment.prototype.createHighlight=function createHighlight(options){var highlight=this.options.highlight||{},border=highlight.border||{};return this.createSegment(this.sector,deepExtend({},options,{fill:{color:highlight.color,opacity:highlight.opacity},stroke:{opacity:border.opacity,width:border.width,color:border.color}}))},PieSegment.prototype.highlightVisual=function highlightVisual(){return this.visual.children[0]},PieSegment.prototype.highlightVisualArgs=function highlightVisualArgs(){var sector=this.sector;return{options:this.options,radius:sector.radius,innerRadius:sector.innerRadius,center:new geometry_point.A(sector.center.x,sector.center.y),startAngle:sector.startAngle,endAngle:sector.angle+sector.startAngle,visual:this.visual}},PieSegment.prototype.tooltipAnchor=function tooltipAnchor(){var sector=this.sector.clone().expand(5),midAndle=sector.middle();return{point:sector.point(midAndle),align:tooltipAlignment(midAndle+180)}},PieSegment.prototype.formatValue=function formatValue(format){return this.owner.formatPointValue(this,format)},PieSegment.prototype.pointData=function pointData(){return{dataItem:this.dataItem,category:this.category,value:this.value,series:this.series,percentage:this.percentage}},PieSegment}(chart_element),RAD_30=drawing_utils_round(rad(30),10),RAD_60=drawing_utils_round(rad(60),10);function tooltipAlignment(angle){var radians=rad(angle),sine=drawing_utils_round(Math.sin(radians),10),cosine=drawing_utils_round(Math.cos(radians),10);return{horizontal:Math.abs(sine)>RAD_60?CENTER:cosine<0?RIGHT:LEFT,vertical:Math.abs(sine)<RAD_30?CENTER:sine<0?BOTTOM:TOP}}setDefaultOptions(PieSegment,{color:WHITE,overlay:{gradient:"roundedBevel"},border:{width:.5},labels:{visible:!1,distance:35,font:"12px sans-serif",margin:getSpacing(.5),align:CIRCLE,zIndex:1,position:"outsideEnd"},animation:{type:PIE},highlight:{visible:!0,border:{width:1}},visible:!0}),deepExtend(PieSegment.prototype,point_events_mixin);const pie_segment=PieSegment;const pie_chart_mixin={createLegendItem:function(value,point,options){var legendOptions=this.options.legend||{},labelsOptions=legendOptions.labels||{},inactiveItems=legendOptions.inactiveItems||{},inactiveItemsLabels=inactiveItems.labels||{};if(options&&!1!==options.visibleInLegend){var itemLabelOptions,markerColor,pointVisible=!1!==options.visible,labelTemplate=pointVisible?getTemplate(labelsOptions):getTemplate(inactiveItemsLabels)||getTemplate(labelsOptions),text=options.category;labelTemplate&&(text=labelTemplate({text,series:options.series,dataItem:options.dataItem,percentage:options.percentage,value})),pointVisible?(itemLabelOptions={},markerColor=point.color):(itemLabelOptions={color:inactiveItemsLabels.color,font:inactiveItemsLabels.font},markerColor=(inactiveItems.markers||{}).color),hasValue(text)&&""!==text&&this.legendItems.push({active:pointVisible,pointIndex:options.index,text,series:options.series,markerColor,labels:itemLabelOptions})}}};var PieChart=function(ChartElement){function PieChart(plotArea,options){ChartElement.call(this,options),this.plotArea=plotArea,this.chartService=plotArea.chartService,this.points=[],this.legendItems=[],this.render()}return ChartElement&&(PieChart.__proto__=ChartElement),PieChart.prototype=Object.create(ChartElement&&ChartElement.prototype),PieChart.prototype.constructor=PieChart,PieChart.prototype.render=function render(){this.traverseDataPoints(this.addValue.bind(this))},PieChart.prototype.traverseDataPoints=function traverseDataPoints(callback){var options=this.options,seriesColors=this.plotArea.options.seriesColors;void 0===seriesColors&&(seriesColors=[]);for(var colorsCount=seriesColors.length,series=options.series,seriesCount=series.length,seriesIx=0;seriesIx<seriesCount;seriesIx++){var currentSeries=series[seriesIx],data=currentSeries.data,ref$1=bindSegments(currentSeries),total=ref$1.total,points=ref$1.points,count=ref$1.count,anglePerValue=360/total,constantAngle=void 0;isFinite(anglePerValue)||(constantAngle=360/count);var currentAngle=void 0;currentAngle=drawing_utils_defined(currentSeries.startAngle)?currentSeries.startAngle:options.startAngle,seriesIx!==seriesCount-1&&"outsideEnd"===currentSeries.labels.position&&(currentSeries.labels.position=CENTER);for(var i=0;i<points.length;i++){var pointData=points[i];if(pointData){var fields=pointData.fields,value=pointData.value,visible=pointData.visible,angle=0!==value?constantAngle||value*anglePerValue:0,explode=1!==data.length&&Boolean(fields.explode);isFunction(currentSeries.color)||(currentSeries.color=fields.color||seriesColors[i%colorsCount]),callback(value,new core_ring(null,0,0,currentAngle,angle),{owner:this,category:drawing_utils_defined(fields.category)?fields.category:"",index:i,series:currentSeries,seriesIx,dataItem:data[i],percentage:0!==total?value/total:0,explode,visibleInLegend:fields.visibleInLegend,visible,zIndex:seriesCount-seriesIx,animationDelay:this.animationDelay(i,seriesIx,seriesCount)}),!1!==visible&&(currentAngle+=angle)}}}},PieChart.prototype.evalSegmentOptions=function evalSegmentOptions(options,value,fields){var series=fields.series;evalOptions(options,{value,series,dataItem:fields.dataItem,category:fields.category,percentage:fields.percentage},{defaults:series._defaults,excluded:["data","content","template","visual","toggle"]})},PieChart.prototype.addValue=function addValue(value,sector,fields){var segmentOptions=deepExtend({},fields.series,{index:fields.index});if(this.evalSegmentOptions(segmentOptions,value,fields),this.createLegendItem(value,segmentOptions,fields),!1!==fields.visible){var segment=new pie_segment(value,sector,segmentOptions);Object.assign(segment,fields),this.append(segment),this.points.push(segment)}},PieChart.prototype.reflow=function reflow(targetBox){var options=this.options,points=this.points,seriesConfigs=this.seriesConfigs;void 0===seriesConfigs&&(seriesConfigs=[]);var count=points.length,box=targetBox.clone(),minWidth=Math.min(box.width(),box.height()),halfMinWidth=minWidth/2,defaultPadding=minWidth-.85*minWidth,newBox=new core_box(box.x1,box.y1,box.x1+minWidth,box.y1+minWidth),newBoxCenter=newBox.center(),boxCenter=box.center(),seriesCount=options.series.length,leftSideLabels=[],rightSideLabels=[],padding=valueOrDefault(options.padding,defaultPadding);this.targetBox=targetBox,padding=padding>halfMinWidth-5?halfMinWidth-5:padding,newBox.translate(boxCenter.x-newBoxCenter.x,boxCenter.y-newBoxCenter.y);for(var radius=halfMinWidth-padding,center=new core_point(radius+newBox.x1+padding,radius+newBox.y1+padding),i=0;i<count;i++){var segment=points[i],sector=segment.sector,seriesIndex=segment.seriesIx;if(sector.radius=radius,sector.center=center,seriesConfigs.length){var seriesConfig=seriesConfigs[seriesIndex];sector.innerRadius=seriesConfig.innerRadius,sector.radius=seriesConfig.radius}seriesIndex===seriesCount-1&&segment.explode&&(sector.center=sector.clone().setRadius(.15*sector.radius).point(sector.middle())),segment.reflow(newBox);var label=segment.label;label&&"outsideEnd"===label.options.position&&seriesIndex===seriesCount-1&&(label.orientation===RIGHT?rightSideLabels.push(label):leftSideLabels.push(label))}leftSideLabels.length>0&&(leftSideLabels.sort(this.labelComparator(!0)),this.leftLabelsReflow(leftSideLabels)),rightSideLabels.length>0&&(rightSideLabels.sort(this.labelComparator(!1)),this.rightLabelsReflow(rightSideLabels)),this.box=newBox},PieChart.prototype.leftLabelsReflow=function leftLabelsReflow(labels){var distances=this.distanceBetweenLabels(labels);this.distributeLabels(distances,labels)},PieChart.prototype.rightLabelsReflow=function rightLabelsReflow(labels){var distances=this.distanceBetweenLabels(labels);this.distributeLabels(distances,labels)},PieChart.prototype.distanceBetweenLabels=function distanceBetweenLabels(labels){var segment=last(this.points),sector=segment.sector,count=labels.length-1,lr=sector.radius+segment.options.labels.distance,distances=[],firstBox=labels[0].box,distance=drawing_utils_round(firstBox.y1-(sector.center.y-lr-firstBox.height()-firstBox.height()/2));distances.push(distance);for(var i=0;i<count;i++){var secondBox=labels[i+1].box;firstBox=labels[i].box,distance=drawing_utils_round(secondBox.y1-firstBox.y2),distances.push(distance)}return distance=drawing_utils_round(sector.center.y+lr-labels[count].box.y2-labels[count].box.height()/2),distances.push(distance),distances},PieChart.prototype.distributeLabels=function distributeLabels(distances,labels){for(var left,right,remaining,count=distances.length,i=0;i<count;i++)for(remaining=-distances[i],left=right=i;remaining>0&&(left>=0||right<count);)remaining=this._takeDistance(distances,i,--left,remaining),remaining=this._takeDistance(distances,i,++right,remaining);this.reflowLabels(distances,labels)},PieChart.prototype._takeDistance=function _takeDistance(distances,anchor,position,amount){var result=amount;if(distances[position]>0){var available=Math.min(distances[position],result);result-=available,distances[position]-=available,distances[anchor]+=available}return result},PieChart.prototype.reflowLabels=function reflowLabels(distances,labels){var boxX,segment=last(this.points),sector=segment.sector,labelOptions=segment.options.labels,labelsCount=labels.length,labelDistance=labelOptions.distance,boxY=sector.center.y-(sector.radius+labelDistance)-labels[0].box.height();distances[0]+=2;for(var i=0;i<labelsCount;i++){var label=labels[i],box=label.box;boxY+=distances[i],boxX=this.hAlignLabel(box.x2,sector.clone().expand(labelDistance),boxY,boxY+box.height(),label.orientation===RIGHT),label.orientation===RIGHT?(labelOptions.align!==CIRCLE&&(boxX=sector.radius+sector.center.x+labelDistance),label.reflow(new core_box(boxX+box.width(),boxY,boxX,boxY))):(labelOptions.align!==CIRCLE&&(boxX=sector.center.x-sector.radius-labelDistance),label.reflow(new core_box(boxX-box.width(),boxY,boxX,boxY))),boxY+=box.height()}},PieChart.prototype.createVisual=function createVisual(){var connectors=this.options.connectors,points=this.points,count=points.length;ChartElement.prototype.createVisual.call(this),this._connectorLines=[];for(var i=0;i<count;i++){var segment=points[i],sector=segment.sector,label=segment.label,angle=sector.middle(),connectorsColor=(segment.options.connectors||{}).color||connectors.color;if(label){var connectorLine=new shapes_path.w({stroke:{color:connectorsColor,width:connectors.width},animation:{type:"fadeIn",delay:segment.animationDelay}});if("outsideEnd"===label.options.position){var box=label.box,centerPoint=sector.center,start=sector.point(angle),middle=new core_point(box.x1,box.center().y),sr=void 0,end=void 0,crossing=void 0;start=sector.clone().expand(connectors.padding).point(angle),connectorLine.moveTo(start.x,start.y),label.orientation===RIGHT?(crossing=intersection(centerPoint,start,middle,end=new core_point(box.x1-connectors.padding,box.center().y)),middle=new core_point(end.x-4,end.y),(crossing=crossing||middle).x=Math.min(crossing.x,middle.x),this.pointInCircle(crossing,sector.center,sector.radius+4)||crossing.x<sector.center.x?(sr=sector.center.x+sector.radius+4,segment.options.labels.align!==COLUMN?sr<middle.x?connectorLine.lineTo(sr,start.y):connectorLine.lineTo(start.x+8,start.y):connectorLine.lineTo(sr,start.y),connectorLine.lineTo(middle.x,end.y)):(crossing.y=end.y,connectorLine.lineTo(crossing.x,crossing.y))):(crossing=intersection(centerPoint,start,middle,end=new core_point(box.x2+connectors.padding,box.center().y)),middle=new core_point(end.x+4,end.y),(crossing=crossing||middle).x=Math.max(crossing.x,middle.x),this.pointInCircle(crossing,sector.center,sector.radius+4)||crossing.x>sector.center.x?(sr=sector.center.x-sector.radius-4,segment.options.labels.align!==COLUMN?sr>middle.x?connectorLine.lineTo(sr,start.y):connectorLine.lineTo(start.x-8,start.y):connectorLine.lineTo(sr,start.y),connectorLine.lineTo(middle.x,end.y)):(crossing.y=end.y,connectorLine.lineTo(crossing.x,crossing.y))),connectorLine.lineTo(end.x,end.y),this._connectorLines.push(connectorLine),this.visual.append(connectorLine)}}}},PieChart.prototype.renderVisual=function renderVisual(){if(ChartElement.prototype.renderVisual.call(this),find(this.options.series,(function(options){return options.autoFit}))){var targetBox=this.targetBox,pieCenter=this.box.center(),bbox=this.visual.bbox();if(!bbox)return;var bboxBottom=bbox.bottomRight(),scale=Math.min((pieCenter.y-targetBox.y1)/(pieCenter.y-bbox.origin.y),(targetBox.y2-pieCenter.y)/(bboxBottom.y-pieCenter.y),(pieCenter.x-targetBox.x1)/(pieCenter.x-bbox.origin.x),(targetBox.x2-pieCenter.x)/(bboxBottom.x-pieCenter.x));scale<1&&this.visual.transform(geometry_transform.A().scale(scale,scale,[pieCenter.x,pieCenter.y]))}},PieChart.prototype.labelComparator=function labelComparator(reverse){var reverseValue=reverse?-1:1;return function(a,b){return((a.parent.sector.middle()+270)%360-(b.parent.sector.middle()+270)%360)*reverseValue}},PieChart.prototype.hAlignLabel=function hAlignLabel(originalX,sector,y1,y2,direction){var radius=sector.radius,sector_center=sector.center,cx=sector_center.x,cy=sector_center.y,t=Math.min(Math.abs(cy-y1),Math.abs(cy-y2));return t>radius?originalX:cx+Math.sqrt(radius*radius-t*t)*(direction?1:-1)},PieChart.prototype.pointInCircle=function pointInCircle(point,center,radius){return Math.pow(center.x-point.x,2)+Math.pow(center.y-point.y,2)<Math.pow(radius,2)},PieChart.prototype.formatPointValue=function formatPointValue(point,format){return this.chartService.format.auto(format,point.value)},PieChart.prototype.animationDelay=function animationDelay(categoryIndex){return 70*categoryIndex},PieChart.prototype.stackRoot=function stackRoot(){return this},PieChart}(chart_element);function intersection(a1,a2,b1,b2){var result,uat=(b2.x-b1.x)*(a1.y-b1.y)-(b2.y-b1.y)*(a1.x-b1.x),ub=(b2.y-b1.y)*(a2.x-a1.x)-(b2.x-b1.x)*(a2.y-a1.y);if(0!==ub){var ua=uat/ub;result=new core_point(a1.x+ua*(a2.x-a1.x),a1.y+ua*(a2.y-a1.y))}return result}setDefaultOptions(PieChart,{startAngle:90,connectors:{width:2,color:"#939393",padding:8},inactiveItems:{markers:{},labels:{}}}),deepExtend(PieChart.prototype,pie_chart_mixin),PieChart.prototype.isStackRoot=!0;const pie_chart=PieChart;var PiePlotArea=function(PlotAreaBase){function PiePlotArea(){PlotAreaBase.apply(this,arguments)}return PlotAreaBase&&(PiePlotArea.__proto__=PlotAreaBase),PiePlotArea.prototype=Object.create(PlotAreaBase&&PlotAreaBase.prototype),PiePlotArea.prototype.constructor=PiePlotArea,PiePlotArea.prototype.render=function render(){this.createPieChart(this.series)},PiePlotArea.prototype.createPieChart=function createPieChart(series){var firstSeries=series[0],pieChart=new pie_chart(this,{series,padding:firstSeries.padding,startAngle:firstSeries.startAngle,connectors:firstSeries.connectors,legend:this.options.legend});this.appendChart(pieChart)},PiePlotArea.prototype.appendChart=function appendChart(chart,pane){PlotAreaBase.prototype.appendChart.call(this,chart,pane),append(this.options.legend.items,chart.legendItems)},PiePlotArea}(plotarea_base);const pie_plotarea=PiePlotArea;var DonutSegment=function(PieSegment){function DonutSegment(){PieSegment.apply(this,arguments)}return PieSegment&&(DonutSegment.__proto__=PieSegment),DonutSegment.prototype=Object.create(PieSegment&&PieSegment.prototype),DonutSegment.prototype.constructor=DonutSegment,DonutSegment.prototype.reflowLabel=function reflowLabel(){var labelsOptions=this.options.labels,label=this.label,sector=this.sector.clone(),angle=sector.middle();if(label){var labelHeight=label.box.height();if(labelsOptions.position===CENTER){sector.radius-=(sector.radius-sector.innerRadius)/2;var lp=sector.point(angle);label.reflow(new core_box(lp.x,lp.y-labelHeight/2,lp.x,lp.y))}else PieSegment.prototype.reflowLabel.call(this)}},DonutSegment.prototype.createSegment=function createSegment(sector,options){return shape_builder.current.createRing(sector,options)},DonutSegment}(pie_segment);setDefaultOptions(DonutSegment,{overlay:{gradient:"roundedGlass"},labels:{position:CENTER},animation:{type:PIE}}),deepExtend(DonutSegment.prototype,point_events_mixin);const donut_segment=DonutSegment;var DonutChart=function(PieChart){function DonutChart(){PieChart.apply(this,arguments)}return PieChart&&(DonutChart.__proto__=PieChart),DonutChart.prototype=Object.create(PieChart&&PieChart.prototype),DonutChart.prototype.constructor=DonutChart,DonutChart.prototype.addValue=function addValue(value,sector,fields){var segmentOptions=deepExtend({},fields.series,{index:fields.index});if(this.evalSegmentOptions(segmentOptions,value,fields),this.createLegendItem(value,segmentOptions,fields),!1!==fields.visible){var segment=new donut_segment(value,sector,segmentOptions);Object.assign(segment,fields),this.append(segment),this.points.push(segment)}},DonutChart.prototype.reflow=function reflow(targetBox){for(var holeSize,options=this.options,box=targetBox.clone(),minWidth=Math.min(box.width(),box.height()),halfMinWidth=minWidth/2,defaultPadding=minWidth-.85*minWidth,series=options.series,seriesCount=series.length,padding=valueOrDefault(options.padding,defaultPadding),totalSize=halfMinWidth-(padding=padding>halfMinWidth-5?halfMinWidth-5:padding),seriesWithoutSize=0,i=0;i<seriesCount;i++){var currentSeries=series[i];0===i&&drawing_utils_defined(currentSeries.holeSize)&&(holeSize=currentSeries.holeSize,totalSize-=currentSeries.holeSize),drawing_utils_defined(currentSeries.size)?totalSize-=currentSeries.size:seriesWithoutSize++,drawing_utils_defined(currentSeries.margin)&&i!==seriesCount-1&&(totalSize-=currentSeries.margin)}drawing_utils_defined(holeSize)||(totalSize-=holeSize=.75*((halfMinWidth-padding)/(seriesCount+.75)));var radius,innerRadius=holeSize,margin=0;this.seriesConfigs=[];for(var i$1=0;i$1<seriesCount;i$1++){var currentSeries$1=series[i$1];radius=(innerRadius+=margin)+valueOrDefault(currentSeries$1.size,totalSize/seriesWithoutSize),this.seriesConfigs.push({innerRadius,radius}),margin=currentSeries$1.margin||0,innerRadius=radius}PieChart.prototype.reflow.call(this,targetBox)},DonutChart.prototype.animationDelay=function animationDelay(categoryIndex,seriesIndex,seriesCount){return 50*categoryIndex+600*(seriesIndex+1)/(seriesCount+1)},DonutChart}(pie_chart);setDefaultOptions(DonutChart,{startAngle:90,connectors:{width:2,color:"#939393",padding:8}});const donut_chart=DonutChart;var DonutPlotArea=function(PiePlotArea){function DonutPlotArea(){PiePlotArea.apply(this,arguments)}return PiePlotArea&&(DonutPlotArea.__proto__=PiePlotArea),DonutPlotArea.prototype=Object.create(PiePlotArea&&PiePlotArea.prototype),DonutPlotArea.prototype.constructor=DonutPlotArea,DonutPlotArea.prototype.render=function render(){this.createDonutChart(this.series)},DonutPlotArea.prototype.createDonutChart=function createDonutChart(series){var firstSeries=series[0],donutChart=new donut_chart(this,{series,padding:firstSeries.padding,connectors:firstSeries.connectors,legend:this.options.legend});this.appendChart(donutChart)},DonutPlotArea}(pie_plotarea);const donut_plotarea=DonutPlotArea;var PolarPlotAreaBase=function(PlotAreaBase){function PolarPlotAreaBase(){PlotAreaBase.apply(this,arguments)}return PlotAreaBase&&(PolarPlotAreaBase.__proto__=PlotAreaBase),PolarPlotAreaBase.prototype=Object.create(PlotAreaBase&&PlotAreaBase.prototype),PolarPlotAreaBase.prototype.constructor=PolarPlotAreaBase,PolarPlotAreaBase.prototype.initFields=function initFields(){this.valueAxisRangeTracker=new axis_group_range_tracker},PolarPlotAreaBase.prototype.render=function render(){this.addToLegend(this.series),this.createPolarAxis(),this.createCharts(),this.createValueAxis()},PolarPlotAreaBase.prototype.alignAxes=function alignAxes(){var axis=this.valueAxis,range=axis.range(),crossingValue=axis.options.reverse?range.max:range.min,slot=axis.getSlot(crossingValue),center=this.polarAxis.getSlot(0).center,axisBox=axis.box.translate(center.x-slot.x1,center.y-slot.y1);axis.reflow(axisBox)},PolarPlotAreaBase.prototype.createValueAxis=function createValueAxis(){var axisType,axisDefaultRange,tracker=this.valueAxisRangeTracker,defaultRange=tracker.query(),axisOptions=this.valueAxisOptions({roundToMajorUnit:!1,zIndex:-1});"log"===axisOptions.type?(axisType=radar_logarithmic_axis,axisDefaultRange={min:.1,max:1}):(axisType=radar_numeric_axis,axisDefaultRange={min:0,max:1});var range=tracker.query(name)||defaultRange||axisDefaultRange;range&&defaultRange&&(range.min=Math.min(range.min,defaultRange.min),range.max=Math.max(range.max,defaultRange.max));var valueAxis=new axisType(range.min,range.max,axisOptions,this.chartService);this.valueAxis=valueAxis,this.appendAxis(valueAxis)},PolarPlotAreaBase.prototype.reflowAxes=function reflowAxes(){var options=this.options.plotArea,valueAxis=this.valueAxis,polarAxis=this.polarAxis,box=this.box,defaultPadding=.15*Math.min(box.width(),box.height()),padding=getSpacing(options.padding||{},defaultPadding),paddingBox=box.clone().unpad(padding),axisBox=paddingBox.clone();axisBox.y2=axisBox.y1+Math.min(axisBox.width(),axisBox.height()),axisBox.align(paddingBox,Y,CENTER);var valueAxisBox=axisBox.clone().shrink(0,axisBox.height()/2);polarAxis.reflow(axisBox),valueAxis.reflow(valueAxisBox);var heightDiff=valueAxis.lineBox().height()-valueAxis.box.height();valueAxis.reflow(valueAxis.box.unpad({top:heightDiff})),this.axisBox=axisBox,this.alignAxes(axisBox)},PolarPlotAreaBase.prototype.backgroundBox=function backgroundBox(){return this.box},PolarPlotAreaBase.prototype.detachLabels=function detachLabels(){},PolarPlotAreaBase}(plotarea_base);const polar_plotarea_base=PolarPlotAreaBase;var PolarScatterChart=function(ScatterChart){function PolarScatterChart(){ScatterChart.apply(this,arguments)}return ScatterChart&&(PolarScatterChart.__proto__=ScatterChart),PolarScatterChart.prototype=Object.create(ScatterChart&&ScatterChart.prototype),PolarScatterChart.prototype.constructor=PolarScatterChart,PolarScatterChart.prototype.pointSlot=function pointSlot(slotX,slotY){var valueRadius=slotX.center.y-slotY.y1,slot=core_point.onCircle(slotX.center,slotX.startAngle,valueRadius);return new core_box(slot.x,slot.y,slot.x,slot.y)},PolarScatterChart}(scatter_chart);setDefaultOptions(PolarScatterChart,{clip:!1});const polar_scatter_chart=PolarScatterChart;var PolarLineChart=function(ScatterLineChart){function PolarLineChart(){ScatterLineChart.apply(this,arguments)}return ScatterLineChart&&(PolarLineChart.__proto__=ScatterLineChart),PolarLineChart.prototype=Object.create(ScatterLineChart&&ScatterLineChart.prototype),PolarLineChart.prototype.constructor=PolarLineChart,PolarLineChart}(scatter_line_chart);PolarLineChart.prototype.pointSlot=polar_scatter_chart.prototype.pointSlot,setDefaultOptions(PolarLineChart,{clip:!1});const polar_line_chart=PolarLineChart;var SplinePolarAreaSegment=function(SplineAreaSegment){function SplinePolarAreaSegment(){SplineAreaSegment.apply(this,arguments)}return SplineAreaSegment&&(SplinePolarAreaSegment.__proto__=SplineAreaSegment),SplinePolarAreaSegment.prototype=Object.create(SplineAreaSegment&&SplineAreaSegment.prototype),SplinePolarAreaSegment.prototype.constructor=SplinePolarAreaSegment,SplinePolarAreaSegment.prototype.fillToAxes=function fillToAxes(fillPath){var center=this._polarAxisCenter();fillPath.lineTo(center.x,center.y)},SplinePolarAreaSegment.prototype._polarAxisCenter=function _polarAxisCenter(){return this.parent.plotArea.polarAxis.box.center()},SplinePolarAreaSegment.prototype.strokeSegments=function strokeSegments(){var segments=this._strokeSegments;if(!segments){var center=this._polarAxisCenter(),curveProcessor=new curve_processor(!1),linePoints=this.points();linePoints.push(center),(segments=this._strokeSegments=curveProcessor.process(linePoints)).pop()}return segments},SplinePolarAreaSegment}(spline_area_segment);const spline_polar_area_segment=SplinePolarAreaSegment;var PolarAreaSegment=function(AreaSegment){function PolarAreaSegment(){AreaSegment.apply(this,arguments)}return AreaSegment&&(PolarAreaSegment.__proto__=AreaSegment),PolarAreaSegment.prototype=Object.create(AreaSegment&&AreaSegment.prototype),PolarAreaSegment.prototype.constructor=PolarAreaSegment,PolarAreaSegment.prototype.fillToAxes=function fillToAxes(fillPath){var center=this.parent.plotArea.polarAxis.box.center(),centerSegment=new geometry_segment.A([center.x,center.y]);fillPath.segments.unshift(centerSegment),fillPath.segments.push(centerSegment)},PolarAreaSegment}(area_segment);const polar_area_segment=PolarAreaSegment;var PolarAreaChart=function(PolarLineChart){function PolarAreaChart(){PolarLineChart.apply(this,arguments)}return PolarLineChart&&(PolarAreaChart.__proto__=PolarLineChart),PolarAreaChart.prototype=Object.create(PolarLineChart&&PolarLineChart.prototype),PolarAreaChart.prototype.constructor=PolarAreaChart,PolarAreaChart.prototype.createSegment=function createSegment(linePoints,currentSeries,seriesIx){return"smooth"===(currentSeries.line||{}).style?new spline_polar_area_segment(linePoints,currentSeries,seriesIx):new polar_area_segment(linePoints,currentSeries,seriesIx)},PolarAreaChart.prototype.createMissingValue=function createMissingValue(value,missingValues){var missingValue;return hasValue(value.x)&&"interpolate"!==missingValues&&(missingValue={x:value.x,y:value.y},missingValues===ZERO&&(missingValue.y=0)),missingValue},PolarAreaChart.prototype.seriesMissingValues=function seriesMissingValues(series){return series.missingValues||ZERO},PolarAreaChart.prototype._hasMissingValuesGap=function _hasMissingValuesGap(){for(var series=this.options.series,idx=0;idx<series.length;idx++)if("gap"===this.seriesMissingValues(series[idx]))return!0},PolarAreaChart.prototype.sortPoints=function sortPoints(points){if(points.sort(xComparer),this._hasMissingValuesGap())for(var idx=0;idx<points.length;idx++){var point=points[idx];if(point)hasValue(point.value.y)||"gap"!==this.seriesMissingValues(point.series)||delete points[idx]}return points},PolarAreaChart}(polar_line_chart);function xComparer(a,b){return a.value.x-b.value.x}const polar_area_chart=PolarAreaChart;var PolarPlotArea=function(PolarPlotAreaBase){function PolarPlotArea(){PolarPlotAreaBase.apply(this,arguments)}return PolarPlotAreaBase&&(PolarPlotArea.__proto__=PolarPlotAreaBase),PolarPlotArea.prototype=Object.create(PolarPlotAreaBase&&PolarPlotAreaBase.prototype),PolarPlotArea.prototype.constructor=PolarPlotArea,PolarPlotArea.prototype.createPolarAxis=function createPolarAxis(){var polarAxis=new polar_axis(this.options.xAxis,this.chartService);this.polarAxis=polarAxis,this.axisX=polarAxis,this.appendAxis(polarAxis)},PolarPlotArea.prototype.render=function render(){this.series=[].concat(this.originalSeries),this.createTrendlineSeries(),PolarPlotAreaBase.prototype.render.call(this)},PolarPlotArea.prototype.valueAxisOptions=function valueAxisOptions(defaults){return deepExtend(defaults,{majorGridLines:{type:ARC},minorGridLines:{type:ARC}},this.options.yAxis)},PolarPlotArea.prototype.createValueAxis=function createValueAxis(){PolarPlotAreaBase.prototype.createValueAxis.call(this),this.axisY=this.valueAxis},PolarPlotArea.prototype.trendlineFactory=function trendlineFactory(options,series){var trendline=xy_plotarea.prototype.trendlineFactory.call(this,options,series);return trendline&&(trendline.type=POLAR_LINE),trendline},PolarPlotArea.prototype.appendChart=function appendChart(chart,pane){this.valueAxisRangeTracker.update(chart.yAxisRanges),plotarea_base.prototype.appendChart.call(this,chart,pane)},PolarPlotArea.prototype.createCharts=function createCharts(){var series=this.filterVisibleSeries(this.series),pane=this.panes[0];this.createLineChart(filterSeriesByType(series,[POLAR_LINE]),pane),this.createScatterChart(filterSeriesByType(series,[POLAR_SCATTER]),pane),this.createAreaChart(filterSeriesByType(series,[POLAR_AREA]),pane)},PolarPlotArea.prototype.createLineChart=function createLineChart(series,pane){if(0!==series.length){var lineChart=new polar_line_chart(this,{series});this.appendChart(lineChart,pane)}},PolarPlotArea.prototype.createScatterChart=function createScatterChart(series,pane){if(0!==series.length){var scatterChart=new polar_scatter_chart(this,{series});this.appendChart(scatterChart,pane)}},PolarPlotArea.prototype.createAreaChart=function createAreaChart(series,pane){if(0!==series.length){var areaChart=new polar_area_chart(this,{series});this.appendChart(areaChart,pane)}},PolarPlotArea.prototype._dispatchEvent=function _dispatchEvent(chart,e,eventType){var coords=chart._eventCoordinates(e),point=new core_point(coords.x,coords.y),xValue=this.axisX.getValue(point),yValue=this.axisY.getValue(point);null!==xValue&&null!==yValue&&chart.trigger(eventType,{element:eventElement(e),x:xValue,y:yValue})},PolarPlotArea.prototype.createCrosshairs=function createCrosshairs(){},PolarPlotArea}(polar_plotarea_base);setDefaultOptions(PolarPlotArea,{xAxis:{},yAxis:{}}),deepExtend(PolarPlotArea.prototype,plotarea_events_mixin,{seriesValues:xy_plotarea.prototype.seriesValues});const polar_plotarea=PolarPlotArea;var RadarLineChart=function(LineChart){function RadarLineChart(){LineChart.apply(this,arguments)}return LineChart&&(RadarLineChart.__proto__=LineChart),RadarLineChart.prototype=Object.create(LineChart&&LineChart.prototype),RadarLineChart.prototype.constructor=RadarLineChart,RadarLineChart.prototype.pointSlot=function pointSlot(categorySlot,valueSlot){var valueRadius=categorySlot.center.y-valueSlot.y1,slot=core_point.onCircle(categorySlot.center,categorySlot.middle(),valueRadius);return new core_box(slot.x,slot.y,slot.x,slot.y)},RadarLineChart.prototype.renderSegments=function renderSegments(){if(LineChart.prototype.renderSegments.call(this),this._segments&&this._segments.length>1)for(var seriesSegments=function groupBySeriesIx(segments){for(var seriesSegments=[],idx=0;idx<segments.length;idx++){var segment=segments[idx];seriesSegments[segment.seriesIx]=seriesSegments[segment.seriesIx]||[],seriesSegments[segment.seriesIx].push(segment)}return seriesSegments}(this._segments),idx=0;idx<seriesSegments.length;idx++){var segments=seriesSegments[idx];if(segments&&segments.length>1){var firstPoint=segments[0].linePoints[0],lastSegment=last(segments),lastPoint=last(lastSegment.linePoints),isFirstDataPoint=0===firstPoint.categoryIx,isLastDataPoint=lastPoint.categoryIx===lastPoint.categoriesCount-1;isFirstDataPoint&&isLastDataPoint&&last(segments).linePoints.push(firstPoint)}}},RadarLineChart.prototype.createSegment=function createSegment(linePoints,currentSeries,seriesIx){var segment=new("smooth"===currentSeries.style?spline_segment:line_segment)(linePoints,currentSeries,seriesIx),missingValues=this.seriesMissingValues(currentSeries);return linePoints.length!==currentSeries.data.length&&"interpolate"!==missingValues||(segment.options.closed=!0),segment},RadarLineChart}(line_chart);setDefaultOptions(RadarLineChart,{clip:!1,limitPoints:!1});const radar_line_chart=RadarLineChart;var SplineRadarAreaSegment=function(SplineAreaSegment){function SplineRadarAreaSegment(){SplineAreaSegment.apply(this,arguments)}return SplineAreaSegment&&(SplineRadarAreaSegment.__proto__=SplineAreaSegment),SplineRadarAreaSegment.prototype=Object.create(SplineAreaSegment&&SplineAreaSegment.prototype),SplineRadarAreaSegment.prototype.constructor=SplineRadarAreaSegment,SplineRadarAreaSegment.prototype.fillToAxes=function fillToAxes(){},SplineRadarAreaSegment}(spline_area_segment);const spline_radar_area_segment=SplineRadarAreaSegment;var RadarAreaSegment=function(AreaSegment){function RadarAreaSegment(){AreaSegment.apply(this,arguments)}return AreaSegment&&(RadarAreaSegment.__proto__=AreaSegment),RadarAreaSegment.prototype=Object.create(AreaSegment&&AreaSegment.prototype),RadarAreaSegment.prototype.constructor=RadarAreaSegment,RadarAreaSegment.prototype.fillToAxes=function fillToAxes(){},RadarAreaSegment}(area_segment);const radar_area_segment=RadarAreaSegment;var RadarAreaChart=function(RadarLineChart){function RadarAreaChart(){RadarLineChart.apply(this,arguments)}return RadarLineChart&&(RadarAreaChart.__proto__=RadarLineChart),RadarAreaChart.prototype=Object.create(RadarLineChart&&RadarLineChart.prototype),RadarAreaChart.prototype.constructor=RadarAreaChart,RadarAreaChart.prototype.createSegment=function createSegment(linePoints,currentSeries,seriesIx,prevSegment){var previousSegment,stackPoints,segment,isStacked=this.options.isStacked,style=(currentSeries.line||{}).style;return isStacked&&seriesIx>0&&prevSegment&&(stackPoints=prevSegment.linePoints.slice(0),previousSegment=prevSegment),"smooth"===style?(segment=new spline_radar_area_segment(linePoints,currentSeries,seriesIx,previousSegment,stackPoints)).options.closed=!0:(linePoints.push(linePoints[0]),segment=new radar_area_segment(linePoints,currentSeries,seriesIx,previousSegment,stackPoints)),segment},RadarAreaChart.prototype.seriesMissingValues=function seriesMissingValues(series){return series.missingValues||ZERO},RadarAreaChart}(radar_line_chart);const radar_area_chart=RadarAreaChart;var RadarSegment=function(DonutSegment){function RadarSegment(value,options){DonutSegment.call(this,value,null,options)}return DonutSegment&&(RadarSegment.__proto__=DonutSegment),RadarSegment.prototype=Object.create(DonutSegment&&DonutSegment.prototype),RadarSegment.prototype.constructor=RadarSegment,RadarSegment}(donut_segment);setDefaultOptions(RadarSegment,{overlay:{gradient:"none"},labels:{distance:10}});const radar_segment=RadarSegment;var RadarClusterLayout=function(ChartElement){function RadarClusterLayout(options){ChartElement.call(this,options),this.forEach=options.rtl?forEachReverse:forEach}return ChartElement&&(RadarClusterLayout.__proto__=ChartElement),RadarClusterLayout.prototype=Object.create(ChartElement&&ChartElement.prototype),RadarClusterLayout.prototype.constructor=RadarClusterLayout,RadarClusterLayout.prototype.reflow=function reflow(sector){var options=this.options,children=this.children,gap=options.gap,spacing=options.spacing,count=children.length,slots=count+gap+spacing*(count-1),slotAngle=sector.angle/slots,angle=sector.startAngle+slotAngle*(gap/2);this.forEach(children,(function(child){var slotSector=sector.clone();slotSector.startAngle=angle,slotSector.angle=slotAngle,child.sector&&(slotSector.radius=child.sector.radius),child.reflow(slotSector),child.sector=slotSector,angle+=slotAngle+slotAngle*spacing}))},RadarClusterLayout}(chart_element);setDefaultOptions(RadarClusterLayout,{gap:1,spacing:0});const radar_cluster_layout=RadarClusterLayout;var RadarStackLayout=function(ChartElement){function RadarStackLayout(){ChartElement.apply(this,arguments)}return ChartElement&&(RadarStackLayout.__proto__=ChartElement),RadarStackLayout.prototype=Object.create(ChartElement&&ChartElement.prototype),RadarStackLayout.prototype.constructor=RadarStackLayout,RadarStackLayout.prototype.reflow=function reflow(sector){var reverse=this.options.reverse,children=this.children,childrenCount=children.length,first=reverse?childrenCount-1:0,step=reverse?-1:1;this.box=new core_box;for(var i=first;i>=0&&i<childrenCount;i+=step){var childSector=children[i].sector;childSector.startAngle=sector.startAngle,childSector.angle=sector.angle}},RadarStackLayout}(chart_element);const radar_stack_layout=RadarStackLayout;var RadarBarChart=function(BarChart){function RadarBarChart(){BarChart.apply(this,arguments)}return BarChart&&(RadarBarChart.__proto__=BarChart),RadarBarChart.prototype=Object.create(BarChart&&BarChart.prototype),RadarBarChart.prototype.constructor=RadarBarChart,RadarBarChart.prototype.pointType=function pointType(){return radar_segment},RadarBarChart.prototype.clusterType=function clusterType(){return radar_cluster_layout},RadarBarChart.prototype.stackType=function stackType(){return radar_stack_layout},RadarBarChart.prototype.categorySlot=function categorySlot(categoryAxis,categoryIx){return categoryAxis.getSlot(categoryIx)},RadarBarChart.prototype.pointSlot=function pointSlot(categorySlot,valueSlot){var slot=categorySlot.clone(),y=categorySlot.center.y;return slot.radius=y-valueSlot.y1,slot.innerRadius=y-valueSlot.y2,slot},RadarBarChart.prototype.reflowPoint=function reflowPoint(point,pointSlot){point.sector=pointSlot,point.reflow()},RadarBarChart.prototype.createAnimation=function createAnimation(){this.options.animation.center=this.box.toRect().center(),BarChart.prototype.createAnimation.call(this)},RadarBarChart}(bar_chart);RadarBarChart.prototype.reflow=categorical_chart.prototype.reflow,setDefaultOptions(RadarBarChart,{clip:!1,limitPoints:!1,animation:{type:"pie"}});const radar_bar_chart=RadarBarChart;var RadarPlotArea=function(PolarPlotAreaBase){function RadarPlotArea(){PolarPlotAreaBase.apply(this,arguments)}return PolarPlotAreaBase&&(RadarPlotArea.__proto__=PolarPlotAreaBase),RadarPlotArea.prototype=Object.create(PolarPlotAreaBase&&PolarPlotAreaBase.prototype),RadarPlotArea.prototype.constructor=RadarPlotArea,RadarPlotArea.prototype.createPolarAxis=function createPolarAxis(){var categoryAxis=new radar_category_axis(this.options.categoryAxis,this.chartService);this.polarAxis=categoryAxis,this.categoryAxis=categoryAxis,this.appendAxis(categoryAxis),this.aggregateCategories(),this.createTrendlineSeries(),this.createCategoryAxesLabels()},RadarPlotArea.prototype.valueAxisOptions=function valueAxisOptions(defaults){return this._hasBarCharts&&deepExtend(defaults,{majorGridLines:{type:ARC},minorGridLines:{type:ARC}}),this._isStacked100&&deepExtend(defaults,{roundToMajorUnit:!1,labels:{format:"P0"}}),deepExtend(defaults,this.options.valueAxis)},RadarPlotArea.prototype.aggregateCategories=function aggregateCategories(){categorical_plotarea.prototype.aggregateCategories.call(this,this.panes)},RadarPlotArea.prototype.createCategoryAxesLabels=function createCategoryAxesLabels(){categorical_plotarea.prototype.createCategoryAxesLabels.call(this,this.panes)},RadarPlotArea.prototype.filterSeries=function filterSeries(currentSeries){return currentSeries},RadarPlotArea.prototype.trendlineFactory=function trendlineFactory(options,series){var trendline=categorical_plotarea.prototype.trendlineFactory.call(this,options,series);return trendline&&(trendline.type=RADAR_LINE),trendline},RadarPlotArea.prototype.createCharts=function createCharts(){var series=this.filterVisibleSeries(this.series),pane=this.panes[0];this.createAreaChart(filterSeriesByType(series,[RADAR_AREA]),pane),this.createLineChart(filterSeriesByType(series,[RADAR_LINE]),pane),this.createBarChart(filterSeriesByType(series,[RADAR_COLUMN]),pane)},RadarPlotArea.prototype.chartOptions=function chartOptions(series){var options={series},firstSeries=series[0];if(firstSeries){var filteredSeries=this.filterVisibleSeries(series),stack=firstSeries.stack;options.isStacked=stack&&filteredSeries.length>1,options.isStacked100=stack&&"100%"===stack.type&&filteredSeries.length>1,options.isStacked100&&(this._isStacked100=!0)}return options},RadarPlotArea.prototype.createAreaChart=function createAreaChart(series,pane){if(0!==series.length){var areaChart=new radar_area_chart(this,this.chartOptions(series));this.appendChart(areaChart,pane)}},RadarPlotArea.prototype.createLineChart=function createLineChart(series,pane){if(0!==series.length){var lineChart=new radar_line_chart(this,this.chartOptions(series));this.appendChart(lineChart,pane)}},RadarPlotArea.prototype.createBarChart=function createBarChart(series,pane){if(0!==series.length){var firstSeries=series[0],options=this.chartOptions(series);options.gap=firstSeries.gap,options.spacing=firstSeries.spacing;var barChart=new radar_bar_chart(this,options);this.appendChart(barChart,pane),this._hasBarCharts=!0}},RadarPlotArea.prototype.seriesCategoryAxis=function seriesCategoryAxis(){return this.categoryAxis},RadarPlotArea.prototype._dispatchEvent=function _dispatchEvent(chart,e,eventType){var coords=chart._eventCoordinates(e),point=new core_point(coords.x,coords.y),category=this.categoryAxis.getCategory(point),value=this.valueAxis.getValue(point);null!==category&&null!==value&&chart.trigger(eventType,{element:eventElement(e),category,value})},RadarPlotArea.prototype.createCrosshairs=function createCrosshairs(){},RadarPlotArea}(polar_plotarea_base);deepExtend(RadarPlotArea.prototype,plotarea_events_mixin,{appendChart:categorical_plotarea.prototype.appendChart,aggregateSeries:categorical_plotarea.prototype.aggregateSeries,seriesSourcePoints:categorical_plotarea.prototype.seriesSourcePoints,seriesValues:categorical_plotarea.prototype.seriesValues}),setDefaultOptions(RadarPlotArea,{categoryAxis:{categories:[]},valueAxis:{}});const radar_plotarea=RadarPlotArea;var FunnelSegment=function(ChartElement){function FunnelSegment(value,options,segmentOptions){ChartElement.call(this,options),this.value=value,this.options.index=segmentOptions.index}return ChartElement&&(FunnelSegment.__proto__=ChartElement),FunnelSegment.prototype=Object.create(ChartElement&&ChartElement.prototype),FunnelSegment.prototype.constructor=FunnelSegment,FunnelSegment.prototype.reflow=function reflow(chartBox){var points=this.points,label=this.children[0];this.box=new core_box(points[0].x,points[0].y,points[1].x,points[2].y),label&&label.reflow(new core_box(chartBox.x1,points[0].y,chartBox.x2,points[2].y))},FunnelSegment.prototype.createVisual=function createVisual(){var visual,this$1=this,options=this.options;ChartElement.prototype.createVisual.call(this),(visual=options.visual?options.visual({category:this.category,dataItem:this.dataItem,value:this.value,series:this.series,percentage:this.percentage,points:this.points,options,sender:this.getSender(),createVisual:function(){return this$1.createPath()}}):this.createPath())&&this.visual.append(visual)},FunnelSegment.prototype.createPath=function createPath(){var options=this.options,border=options.border;return shapes_path.w.fromPoints(this.points,{fill:{color:options.color,opacity:options.opacity},stroke:{color:border.color,opacity:border.opacity,width:border.width}}).close()},FunnelSegment.prototype.createHighlight=function createHighlight(style){return shapes_path.w.fromPoints(this.points,style)},FunnelSegment.prototype.highlightVisual=function highlightVisual(){return this.visual.children[0]},FunnelSegment.prototype.highlightVisualArgs=function highlightVisualArgs(){var path=shapes_path.w.fromPoints(this.points).close();return{options:this.options,path}},FunnelSegment.prototype.tooltipAnchor=function tooltipAnchor(){var box=this.box;return{point:new core_point(box.center().x,box.y1),align:{horizontal:"center",vertical:"top"}}},FunnelSegment.prototype.formatValue=function formatValue(format){return this.owner.formatPointValue(this,format)},FunnelSegment}(chart_element);setDefaultOptions(FunnelSegment,{color:WHITE,border:{width:1}}),deepExtend(FunnelSegment.prototype,point_events_mixin);const funnel_segment=FunnelSegment;var FunnelChart=function(ChartElement){function FunnelChart(plotArea,options){ChartElement.call(this,options),this.plotArea=plotArea,this.chartService=plotArea.chartService,this.points=[],this.labels=[],this.legendItems=[],this.render()}return ChartElement&&(FunnelChart.__proto__=ChartElement),FunnelChart.prototype=Object.create(ChartElement&&ChartElement.prototype),FunnelChart.prototype.constructor=FunnelChart,FunnelChart.prototype.formatPointValue=function formatPointValue(point,format){return this.chartService.format.auto(format,point.value)},FunnelChart.prototype.render=function render(){var options=this.options,seriesColors=this.plotArea.options.seriesColors;void 0===seriesColors&&(seriesColors=[]);var series=options.series[0],data=series.data;if(data)for(var ref$1=bindSegments(series),total=ref$1.total,points=ref$1.points,i=0;i<points.length;i++){var pointData=points[i];if(pointData){var fields=pointData.fields;isFunction(series.color)||(series.color=fields.color||seriesColors[i%seriesColors.length]),fields=deepExtend({index:i,owner:this,series,dataItem:data[i],percentage:pointData.value/total},fields,{visible:pointData.visible});var value=pointData.valueFields.value,segment=this.createSegment(value,fields),label=this.createLabel(value,fields);segment&&label&&segment.append(label)}}},FunnelChart.prototype.evalSegmentOptions=function evalSegmentOptions(options,value,fields){var series=fields.series;evalOptions(options,{value,series,dataItem:fields.dataItem,index:fields.index},{defaults:series._defaults,excluded:["data","content","template","toggle","visual"]})},FunnelChart.prototype.createSegment=function createSegment(value,fields){var seriesOptions=deepExtend({},fields.series);if(this.evalSegmentOptions(seriesOptions,value,fields),this.createLegendItem(value,seriesOptions,fields),!1!==fields.visible){var segment=new funnel_segment(value,seriesOptions,fields);return Object.assign(segment,fields),this.append(segment),this.points.push(segment),segment}},FunnelChart.prototype.createLabel=function createLabel(value,fields){var series=fields.series,dataItem=fields.dataItem,labels=deepExtend({},this.options.labels,series.labels),text=value;if(labels.visible){var labelTemplate=getTemplate(labels),data={dataItem,value,percentage:fields.percentage,category:fields.category,series};labelTemplate?text=labelTemplate(data):labels.format&&(text=this.chartService.format.auto(labels.format,text)),labels.color||(labels.color=auto_text_color(series.color),labels.background||(labels.background=series.color)),this.evalSegmentOptions(labels,value,fields);var textBox=new text_box(text,deepExtend({vAlign:labels.position},labels),data);return this.labels.push(textBox),textBox}},FunnelChart.prototype.labelPadding=function labelPadding(){for(var labels=this.labels,padding={left:0,right:0},i=0;i<labels.length;i++){var align=labels[i].options.align;if(align!==CENTER){var width=labels[i].box.width();align===LEFT?padding.left=Math.max(padding.left,width):padding.right=Math.max(padding.right,width)}}return padding},FunnelChart.prototype.dynamicSlopeReflow=function dynamicSlopeReflow(box,width,totalHeight){for(var options=this.options,segments=this.points,count=segments.length,firstSegment=segments[0],maxSegment=firstSegment,idx=0;idx<segments.length;idx++)segments[idx].percentage>maxSegment.percentage&&(maxSegment=segments[idx]);for(var lastUpperSide=firstSegment.percentage/maxSegment.percentage*width,previousOffset=(width-lastUpperSide)/2,previousHeight=0,idx$1=0;idx$1<count;idx$1++){var percentage=segments[idx$1].percentage,nextSegment=segments[idx$1+1],nextPercentage=nextSegment?nextSegment.percentage:percentage,points=segments[idx$1].points=[],height=options.dynamicHeight?totalHeight*percentage:totalHeight/count,offset=void 0;offset=limitValue(offset=percentage?(width-lastUpperSide*(nextPercentage/percentage))/2:nextPercentage?0:width/2,0,width),points.push(new geometry_point.A(box.x1+previousOffset,box.y1+previousHeight)),points.push(new geometry_point.A(box.x1+width-previousOffset,box.y1+previousHeight)),points.push(new geometry_point.A(box.x1+width-offset,box.y1+height+previousHeight)),points.push(new geometry_point.A(box.x1+offset,box.y1+height+previousHeight)),previousOffset=offset,previousHeight+=height+options.segmentSpacing,lastUpperSide=limitValue(width-2*offset,0,width)}},FunnelChart.prototype.constantSlopeReflow=function constantSlopeReflow(box,width,totalHeight){for(var options=this.options,segments=this.points,count=segments.length,decreasingWidth=options.neckRatio<=1,neckRatio=decreasingWidth?options.neckRatio*width:width,previousOffset=decreasingWidth?0:(width-width/options.neckRatio)/2,finalNarrow=((decreasingWidth?width:width-2*previousOffset)-neckRatio)/2,previousHeight=0,idx=0;idx<count;idx++){var points=segments[idx].points=[],percentage=segments[idx].percentage,offset=options.dynamicHeight?finalNarrow*percentage:finalNarrow/count,height=options.dynamicHeight?totalHeight*percentage:totalHeight/count;points.push(new geometry_point.A(box.x1+previousOffset,box.y1+previousHeight)),points.push(new geometry_point.A(box.x1+width-previousOffset,box.y1+previousHeight)),points.push(new geometry_point.A(box.x1+width-previousOffset-offset,box.y1+height+previousHeight)),points.push(new geometry_point.A(box.x1+previousOffset+offset,box.y1+height+previousHeight)),previousOffset+=offset,previousHeight+=height+options.segmentSpacing}},FunnelChart.prototype.reflow=function reflow(chartBox){var points=this.points,count=points.length;if(count){var options=this.options,box=chartBox.clone().unpad(this.labelPadding()),totalHeight=box.height()-options.segmentSpacing*(count-1),width=box.width();options.dynamicSlope?this.dynamicSlopeReflow(box,width,totalHeight):this.constantSlopeReflow(box,width,totalHeight);for(var idx=0;idx<count;idx++)points[idx].reflow(chartBox)}},FunnelChart}(chart_element);setDefaultOptions(FunnelChart,{neckRatio:.3,width:300,dynamicSlope:!1,dynamicHeight:!0,segmentSpacing:0,labels:{visible:!1,align:CENTER,position:CENTER,zIndex:1}}),deepExtend(FunnelChart.prototype,pie_chart_mixin);const funnel_chart=FunnelChart;var PyramidChart=function(FunnelChart){function PyramidChart(plotArea,options){options.dynamicSlope=!1,options.neckRatio=1e6,FunnelChart.call(this,plotArea,options)}return FunnelChart&&(PyramidChart.__proto__=FunnelChart),PyramidChart.prototype=Object.create(FunnelChart&&FunnelChart.prototype),PyramidChart.prototype.constructor=PyramidChart,PyramidChart}(funnel_chart);const pyramid_chart=PyramidChart;var FunnelPlotArea=function(PlotAreaBase){function FunnelPlotArea(){PlotAreaBase.apply(this,arguments)}return PlotAreaBase&&(FunnelPlotArea.__proto__=PlotAreaBase),FunnelPlotArea.prototype=Object.create(PlotAreaBase&&PlotAreaBase.prototype),FunnelPlotArea.prototype.constructor=FunnelPlotArea,FunnelPlotArea.prototype.render=function render(){this.createChart(funnel_chart,filterSeriesByType(this.series,["funnel"])),this.createChart(pyramid_chart,filterSeriesByType(this.series,["pyramid"]))},FunnelPlotArea.prototype.createChart=function createChart(chartType,series){var firstSeries=series[0];if(firstSeries){var chart=new chartType(this,{series,legend:this.options.legend,neckRatio:firstSeries.neckRatio,dynamicHeight:firstSeries.dynamicHeight,dynamicSlope:firstSeries.dynamicSlope,segmentSpacing:firstSeries.segmentSpacing,highlight:firstSeries.highlight});this.appendChart(chart)}},FunnelPlotArea.prototype.appendChart=function appendChart(chart,pane){PlotAreaBase.prototype.appendChart.call(this,chart,pane),append(this.options.legend.items,chart.legendItems)},FunnelPlotArea}(plotarea_base);const funnel_plotarea=FunnelPlotArea;var parse_color=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/common/color/parse-color.js");const color_scale=function(color,minLightnessOffset){void 0===minLightnessOffset&&(minLightnessOffset=.05);var baseColor=(0,parse_color.Ay)(color),offset=1-minLightnessOffset;return function(value){var hsl=baseColor.toHSL(),range=100-hsl.l,point=offset-value;return hsl.l+=Math.min(point*range,range),hsl.toCss()}};var HeatmapPoint=function(ChartElement){function HeatmapPoint(value,options){ChartElement.call(this),this.options=options,this.color=options.color||WHITE,this.value=value}return ChartElement&&(HeatmapPoint.__proto__=ChartElement),HeatmapPoint.prototype=Object.create(ChartElement&&ChartElement.prototype),HeatmapPoint.prototype.constructor=HeatmapPoint,HeatmapPoint.prototype.render=function render(){this._rendered||(this._rendered=!0,this.createMarker(),this.createLabel(),this.createNote())},HeatmapPoint.prototype.createLabel=function createLabel(){var labels=this.options.labels;if(labels.visible){var labelText,pointData=this.pointData(),labelTemplate=getTemplate(labels),labelColor=labels.color;labelText=labelTemplate?labelTemplate(pointData):this.formatValue(labels.format),labelColor||(labelColor=auto_text_color(this.color)),this.label=new text_box(labelText,deepExtend({align:CENTER,vAlign:CENTER,margin:{left:5,right:5},zIndex:valueOrDefault(labels.zIndex,this.series.zIndex)},labels,{color:labelColor}),pointData),this.append(this.label)}},HeatmapPoint.prototype.formatValue=function formatValue(format){return this.owner.formatPointValue(this,format)},HeatmapPoint.prototype.reflow=function reflow(targetBox){this.render();var label=this.label;this.box=targetBox,label&&label.reflow(this.markerBox()),this.note&&this.note.reflow(targetBox),this.marker.reflow(this.markerBox())},HeatmapPoint.prototype.markerBox=function markerBox(){var markers=this.options.markers,border=markers.border,rect=this.box.toRect(),isRoundRect="roundedRect"===valueOrDefault(markers.type,"rect"),borderWidth=valueOrDefault(border.width,isRoundRect?1:0),halfBorderWidth=Math.round(borderWidth/2);if(markers.size){var center=rect.center();rect.size.width=rect.size.height=markers.size,rect.origin.x=Math.round(center.x-rect.size.width/2),rect.origin.y=Math.round(center.y-rect.size.height/2)}return rect.size.width-=borderWidth,rect.size.height-=borderWidth,rect.origin.y+=halfBorderWidth+.5,rect.origin.x+=halfBorderWidth+.5,rectToBox(rect)},HeatmapPoint.prototype.markerBorder=function markerBorder(){var options=this.options,border=options.markers.border,opacity=valueOrDefault(border.opacity,options.opacity);return{color:border.color||this.color,width:border.width,opacity,dashType:border.dashType}},HeatmapPoint.prototype.createMarker=function createMarker(){var options=this.options,markerOptions=options.markers,marker=new shape_element({type:valueOrDefault(markerOptions.type,"rect"),width:markerOptions.size,height:markerOptions.size,rotation:markerOptions.rotation,background:this.color,border:this.markerBorder(),borderRadius:markerOptions.borderRadius,opacity:this.series.opacity||options.opacity,zIndex:valueOrDefault(options.zIndex,this.series.zIndex),animation:options.animation,visual:options.visual},{dataItem:this.dataItem,value:this.value,series:this.series,category:this.category});this.marker=marker,this.append(marker)},HeatmapPoint.prototype.createHighlight=function createHighlight(style){var options=this.options,markerOptions=this.options.highlight.markers||this.options.markers,highlight=new shape_element({type:valueOrDefault(markerOptions.type,"rect"),width:markerOptions.size,height:markerOptions.size,rotation:markerOptions.rotation,background:markerOptions.color||this.color,border:this.markerBorder(),borderRadius:markerOptions.borderRadius,opacity:this.series.opacity||options.opacity,zIndex:valueOrDefault(options.zIndex,this.series.zIndex)});highlight.reflow(this.markerBox());var visual=highlight.getElement();return visual.options.fill=style.fill,visual.options.stroke=style.stroke,visual},HeatmapPoint.prototype.highlightVisual=function highlightVisual(){return this.rectVisual},HeatmapPoint.prototype.highlightVisualArgs=function highlightVisualArgs(){return{options:this.options,rect:this.box.toRect(),visual:this.rectVisual}},HeatmapPoint.prototype.tooltipAnchor=function tooltipAnchor(){var left=this.box.center().x,top=this.box.y1-5;return{point:new core_point(left,top),align:{horizontal:CENTER,vertical:BOTTOM}}},HeatmapPoint.prototype.overlapsBox=function overlapsBox(box){return this.box.overlaps(box)},HeatmapPoint.prototype.unclipElements=function unclipElements(){},HeatmapPoint.prototype.pointData=function pointData(){return{x:this.value.x,y:this.value.y,value:this.value.value,dataItem:this.dataItem,series:this.series}},HeatmapPoint}(chart_element);deepExtend(HeatmapPoint.prototype,point_events_mixin),deepExtend(HeatmapPoint.prototype,note_mixin),HeatmapPoint.prototype.defaults={markers:{type:"rect",borderRadius:4,border:{color:"transparent"}},padding:{top:1},labels:{visible:!1,padding:3},opacity:1,notes:{label:{}}};const heatmap_point=HeatmapPoint;var HeatmapChart=function(ChartElement){function HeatmapChart(plotArea,options){ChartElement.call(this,options),this.plotArea=plotArea,this.chartService=plotArea.chartService,this._initFields(),this.render()}return ChartElement&&(HeatmapChart.__proto__=ChartElement),HeatmapChart.prototype=Object.create(ChartElement&&ChartElement.prototype),HeatmapChart.prototype.constructor=HeatmapChart,HeatmapChart.prototype._initFields=function _initFields(){this.points=[],this.seriesOptions=[],this.valueRange={min:MAX_VALUE,max:MIN_VALUE},this._evalSeries=[]},HeatmapChart.prototype.render=function render(){this.setRange(),this.traverseDataPoints(this.addValue.bind(this))},HeatmapChart.prototype.setRange=function setRange(){for(var series=this.options.series,seriesIx=0;seriesIx<series.length;seriesIx++)for(var currentSeries=series[seriesIx],pointIx=0;pointIx<currentSeries.data.length;pointIx++){var valueFields=this.plotArea.bindPoint(currentSeries,pointIx).valueFields;drawing_utils_defined(valueFields.value)&&null!==valueFields.value&&(this.valueRange.min=Math.min(this.valueRange.min,valueFields.value),this.valueRange.max=Math.max(this.valueRange.max,valueFields.value))}},HeatmapChart.prototype.addValue=function addValue(value,fields){var point;value&&drawing_utils_defined(value.value)&&null!==value.value&&(point=this.createPoint(value,fields))&&Object.assign(point,fields),this.points.push(point)},HeatmapChart.prototype.evalPointOptions=function evalPointOptions(options,value,fields){var series=fields.series,seriesIx=fields.seriesIx,state={defaults:series._defaults,excluded:["data","tooltip","content","template","visual","toggle","drilldownSeriesFactory"]},doEval=this._evalSeries[seriesIx];drawing_utils_defined(doEval)||(this._evalSeries[seriesIx]=doEval=evalOptions(options,{},state,!0));var pointOptions=options;return doEval&&evalOptions(pointOptions=deepExtend({},options),{value,series,dataItem:fields.dataItem,min:this.valueRange.min,max:this.valueRange.max},state),pointOptions},HeatmapChart.prototype.pointType=function pointType(){return heatmap_point},HeatmapChart.prototype.pointOptions=function pointOptions(series,seriesIx){var options=this.seriesOptions[seriesIx];if(!options){var defaults=this.pointType().prototype.defaults;this.seriesOptions[seriesIx]=options=deepExtend({},defaults,{markers:{opacity:series.opacity},tooltip:{format:this.options.tooltip.format},labels:{format:this.options.labels.format}},series)}return options},HeatmapChart.prototype.createPoint=function createPoint(value,fields){var series=fields.series,pointOptions=this.pointOptions(series,fields.seriesIx),color=fields.color||series.color;if(pointOptions=this.evalPointOptions(pointOptions,value,fields),isFunction(series.color))color=pointOptions.color;else if(0!==this.valueRange.max){color=color_scale(color)(value.value/this.valueRange.max)}var point=new heatmap_point(value,pointOptions);return point.color=color,this.append(point),point},HeatmapChart.prototype.seriesAxes=function seriesAxes(series){var xAxisName=series.xAxis,yAxisName=series.yAxis,plotArea=this.plotArea,xAxis=xAxisName?plotArea.namedXAxes[xAxisName]:plotArea.axisX,yAxis=yAxisName?plotArea.namedYAxes[yAxisName]:plotArea.axisY;if(!xAxis)throw new Error("Unable to locate X axis with name "+xAxisName);if(!yAxis)throw new Error("Unable to locate Y axis with name "+yAxisName);return{xAxis,yAxis}},HeatmapChart.prototype.reflow=function reflow(targetBox){var this$1=this,chartPoints=this.points,limit=!this.options.clip,pointIx=0;this.traverseDataPoints((function(value,fields){var point=chartPoints[pointIx++],ref=this$1.seriesAxes(fields.series),xAxis=ref.xAxis,yAxis=ref.yAxis,indexX=xAxis.categoryIndex(value.x),indexY=yAxis.categoryIndex(value.y),slotX=xAxis.getSlot(indexX,indexX,limit),slotY=yAxis.getSlot(indexY,indexY,limit);if(point)if(slotX&&slotY){var pointSlot=this$1.pointSlot(slotX,slotY);point.reflow(pointSlot)}else point.visible=!1})),this.box=targetBox},HeatmapChart.prototype.pointSlot=function pointSlot(slotX,slotY){return new core_box(slotX.x1,slotY.y1,slotX.x2,slotY.y2)},HeatmapChart.prototype.traverseDataPoints=function traverseDataPoints(callback){for(var series=this.options.series,seriesIx=0;seriesIx<series.length;seriesIx++)for(var currentSeries=series[seriesIx],ref$1=this.seriesAxes(currentSeries),xAxis=ref$1.xAxis,yAxis=ref$1.yAxis,xRange=xAxis.currentRangeIndices(),yRange=yAxis.currentRangeIndices(),pointIx=0;pointIx<currentSeries.data.length;pointIx++){var ref$2=this.plotArea.bindPoint(currentSeries,pointIx),value=ref$2.valueFields,fields=ref$2.fields,xIndex=xAxis.totalIndex(value.x),yIndex=yAxis.totalIndex(value.y),xIn=xRange.min<=xIndex&&xIndex<=xRange.max,yIn=yRange.min<=yIndex&&yIndex<=yRange.max;xIn&&yIn&&callback(value,deepExtend({pointIx,series:currentSeries,seriesIx,dataItem:currentSeries.data[pointIx],owner:this},fields))}},HeatmapChart.prototype.formatPointValue=function formatPointValue(point,format){var value=point.value;return this.chartService.format.auto(format,value.x,value.y,value.value)},HeatmapChart.prototype.animationPoints=function animationPoints(){for(var points=this.points,result=[],idx=0;idx<points.length;idx++)result.push((points[idx]||{}).marker);return result},HeatmapChart}(chart_element);setDefaultOptions(HeatmapChart,{series:[],tooltip:{format:"{0}, {1}: {2}"},labels:{format:"{2}"},clip:!0});const heatmap_chart=HeatmapChart;var HeatmapPlotArea=function(PlotAreaBase){function HeatmapPlotArea(){PlotAreaBase.apply(this,arguments)}return PlotAreaBase&&(HeatmapPlotArea.__proto__=PlotAreaBase),HeatmapPlotArea.prototype=Object.create(PlotAreaBase&&PlotAreaBase.prototype),HeatmapPlotArea.prototype.constructor=HeatmapPlotArea,HeatmapPlotArea.prototype.initFields=function initFields(){this.namedXAxes={},this.namedYAxes={}},HeatmapPlotArea.prototype.render=function render(panes){void 0===panes&&(panes=this.panes),this.bindCategories(),this.createAxes(panes),this.createCharts(panes),this.createAxisLabels()},HeatmapPlotArea.prototype.bindCategories=function bindCategories(){for(var series=this.srcSeries||this.series,i=0;i<series.length;i++){for(var currentSeries=series[i],data=currentSeries.data||[],ref=this.seriesAxes(currentSeries),xAxis=ref.xAxis,yAxis=ref.yAxis,xCategories=createHashSet(xAxis.categories||[]),yCategories=createHashSet(yAxis.categories||[]),pointIndex=0;pointIndex<data.length;pointIndex++){var ref$1=series_binder.current.bindPoint(currentSeries,pointIndex).valueFields,x=ref$1.x,y=ref$1.y;xCategories.has(x)||xCategories.add(x),yCategories.has(y)||yCategories.add(y)}xAxis.categories=xCategories.values(),yAxis.categories=yCategories.values()}},HeatmapPlotArea.prototype.createCharts=function createCharts(panes){for(var seriesByPane=this.groupSeriesByPane(),i=0;i<panes.length;i++){var pane=panes[i],paneSeries=seriesByPane[pane.options.name||"default"]||[];this.addToLegend(paneSeries);var filteredSeries=this.filterVisibleSeries(paneSeries);filteredSeries&&this.createHeatmapChart(filterSeriesByType(filteredSeries,["heatmap"]),pane)}},HeatmapPlotArea.prototype.createHeatmapChart=function createHeatmapChart(series,pane){var chart=new heatmap_chart(this,{series});this.appendChart(chart,pane)},HeatmapPlotArea.prototype.seriesPaneName=function seriesPaneName(series){var options=this.options,xAxisName=series.xAxis,xAxis=grep([].concat(options.xAxis),(function(a){return a.name===xAxisName}))[0],yAxisName=series.yAxis,yAxis=grep([].concat(options.yAxis),(function(a){return a.name===yAxisName}))[0],defaultPaneName=(options.panes||[{}])[0].name||"default";return(xAxis||{}).pane||(yAxis||{}).pane||defaultPaneName},HeatmapPlotArea.prototype.seriesAxes=function seriesAxes(series){var xAxis,yAxis,options=this.options,xAxisOptions=[].concat(options.xAxis),xAxisName=series.xAxis;xAxis=xAxisName?xAxisOptions.find((function(axis){return axis.name===xAxisName})):xAxisOptions[0];var yAxisOptions=[].concat(options.yAxis),yAxisName=series.yAxis;if(yAxis=yAxisName?yAxisOptions.find((function(axis){return axis.name===yAxisName})):yAxisOptions[0],!xAxis)throw new Error("Unable to locate X axis with name "+xAxisName);if(!yAxis)throw new Error("Unable to locate Y axis with name "+yAxisName);return{xAxis,yAxis}},HeatmapPlotArea.prototype.createAxisLabels=function createAxisLabels(){for(var axes=this.axes,i=0;i<axes.length;i++)axes[i].createLabels()},HeatmapPlotArea.prototype.createXYAxis=function createXYAxis(options,vertical,axisIndex){for(var inferredDate,axisName=options.name,namedAxes=vertical?this.namedYAxes:this.namedXAxes,axisOptions=Object.assign({axisCrossingValue:0},options,{vertical,reverse:vertical||this.chartService.rtl?!options.reverse:options.reverse,justified:!1}),firstCategory=axisOptions.categories?axisOptions.categories[0]:null,typeSamples=[axisOptions.min,axisOptions.max,firstCategory],series=this.series,seriesIx=0;seriesIx<series.length;seriesIx++){var currentSeries=series[seriesIx],seriesAxisName=currentSeries[vertical?"yAxis":"xAxis"];if(seriesAxisName===axisOptions.name||0===axisIndex&&!seriesAxisName){var firstPointValue=series_binder.current.bindPoint(currentSeries,0).valueFields;typeSamples.push(firstPointValue[vertical?"y":"x"]);break}}for(var i=0;i<typeSamples.length;i++)if(typeSamples[i]instanceof Date){inferredDate=!0;break}var axis=new(equalsIgnoreCase(axisOptions.type,DATE)||!axisOptions.type&&inferredDate?date_category_axis:category_axis)(axisOptions,this.chartService);if(axis.axisIndex=axisIndex,axisName){if(namedAxes[axisName])throw new Error((vertical?"Y":"X")+" axis with name "+axisName+" is already defined");namedAxes[axisName]=axis}return this.appendAxis(axis),axis.mapCategories(),axis},HeatmapPlotArea.prototype.createAxes=function createAxes(panes){for(var options=this.options,xAxesOptions=[].concat(options.xAxis),xAxes=[],yAxesOptions=[].concat(options.yAxis),yAxes=[],idx=0;idx<xAxesOptions.length;idx++){inArray(this.findPane(xAxesOptions[idx].pane),panes)&&xAxes.push(this.createXYAxis(xAxesOptions[idx],!1,idx))}for(var idx$1=0;idx$1<yAxesOptions.length;idx$1++){inArray(this.findPane(yAxesOptions[idx$1].pane),panes)&&yAxes.push(this.createXYAxis(yAxesOptions[idx$1],!0,idx$1))}this.axisX=this.axisX||xAxes[0],this.axisY=this.axisY||yAxes[0]},HeatmapPlotArea.prototype.removeAxis=function removeAxis(axis){var axisName=axis.options.name;PlotAreaBase.prototype.removeAxis.call(this,axis),axis.options.vertical?delete this.namedYAxes[axisName]:delete this.namedXAxes[axisName],axis===this.axisX&&delete this.axisX,axis===this.axisY&&delete this.axisY},HeatmapPlotArea.prototype._dispatchEvent=function _dispatchEvent(chart,e,eventType){for(var coords=chart._eventCoordinates(e),point=new core_point(coords.x,coords.y),allAxes=this.axes,length=allAxes.length,xValues=[],yValues=[],i=0;i<length;i++){var axis=allAxes[i];appendIfNotNull(axis.options.vertical?yValues:xValues,axis.getCategory(point))}xValues.length>0&&yValues.length>0&&chart.trigger(eventType,{element:eventElement(e),originalEvent:e,x:singleItemOrArray(xValues),y:singleItemOrArray(yValues)})},HeatmapPlotArea.prototype.updateAxisOptions=function updateAxisOptions$1(axis,options){var vertical=axis.options.vertical,axes=this.groupAxes(this.panes),index=(vertical?axes.y:axes.x).indexOf(axis);heatmap_plotarea_updateAxisOptions(this.options,index,vertical,options),heatmap_plotarea_updateAxisOptions(this.originalOptions,index,vertical,options)},HeatmapPlotArea.prototype.crosshairOptions=function crosshairOptions(axis){return Object.assign({},axis.options.crosshair,{zIndex:0})},HeatmapPlotArea}(plotarea_base);function heatmap_plotarea_updateAxisOptions(targetOptions,axisIndex,vertical,options){deepExtend([].concat(vertical?targetOptions.yAxis:targetOptions.xAxis)[axisIndex],options)}setDefaultOptions(HeatmapPlotArea,{xAxis:{},yAxis:{}}),deepExtend(HeatmapPlotArea.prototype,plotarea_events_mixin);const heatmap_plotarea=HeatmapPlotArea;var COLOR="color",FIRST="first",MAX="max";plotarea_factory.current.register(categorical_plotarea,[BAR,COLUMN,LINE,VERTICAL_LINE,AREA,VERTICAL_AREA,CANDLESTICK,OHLC,BULLET,VERTICAL_BULLET,BOX_PLOT,VERTICAL_BOX_PLOT,RANGE_COLUMN,RANGE_BAR,WATERFALL,HORIZONTAL_WATERFALL,RANGE_AREA,VERTICAL_RANGE_AREA].concat(TRENDLINE_SERIES)),plotarea_factory.current.register(xy_plotarea,[SCATTER,SCATTER_LINE,BUBBLE].concat(TRENDLINE_SERIES)),plotarea_factory.current.register(pie_plotarea,[PIE]),plotarea_factory.current.register(donut_plotarea,["donut"]),plotarea_factory.current.register(funnel_plotarea,["funnel","pyramid"]),plotarea_factory.current.register(polar_plotarea,[POLAR_AREA,POLAR_LINE,POLAR_SCATTER].concat(TRENDLINE_SERIES)),plotarea_factory.current.register(radar_plotarea,[RADAR_AREA,RADAR_COLUMN,RADAR_LINE].concat(TRENDLINE_SERIES)),plotarea_factory.current.register(heatmap_plotarea,["heatmap"]),series_binder.current.register([BAR,COLUMN,LINE,VERTICAL_LINE,AREA,VERTICAL_AREA],[VALUE],["category",COLOR,"noteText","errorLow","errorHigh","drilldown"]),series_binder.current.register([RANGE_COLUMN,RANGE_BAR,RANGE_AREA,VERTICAL_RANGE_AREA],["from","to"],["category",COLOR,"noteText","drilldown"]),series_binder.current.register([WATERFALL,HORIZONTAL_WATERFALL],[VALUE],["category",COLOR,"noteText","summary","drilldown"]),series_binder.current.register([POLAR_AREA,POLAR_LINE,POLAR_SCATTER],[X,Y],[COLOR,"drilldown"]),series_binder.current.register([RADAR_AREA,RADAR_COLUMN,RADAR_LINE],[VALUE],[COLOR,"drilldown"]),series_binder.current.register(["funnel","pyramid"],[VALUE],["category",COLOR,"visibleInLegend","visible","drilldown"]),default_aggregates.current.register([BAR,COLUMN,LINE,VERTICAL_LINE,AREA,VERTICAL_AREA,WATERFALL,HORIZONTAL_WATERFALL],{value:MAX,color:FIRST,noteText:FIRST,errorLow:"min",errorHigh:MAX}),default_aggregates.current.register([RANGE_COLUMN,RANGE_BAR,RANGE_AREA,VERTICAL_RANGE_AREA],{from:"min",to:MAX,color:FIRST,noteText:FIRST}),default_aggregates.current.register([RADAR_AREA,RADAR_COLUMN,RADAR_LINE],{value:MAX,color:FIRST}),series_binder.current.register([SCATTER,SCATTER_LINE,BUBBLE],[X,Y],[COLOR,"noteText","xErrorLow","xErrorHigh","yErrorLow","yErrorHigh"]),series_binder.current.register([BUBBLE],[X,Y,"size"],[COLOR,"category","noteText"]),series_binder.current.register(["heatmap"],[X,Y,VALUE],[COLOR,"noteText"]),series_binder.current.register([CANDLESTICK,OHLC],["open","high","low","close"],["category",COLOR,"downColor","noteText"]),default_aggregates.current.register([CANDLESTICK,OHLC],{open:MAX,high:MAX,low:"min",close:MAX,color:FIRST,downColor:FIRST,noteText:FIRST}),series_binder.current.register([BOX_PLOT,VERTICAL_BOX_PLOT],["lower","q1","median","q3","upper","mean","outliers"],["category",COLOR,"noteText","drilldown"]),default_aggregates.current.register([BOX_PLOT,VERTICAL_BOX_PLOT],{lower:MAX,q1:MAX,median:MAX,q3:MAX,upper:MAX,mean:MAX,outliers:FIRST,color:FIRST,noteText:FIRST}),series_binder.current.register([BULLET,VERTICAL_BULLET],["current","target"],["category",COLOR,"visibleInLegend","noteText","drilldown"]),default_aggregates.current.register([BULLET,VERTICAL_BULLET],{current:MAX,target:MAX,color:FIRST,noteText:FIRST}),series_binder.current.register([PIE,"donut"],[VALUE],["category",COLOR,"explode","visibleInLegend","visible","drilldown"]);var AXIS_NAMES=["category",VALUE,X,Y],Chart=function(Class){function Chart(element,userOptions,themeOptions,context){var this$1=this;void 0===context&&(context={}),Class.call(this),this.observers=[],this.addObserver(context.observer),this.chartService=new chart_service(this,context),this.chartService.theme=themeOptions,this._initElement(element);var options=deepExtend({},this.options,userOptions);this._originalOptions=deepExtend({},options),this._theme=themeOptions,this._initTheme(options,themeOptions),this._initHandlers(),this._initSurface(),this.bindCategories(),font_loader.preloadFonts(userOptions,(function(){this$1.fontLoaded=!0,this$1._destroyed||(this$1.trigger("init"),this$1._redraw(),this$1._attachEvents())}))}return Class&&(Chart.__proto__=Class),Chart.prototype=Object.create(Class&&Class.prototype),Chart.prototype.constructor=Chart,Chart.prototype._initElement=function _initElement(element){for(this._setElementClass(element),element.style.position="relative";element.firstChild;)element.removeChild(element.firstChild);this.element=element},Chart.prototype._setElementClass=function _setElementClass(element){addClass(element,"k-chart")},Chart.prototype._initTheme=function _initTheme(options,themeOptions){for(var seriesCopies=[],series=options.series||[],i=0;i<series.length;i++)seriesCopies.push(Object.assign({},series[i]));options.series=seriesCopies,function resolveAxisAliases(options){for(var aliases=AXIS_NAMES,idx=0;idx<aliases.length;idx++){var alias=aliases[idx]+"Axes";options[alias]&&(options[aliases[idx]+"Axis"]=options[alias],delete options[alias])}}(options),this.applyDefaults(options,themeOptions),null===options.seriesColors&&delete options.seriesColors,isString(options.title)&&(options.title={text:options.title}),this.options=deepExtend({},themeOptions,options),this.applySeriesColors()},Chart.prototype.getSize=function getSize(){var chartArea=this.options.chartArea||{};return{width:chartArea.width?parseInt(chartArea.width,10):Math.floor(this.element.offsetWidth),height:chartArea.height?parseInt(chartArea.height,10):Math.floor(this.element.offsetHeight)}},Chart.prototype.resize=function resize(force){var size=this.getSize(),currentSize=this._size,hasSize=size.width>0||size.height>0;force||hasSize&&(!currentSize||size.width!==currentSize.width||size.height!==currentSize.height)?(this._size=size,this._resize(size,force),this.trigger("resize",size)):hasSize&&this._selections&&find(this._selections,(function(s){return!s.visible}))&&(this._destroySelections(),this._setupSelection())},Chart.prototype._resize=function _resize(){this._noTransitionsRedraw()},Chart.prototype.redraw=function redraw(paneName){if(this.applyDefaults(this.options),this.applySeriesColors(),paneName){var plotArea=this._model._plotArea,pane=plotArea.findPane(paneName);plotArea.redraw(pane)}else this._redraw()},Chart.prototype.getAxis=function getAxis(name){return findAxisByName(name,this._plotArea.axes)},Chart.prototype.findAxisByName=function findAxisByName(name){return this.getAxis(name)},Chart.prototype.findPaneByName=function findPaneByName(name){for(var panes=this._plotArea.panes,idx=0;idx<panes.length;idx++)if(panes[idx].options.name===name)return new chart_pane(panes[idx])},Chart.prototype.findPaneByIndex=function findPaneByIndex(idx){var panes=this._plotArea.panes;if(panes[idx])return new chart_pane(panes[idx])},Chart.prototype.plotArea=function plotArea(){return new chart_plotarea(this._plotArea)},Chart.prototype.toggleHighlight=function toggleHighlight(show,filter){var points,seriesName,categoryName,plotArea=this._plotArea,firstSeries=(plotArea.srcSeries||plotArea.series||[])[0];isFunction(filter)?points=plotArea.filterPoints(filter):(isObject(filter)?(seriesName=filter.series,categoryName=filter.category):seriesName=categoryName=filter,points="donut"===firstSeries.type?pointByCategoryName(plotArea.pointsBySeriesName(seriesName),categoryName):inArray(firstSeries.type,[PIE,"funnel","pyramid"])?pointByCategoryName((plotArea.charts[0]||{}).points,categoryName):plotArea.pointsBySeriesName(seriesName));points&&this.togglePointsHighlight(show,points)},Chart.prototype.togglePointsHighlight=function togglePointsHighlight(show,points){for(var highlight=this._highlight,idx=0;idx<points.length;idx++)highlight.togglePointHighlight(points[idx],show)},Chart.prototype.showTooltip=function showTooltip(filter){var point,categoryIndex,shared=this._sharedTooltip(),tooltip=this._tooltip,plotArea=this._plotArea;if(isFunction(filter)?(point=plotArea.findPoint(filter))&&shared&&(categoryIndex=point.categoryIx):shared&&drawing_utils_defined(filter)&&(categoryIndex=plotArea.categoryAxis.categoryIndex(filter)),shared){if(categoryIndex>=0){var points=this._plotArea.pointsByCategoryIndex(categoryIndex);tooltip.showAt(points)}}else point&&tooltip.show(point)},Chart.prototype.hideTooltip=function hideTooltip(){this._tooltip.hide()},Chart.prototype._initSurface=function _initSurface(){var surface=this.surface,wrap=this._surfaceWrap(),chartArea=this.options.chartArea||{};chartArea.width&&elementSize(wrap,{width:chartArea.width}),chartArea.height&&elementSize(wrap,{height:chartArea.height}),surface&&surface.options.type===this.options.renderAs?(this.surface.clear(),this.surface.resize()):(this._destroySurface(),this.surface=es_surface.A.create(wrap,{type:this.options.renderAs}),this.surface.bind("mouseenter",this._surfaceMouseenterHandler),this.surface.bind("mouseleave",this._surfaceMouseleaveHandler))},Chart.prototype._surfaceWrap=function _surfaceWrap(){return this.element},Chart.prototype._redraw=function _redraw(){var model=this._getModel();this._size={width:model.options.width,height:model.options.height},this._destroyView(),this._model=model,this._plotArea=model._plotArea,model.renderVisual(),!1!==this.options.transitions&&model.traverse((function(element){element.animation&&element.animation.setup()})),this._initSurface(),this.surface.draw(model.visual),!1!==this.options.transitions&&model.traverse((function(element){element.animation&&element.animation.play()})),this._tooltip=this._createTooltip(),this._highlight=new highlight,this._setupSelection(),this._createPannable(),this._createZoomSelection(),this._createMousewheelZoom(),this.trigger("render"),triggerPaneRender(this._plotArea.panes),this._navState||this._cancelDomEvents()},Chart.prototype.exportVisual=function exportVisual(exportOptions){var visual;if(exportOptions&&(exportOptions.width||exportOptions.height||exportOptions.options)){var currentOptions=this.options,options=deepExtend({},exportOptions.options,{chartArea:{width:exportOptions.width,height:exportOptions.height}});clearMissingValues(this._originalOptions,options),this.options=deepExtend({},this._originalOptions,options),this._initTheme(this.options,this._theme),this.bindCategories();var model=this._getModel();model.renderVisual(),triggerPaneRender(model._plotArea.panes),visual=model.visual,this.options=currentOptions}else visual=this.surface.exportVisual();return visual},Chart.prototype._sharedTooltip=function _sharedTooltip(){return this._plotArea instanceof categorical_plotarea&&this.options.tooltip&&this.options.tooltip.shared},Chart.prototype._createPannable=function _createPannable(){var options=this.options;!1!==options.pannable&&(this._pannable=new pannable(this._plotArea,options.pannable))},Chart.prototype._createZoomSelection=function _createZoomSelection(){var zoomable=this.options.zoomable,selection=(zoomable||{}).selection;!1!==zoomable&&!1!==selection&&(this._zoomSelection=new zoom_selection(this,selection))},Chart.prototype._createMousewheelZoom=function _createMousewheelZoom(){var zoomable=this.options.zoomable,mousewheel=(zoomable||{}).mousewheel;!1!==zoomable&&!1!==mousewheel&&(this._mousewheelZoom=new mousewheel_zoom(this,mousewheel))},Chart.prototype._toggleDragZoomEvents=function _toggleDragZoomEvents(){var pannable=this.options.pannable,zoomable=this.options.zoomable,selection=(zoomable||{}).selection,mousewheel=(zoomable||{}).mousewheel,allowDrag=!(pannable||!1!==zoomable&&!1!==selection||this.requiresHandlers(["dragStart","drag","dragEnd"])),allowZoom=(!1===zoomable||!1===mousewheel)&&!this.requiresHandlers(["zoomStart","zoom","zoomEnd"]),element=this.element;this._dragZoomEnabled&&allowDrag&&allowZoom?(element.style.touchAction=this._touchAction||"",this._dragZoomEnabled=!1):this._dragZoomEnabled||allowDrag&&allowZoom||(element.style.touchAction="none",this._dragZoomEnabled=!0),this._toggleDomEvents(!allowDrag,!allowZoom)},Chart.prototype._toggleDomEvents=function _toggleDomEvents(drag,zoom){var domEvents=this.domEvents;domEvents&&(domEvents.toggleDrag&&domEvents.toggleDrag(drag),domEvents.toggleZoom&&domEvents.toggleZoom(zoom))},Chart.prototype._createTooltip=function _createTooltip(){var tooltipOptions=this.options.tooltip;return this._sharedTooltip()?this._createSharedTooltip(tooltipOptions):new tooltip_tooltip(this.chartService,tooltipOptions)},Chart.prototype._createSharedTooltip=function _createSharedTooltip(options){return new shared_tooltip(this._plotArea,options)},Chart.prototype.applyDefaults=function applyDefaults(options,themeOptions){!function applyAxisDefaults(options,themeOptions){var axisName,axisDefaults,axes,themeAxisDefaults=(themeOptions||{}).axisDefaults||{};function mapAxisOptions(axisOptions){var axisColor=(axisOptions||{}).color||axisDefaults.color,result=deepExtend({},themeAxisDefaults,themeAxisDefaults[axisName],axisDefaults,axisDefaults[axisName],{line:{color:axisColor},labels:{color:axisColor},title:{color:axisColor}},axisOptions);return delete result[axisName],result}for(var idx=0;idx<AXIS_NAMES.length;idx++)axisName=AXIS_NAMES[idx]+"Axis",axisDefaults=options.axisDefaults||{},axes=(axes=[].concat(options[axisName])).map(mapAxisOptions),options[axisName]=axes.length>1?axes:axes[0]}(options,themeOptions),function applySeriesDefaults(options,themeOptions){var series=options.series,seriesLength=series.length,seriesDefaults=options.seriesDefaults,commonDefaults=deepExtend({},options.seriesDefaults),themeSeriesDefaults=themeOptions?deepExtend({},themeOptions.seriesDefaults):{},commonThemeDefaults=deepExtend({},themeSeriesDefaults);cleanupNestedSeriesDefaults(commonDefaults),cleanupNestedSeriesDefaults(commonThemeDefaults);for(var i=0;i<seriesLength;i++){var seriesType=series[i].type||options.seriesDefaults.type,baseOptions=deepExtend({data:[]},commonThemeDefaults,themeSeriesDefaults[seriesType],{tooltip:options.tooltip},commonDefaults,seriesDefaults[seriesType]);series[i]._defaults=baseOptions,series[i]=deepExtend({},baseOptions,series[i]),series[i].data=series[i].data||[]}}(options,themeOptions)},Chart.prototype.applySeriesColors=function applySeriesColors(){for(var options=this.options,series=options.series,colors=options.seriesColors||[],i=0;i<series.length;i++){var currentSeries=series[i],seriesColor=colors[i%colors.length],defaults=currentSeries._defaults;currentSeries.color=currentSeries.color||seriesColor,defaults&&(defaults.color=defaults.color||seriesColor)}},Chart.prototype._getModel=function _getModel(){var options=this.options,plotArea=this._createPlotArea(),model=new root_element(this._modelOptions());model.chart=this,model._plotArea=plotArea;var title=core_title.buildTitle(options.title),subtitle=core_title.buildTitle(options.subtitle,{align:options.title.align,position:options.title.position});return model.append.apply(model,core_title.orderTitles([title,subtitle])),options.legend&&options.legend.visible&&model.append(new legend(plotArea.options.legend,this.chartService)),model.append(plotArea),model.reflow(),model},Chart.prototype._modelOptions=function _modelOptions(){var options=this.options,size=this.getSize();return deepExtend({transitions:options.transitions,width:size.width||600,height:size.height||400},options.chartArea)},Chart.prototype._createPlotArea=function _createPlotArea(skipSeries){var options=this.options;return plotarea_factory.current.create(skipSeries?[]:options.series,options,this.chartService)},Chart.prototype._setupSelection=function _setupSelection(){for(var axes=this._plotArea.axes,selections=this._selections=[],i=0;i<axes.length;i++){var axis=axes[i],options=axis.options;if(axis instanceof category_axis&&options.select&&!options.vertical){var range=axis.range(),selection=new chart_selection(this,axis,deepExtend({min:range.min,max:range.max},options.select));selections.push(selection)}}},Chart.prototype._selectStart=function _selectStart(e){return this.trigger("selectStart",e)},Chart.prototype._select=function _select(e){return this.trigger("select",e)},Chart.prototype._selectEnd=function _selectEnd(e){return this.trigger("selectEnd",e)},Chart.prototype._initHandlers=function _initHandlers(){this._clickHandler=this._click.bind(this),this._mousewheelHandler=this._mousewheel.bind(this),this._mouseleaveHandler=this._mouseleave.bind(this),this._surfaceMouseenterHandler=this._mouseover.bind(this),this._surfaceMouseleaveHandler=this._mouseout.bind(this),this._mousemove=(0,throttle.A)(this._mousemove.bind(this),20)},Chart.prototype.addObserver=function addObserver(observer){observer&&this.observers.push(observer)},Chart.prototype.removeObserver=function removeObserver(observer){var index=this.observers.indexOf(observer);index>=0&&this.observers.splice(index,1)},Chart.prototype.requiresHandlers=function requiresHandlers(eventNames){for(var observers=this.observers,idx=0;idx<observers.length;idx++)if(observers[idx].requiresHandlers(eventNames))return!0},Chart.prototype.trigger=function trigger(name,args){void 0===args&&(args={}),args.sender=this,"showTooltip"===name?args.anchor.point=this._toDocumentCoordinates(args.anchor.point):"seriesOver"===name?this._updateDrilldownPoint(args.point):"seriesLeave"===name?this._resetDrilldownPoint():"seriesClick"===name&&this._startDrilldown(args.point);for(var observers=this.observers,isDefaultPrevented=!1,idx=0;idx<observers.length;idx++)observers[idx].trigger(name,args)&&(isDefaultPrevented=!0);return isDefaultPrevented},Chart.prototype._attachEvents=function _attachEvents(){var obj,obj$1,element=this.element;this._touchAction=element.style.touchAction,bindEvents(element,((obj={}).contextmenu=this._clickHandler,obj.wheel=this._mousewheelHandler,obj.mouseleave=this._mouseleaveHandler,obj)),this._shouldAttachMouseMove()&&bindEvents(element,((obj$1={}).mousemove=this._mousemove,obj$1)),this.domEvents=dom_events_builder.create(this.element,{start:this._start.bind(this),move:this._move.bind(this),end:this._end.bind(this),tap:this._tap.bind(this),gesturestart:this._gesturestart.bind(this),gesturechange:this._gesturechange.bind(this),gestureend:this._gestureend.bind(this)}),this._toggleDragZoomEvents()},Chart.prototype._mouseleave=function _mouseleave(e){this._hoveredPoint&&(this._hoveredPoint.out(this,e),this._hoveredPoint=null),this._plotAreaHovered&&(this._plotAreaHovered=!1,this.trigger("plotAreaLeave")),this._hasInactiveOpacity()&&this._activeChartInstance&&(this._applySeriesOpacity(this._activeChartInstance.children,null,!0),this._updateSeriesOpacity(null,!0))},Chart.prototype._cancelDomEvents=function _cancelDomEvents(){this.domEvents&&this.domEvents.cancel&&this.domEvents.cancel()},Chart.prototype._gesturestart=function _gesturestart(e){this._mousewheelZoom&&!this._stopChartHandlers(e)&&(this._gestureDistance=e.distance,this._unsetActivePoint(),this.surface.suspendTracking())},Chart.prototype._gestureend=function _gestureend(e){this._zooming&&!this._stopChartHandlers(e)&&(this.surface&&this.surface.resumeTracking(),this._zooming=!1,this.trigger("zoomEnd",{}))},Chart.prototype._gesturechange=function _gesturechange(e){var mousewheelZoom=this._mousewheelZoom;if(mousewheelZoom&&!this._stopChartHandlers(e)){e.preventDefault();var previousGestureDistance=this._gestureDistance,scaleDelta=-e.distance/previousGestureDistance+1;if(Math.abs(scaleDelta)>=.1){scaleDelta=Math.round(10*scaleDelta),this._gestureDistance=e.distance;var args={delta:scaleDelta,axisRanges:axisRanges(this._plotArea.axes),originalEvent:e};if(this._zooming||!this.trigger("zoomStart",args)){var coords=this._eventCoordinates(e);this._zooming||(this._zooming=!0),(args.axisRanges=mousewheelZoom.updateRanges(scaleDelta,coords))&&!this.trigger("zoom",args)&&mousewheelZoom.zoom()}}}},Chart.prototype._mouseout=function _mouseout(e){if(e.element){var element=this._drawingChartElement(e.element,e);element&&element.leave&&element.leave(this,e.originalEvent)}},Chart.prototype._start=function _start(e){var coords=this._eventCoordinates(e);!this._stopChartHandlers(e)&&this._plotArea.backgroundContainsPoint(coords)&&(this.requiresHandlers(["dragStart","drag","dragEnd"])&&this._startNavigation(e,coords,"dragStart"),this._pannable&&this._pannable.start(e)&&(this.surface.suspendTracking(),this._unsetActivePoint(),this._suppressHover=!0,this.chartService.panning=!0),this._zoomSelection&&this._zoomSelection.start(e)&&this.trigger("zoomStart",{axisRanges:axisRanges(this._plotArea.axes),originalEvent:e}))},Chart.prototype._move=function _move(e){var state=this._navState,pannable=this._pannable;if(!this._stopChartHandlers(e)){if(pannable){var ranges=pannable.move(e);ranges&&!this.trigger("drag",{axisRanges:ranges,originalEvent:e})&&pannable.pan()}else if(state){for(var ranges$1={},axes=state.axes,i=0;i<axes.length;i++){var currentAxis=axes[i];if(currentAxis.options.name){var axis=currentAxis.options.vertical?e.y:e.x,delta=axis.startLocation-axis.location;0!==delta&&(ranges$1[currentAxis.options.name]=currentAxis.translateRange(delta))}}state.axisRanges=ranges$1,this.trigger("drag",{axisRanges:ranges$1,originalEvent:e})}this._zoomSelection&&this._zoomSelection.move(e)}},Chart.prototype._end=function _end(e){if(!this._stopChartHandlers(e)){var pannable=this._pannable;if(pannable&&pannable.end(e)?(this.surface.resumeTracking(),this.trigger("dragEnd",{axisRanges:axisRanges(this._plotArea.axes),originalEvent:e}),this._suppressHover=!1,this.chartService.panning=!1):this._endNavigation(e,"dragEnd"),this._zoomSelection){var ranges=this._zoomSelection.end(e);ranges&&!this.trigger("zoom",{axisRanges:ranges,originalEvent:e})&&(this._zoomSelection.zoom(),this.trigger("zoomEnd",{axisRanges:ranges,originalEvent:e}))}}},Chart.prototype._stopChartHandlers=function _stopChartHandlers(e){var selections=this._selections||[];if(!selections.length)return!1;var coords=this._eventCoordinates(e),pane=this._plotArea.paneByPoint(coords);if(pane)for(var idx=0;idx<selections.length;idx++)if(selections[idx].onPane(pane))return!0},Chart.prototype._mousewheelZoomRate=function _mousewheelZoomRate(){var mousewheel=(this.options.zoomable||{}).mousewheel||{};return valueOrDefault(mousewheel.rate,.3)},Chart.prototype._mousewheel=function _mousewheel(e){var this$1=this,delta=mousewheelDelta(e),mousewheelZoom=this._mousewheelZoom,coords=this._eventCoordinates(e);if(!this._stopChartHandlers(e)&&this._plotArea.backgroundContainsPoint(coords))if(mousewheelZoom){var args={delta,axisRanges:axisRanges(this._plotArea.axes),originalEvent:e};!this._zooming&&this.trigger("zoomStart",args)||(e.preventDefault(),this._zooming||(this._unsetActivePoint(),this.surface.suspendTracking(),this._zooming=!0),this._mwTimeout&&clearTimeout(this._mwTimeout),args.axisRanges=mousewheelZoom.updateRanges(delta,coords),args.axisRanges&&!this.trigger("zoom",args)&&mousewheelZoom.zoom(),this._mwTimeout=setTimeout((function(){this$1.trigger("zoomEnd",args),this$1._zooming=!1,this$1.surface&&this$1.surface.resumeTracking()}),150))}else{var state=this._navState;if(!state)this._startNavigation(e,coords,"zoomStart")||(state=this._navState);if(state){var totalDelta=state.totalDelta||delta;state.totalDelta=totalDelta+delta;for(var axes=this._navState.axes,ranges={},i=0;i<axes.length;i++){var currentAxis=axes[i],axisName=currentAxis.options.name;axisName&&(ranges[axisName]=currentAxis.scaleRange(-totalDelta*this$1._mousewheelZoomRate(),coords))}this.trigger("zoom",{delta,axisRanges:ranges,originalEvent:e}),this._mwTimeout&&clearTimeout(this._mwTimeout),this._mwTimeout=setTimeout((function(){this$1._endNavigation(e,"zoomEnd")}),150)}}},Chart.prototype._startNavigation=function _startNavigation(e,coords,chartEvent){var plotArea=this._model._plotArea,pane=plotArea.findPointPane(coords),axes=plotArea.axes.slice(0);if(pane){var ranges=axisRanges(axes);this.trigger(chartEvent,{axisRanges:ranges,originalEvent:e})?this._cancelDomEvents():(this._suppressHover=!0,this._unsetActivePoint(),this._navState={axisRanges:ranges,pane,axes})}},Chart.prototype._endNavigation=function _endNavigation(e,chartEvent){this._navState&&(this.trigger(chartEvent,{axisRanges:this._navState.axisRanges,originalEvent:e}),this._suppressHover=!1,this._navState=null)},Chart.prototype._getChartElement=function _getChartElement(e,match){var element=this.surface.eventTarget(e);if(element)return this._drawingChartElement(element,e,match)},Chart.prototype._drawingChartElement=function _drawingChartElement(element,e,match){for(var chartElement,current=element;current&&!chartElement;)chartElement=current.chartElement,current=current.parent;if(chartElement)return chartElement.aliasFor&&(chartElement=chartElement.aliasFor(e,this._eventCoordinates(e))),match&&(chartElement=chartElement.closest(match))&&chartElement.aliasFor&&(chartElement=chartElement.aliasFor()),chartElement},Chart.prototype._eventCoordinates=function _eventCoordinates(e){var coordinates=eventCoordinates(e);return this._toModelCoordinates(coordinates.x,coordinates.y)},Chart.prototype._elementPadding=function _elementPadding(){if(!this._padding){var ref=elementStyles(this.element,["paddingLeft","paddingTop"]),paddingLeft=ref.paddingLeft,paddingTop=ref.paddingTop;this._padding={top:paddingTop,left:paddingLeft}}return this._padding},Chart.prototype._toDocumentCoordinates=function _toDocumentCoordinates(point){var padding=this._elementPadding(),offset=elementOffset(this.element);return{left:drawing_utils_round(point.x+padding.left+offset.left),top:drawing_utils_round(point.y+padding.top+offset.top)}},Chart.prototype._toModelCoordinates=function _toModelCoordinates(clientX,clientY){var element=this.element,offset=elementOffset(element),padding=this._elementPadding(),inverseTransform=function elementScale(element){if(!element)return Matrix.unit();for(var matrix=transformMatrix(element),parent=element.parentElement;parent;){var parentMatrix=transformMatrix(parent);matrix=matrix.multiplyCopy(parentMatrix),parent=parent.parentElement}return matrix.b=matrix.c=matrix.e=matrix.f=0,matrix}(element).invert(),point=new geometry_point.A(clientX-offset.left-padding.left,clientY-offset.top-padding.top).transform(inverseTransform);return new core_point(point.x,point.y)},Chart.prototype._tap=function _tap(e){var this$1=this,drawingElement=this.surface.eventTarget(e),element=this._drawingChartElement(drawingElement,e),sharedTooltip=this._sharedTooltip();this._startHover(drawingElement,e)||sharedTooltip||this._unsetActivePoint(),sharedTooltip&&this._trackSharedTooltip(this._eventCoordinates(e),e,!0),this._propagateClick(element,e),this.handlingTap=!0,setTimeout((function(){this$1.handlingTap=!1}),0)},Chart.prototype._click=function _click(e){var element=this._getChartElement(e);this._propagateClick(element,e)},Chart.prototype._propagateClick=function _propagateClick(element,e){for(var current=element;current;)current.click&&current.click(this,e),current=current.parent},Chart.prototype._startHover=function _startHover(element,e){if(this._suppressHover)return!1;var point=this._drawingChartElement(element,e,(function(element){return(element.hover||element.over)&&!(element instanceof plotarea_base)}));return this._showInactiveOpacity(point,e),point},Chart.prototype._displayTooltip=function _displayTooltip(point){deepExtend({},this.options.tooltip,point.options.tooltip).visible&&this._tooltip.show(point)},Chart.prototype._displayInactiveOpacity=function _displayInactiveOpacity(activePoint,multipleSeries,highlightPoints){var chartInstance=this._activeChartInstance=this._chartInstanceFromPoint(activePoint);if(chartInstance)if(multipleSeries)this._updateSeriesOpacity(activePoint),this._applySeriesOpacity(chartInstance.children,null,!0),this._applySeriesOpacity(chartInstance.children,activePoint.series),this._highlight.show(highlightPoints||activePoint);else{var inactivePoints;if(!chartInstance.supportsPointInactiveOpacity())return void this._highlight.show(activePoint);(inactivePoints=this._getInactivePoints(activePoint,chartInstance))&&inactivePoints.length&&this._highlight.show(inactivePoints,1-this._getInactiveOpacityForSeries(activePoint.series))}},Chart.prototype._getInactivePoints=function _getInactivePoints(activePoint,chartInstance){return this._getAllPointsOfType(chartInstance,activePoint.constructor).filter((function(point){return point!==activePoint}))},Chart.prototype._getAllPointsOfType=function _getAllPointsOfType(container,type){for(var points=[],i=0;i<container.children.length;i++){var element=container.children[i];element.constructor===type?points.push(element):element.children&&element.children.length&&(points=points.concat(this._getAllPointsOfType(element,type)))}return points},Chart.prototype._updateHoveredPoint=function _updateHoveredPoint(point,e){var hoveredPoint=this._hoveredPoint;hoveredPoint&&hoveredPoint!==point&&(hoveredPoint.out(this,e),this._hoveredPoint=null),point&&hoveredPoint!==point&&point.over&&(this._hoveredPoint=point,point.over(this,e))},Chart.prototype._updateDrilldownPoint=function _updateDrilldownPoint(point){point&&point.series&&(series_binder.current.bindPoint(point.series,null,point.dataItem).fields.drilldown&&(this._drilldownState={cursor:this.element.style.cursor},this.element.style.cursor="pointer"))},Chart.prototype._resetDrilldownPoint=function _resetDrilldownPoint(){this._drilldownState&&(this.element.style.cursor=this._drilldownState.cursor,this._drilldownState=null)},Chart.prototype._startDrilldown=function _startDrilldown(point){if(point&&point.series){var series=point.series,value=series_binder.current.bindPoint(series,null,point.dataItem).fields.drilldown;if(value){var args={series,point,value,sender:this};this.trigger("drilldown",args)}}},Chart.prototype._updateSeriesOpacity=function _updateSeriesOpacity(point,resetOpacity){for(var plotArea=this._plotArea,length=plotArea.series.length,i=0;i<length;i++){var currSeries=plotArea.series[i],defaultOpacity=this._getDefaultOpacityForSeries(currSeries),inactiveOpacity=this._getInactiveOpacityForSeries(currSeries);resetOpacity||currSeries===point.series?(currSeries.opacity=defaultOpacity,currSeries.line&&(currSeries.line.opacity=defaultOpacity)):(currSeries.defaultOpacity=defaultOpacity,currSeries.opacity=inactiveOpacity,currSeries.line&&(currSeries.line.opacity=inactiveOpacity))}},Chart.prototype._applySeriesOpacity=function _applySeriesOpacity(elements,activeSeries,reset,series){for(var i=0;i<elements.length;i++){var element=elements[i],currSeries=element.series||series;if(currSeries&&(currSeries.highlight||{}).visible&&element.visual){var opacity=series?series.opacity:element.series.opacity;(currSeries!==activeSeries||reset)&&element.visual.opacity(reset?1:opacity)}element.children&&element.children.length&&this._applySeriesOpacity(element.children,activeSeries,reset,element.series)}},Chart.prototype._chartInstanceFromPoint=function _chartInstanceFromPoint(point){for(var chartInstance=point.parent;chartInstance&&!chartInstance.plotArea;)chartInstance=chartInstance.parent;return chartInstance},Chart.prototype._showInactiveOpacity=function _showInactiveOpacity(point,e){var activePoint=this._activePoint,multipleSeries=this._plotArea.series.length>1,hasInactiveOpacity=this._hasInactiveOpacity();return this._updateHoveredPoint(point,e),point&&activePoint!==point&&point.hover&&(this._activePoint=point,this._sharedTooltip()||point.hover(this,e)||(this._displayTooltip(point),hasInactiveOpacity?this._displayInactiveOpacity(point,multipleSeries):this._highlight.show(point))),point},Chart.prototype._hideInactiveOpacity=function _hideInactiveOpacity(point){var multipleSeries=this._plotArea.series.length>1;this._hasInactiveOpacity()&&(multipleSeries&&this._activeChartInstance&&(this._updateSeriesOpacity(point,!0),this._applySeriesOpacity(this._activeChartInstance.children,null,!0),this._activeChartInstance=null),this._highlight&&this._highlight.hide(),this._activePoint=null)},Chart.prototype._hasInactiveOpacity=function _hasInactiveOpacity(){var hasDefaultInactiveOpacity=void 0!==this.options.seriesDefaults.highlight.inactiveOpacity,hasInactiveOpacity=this.options.series.filter((function(s){return void 0!==s.highlight.inactiveOpacity})).length>0;return hasDefaultInactiveOpacity||hasInactiveOpacity},Chart.prototype._getInactiveOpacityForSeries=function _getInactiveOpacityForSeries(series){var defaultInactiveOpacity=this.options.seriesDefaults.highlight.inactiveOpacity;return series.highlight.inactiveOpacity||defaultInactiveOpacity||series.opacity||1},Chart.prototype._getDefaultOpacityForSeries=function _getDefaultOpacityForSeries(series){return series.defaultOpacity||series.opacity||1},Chart.prototype._mouseover=function _mouseover(e){var obj,point=this._startHover(e.element,e.originalEvent);point&&point.tooltipTracking&&!this._mouseMoveTrackHandler&&!this._sharedTooltip()&&(this._mouseMoveTrackHandler=this._mouseMoveTracking.bind(this),bindEvents(document,((obj={}).mousemove=this._mouseMoveTrackHandler,obj)))},Chart.prototype._mouseMoveTracking=function _mouseMoveTracking(e){var obj,options=this.options,tooltip=this._tooltip,highlight=this._highlight,point=this._activePoint,coords=this._eventCoordinates(e);if(this._plotArea.box.containsPoint(coords)){if(point&&point.tooltipTracking&&point.series&&point.parent.getNearestPoint){var seriesPoint=point.parent.getNearestPoint(coords.x,coords.y,point.seriesIx);if(seriesPoint&&seriesPoint!==point)if(this._activePoint=seriesPoint,!seriesPoint.hover(this,e))deepExtend({},options.tooltip,seriesPoint.options.tooltip).visible&&tooltip.show(seriesPoint),highlight.show(seriesPoint)}}else unbindEvents(document,((obj={}).mousemove=this._mouseMoveTrackHandler,obj)),this._unsetActivePoint(),this._mouseMoveTrackHandler=null,this._hideInactiveOpacity(point)},Chart.prototype._mousemove=function _mousemove(e){var coords=this._eventCoordinates(e),plotArea=this._plotArea;if(this._trackCrosshairs(coords),plotArea.hover){var overPlotArea=plotArea.backgroundContainsPoint(coords);overPlotArea?(this._plotAreaHovered=!0,this._plotArea.hover(this,e)):this._plotAreaHovered&&!overPlotArea&&(this._plotAreaHovered=!1,this.trigger("plotAreaLeave"))}this._sharedTooltip()&&this._trackSharedTooltip(coords,e)},Chart.prototype._trackCrosshairs=function _trackCrosshairs(coords){for(var crosshairs=this._plotArea.crosshairs,i=0;i<crosshairs.length;i++){var current=crosshairs[i];current.box.containsPoint(coords)?current.showAt(coords):current.hide()}},Chart.prototype._trackSharedTooltip=function _trackSharedTooltip(coords,e,toggle){if(!this._suppressHover){var tooltipOptions=this.options.tooltip,plotArea=this._plotArea,categoryAxis=this._plotArea.categoryAxis,tooltip=this._tooltip,highlight=this._highlight;if(plotArea.backgroundContainsPoint(coords)){var index=categoryAxis.pointCategoryIndex(coords);if(index!==this._tooltipCategoryIx||!this._sharedHighlight&&toggle){var points=plotArea.pointsByCategoryIndex(index),pointArgs=points.map((function(point){return point.eventArgs(e)})),hoverArgs=pointArgs[0]||{};hoverArgs.categoryPoints=pointArgs,points.length>0&&!this.trigger("seriesHover",hoverArgs)?(tooltipOptions.visible&&tooltip.showAt(points,coords),highlight.show(points),this._sharedHighlight=!0):tooltip.hide(),this._tooltipCategoryIx=index}else toggle&&this._sharedHighlight&&(highlight.hide(),tooltip.hide(),this._sharedHighlight=!1)}else this._sharedHighlight&&(highlight.hide(),tooltip.hide(),this._tooltipCategoryIx=null,this._sharedHighlight=!1)}},Chart.prototype.hideElements=function hideElements(options){var plotArea=this._plotArea;this._mousemove.cancel(),plotArea.hideCrosshairs(),this._unsetActivePoint(options)},Chart.prototype._unsetActivePoint=function _unsetActivePoint(options){var tooltip=this._tooltip,highlight=this._highlight;this._activePoint=null,this._hoveredPoint=null,!tooltip||options&&options.keepTooltipOpen||tooltip.hide(),this._tooltipCategoryIx=null,this._sharedHighlight=!1,highlight&&highlight.hide()},Chart.prototype._deferRedraw=function _deferRedraw(){this._redraw()},Chart.prototype._clearRedrawTimeout=function _clearRedrawTimeout(){this._redrawTimeout&&(clearInterval(this._redrawTimeout),this._redrawTimeout=null)},Chart.prototype.bindCategories=function bindCategories(){for(var options=this.options,definitions=[].concat(options.categoryAxis),axisIx=0;axisIx<definitions.length;axisIx++){var axis=definitions[axisIx];!1!==axis.autoBind&&this.bindCategoryAxisFromSeries(axis,axisIx)}},Chart.prototype.bindCategoryAxisFromSeries=function bindCategoryAxisFromSeries(axis,axisIx){for(var dateAxis,series=this.options.series,seriesLength=series.length,uniqueCategories=new hash_map,items=[],bindable=!1,seriesIx=0;seriesIx<seriesLength;seriesIx++){var s=series[seriesIx],onAxis=s.categoryAxis===axis.name||!s.categoryAxis&&0===axisIx,data=s.data,dataLength=data.length,bind=s.categoryField&&onAxis;if(bindable=bind||bindable,bind&&dataLength>0)for(var getFn=(dateAxis=isDateAxis(axis,getField(s.categoryField,data[0])))?getDateField:getField,dataIx=0;dataIx<dataLength;dataIx++){var dataRow=data[dataIx],category=getFn(s.categoryField,dataRow,this.chartService.intl);!dateAxis&&uniqueCategories.get(category)||(items.push([category,dataRow]),dateAxis||uniqueCategories.set(category,!0))}}if(items.length>0){dateAxis&&(items=function uniqueDates(srcDates,comparer){void 0===comparer&&(comparer=dateComparer);for(var dates=function sortDates(dates,comparer){void 0===comparer&&(comparer=dateComparer);for(var i=1,length=dates.length;i<length;i++)if(comparer(dates[i],dates[i-1])<0){dates.sort(comparer);break}return dates}(srcDates,comparer),length=dates.length,result=length>0?[dates[0]]:[],i=1;i<length;i++)0!==comparer(dates[i],last(result))&&result.push(dates[i]);return result}(items,(function(a,b){return dateComparer(a[0],b[0])})));var result=function transpose(rows){for(var rowCount=rows.length,result=[],rowIx=0;rowIx<rowCount;rowIx++)for(var row=rows[rowIx],colCount=row.length,colIx=0;colIx<colCount;colIx++)result[colIx]=result[colIx]||[],result[colIx].push(row[colIx]);return result}(items);axis.categories=result[0]}else bindable&&(axis.categories=[])},Chart.prototype._isBindable=function _isBindable(series){for(var valueFields=series_binder.current.valueFields(series),result=!0,i=0;i<valueFields.length;i++){var field=valueFields[i];if(field===VALUE?field="field":field+="Field",!drawing_utils_defined(series[field])){result=!1;break}}return result},Chart.prototype._noTransitionsRedraw=function _noTransitionsRedraw(){var transitionsState,options=this.options;!1!==options.transitions&&(options.transitions=!1,transitionsState=!0),this._redraw(),transitionsState&&(options.transitions=!0)},Chart.prototype._legendItemHover=function _legendItemHover(seriesIndex,pointIndex){var items,plotArea=this._plotArea,highlight=this._highlight,currentSeries=(plotArea.srcSeries||plotArea.series)[seriesIndex];if(items=inArray(currentSeries.type,[PIE,"donut","funnel","pyramid"])?plotArea.findPoint((function(point){return point.series.index===seriesIndex&&point.index===pointIndex})):plotArea.pointsBySeriesIndex(seriesIndex),this._hasInactiveOpacity()&&currentSeries.visible&&items){var multipleSeries=plotArea.series.length>1,point=items.length?items[0]:items;this._displayInactiveOpacity(point,multipleSeries,items)}else highlight.show(items)},Chart.prototype._shouldAttachMouseMove=function _shouldAttachMouseMove(){return this._plotArea.crosshairs.length||this._tooltip&&this._sharedTooltip()||this.requiresHandlers(["plotAreaHover","plotAreaLeave"])},Chart.prototype.updateMouseMoveHandler=function updateMouseMoveHandler(){var obj,obj$1;unbindEvents(this.element,((obj={}).mousemove=this._mousemove,obj)),this._shouldAttachMouseMove()&&bindEvents(this.element,((obj$1={}).mousemove=this._mousemove,obj$1))},Chart.prototype.applyOptions=function applyOptions(options,theme){clearMissingValues(this._originalOptions,options),this._originalOptions=deepExtend(this._originalOptions,options),this.options=deepExtend({},this._originalOptions),theme&&(this._theme=theme,this.chartService.theme=theme),this._initTheme(this.options,this._theme),this._toggleDragZoomEvents()},Chart.prototype.setOptions=function setOptions(options,theme){this.applyOptions(options,theme),this.bindCategories(),this.redraw(),this.updateMouseMoveHandler()},Chart.prototype.setDirection=function setDirection(rtl){this.chartService.rtl=Boolean(rtl),this.surface&&"svg"===this.surface.type&&this._destroySurface()},Chart.prototype.setIntlService=function setIntlService(intl){this.chartService.intl=intl},Chart.prototype.noTransitionsRedraw=function noTransitionsRedraw(){this._noTransitionsRedraw()},Chart.prototype.destroy=function destroy(){var obj,obj$1;this._destroyed=!0,unbindEvents(this.element,((obj={}).contextmenu=this._clickHandler,obj.wheel=this._mousewheelHandler,obj.mousemove=this._mousemove,obj.mouseleave=this._mouseleaveHandler,obj)),this.domEvents&&(this.domEvents.destroy(),delete this.domEvents),this._mouseMoveTrackHandler&&unbindEvents(document,((obj$1={}).mousemove=this._mouseMoveTrackHandler,obj$1)),this._destroyView(),this._destroySurface(),this._clearRedrawTimeout()},Chart.prototype._destroySurface=function _destroySurface(){var surface=this.surface;surface&&(surface.unbind("mouseenter",this._surfaceMouseenterHandler),surface.unbind("mouseleave",this._surfaceMouseleaveHandler),surface.destroy(),this.surface=null)},Chart.prototype._destroySelections=function _destroySelections(){var selections=this._selections;if(selections)for(;selections.length>0;)selections.shift().destroy()},Chart.prototype._destroyView=function _destroyView(){var model=this._model;model&&(model.destroy(),this._model=null),this._unsetActivePoint(),this._resetDrilldownPoint(),this._destroySelections(),this._tooltip&&this._tooltip.destroy(),this._highlight&&this._highlight.destroy(),this._zoomSelection&&(this._zoomSelection.destroy(),delete this._zoomSelection),this._pannable&&(this._pannable.destroy(),delete this._pannable),this._mousewheelZoom&&(this._mousewheelZoom.destroy(),delete this._mousewheelZoom)},Chart}(common_class.A);function pointByCategoryName(points,name){if(points)for(var idx=0;idx<points.length;idx++)if(points[idx].category===name)return[points[idx]]}function cleanupNestedSeriesDefaults(seriesDefaults){delete seriesDefaults.bar,delete seriesDefaults.column,delete seriesDefaults.rangeColumn,delete seriesDefaults.line,delete seriesDefaults.verticalLine,delete seriesDefaults.pie,delete seriesDefaults.donut,delete seriesDefaults.area,delete seriesDefaults.verticalArea,delete seriesDefaults.scatter,delete seriesDefaults.scatterLine,delete seriesDefaults.bubble,delete seriesDefaults.candlestick,delete seriesDefaults.ohlc,delete seriesDefaults.boxPlot,delete seriesDefaults.bullet,delete seriesDefaults.verticalBullet,delete seriesDefaults.polarArea,delete seriesDefaults.polarLine,delete seriesDefaults.radarArea,delete seriesDefaults.radarLine,delete seriesDefaults.waterfall}function axisRanges(axes){for(var ranges={},i=0;i<axes.length;i++){var axis=axes[i],axisName=axis.options.name;axisName&&(ranges[axisName]=axis.range())}return ranges}var DATA_FIELDS=["data","categories"];function clearMissingValues(originalOptions,options){for(var field in options)if(!inArray(field,DATA_FIELDS)&&options.hasOwnProperty(field)){var fieldValue=options[field],originalValue=originalOptions[field];if(drawing_utils_defined(originalValue)){var nullValue=null===fieldValue;nullValue||!drawing_utils_defined(fieldValue)?(delete originalOptions[field],nullValue&&delete options[field]):originalValue&&isObject(fieldValue)&&isObject(originalValue)&&clearMissingValues(originalValue,fieldValue)}}}function triggerPaneRender(panes){for(var idx=0;idx<panes.length;idx++)panes[idx].notifyRender()}setDefaultOptions(Chart,{renderAs:"",chartArea:{},legend:{visible:!0,labels:{}},categoryAxis:{},seriesDefaults:{type:COLUMN,data:[],highlight:{visible:!0},labels:{},negativeValues:{visible:!1}},series:[],seriesColors:null,tooltip:{visible:!1},transitions:!0,valueAxis:{},plotArea:{},title:{},xAxis:{},yAxis:{},panes:[{}],pannable:!1,zoomable:!1});const chart=Chart;var shared_tooltip_SharedTooltip=function(ChartSharedTooltip){function SharedTooltip(){ChartSharedTooltip.apply(this,arguments)}return ChartSharedTooltip&&(SharedTooltip.__proto__=ChartSharedTooltip),SharedTooltip.prototype=Object.create(ChartSharedTooltip&&ChartSharedTooltip.prototype),SharedTooltip.prototype.constructor=SharedTooltip,SharedTooltip.prototype._slotAnchor=function _slotAnchor(coords,slot){var vertical=this.plotArea.categoryAxis.options.vertical,align=vertical?{horizontal:"left",vertical:"center"}:{horizontal:"center",vertical:"bottom"};return{point:vertical?new core_point(this.plotArea.box.x2,slot.center().y):new core_point(slot.center().x,-2),align}},SharedTooltip.prototype._defaultAnchor=function _defaultAnchor(point,slot){return this._slotAnchor({},slot)},SharedTooltip}(shared_tooltip);const sparkline_shared_tooltip=shared_tooltip_SharedTooltip;var NO_CROSSHAIR=[BAR,BULLET];function hide(children){for(var state=[],idx=0;idx<children.length;idx++){var child=children[idx];state[idx]=child.style.display,child.style.display="none"}return state}function show(children,state){for(var idx=0;idx<children.length;idx++)children[idx].style.display=state[idx]}function wrapNumber(value){return isNumber(value)?[value]:value}var Sparkline=function(Chart){function Sparkline(){Chart.apply(this,arguments)}return Chart&&(Sparkline.__proto__=Chart),Sparkline.prototype=Object.create(Chart&&Chart.prototype),Sparkline.prototype.constructor=Sparkline,Sparkline.prototype._setElementClass=function _setElementClass(element){addClass(element,"k-sparkline")},Sparkline.prototype._initElement=function _initElement(element){Chart.prototype._initElement.call(this,element),this._initialWidth=Math.floor(elementSize(element).width)},Sparkline.prototype._resize=function _resize(){var element=this.element,state=hide(element.childNodes);this._initialWidth=Math.floor(elementSize(element).width),show(element.childNodes,state),Chart.prototype._resize.call(this)},Sparkline.prototype._modelOptions=function _modelOptions(){var chartOptions=this.options,stage=this._surfaceWrap(),displayState=hide(stage.childNodes),space=document.createElement("span");space.innerHTML="&nbsp;",stage.appendChild(space);var options=deepExtend({width:this._autoWidth,height:elementSize(stage).height,transitions:chartOptions.transitions},chartOptions.chartArea,{inline:!0,align:!1});return elementSize(stage,{width:options.width,height:options.height}),stage.removeChild(space),show(stage.childNodes,displayState),this.surface&&this.surface.resize(),options},Sparkline.prototype._surfaceWrap=function _surfaceWrap(){if(!this.stage){var stage=this.stage=document.createElement("span");this.element.appendChild(stage)}return this.stage},Sparkline.prototype._createPlotArea=function _createPlotArea(skipSeries){var plotArea=Chart.prototype._createPlotArea.call(this,skipSeries);return this._autoWidth=this._initialWidth||this._calculateWidth(plotArea),plotArea},Sparkline.prototype._calculateWidth=function _calculateWidth(plotArea){for(var options=this.options,margin=getSpacing(options.chartArea.margin),charts=plotArea.charts,stage=this._surfaceWrap(),total=0,i=0;i<charts.length;i++){var currentChart=charts[i],firstSeries=(currentChart.options.series||[])[0];if(firstSeries){if(firstSeries.type===BAR)return 150;if(firstSeries.type===BULLET)return 150;if(firstSeries.type===PIE)return elementSize(stage).height;var categoryAxis=currentChart.categoryAxis;if(categoryAxis){var pointsCount=categoryAxis.categoriesCount()*(!currentChart.options.isStacked&&inArray(firstSeries.type,[COLUMN,VERTICAL_BULLET])?currentChart.seriesOptions.length:1);total=Math.max(total,pointsCount)}}}var size=total*options.pointWidth;return size>0&&(size+=margin.left+margin.right),size},Sparkline.prototype._createSharedTooltip=function _createSharedTooltip(options){return new sparkline_shared_tooltip(this._plotArea,options)},Sparkline.normalizeOptions=function normalizeOptions(userOptions){var options=wrapNumber(userOptions);return(options=isArray(options)?{seriesDefaults:{data:options}}:deepExtend({},options)).series||(options.series=[{data:wrapNumber(options.data)}]),deepExtend(options,{seriesDefaults:{type:options.type}}),(inArray(options.series[0].type,NO_CROSSHAIR)||inArray(options.seriesDefaults.type,NO_CROSSHAIR))&&(options=deepExtend({},{categoryAxis:{crosshair:{visible:!1}}},options)),options},Sparkline}(chart);setDefaultOptions(Sparkline,{chartArea:{margin:2},axisDefaults:{visible:!1,majorGridLines:{visible:!1},valueAxis:{narrowRange:!0}},seriesDefaults:{type:"line",area:{line:{width:.5}},bar:{stack:!0},padding:2,width:.5,overlay:{gradient:null},highlight:{visible:!1},border:{width:0},markers:{size:2,visible:!1}},tooltip:{visible:!0,shared:!0},categoryAxis:{crosshair:{visible:!0,tooltip:{visible:!1}}},legend:{visible:!1},transitions:!1,pointWidth:5,panes:[{clip:!1}]});const fade_out_animation=function(superclass){function FadeOutAnimation(){superclass.apply(this,arguments)}return superclass&&(FadeOutAnimation.__proto__=superclass),FadeOutAnimation.prototype=Object.create(superclass&&superclass.prototype),FadeOutAnimation.prototype.constructor=FadeOutAnimation,FadeOutAnimation.prototype.setup=function setup(){this._initialOpacity=parseFloat(elementStyles(this.element,"opacity").opacity)},FadeOutAnimation.prototype.step=function step(pos){elementStyles(this.element,{opacity:String(interpolateValue(this._initialOpacity,0,pos))})},FadeOutAnimation.prototype.abort=function abort(){superclass.prototype.abort.call(this),elementStyles(this.element,{display:"none",opacity:String(this._initialOpacity)})},FadeOutAnimation.prototype.cancel=function cancel(){superclass.prototype.abort.call(this),elementStyles(this.element,{opacity:String(this._initialOpacity)})},FadeOutAnimation}(animation);function navigator_hint_createDiv(className,style){var div=document.createElement("div");return div.className=className,style&&(div.style.cssText=style),div}var NavigatorHint=function(Class){function NavigatorHint(container,chartService,options){Class.call(this),this.options=deepExtend({},this.options,options),this.container=container,this.chartService=chartService;var padding=elementStyles(container,["paddingLeft","paddingTop"]);this.chartPadding={top:padding.paddingTop,left:padding.paddingLeft},this.createElements(),container.appendChild(this.element)}return Class&&(NavigatorHint.__proto__=Class),NavigatorHint.prototype=Object.create(Class&&Class.prototype),NavigatorHint.prototype.constructor=NavigatorHint,NavigatorHint.prototype.createElements=function createElements(){var element=this.element=navigator_hint_createDiv("k-navigator-hint","display: none; position: absolute; top: 1px; left: 1px;"),tooltip=this.tooltip=navigator_hint_createDiv("k-tooltip k-chart-tooltip"),scroll=this.scroll=navigator_hint_createDiv("k-scroll");tooltip.innerHTML="&nbsp;",element.appendChild(tooltip),element.appendChild(scroll)},NavigatorHint.prototype.show=function show(from,to,bbox){var element=this.element,options=this.options,scroll=this.scroll,tooltip=this.tooltip,middle=toDate(toTime(from)+toTime(to-from)/2),scrollWidth=.4*bbox.width(),minPos=bbox.center().x-scrollWidth,scale=(bbox.center().x-minPos)/(options.max-options.min),offset=middle-options.min,text=this.chartService.intl.format(options.format,from,to),template=getTemplate(options);this.clearHideTimeout(),this._visible||(elementStyles(element,{visibility:"hidden",display:"block"}),this._visible=!0),template&&(text=template({from,to})),tooltip.innerHTML=text,elementStyles(tooltip,{left:bbox.center().x-tooltip.offsetWidth/2,top:bbox.y1});var tooltipStyle=elementStyles(tooltip,["marginTop","borderTopWidth","height"]);elementStyles(scroll,{width:scrollWidth,left:minPos+offset*scale,top:bbox.y1+tooltipStyle.marginTop+tooltipStyle.borderTopWidth+tooltipStyle.height/2}),elementStyles(element,{visibility:"visible"})},NavigatorHint.prototype.clearHideTimeout=function clearHideTimeout(){this._hideTimeout&&clearTimeout(this._hideTimeout),this._hideAnimation&&this._hideAnimation.cancel()},NavigatorHint.prototype.hide=function hide(){var this$1=this;this.clearHideTimeout(),this._hideTimeout=setTimeout((function(){this$1._visible=!1,this$1._hideAnimation=new fade_out_animation(this$1.element),this$1._hideAnimation.setup(),this$1._hideAnimation.play()}),this.options.hideDelay)},NavigatorHint.prototype.destroy=function destroy(){this.clearHideTimeout(),this.container&&this.container.removeChild(this.element),delete this.container,delete this.chartService,delete this.element,delete this.tooltip,delete this.scroll},NavigatorHint}(common_class.A);setDefaultOptions(NavigatorHint,{format:"{0:d} - {1:d}",hideDelay:500});const navigator_hint=NavigatorHint;var Navigator=function(Class){function Navigator(chart){var obj;Class.call(this),this.chart=chart;var options=this.options=deepExtend({},this.options,chart.options.navigator),select=options.select;select&&(select.from=this.parseDate(select.from),select.to=this.parseDate(select.to)),drawing_utils_defined(options.hint.visible)||(options.hint.visible=options.visible),this.chartObserver=new instance_observer(this,((obj={}).drag="_drag",obj.dragEnd="_dragEnd",obj.zoom="_zoom",obj.zoomEnd="_zoomEnd",obj)),chart.addObserver(this.chartObserver)}return Class&&(Navigator.__proto__=Class),Navigator.prototype=Object.create(Class&&Class.prototype),Navigator.prototype.constructor=Navigator,Navigator.prototype.parseDate=function parseDate$1(value){return parseDate(this.chart.chartService.intl,value)},Navigator.prototype.clean=function clean(){this.selection&&(this.selection.destroy(),this.selection=null),this.hint&&(this.hint.destroy(),this.hint=null)},Navigator.prototype.destroy=function destroy(){this.chart&&(this.chart.removeObserver(this.chartObserver),delete this.chart),this.clean()},Navigator.prototype.redraw=function redraw(){this._redrawSelf(),this.initSelection()},Navigator.prototype.initSelection=function initSelection(){var chart=this.chart,options=this.options,axis=this.mainAxis(),ref$1=axis.roundedRange(),min=ref$1.min,max=ref$1.max,ref$2=options.select,from=ref$2.from,to=ref$2.to,mousewheel=ref$2.mousewheel,axisClone=function clone(obj){return ClonedObject.prototype=obj,new ClonedObject}(axis);0!==axis.categoriesCount()&&(this.clean(),axisClone.box=axis.box,this.selection=new chart_selection(chart,axisClone,{min,max,from:from||min,to:to||max,mousewheel:valueOrDefault(mousewheel,{zoom:"left"}),visible:options.visible},new instance_observer(this,{selectStart:"_selectStart",select:"_select",selectEnd:"_selectEnd"})),options.hint.visible&&(this.hint=new navigator_hint(chart.element,chart.chartService,{min,max,template:getTemplate(options.hint),format:options.hint.format})))},Navigator.prototype.setRange=function setRange(){var ref=this.chart._createPlotArea(!0).namedCategoryAxes._navigator.roundedRange(),min=ref.min,max=ref.max,select=this.options.select||{},from=select.from||min;from<min&&(from=min);var to=select.to||max;to>max&&(to=max),this.options.select=deepExtend({},select,{from,to}),this.filterAxes()},Navigator.prototype._redrawSelf=function _redrawSelf(silent){var plotArea=this.chart._plotArea;plotArea&&plotArea.redraw(last(plotArea.panes),silent)},Navigator.prototype.redrawSlaves=function redrawSlaves(){var chart=this.chart,plotArea=chart._plotArea,slavePanes=plotArea.panes.filter((function(pane){return"_navigator"!==pane.options.name}));plotArea.srcSeries=chart.options.series,plotArea.options.categoryAxis=chart.options.categoryAxis,plotArea.clearSeriesPointsCache(),plotArea.redraw(slavePanes)},Navigator.prototype._drag=function _drag(e){var duration,chart=this.chart,selection=this.selection,coords=chart._eventCoordinates(e.originalEvent),navigatorAxis=this.mainAxis(),naviRange=navigatorAxis.roundedRange(),inNavigator=navigatorAxis.pane.box.containsPoint(coords),axis=chart._plotArea.categoryAxis,range=e.axisRanges[axis.options.name],select=this.options.select;if(range&&!inNavigator&&selection){duration=select.from&&select.to?toTime(select.to)-toTime(select.from):toTime(selection.options.to)-toTime(selection.options.from);var from=toDate(limitValue(toTime(range.min),naviRange.min,toTime(naviRange.max)-duration)),to=toDate(limitValue(toTime(from)+duration,toTime(naviRange.min)+duration,naviRange.max));this.options.select={from,to},this.options.liveDrag&&(this.filterAxes(),this.redrawSlaves()),selection.set(from,to),this.showHint(from,to)}},Navigator.prototype._dragEnd=function _dragEnd(){this.filterAxes(),this.filter(),this.redrawSlaves(),this.hint&&this.hint.hide()},Navigator.prototype.readSelection=function readSelection(){var ref_selection_options=this.selection.options,from=ref_selection_options.from,to=ref_selection_options.to,select=this.options.select;select.from=from,select.to=to},Navigator.prototype.filterAxes=function filterAxes(){var select=this.options.select;void 0===select&&(select={});for(var allAxes=this.chart.options.categoryAxis,from=select.from,to=select.to,idx=0;idx<allAxes.length;idx++){var axis=allAxes[idx];"_navigator"!==axis.pane&&(axis.min=from,axis.max=to)}},Navigator.prototype.filter=function filter(){var chart=this.chart,select=this.options.select;if(chart.requiresHandlers(["navigatorFilter"])){var mainAxis=this.mainAxis(),args={from:select.from,to:select.to};if("category"!==mainAxis.options.type){var axisOptions=new date_category_axis(deepExtend({baseUnit:"fit"},chart.options.categoryAxis[0],{categories:[select.from,select.to]}),chart.chartService).options;args.from=addDuration(axisOptions.min,-axisOptions.baseUnitStep,axisOptions.baseUnit),args.to=addDuration(axisOptions.max,axisOptions.baseUnitStep,axisOptions.baseUnit)}this.chart.trigger("navigatorFilter",args)}},Navigator.prototype._zoom=function _zoom(e){var axis=this.chart._plotArea.categoryAxis,selection=this.selection,ref_options=this.options,select=ref_options.select,liveDrag=ref_options.liveDrag,mainAxis=this.mainAxis(),delta=e.delta;if(selection){var fromIx=mainAxis.categoryIndex(selection.options.from),toIx=mainAxis.categoryIndex(selection.options.to),coords=this.chart._eventCoordinates(e.originalEvent);e.originalEvent.preventDefault(),Math.abs(delta)>1&&(delta*=3),toIx-fromIx>1?(selection.zoom(delta,coords),this.readSelection()):(axis.options.min=select.from,select.from=axis.scaleRange(-e.delta*this.chart._mousewheelZoomRate(),coords).min),liveDrag&&(this.filterAxes(),this.redrawSlaves()),selection.set(select.from,select.to),this.showHint(this.options.select.from,this.options.select.to)}},Navigator.prototype._zoomEnd=function _zoomEnd(e){this._dragEnd(e)},Navigator.prototype.showHint=function showHint(from,to){var plotArea=this.chart._plotArea;this.hint&&this.hint.show(from,to,plotArea.backgroundBox())},Navigator.prototype._selectStart=function _selectStart(e){return this.chart._selectStart(e)},Navigator.prototype._select=function _select(e){return this.showHint(e.from,e.to),this.chart._select(e)},Navigator.prototype._selectEnd=function _selectEnd(e){return this.hint&&this.hint.hide(),this.readSelection(),this.filterAxes(),this.filter(),this.redrawSlaves(),this.chart._selectEnd(e)},Navigator.prototype.mainAxis=function mainAxis(){var plotArea=this.chart._plotArea;if(plotArea)return plotArea.namedCategoryAxes._navigator},Navigator.prototype.select=function select(from,to){var select=this.options.select;return from&&to&&(select.from=this.parseDate(from),select.to=this.parseDate(to),this.filterAxes(),this.filter(),this.redrawSlaves(),this.selection.set(from,to)),{from:select.from,to:select.to}},Navigator.setup=function setup(options,themeOptions){if(void 0===options&&(options={}),void 0===themeOptions&&(themeOptions={}),!options.__navi){options.__navi=!0;var naviOptions=deepExtend({},themeOptions.navigator,options.navigator),panes=options.panes=[].concat(options.panes),paneOptions=deepExtend({},naviOptions.pane,{name:"_navigator"});naviOptions.visible||(paneOptions.visible=!1,paneOptions.height=.1),"top"!==options.navigator.position?panes.push(paneOptions):panes.unshift(paneOptions),panes.forEach((function(pane){return pane.name=pane.name||"_default"})),Navigator.attachAxes(options,naviOptions),Navigator.attachSeries(options,naviOptions,themeOptions)}},Navigator.attachAxes=function attachAxes(options,naviOptions){var series=naviOptions.series||[],categoryAxes=options.categoryAxis=[].concat(options.categoryAxis),valueAxes=options.valueAxis=[].concat(options.valueAxis);categoryAxes.concat(valueAxes).forEach((function(axis){return axis.pane=axis.pane||"_default"}));var justifyAxis=0===filterSeriesByType(series,EQUALLY_SPACED_SERIES).length,base=deepExtend({type:"date",pane:"_navigator",roundToBaseUnit:!justifyAxis,justified:justifyAxis,_collapse:!1,majorTicks:{visible:!0},tooltip:{visible:!1},labels:{step:1},autoBind:naviOptions.autoBindElements,autoBaseUnitSteps:{minutes:[1],hours:[1,2],days:[1,2],weeks:[],months:[1],years:[1]}}),user=naviOptions.categoryAxis;categoryAxes.push(deepExtend({},base,{maxDateGroups:200},user,{name:"_navigator",title:null,baseUnit:"fit",baseUnitStep:"auto",labels:{visible:!1},majorTicks:{visible:!1}}),deepExtend({},base,user,{name:"_navigator_labels",maxDateGroups:20,baseUnitStep:"auto",labels:{position:""},plotBands:[],autoBaseUnitSteps:{minutes:[]},_overlap:!0}),deepExtend({},base,user,{name:"_navigator_ticks",maxDateGroups:200,majorTicks:{width:.5},plotBands:[],title:null,labels:{visible:!1,mirror:!0},_overlap:!0})),valueAxes.push(deepExtend({name:"_navigator",pane:"_navigator",majorGridLines:{visible:!1},visible:!1},naviOptions.valueAxis))},Navigator.attachSeries=function attachSeries(options,naviOptions,themeOptions){for(var series=options.series=options.series||[],navigatorSeries=[].concat(naviOptions.series||[]),seriesColors=themeOptions.seriesColors,defaults=naviOptions.seriesDefaults,idx=0;idx<navigatorSeries.length;idx++)series.push(deepExtend({color:seriesColors[idx%seriesColors.length],categoryField:naviOptions.dateField,visibleInLegend:!1,tooltip:{visible:!1}},defaults,navigatorSeries[idx],{axis:"_navigator",categoryAxis:"_navigator",autoBind:naviOptions.autoBindElements}))},Navigator}(common_class.A);function ClonedObject(){}const stock_navigator=Navigator;var StockChart=function(Chart){function StockChart(){Chart.apply(this,arguments)}return Chart&&(StockChart.__proto__=Chart),StockChart.prototype=Object.create(Chart&&Chart.prototype),StockChart.prototype.constructor=StockChart,StockChart.prototype.applyDefaults=function applyDefaults(options,themeOptions){var width=elementSize(this.element).width||600,theme=themeOptions,stockDefaults={seriesDefaults:{categoryField:options.dateField},axisDefaults:{categoryAxis:{name:"default",majorGridLines:{visible:!1},labels:{step:2},majorTicks:{visible:!1},maxDateGroups:Math.floor(width/28)}}};theme&&(theme=deepExtend({},theme,stockDefaults)),stock_navigator.setup(options,theme),Chart.prototype.applyDefaults.call(this,options,theme)},StockChart.prototype._setElementClass=function _setElementClass(element){addClass(element,"k-chart k-stockchart")},StockChart.prototype.setOptions=function setOptions(options){this.destroyNavigator(),Chart.prototype.setOptions.call(this,options)},StockChart.prototype.noTransitionsRedraw=function noTransitionsRedraw(){var transitions=this.options.transitions;this.options.transitions=!1,this._fullRedraw(),this.options.transitions=transitions},StockChart.prototype._resize=function _resize(){this.noTransitionsRedraw()},StockChart.prototype._redraw=function _redraw(){var navigator=this.navigator;!this._dirty()&&navigator&&navigator.options.partialRedraw?navigator.redrawSlaves():this._fullRedraw()},StockChart.prototype._dirty=function _dirty(){var options=this.options,seriesCount=grep([].concat(options.series,options.navigator.series),(function(s){return s&&s.visible})).length,dirty=this._seriesCount!==seriesCount;return this._seriesCount=seriesCount,dirty},StockChart.prototype._fullRedraw=function _fullRedraw(){var navigator=this.navigator;navigator||(navigator=this.navigator=new stock_navigator(this),this.trigger("navigatorCreated",{navigator})),navigator.clean(),navigator.setRange(),Chart.prototype._redraw.call(this),navigator.initSelection()},StockChart.prototype._trackSharedTooltip=function _trackSharedTooltip(coords){var pane=this._plotArea.paneByPoint(coords);pane&&"_navigator"===pane.options.name?this._unsetActivePoint():Chart.prototype._trackSharedTooltip.call(this,coords)},StockChart.prototype.bindCategories=function bindCategories(){Chart.prototype.bindCategories.call(this),this.copyNavigatorCategories()},StockChart.prototype.copyNavigatorCategories=function copyNavigatorCategories(){for(var categories,definitions=[].concat(this.options.categoryAxis),axisIx=0;axisIx<definitions.length;axisIx++){var axis=definitions[axisIx];"_navigator"===axis.name?categories=axis.categories:categories&&"_navigator"===axis.pane&&(axis.categories=categories)}},StockChart.prototype.destroyNavigator=function destroyNavigator(){this.navigator&&(this.navigator.destroy(),this.navigator=null)},StockChart.prototype.destroy=function destroy(){this.destroyNavigator(),Chart.prototype.destroy.call(this)},StockChart.prototype._stopChartHandlers=function _stopChartHandlers(e){var coords=this._eventCoordinates(e),pane=this._plotArea.paneByPoint(coords);return Chart.prototype._stopChartHandlers.call(this,e)||pane&&"_navigator"===pane.options.name},StockChart.prototype._toggleDragZoomEvents=function _toggleDragZoomEvents(){this._dragZoomEnabled||(this.element.style.touchAction="none",this._dragZoomEnabled=!0)},StockChart}(chart);setDefaultOptions(StockChart,{dateField:"date",axisDefaults:{categoryAxis:{type:"date",baseUnit:"fit",justified:!0},valueAxis:{narrowRange:!0,labels:{format:"C"}}},navigator:{select:{},seriesDefaults:{markers:{visible:!1},tooltip:{visible:!1},highlight:{visible:!1},line:{width:2}},hint:{},visible:!0},tooltip:{visible:!0},legend:{visible:!1}});const stock_chart=StockChart;var DEGREE=Math.PI/180;function pad(bbox,value){var origin=bbox.getOrigin(),size=bbox.getSize(),spacing=getSpacing(value);return bbox.setOrigin([origin.x-spacing.left,origin.y-spacing.top]),bbox.setSize([size.width+(spacing.left+spacing.right),size.height+(spacing.top+spacing.bottom)]),bbox}var Group=shapes_group.A,Path=shapes_path.w,build_label_element_Text=shapes_text.A;function buildLabelElement(label,options){var labelBox=label.box,textBox=label.children[0].box,border=options.border||{},background=options.background||"",wrapper=Path.fromRect(new geometry_rect.A([labelBox.x1,labelBox.y1],[labelBox.width(),labelBox.height()]),{stroke:{}}),text=new build_label_element_Text(label.text,new geometry_point.A(textBox.x1,textBox.y1),{font:options.font,fill:{color:options.color}}),styleGeometry=pad(text.bbox().clone(),options.padding),styleBox=Path.fromRect(styleGeometry,{stroke:{color:border.width?border.color:"",width:border.width,opacity:border.opacity,dashType:border.dashType,lineJoin:"round",lineCap:"round"},fill:{color:background}}),elements=new Group;return elements.append(wrapper),elements.append(styleBox),elements.append(text),elements}function getRange(range,min,max){var from=drawing_utils_defined(range.from)?range.from:MIN_VALUE,to=drawing_utils_defined(range.to)?range.to:MAX_VALUE;return range.from=Math.max(Math.min(to,from),min),range.to=Math.min(Math.max(to,from),max),range}function unpad(bbox,value){var spacing=getSpacing(value);return spacing.left=-spacing.left,spacing.top=-spacing.top,spacing.right=-spacing.right,spacing.bottom=-spacing.bottom,pad(bbox,spacing)}var gauge_Path=shapes_path.w,Surface=es_surface.A,Gauge=function(Class){function Gauge(element,userOptions,theme,context){void 0===context&&(context={}),Class.call(this),this.element=element,this.theme=theme,this.contextService=new chart_service(this,context),this._originalOptions=deepExtend({},this.options,userOptions),this.options=deepExtend({},this._originalOptions),this._initTheme(theme),this.redraw()}return Class&&(Gauge.__proto__=Class),Gauge.prototype=Object.create(Class&&Class.prototype),Gauge.prototype.constructor=Gauge,Gauge.prototype.destroy=function destroy(){this.surface&&(this.surface.destroy(),this.surface=null),delete this.element,delete this.surfaceElement},Gauge.prototype.value=function value(pointerValue){var pointer=this.pointers[0];if(0===arguments.length)return pointer.value();pointer.value(pointerValue),this._setValueOptions(pointerValue)},Gauge.prototype._draw=function _draw(){var surface=this.surface;surface.clear(),surface.draw(this._visuals)},Gauge.prototype.exportVisual=function exportVisual(){return this._visuals},Gauge.prototype.allValues=function allValues(values){var pointers=this.pointers,allValues=[];if(0===arguments.length){for(var i=0;i<pointers.length;i++)allValues.push(pointers[i].value());return allValues}if(isArray(values))for(var i$1=0;i$1<values.length;i$1++)isNumber(values[i$1])&&pointers[i$1].value(values[i$1]);this._setValueOptions(values)},Gauge.prototype._setValueOptions=function _setValueOptions(values){for(var pointers=[].concat(this.options.pointer),arrayValues=[].concat(values),i=0;i<arrayValues.length;i++)pointers[i].value=arrayValues[i]},Gauge.prototype.resize=function resize(){this.noTransitionsRedraw()},Gauge.prototype.noTransitionsRedraw=function noTransitionsRedraw(){var transitions=this.options.transitions;this._toggleTransitions(!1),this.redraw(),this._toggleTransitions(transitions)},Gauge.prototype.redraw=function redraw(){var size=this._surfaceSize(),wrapper=new geometry_rect.A([0,0],[size.width,size.height]);this._initSurface(),this.gaugeArea=this._createGaugeArea(),this._createModel();var bbox=unpad(wrapper.bbox(),this._gaugeAreaMargin);this.reflow(bbox)},Gauge.prototype.setOptions=function setOptions(options,theme){this._originalOptions=deepExtend(this._originalOptions,options),this.options=deepExtend({},this._originalOptions),this._initTheme(theme),this.redraw()},Gauge.prototype.setDirection=function setDirection(rtl){this.contextService.rtl=Boolean(rtl),this.surface&&"svg"===this.surface.type&&(this.surface.destroy(),this.surface=null)},Gauge.prototype.setIntlService=function setIntlService(intl){this.contextService.intl=intl},Gauge.prototype._initTheme=function _initTheme(theme){var currentTheme=theme||this.theme||{};this.theme=currentTheme,this.options=deepExtend({},currentTheme,this.options);var options=this.options,pointer=options.pointer;if(isArray(pointer)){for(var pointers=[],i=0;i<pointer.length;i++)pointers.push(deepExtend({},currentTheme.pointer,pointer[i]));options.pointer=pointers}},Gauge.prototype._createGaugeArea=function _createGaugeArea(){var options=this.options.gaugeArea,size=this.surface.size(),border=options.border||{},areaGeometry=new geometry_rect.A([0,0],[size.width,size.height]);return this._gaugeAreaMargin=options.margin||5,border.width>0&&(areaGeometry=unpad(areaGeometry,border.width)),gauge_Path.fromRect(areaGeometry,{stroke:{color:border.width?border.color:"",width:border.width,dashType:border.dashType,lineJoin:"round",lineCap:"round"},fill:{color:options.background}})},Gauge.prototype._initSurface=function _initSurface(){var options=this.options,surface=this.surface,element=this._surfaceElement(),size=this._surfaceSize();elementSize(element,size),surface&&surface.options.type===options.renderAs?(this.surface.clear(),this.surface.resize()):(surface&&surface.destroy(),this.surface=Surface.create(element,{type:options.renderAs}))},Gauge.prototype._surfaceSize=function _surfaceSize(){var options=this.options,size=this._getSize();return options.gaugeArea&&deepExtend(size,options.gaugeArea),size},Gauge.prototype._surfaceElement=function _surfaceElement(){return this.surfaceElement||(this.surfaceElement=document.createElement("div"),this.element.appendChild(this.surfaceElement)),this.surfaceElement},Gauge.prototype.getSize=function getSize(){return this._getSize()},Gauge.prototype._getSize=function _getSize(){var element=this.element,defaultSize=this._defaultSize(),width=element.offsetWidth,height=element.offsetHeight;return width||(width=defaultSize.width),height||(height=defaultSize.height),{width,height}},Gauge.prototype._defaultSize=function _defaultSize(){return{width:200,height:200}},Gauge.prototype._toggleTransitions=function _toggleTransitions(value){this.options.transitions=value;for(var i=0;i<this.pointers.length;i++)this.pointers[i].options.animation.transitions=value},Gauge}(common_class.A);setDefaultOptions(Gauge,{plotArea:{},theme:"default",renderAs:"",pointer:{},scale:{},gaugeArea:{}});const gauge=Gauge;var linear_scale_Path=shapes_path.w,linear_scale_Group=shapes_group.A,linear_scale_Point=geometry_point.A;function renderAxisTick(tickRenderOptions,tickOptions){var start,end,position=tickRenderOptions.position,tickX=tickRenderOptions.tickX,tickY=tickRenderOptions.tickY;return tickRenderOptions.vertical?(start=new linear_scale_Point(tickX,position),end=new linear_scale_Point(tickX+tickOptions.size,position)):(start=new linear_scale_Point(position,tickY),end=new linear_scale_Point(position,tickY+tickOptions.size)),new linear_scale_Path({stroke:{color:tickOptions.color,width:tickOptions.width}}).moveTo(start).lineTo(end)}function renderTicks(tickGroup,tickPositions,tickRenderOptions,tickOptions){var count=tickPositions.length;if(tickOptions.visible)for(var mirror=tickRenderOptions.mirror,lineBox=tickRenderOptions.lineBox,i=tickOptions.skip;i<count;i+=tickOptions.step)i%tickOptions.skipUnit!==0&&(tickRenderOptions.tickX=mirror?lineBox.x2:lineBox.x2-tickOptions.size,tickRenderOptions.tickY=mirror?lineBox.y1-tickOptions.size:lineBox.y1,tickRenderOptions.position=tickPositions[i],tickGroup.append(renderAxisTick(tickRenderOptions,tickOptions)))}var LinearScale=function(NumericAxis){function LinearScale(options,service){var scaleOptions=options||{};!drawing_utils_defined(scaleOptions.reverse)&&!1===scaleOptions.vertical&&(service||{}).rtl&&(scaleOptions=Object.assign({},scaleOptions,{reverse:!0})),NumericAxis.call(this,0,1,scaleOptions,service),this.options.minorUnit=this.options.minorUnit||this.options.majorUnit/10}return NumericAxis&&(LinearScale.__proto__=NumericAxis),LinearScale.prototype=Object.create(NumericAxis&&NumericAxis.prototype),LinearScale.prototype.constructor=LinearScale,LinearScale.prototype.initUserOptions=function initUserOptions(options){var scaleOptions=deepExtend({},this.options,options);return(scaleOptions=deepExtend({},scaleOptions,{labels:{mirror:scaleOptions.mirror}})).majorUnit=scaleOptions.majorUnit||autoMajorUnit(scaleOptions.min,scaleOptions.max),scaleOptions},LinearScale.prototype.initFields=function initFields(){},LinearScale.prototype.render=function render(){var elements=this.elements=new linear_scale_Group,labels=this.renderLabels(),scaleLine=this.renderLine(),scaleTicks=this.renderTicks(),ranges=this.renderRanges();return elements.append(scaleLine,labels,scaleTicks,ranges),elements},LinearScale.prototype.renderRanges=function renderRanges(){for(var options=this.options,min=options.min,max=options.max,vertical=options.vertical,mirror=options.labels.mirror,ranges=options.ranges||[],elements=new linear_scale_Group,count=ranges.length,rangeSize=options.rangeSize||options.minorTicks.size/2,i=0;i<count;i++){var range=getRange(ranges[i],min,max),slot=this.getSlot(range.from,range.to),slotX=vertical?this.lineBox():slot,slotY=vertical?slot:this.lineBox();vertical?slotX.x1-=rangeSize*(mirror?-1:1):slotY.y2+=rangeSize*(mirror?-1:1),elements.append(linear_scale_Path.fromRect(new geometry_rect.A([slotX.x1,slotY.y1],[slotX.x2-slotX.x1,slotY.y2-slotY.y1]),{fill:{color:range.color,opacity:range.opacity},stroke:{}}))}return elements},LinearScale.prototype.renderLabels=function renderLabels(){for(var labels=this.labels,options=this.options,elements=new linear_scale_Group,i=0;i<labels.length;i++)elements.append(buildLabelElement(labels[i],options.labels));return elements},LinearScale.prototype.renderLine=function renderLine(){var line=this.options.line,lineBox=this.lineBox(),elements=new linear_scale_Group;if(line.width>0&&line.visible){var linePath=new linear_scale_Path({stroke:{color:line.color,dashType:line.dashType,width:line.width}});linePath.moveTo(lineBox.x1,lineBox.y1).lineTo(lineBox.x2,lineBox.y2),elements.append(linePath)}return elements},LinearScale.prototype.renderTicks=function renderTicks$1(){var ticks=new linear_scale_Group,options=this.options,majorUnit=options.majorTicks.visible?options.majorUnit:0,tickRenderOptions={vertical:options.vertical,mirror:options.labels.mirror,lineBox:this.lineBox()};return renderTicks(ticks,this.getMajorTickPositions(),tickRenderOptions,options.majorTicks),renderTicks(ticks,this.getMinorTickPositions(),tickRenderOptions,deepExtend({},{skipUnit:majorUnit/options.minorUnit},options.minorTicks)),ticks},LinearScale}(numeric_axis);setDefaultOptions(LinearScale,{min:0,max:50,majorTicks:{size:15,align:"inside",color:BLACK,width:.5,visible:!0},minorTicks:{size:10,align:"inside",color:BLACK,width:.5,visible:!0},line:{width:.5},labels:{position:"inside",padding:2},mirror:!1,_alignLines:!1});const linear_scale=LinearScale;var Pointer=function(Class){function Pointer(scale,userOptions){Class.call(this);var ref=scale.options,min=ref.min,max=ref.max,options=this.options=deepExtend({},this.options,userOptions);options.fill=options.color,this.scale=scale,drawing_utils_defined(options.value)?options.value=limitValue(options.value,min,max):options.value=min}return Class&&(Pointer.__proto__=Class),Pointer.prototype=Object.create(Class&&Class.prototype),Pointer.prototype.constructor=Pointer,Pointer.prototype.value=function value(newValue){var options=this.options,value=options.value;if(0===arguments.length)return value;var ref=this.scale.options,min=ref.min,max=ref.max;options._oldValue=drawing_utils_defined(options._oldValue)?options.value:min,options.value=limitValue(newValue,min,max),this.elements&&this.repaint()},Pointer}(common_class.A);setDefaultOptions(Pointer,{color:BLACK});const pointer=Pointer;var LinearPointer=function(Pointer){function LinearPointer(scale,options){Pointer.call(this,scale,options),this.options=deepExtend({track:{visible:drawing_utils_defined(options.track)}},this.options)}return Pointer&&(LinearPointer.__proto__=Pointer),LinearPointer.prototype=Object.create(Pointer&&Pointer.prototype),LinearPointer.prototype.constructor=LinearPointer,LinearPointer.prototype.reflow=function reflow(){var pointerBox,pointerRangeBox,trackBox,options=this.options,scale=this.scale,ref$1=scale.options,mirror=ref$1.mirror,vertical=ref$1.vertical,scaleLine=scale.lineBox(),trackSize=options.track.size||options.size,pointerHalfSize=options.size/2,margin=getSpacing(options.margin),space=vertical?margin[mirror?"left":"right"]:margin[mirror?"bottom":"top"];space=mirror?-space:space,vertical?(trackBox=new core_box(scaleLine.x1+space,scaleLine.y1,scaleLine.x1+space,scaleLine.y2),mirror?trackBox.x1-=trackSize:trackBox.x2+=trackSize,"barPointer"!==options.shape&&(pointerBox=pointerRangeBox=new core_box(scaleLine.x2+space,scaleLine.y1-pointerHalfSize,scaleLine.x2+space,scaleLine.y2+pointerHalfSize))):(trackBox=new core_box(scaleLine.x1,scaleLine.y1-space,scaleLine.x2,scaleLine.y1-space),mirror?trackBox.y2+=trackSize:trackBox.y1-=trackSize,"barPointer"!==options.shape&&(pointerBox=pointerRangeBox=new core_box(scaleLine.x1-pointerHalfSize,scaleLine.y1-space,scaleLine.x2+pointerHalfSize,scaleLine.y1-space))),this.trackBox=trackBox,this.pointerRangeBox=pointerRangeBox,this.box=pointerBox||trackBox.clone().pad(options.border.width)},LinearPointer.prototype.getElementOptions=function getElementOptions(){var options=this.options;return{fill:{color:options.color,opacity:options.opacity},stroke:drawing_utils_defined(options.border)?{color:options.border.width?options.border.color||options.color:"",width:options.border.width,dashType:options.border.dashType,opacity:options.opacity}:null}},LinearPointer.prototype._margin=function _margin(){var scale=this.scale,options=this.options,ref$1=scale.options,mirror=ref$1.mirror,vertical=ref$1.vertical,margin=getSpacing(options.margin);return vertical?margin[mirror?"left":"right"]:margin[mirror?"bottom":"top"]},LinearPointer}(pointer);setDefaultOptions(LinearPointer,{shape:"barPointer",track:{border:{width:1}},color:BLACK,border:{width:1},opacity:1,margin:getSpacing(3),animation:{type:"barPointer"},visible:!0});const linear_pointer=LinearPointer;var ArrowLinearPointerAnimation=function(superclass){function ArrowLinearPointerAnimation(){superclass.apply(this,arguments)}return superclass&&(ArrowLinearPointerAnimation.__proto__=superclass),ArrowLinearPointerAnimation.prototype=Object.create(superclass&&superclass.prototype),ArrowLinearPointerAnimation.prototype.constructor=ArrowLinearPointerAnimation,ArrowLinearPointerAnimation.prototype.setup=function setup(){var options=this.options,margin=options.margin,from=options.from,to=options.to,vertical=options.vertical,axis=vertical?"x1":"y1";options.mirror===vertical?(from[axis]-=margin,to[axis]-=margin):(from[axis]+=margin,to[axis]+=margin);var fromScale=this.fromScale=new geometry_point.A(from.x1,from.y1),toScale=this.toScale=new geometry_point.A(to.x1,to.y1);0!==options.duration&&(options.duration=Math.max(fromScale.distanceTo(toScale)/options.duration*1e3,1))},ArrowLinearPointerAnimation.prototype.step=function step(pos){var translateX=interpolateValue(this.fromScale.x,this.toScale.x,pos),translateY=interpolateValue(this.fromScale.y,this.toScale.y,pos);this.element.transform(geometry_transform.A().translate(translateX,translateY))},ArrowLinearPointerAnimation}(animation);setDefaultOptions(ArrowLinearPointerAnimation,{easing:"linear",duration:250}),animation_factory.current.register("arrowPointer",ArrowLinearPointerAnimation);const arrow_linear_pointer_animation=ArrowLinearPointerAnimation;var arrow_linear_pointer_Point=geometry_point.A,arrow_linear_pointer_Path=shapes_path.w,ArrowLinearPointer=function(LinearPointer){function ArrowLinearPointer(scale,options){LinearPointer.call(this,scale,options),drawing_utils_defined(this.options.size)||(this.options.size=.6*this.scale.options.majorTicks.size)}return LinearPointer&&(ArrowLinearPointer.__proto__=LinearPointer),ArrowLinearPointer.prototype=Object.create(LinearPointer&&LinearPointer.prototype),ArrowLinearPointer.prototype.constructor=ArrowLinearPointer,ArrowLinearPointer.prototype.pointerShape=function pointerShape(){var scale=this.scale,size=this.options.size,halfSize=size/2,sign=scale.options.mirror?-1:1;return scale.options.vertical?[new arrow_linear_pointer_Point(0,0-halfSize),new arrow_linear_pointer_Point(0-sign*size,0),new arrow_linear_pointer_Point(0,0+halfSize)]:[new arrow_linear_pointer_Point(0-halfSize,0),new arrow_linear_pointer_Point(0,0+sign*size),new arrow_linear_pointer_Point(0+halfSize,0)]},ArrowLinearPointer.prototype.repaint=function repaint(){var scale=this.scale,options=this.options,animation=new arrow_linear_pointer_animation(this.elements,deepExtend(options.animation,{vertical:scale.options.vertical,mirror:scale.options.mirror,margin:this._margin(options.margin),from:scale.getSlot(options._oldValue),to:scale.getSlot(options.value)}));!1===options.animation.transitions&&(animation.options.duration=0),animation.setup(),animation.play()},ArrowLinearPointer.prototype.render=function render(){var scale=this.scale,options=this.options,elementOptions=this.getElementOptions(),shape=this.pointerShape(options.value);options.animation.type="arrowPointer";var elements=new arrow_linear_pointer_Path({stroke:elementOptions.stroke,fill:elementOptions.fill}).moveTo(shape[0]).lineTo(shape[1]).lineTo(shape[2]).close(),slot=scale.getSlot(options.value);return elements.transform(geometry_transform.A().translate(slot.x1,slot.y1)),this.elements=elements,elements},ArrowLinearPointer}(linear_pointer);const arrow_linear_pointer=ArrowLinearPointer;var BarLinearPointerAnimation=function(superclass){function BarLinearPointerAnimation(){superclass.apply(this,arguments)}return superclass&&(BarLinearPointerAnimation.__proto__=superclass),BarLinearPointerAnimation.prototype=Object.create(superclass&&superclass.prototype),BarLinearPointerAnimation.prototype.constructor=BarLinearPointerAnimation,BarLinearPointerAnimation.prototype.setup=function setup(){var options=this.options,axis=this.axis=options.vertical?Y:X,to=this.to=options.newPoints[0][axis],from=this.from=options.oldPoints[0][axis];0!==options.duration&&(options.duration=Math.max(Math.abs(to-from)/options.speed*1e3,1)),this._set(from)},BarLinearPointerAnimation.prototype.step=function step(pos){var value=interpolateValue(this.from,this.to,pos);this._set(value)},BarLinearPointerAnimation.prototype._set=function _set(value){var setter="set"+this.axis.toUpperCase(),points=this.options.newPoints;points[0][setter](value),points[1][setter](value)},BarLinearPointerAnimation}(animation);setDefaultOptions(BarLinearPointerAnimation,{easing:"linear",speed:250}),animation_factory.current.register("barPointer",BarLinearPointerAnimation);const bar_linear_pointer_animation=BarLinearPointerAnimation;var bar_linear_pointer_Group=shapes_group.A,bar_linear_pointer_Path=shapes_path.w,BarLinearPointer=function(LinearPointer){function BarLinearPointer(scale,options){LinearPointer.call(this,scale,options),drawing_utils_defined(this.options.size)||(this.options.size=.3*this.scale.options.majorTicks.size)}return LinearPointer&&(BarLinearPointer.__proto__=LinearPointer),BarLinearPointer.prototype=Object.create(LinearPointer&&LinearPointer.prototype),BarLinearPointer.prototype.constructor=BarLinearPointer,BarLinearPointer.prototype.pointerShape=function pointerShape(value){var scale=this.scale,options=this.options,ref$1=scale.options,mirror=ref$1.mirror,vertical=ref$1.vertical,dir=mirror===vertical?-1:1,size=options.size*dir,minSlot=scale.getSlot(scale.options.min),slot=scale.getSlot(value),axis=vertical?Y:X,sizeAxis=vertical?X:Y,margin=this._margin()*dir,p1=new geometry_point.A;p1[axis]=minSlot[axis+"1"],p1[sizeAxis]=minSlot[sizeAxis+"1"];var p2=new geometry_point.A;p2[axis]=slot[axis+"1"],p2[sizeAxis]=slot[sizeAxis+"1"],vertical?(p1.translate(margin,0),p2.translate(margin,0)):(p1.translate(0,margin),p2.translate(0,margin));var p3=p2.clone(),p4=p1.clone();return vertical?(p3.translate(size,0),p4.translate(size,0)):(p3.translate(0,size),p4.translate(0,size)),[p1,p2,p3,p4]},BarLinearPointer.prototype.repaint=function repaint(){var scale=this.scale,options=this.options,shape=this.pointerShape(options.value),pointerPath=this.pointerPath,oldShape=this.pointerShape(options._oldValue);pointerPath.moveTo(shape[0]).lineTo(shape[1]).lineTo(shape[2]).lineTo(shape[3]).close();var animation=new bar_linear_pointer_animation(pointerPath,deepExtend(options.animation,{reverse:scale.options.reverse,vertical:scale.options.vertical,oldPoints:[oldShape[1],oldShape[2]],newPoints:[shape[1],shape[2]]}));!1===options.animation.transitions&&(animation.options.duration=0),animation.setup(),animation.play()},BarLinearPointer.prototype.render=function render(){var group=new bar_linear_pointer_Group,elementOptions=this.getElementOptions();this.options.track.visible&&group.append(this.renderTrack());var pointer=this.pointerPath=new bar_linear_pointer_Path({stroke:elementOptions.stroke,fill:elementOptions.fill});return group.append(pointer),this.elements=group,group},BarLinearPointer.prototype.renderTrack=function renderTrack(){var trackOptions=this.options.track,border=trackOptions.border||{},trackBox=this.trackBox.clone().pad(border.width||0);return new bar_linear_pointer_Path.fromRect(trackBox.toRect(),{fill:{color:trackOptions.color,opacity:trackOptions.opacity},stroke:{color:border.width?border.color||trackOptions.color:"",width:border.width,dashType:border.dashType}})},BarLinearPointer}(linear_pointer);const bar_linear_pointer=BarLinearPointer;var linear_gauge_Group=shapes_group.A,LinearGauge=function(Gauge){function LinearGauge(){Gauge.apply(this,arguments)}return Gauge&&(LinearGauge.__proto__=Gauge),LinearGauge.prototype=Object.create(Gauge&&Gauge.prototype),LinearGauge.prototype.constructor=LinearGauge,LinearGauge.prototype.reflow=function reflow(bbox){var pointers=this.pointers,bboxX=bbox.origin.x,bboxY=bbox.origin.y,box=new core_box(bboxX,bboxY,bboxX+bbox.width(),bboxY+bbox.height());this.scale.reflow(box),this._shrinkScaleWidth(box);for(var i=0;i<pointers.length;i++)pointers[i].reflow();this.bbox=this._getBox(box),this._alignElements(),this._shrinkElements(),this._buildVisual(),this._draw()},LinearGauge.prototype._buildVisual=function _buildVisual(){var visuals=new linear_gauge_Group,scaleElements=this.scale.render(),pointers=this.pointers;visuals.append(this.gaugeArea),visuals.append(scaleElements);for(var i=0;i<pointers.length;i++){var current=pointers[i];visuals.append(current.render()),current.value(current.options.value)}this._visuals=visuals},LinearGauge.prototype._createModel=function _createModel(){var options=this.options,scale=this.scale=new linear_scale(options.scale,this.contextService);this.pointers=[];var pointers=options.pointer;pointers=isArray(pointers)?pointers:[pointers];for(var i=0;i<pointers.length;i++){var currentOptions=deepExtend({},pointers[i],{animation:{transitions:options.transitions}}),pointerType="arrow"===currentOptions.shape?arrow_linear_pointer:bar_linear_pointer;this.pointers.push(new pointerType(scale,currentOptions))}},LinearGauge.prototype._defaultSize=function _defaultSize(){var vertical=this.options.scale.vertical;return{width:vertical?60:200,height:vertical?200:60}},LinearGauge.prototype._getBox=function _getBox(box){for(var size,scale=this.scale,pointers=this.pointers,boxCenter=box.center(),plotAreaBox=pointers[0].box.clone().wrap(scale.box),i=0;i<pointers.length;i++)plotAreaBox.wrap(pointers[i].box.clone());return scale.options.vertical?(size=plotAreaBox.width()/2,plotAreaBox=new core_box(boxCenter.x-size,box.y1,boxCenter.x+size,box.y2)):(size=plotAreaBox.height()/2,plotAreaBox=new core_box(box.x1,boxCenter.y-size,box.x2,boxCenter.y+size)),plotAreaBox},LinearGauge.prototype._alignElements=function _alignElements(){for(var diff,scale=this.scale,pointers=this.pointers,scaleBox=scale.box,box=pointers[0].box.clone().wrap(scale.box),plotAreaBox=this.bbox,i=0;i<pointers.length;i++)box.wrap(pointers[i].box.clone());scale.options.vertical?(diff=plotAreaBox.center().x-box.center().x,scale.reflow(new core_box(scaleBox.x1+diff,plotAreaBox.y1,scaleBox.x2+diff,plotAreaBox.y2))):(diff=plotAreaBox.center().y-box.center().y,scale.reflow(new core_box(scaleBox.x1,scaleBox.y1+diff,scaleBox.x2,scaleBox.y2+diff)));for(var i$1=0;i$1<pointers.length;i$1++)pointers[i$1].reflow(this.bbox)},LinearGauge.prototype._shrinkScaleWidth=function _shrinkScaleWidth(bbox){var scale=this.scale;if(!scale.options.vertical){var overflow=scale.contentBox().width()-bbox.width();overflow>0&&(scale.box.shrink(overflow,0),scale.box.alignTo(bbox,"center"),scale.reflow(scale.box))}},LinearGauge.prototype._shrinkElements=function _shrinkElements(){for(var scale=this.scale,pointers=this.pointers,scaleBox=scale.box.clone(),pos=scale.options.vertical?"y":"x",pointerBox=pointers[0].box,i=0;i<pointers.length;i++)pointerBox.wrap(pointers[i].box.clone());scaleBox[pos+1]+=Math.max(scaleBox[pos+1]-pointerBox[pos+1],0),scaleBox[pos+2]-=Math.max(pointerBox[pos+2]-scaleBox[pos+2],0),scale.reflow(scaleBox);for(var i$1=0;i$1<pointers.length;i$1++)pointers[i$1].reflow(this.bbox)},LinearGauge}(gauge);setDefaultOptions(LinearGauge,{transitions:!0,gaugeArea:{background:""},scale:{vertical:!0}});const linear_gauge=LinearGauge;var shapes_element=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/shapes/element.js"),paintable=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/mixins/paintable.js"),measurable=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/mixins/measurable.js"),with_geometry=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/mixins/with-geometry.js"),Arc=function(superclass){function Arc(geometry,options){void 0===geometry&&(geometry=new geometry_arc.A),void 0===options&&(options={}),superclass.call(this,options),this.geometry(geometry),(0,defined.A)(this.options.stroke)||this.stroke("#000")}superclass&&(Arc.__proto__=superclass),Arc.prototype=Object.create(superclass&&superclass.prototype),Arc.prototype.constructor=Arc;var prototypeAccessors={nodeType:{configurable:!0}};return prototypeAccessors.nodeType.get=function(){return"Arc"},Arc.prototype._bbox=function _bbox(matrix){return this._geometry.bbox(matrix)},Arc.prototype.rawBBox=function rawBBox(){return this.geometry().bbox()},Arc.prototype.toPath=function toPath(){var path=new shapes_path.w,curvePoints=this.geometry().curvePoints();if(curvePoints.length>0){path.moveTo(curvePoints[0].x,curvePoints[0].y);for(var i=1;i<curvePoints.length;i+=3)path.curveTo(curvePoints[i],curvePoints[i+1],curvePoints[i+2])}return path},Arc.prototype._containsPoint=function _containsPoint(point){return this.geometry().containsPoint(point)},Arc.prototype._isOnPath=function _isOnPath(point){return this.geometry()._isOnPath(point,this.options.stroke.width/2)},Object.defineProperties(Arc.prototype,prototypeAccessors),Arc}((0,paintable.A)((0,measurable.A)((0,with_geometry.A)(shapes_element.A))));var radial_scale_Arc=Arc,radial_scale_Path=shapes_path.w,radial_scale_Group=shapes_group.A;function drawTicks(arc,tickAngles,unit,tickOptions){var ticks=new radial_scale_Group,center=arc.center,radius=arc.getRadiusX();if(tickOptions.visible)for(var i=0;i<tickAngles.length;i++){var tickStart=arc.pointAt(tickAngles[i]),tickEnd=new geometry_point.A(center.x+radius-tickOptions.size,center.y).rotate(tickAngles[i],center);ticks.append(new radial_scale_Path({stroke:{color:tickOptions.color,width:tickOptions.width}}).moveTo(tickStart).lineTo(tickEnd))}return ticks}function rangeSegment(from,to,color,opacity){return{from,to,color,opacity}}var RadialScale=function(NumericAxis){function RadialScale(options,service){NumericAxis.call(this,0,1,options,service)}return NumericAxis&&(RadialScale.__proto__=NumericAxis),RadialScale.prototype=Object.create(NumericAxis&&NumericAxis.prototype),RadialScale.prototype.constructor=RadialScale,RadialScale.prototype.initUserOptions=function initUserOptions(options){var scaleOptions=deepExtend({},this.options,options);return scaleOptions.majorUnit=scaleOptions.majorUnit||autoMajorUnit(scaleOptions.min,scaleOptions.max),scaleOptions.minorUnit=scaleOptions.minorUnit||scaleOptions.majorUnit/10,scaleOptions},RadialScale.prototype.initFields=function initFields(){},RadialScale.prototype.render=function render(center,radius){var arc=this.renderArc(center,radius);this.bbox=arc.bbox(),this.labelElements=this.renderLabels(),this.ticks=this.renderTicks(),this.ranges=this.renderRanges()},RadialScale.prototype.reflow=function reflow(bbox){var center=bbox.center(),radius=Math.min(bbox.height(),bbox.width())/2;if(!drawing_utils_defined(this.bbox))return this.render(center,radius);this.bbox=this.arc.bbox(),this.radius(this.arc.getRadiusX()),this.repositionRanges(),this.renderLabels()},RadialScale.prototype.slotAngle=function slotAngle(value){var ref=this.options,min=ref.min,max=ref.max,reverse=ref.reverse,startAngle=ref.startAngle,endAngle=ref.endAngle,angle=endAngle-startAngle;return(reverse?endAngle-(value-min)/(max-min)*angle:(value-min)/(max-min)*angle+startAngle)+180},RadialScale.prototype.hasRanges=function hasRanges(){var ranges=this.options.ranges;return ranges&&ranges.length},RadialScale.prototype.ticksSize=function ticksSize(){var ref=this.options,majorTicks=ref.majorTicks,minorTicks=ref.minorTicks,size=0;return majorTicks.visible&&(size=majorTicks.size),minorTicks.visible&&(size=Math.max(minorTicks.size,size)),size},RadialScale.prototype.labelsCount=function labelsCount(){var count=NumericAxis.prototype.labelsCount.call(this),options=this.options;return options.endAngle-options.startAngle>=360&&options.max%options.majorUnit===0&&(count-=1),count},RadialScale.prototype.renderLabels=function renderLabels(){var options=this.options,arc=this.arc.clone(),radius=arc.getRadiusX(),tickAngles=this.tickAngles(arc,options.majorUnit),rangeSize=options.rangeSize=options.rangeSize||.1*radius,labelsGroup=new radial_scale_Group,rangeDistance=.05*radius;drawing_utils_defined(options.rangeDistance)?rangeDistance=options.rangeDistance:options.rangeDistance=rangeDistance;var labelsOptions=options.labels,isInside="inside"===labelsOptions.position,hasLabelElements=drawing_utils_defined(this.labelElements);isInside&&(radius-=this.ticksSize(),this.hasRanges()&&!hasLabelElements&&(radius-=rangeSize+rangeDistance),arc.setRadiusX(radius).setRadiusY(radius));for(var labels=this.labels,count=labels.length,padding=getSpacing(labelsOptions.padding),paddingWidth=(padding.left+padding.right)/2,paddingHeight=(padding.top+padding.bottom)/2,i=0;i<count;i++){var label=labels[i],halfWidth=label.box.width()/2,halfHeight=label.box.height()/2,angle=tickAngles[i],labelAngle=(angle-180)*DEGREE,lp=arc.pointAt(angle),cx=lp.x+Math.cos(labelAngle)*(halfWidth+paddingWidth)*(isInside?1:-1),cy=lp.y+Math.sin(labelAngle)*(halfHeight+paddingHeight)*(isInside?1:-1);label.reflow(new core_box(cx-halfWidth,cy-halfHeight,cx+halfWidth,cy+halfHeight));var labelPos=new geometry_point.A(label.box.x1,label.box.y1),labelElement=void 0;if(hasLabelElements){var prevLabelPos=(labelElement=this.labelElements.children[i]).bbox().origin,labelTransform=labelElement.transform()||geometry_transform.A();labelTransform.translate(labelPos.x-prevLabelPos.x,labelPos.y-prevLabelPos.y),labelElement.transform(labelTransform)}else labelElement=buildLabelElement(label,options.labels),labelsGroup.append(labelElement);this.bbox=geometry_rect.A.union(this.bbox,labelElement.bbox())}return labelsGroup},RadialScale.prototype.repositionRanges=function repositionRanges(){var ranges=this.ranges.children;if(ranges.length>0){var ref=this.options,rangeDistance=ref.rangeDistance,rangeSize=ref.rangeSize,rangeRadius=this.getRangeRadius();"inside"===this.options.labels.position&&(rangeRadius+=rangeSize+rangeDistance);for(var newRadius=rangeRadius+rangeSize/2,i=0;i<ranges.length;i++)ranges[i]._geometry.setRadiusX(newRadius).setRadiusY(newRadius);this.bbox=geometry_rect.A.union(this.bbox,this.ranges.bbox())}},RadialScale.prototype.renderRanges=function renderRanges(){var segments=this.rangeSegments(),segmentsCount=segments.length,result=new radial_scale_Group;if(segmentsCount){var ref=this.options,rangeSize=ref.rangeSize,reverse=ref.reverse,rangeDistance=ref.rangeDistance,rangeRadius=this.getRangeRadius();this.radius(this.radius()-rangeSize-rangeDistance);for(var i=0;i<segmentsCount;i++){var segment=segments[i],from=this.slotAngle(segment[reverse?"to":"from"]),to=this.slotAngle(segment[reverse?"from":"to"]);to-from!==0&&result.append(this.createRange(from,to,rangeRadius,segment))}}return result},RadialScale.prototype.createRange=function createRange(startAngle,endAngle,rangeRadius,options){var rangeSize=this.options.rangeSize,rangeGeom=new geometry_arc.A(this.arc.center,{radiusX:rangeRadius+rangeSize/2,radiusY:rangeRadius+rangeSize/2,startAngle,endAngle});return new radial_scale_Arc(rangeGeom,{stroke:{width:rangeSize,color:options.color,opacity:options.opacity,lineCap:options.lineCap}})},RadialScale.prototype.rangeSegments=function rangeSegments(){var options=this.options,ranges=options.ranges||[],count=ranges.length,segments=[];if(count){var min=options.min,max=options.max,defaultColor=options.rangePlaceholderColor;segments.push(rangeSegment(min,max,defaultColor));for(var i=0;i<count;i++)for(var range=getRange(ranges[i],min,max),segmentsCount=segments.length,j=0;j<segmentsCount;j++){var segment=segments[j];if(segment.from<=range.from&&range.from<=segment.to){segments.push(rangeSegment(range.from,range.to,range.color,range.opacity)),segment.from<=range.to&&range.to<=segment.to&&segments.push(rangeSegment(range.to,segment.to,defaultColor,range.opacity)),segment.to=range.from;break}}}return segments},RadialScale.prototype.getRangeRadius=function getRangeRadius(){var arc=this.arc,options=this.options,rangeSize=options.rangeSize,rangeDistance=options.rangeDistance,majorTickSize=options.majorTicks.size;return"outside"===options.labels.position?arc.getRadiusX()-majorTickSize-rangeDistance-rangeSize:arc.getRadiusX()-rangeSize},RadialScale.prototype.renderArc=function renderArc(center,radius){var options=this.options;return this.arc=new geometry_arc.A(center,{radiusX:radius,radiusY:radius,startAngle:options.startAngle+180,endAngle:options.endAngle+180})},RadialScale.prototype.renderTicks=function renderTicks(){var arc=this.arc,options=this.options,tickArc=arc.clone();this.majorTickAngles=this.tickAngles(arc,options.majorUnit),this.majorTicks=drawTicks(tickArc,this.majorTickAngles,options.majorUnit,options.majorTicks);var allTicks=new radial_scale_Group;allTicks.append(this.majorTicks);var majorTickSize=options.majorTicks.size,minorTickSize=options.minorTicks.size;if(this._tickDifference=majorTickSize-minorTickSize,"outside"===options.labels.position){var radius=tickArc.getRadiusX();tickArc.setRadiusX(radius-majorTickSize+minorTickSize).setRadiusY(radius-majorTickSize+minorTickSize)}return this.minorTickAngles=this.normalizeTickAngles(this.tickAngles(arc,options.minorUnit)),this.minorTicks=drawTicks(tickArc,this.minorTickAngles,options.minorUnit,options.minorTicks),allTicks.append(this.minorTicks),allTicks},RadialScale.prototype.normalizeTickAngles=function normalizeTickAngles(angles){for(var options=this.options,skip=options.majorUnit/options.minorUnit,i=angles.length-1;i>=0;i--)i%skip===0&&angles.splice(i,1);return angles},RadialScale.prototype.tickAngles=function tickAngles(ring,stepValue){var options=this.options,reverse=options.reverse,range=options.max-options.min,angle=ring.endAngle-ring.startAngle,tickCount=range/stepValue,pos=ring.startAngle,step=angle/tickCount;reverse&&(pos+=angle,step=-step),angle>=360&&options.max%stepValue===0&&(tickCount-=1);for(var positions=[],i=0;i<tickCount;i++)positions.push(drawing_utils_round(pos,3)),pos+=step;return drawing_utils_round(pos)<=ring.endAngle&&positions.push(pos),positions},RadialScale.prototype.radius=function radius(value){if(!value)return this.arc.getRadiusX();this.arc.setRadiusX(value).setRadiusY(value),this.repositionTicks(this.majorTicks.children,this.majorTickAngles),this.repositionTicks(this.minorTicks.children,this.minorTickAngles,!0)},RadialScale.prototype.repositionTicks=function repositionTicks(ticks,tickAngles,minor){var diff=minor&&this._tickDifference||0,tickArc=this.arc,radius=tickArc.getRadiusX();minor&&"outside"===this.options.labels.position&&0!==diff&&(tickArc=this.arc.clone()).setRadiusX(radius-diff).setRadiusY(radius-diff);for(var i=0;i<ticks.length;i++){var newPoint=tickArc.pointAt(tickAngles[i]),segments=ticks[i].segments,xDiff=newPoint.x-segments[0].anchor().x,yDiff=newPoint.y-segments[0].anchor().y;ticks[i].transform((new geometry_transform.A).translate(xDiff,yDiff))}},RadialScale}(numeric_axis);setDefaultOptions(RadialScale,{min:0,max:100,majorTicks:{size:15,align:"inside",color:BLACK,width:.5,visible:!0},minorTicks:{size:10,align:"inside",color:BLACK,width:.5,visible:!0},startAngle:-30,endAngle:210,labels:{position:"inside",padding:2}});const radial_scale=RadialScale;var RadialPointerAnimation=function(superclass){function RadialPointerAnimation(element,options){superclass.call(this,element,options);var animationOptions=this.options;animationOptions.duration=Math.max(Math.abs(animationOptions.newAngle-animationOptions.oldAngle)/animationOptions.duration*1e3,1)}return superclass&&(RadialPointerAnimation.__proto__=superclass),RadialPointerAnimation.prototype=Object.create(superclass&&superclass.prototype),RadialPointerAnimation.prototype.constructor=RadialPointerAnimation,RadialPointerAnimation.prototype.step=function step(pos){var options=this.options,angle=interpolateValue(options.oldAngle,options.newAngle,pos);this.element.transform(geometry_transform.A().rotate(angle,options.center))},RadialPointerAnimation}(animation);setDefaultOptions(RadialPointerAnimation,{easing:"linear",duration:150}),animation_factory.current.register("radialPointer",RadialPointerAnimation);const radial_pointer_animation=RadialPointerAnimation;var Circle=shapes_circle.A,radial_pointer_Group=shapes_group.A,radial_pointer_Path=shapes_path.w,RadialPointer=function(Pointer){function RadialPointer(){Pointer.apply(this,arguments)}return Pointer&&(RadialPointer.__proto__=Pointer),RadialPointer.prototype=Object.create(Pointer&&Pointer.prototype),RadialPointer.prototype.constructor=RadialPointer,RadialPointer.prototype.setAngle=function setAngle(angle){this.elements.transform(geometry_transform.A().rotate(angle,this.center))},RadialPointer.prototype.repaint=function repaint(){var scale=this.scale,options=this.options,oldAngle=scale.slotAngle(options._oldValue),newAngle=scale.slotAngle(options.value);!1===options.animation.transitions?this.setAngle(newAngle):new radial_pointer_animation(this.elements,deepExtend(options.animation,{oldAngle,newAngle})).play()},RadialPointer.prototype.render=function render(){var scale=this.scale,options=this.options,elements=new radial_pointer_Group;return!1!==options.animation&&deepExtend(options.animation,{startAngle:0,center:scale.arc.center,reverse:scale.options.reverse}),elements.append(this._renderNeedle(),this._renderCap()),this.elements=elements,this.setAngle(DEGREE),elements},RadialPointer.prototype.reflow=function reflow(arc){var center=this.center=arc.center,length=limitValue(this.options.length||1,.1,1.5),radius=this.radius=arc.getRadiusX()*length,capSize=this.capSize=Math.round(radius*this.options.cap.size);this.bbox=geometry_rect.A.fromPoints(new geometry_point.A(center.x-capSize,center.y-capSize),new geometry_point.A(center.x+capSize,center.y+capSize))},RadialPointer.prototype._renderNeedle=function _renderNeedle(){var minorTickSize=this.scale.options.minorTicks.size,center=this.center,needleColor=this.options.color,needlePath=new radial_pointer_Path({fill:{color:needleColor},stroke:{color:needleColor,width:.5}});return needlePath.moveTo(center.x+this.radius-minorTickSize,center.y).lineTo(center.x,center.y-this.capSize/2).lineTo(center.x,center.y+this.capSize/2).close(),needlePath},RadialPointer.prototype._renderCap=function _renderCap(){var options=this.options,capColor=options.cap.color||options.color,circle=new geometry_circle.A(this.center,this.capSize);return new Circle(circle,{fill:{color:capColor},stroke:{color:capColor}})},RadialPointer}(pointer);setDefaultOptions(RadialPointer,{cap:{size:.05},arrow:{width:16,height:14},animation:{type:"radialPointer",duration:150}});const radial_pointer=RadialPointer;var radial_gauge_Group=shapes_group.A,RadialGauge=function(Gauge){function RadialGauge(){Gauge.apply(this,arguments)}return Gauge&&(RadialGauge.__proto__=Gauge),RadialGauge.prototype=Object.create(Gauge&&Gauge.prototype),RadialGauge.prototype.constructor=RadialGauge,RadialGauge.prototype.reflow=function reflow(bbox){var pointers=this.pointers;this.scale.reflow(bbox),this._initialPlotArea=this.scale.bbox;for(var i=0;i<pointers.length;i++)pointers[i].reflow(this.scale.arc),this._initialPlotArea=geometry_rect.A.union(this._initialPlotArea,pointers[i].bbox);this.fitScale(bbox),this.alignScale(bbox),this._buildVisual(this.gaugeArea,pointers,this.scale),this._draw()},RadialGauge.prototype._buildVisual=function _buildVisual(gaugeArea,pointers,scale){var visuals=this._visuals=new radial_gauge_Group;visuals.append(gaugeArea),visuals.append(scale.ticks),visuals.append(scale.ranges),this._buildPointers(pointers),visuals.append(scale.labelElements)},RadialGauge.prototype._buildPointers=function _buildPointers(pointers){for(var i=0;i<pointers.length;i++){var current=pointers[i];current.render(),this._visuals.append(current.elements),current.value(current.options.value)}},RadialGauge.prototype.fitScale=function fitScale(bbox){for(var minDiff,midDiff,maxDiff,mid,oldDiff,arc=this.scale.arc,plotAreaBox=this._initialPlotArea,step=Math.abs(this.getDiff(plotAreaBox,bbox)),min=drawing_utils_round(step,3),max=drawing_utils_round(-step,3),staleFlag=0,i=0;!(!(i++<100)||(staleFlag=oldDiff===maxDiff?staleFlag+1:0)>5||min!==mid&&0<=(minDiff=this.getPlotBox(min,bbox,arc))&&minDiff<=2||max!==mid&&0<=(maxDiff=this.getPlotBox(max,bbox,arc))&&maxDiff<=2||(mid=minDiff>0&&maxDiff>0?2*min:minDiff<0&&maxDiff<0?2*max:drawing_utils_round((min+max)/2||1,3),0<=(midDiff=this.getPlotBox(mid,bbox,arc))&&midDiff<=2));)oldDiff=maxDiff,midDiff>0?(max=mid,maxDiff=midDiff):(min=mid,minDiff=midDiff)},RadialGauge.prototype.getPlotBox=function getPlotBox(step,bbox,arc){var scale=this.scale,pointers=this.pointers,radius=arc.getRadiusX(),scaleArc=arc.clone();scaleArc.setRadiusX(radius+step).setRadiusY(radius+step),scale.arc=scaleArc,scale.reflow(bbox),this.plotBbox=scale.bbox;for(var i=0;i<pointers.length;i++)pointers[i].reflow(scaleArc),this.plotBbox=geometry_rect.A.union(this.plotBbox,pointers[i].bbox);return this.getDiff(this.plotBbox,bbox)},RadialGauge.prototype.getDiff=function getDiff(plotBox,box){return Math.min(box.width()-plotBox.width(),box.height()-plotBox.height())},RadialGauge.prototype.alignScale=function alignScale(bbox){var plotBoxCenter=this.plotBbox.center(),boxCenter=bbox.center(),paddingX=plotBoxCenter.x-boxCenter.x,paddingY=plotBoxCenter.y-boxCenter.y,scale=this.scale,pointers=this.pointers;scale.arc.center.x-=paddingX,scale.arc.center.y-=paddingY,scale.reflow(bbox);for(var i=0;i<pointers.length;i++)pointers[i].reflow(scale.arc),this.plotBbox=geometry_rect.A.union(scale.bbox,pointers[i].bbox)},RadialGauge.prototype._createModel=function _createModel(){var options=this.options,pointers=options.pointer,scale=this.scale=new radial_scale(options.scale,this.contextService);this.pointers=[];for(var pointersArr=isArray(pointers)?pointers:[pointers],i=0;i<pointersArr.length;i++){var current=new radial_pointer(scale,deepExtend({},pointersArr[i],{animation:{transitions:options.transitions}}));this.pointers.push(current)}},RadialGauge}(gauge);setDefaultOptions(RadialGauge,{transitions:!0,gaugeArea:{background:""}});const radial_gauge=RadialGauge;var ArcScale=function(RadialScale){function ArcScale(){RadialScale.apply(this,arguments)}return RadialScale&&(ArcScale.__proto__=RadialScale),ArcScale.prototype=Object.create(RadialScale&&RadialScale.prototype),ArcScale.prototype.constructor=ArcScale,ArcScale.prototype.rangeSegments=function rangeSegments(){var ref=this.options;return[{from:ref.min,to:ref.max,color:ref.rangePlaceholderColor,lineCap:ref.rangeLineCap}]},ArcScale.prototype.hasRanges=function hasRanges(){return!0},ArcScale.prototype.placeholderRangeAngle=function placeholderRangeAngle(angle){var geometry=this.ranges.children[0].geometry();this.options.reverse?geometry.setEndAngle(angle):geometry.setStartAngle(angle)},ArcScale.prototype.addRange=function addRange(from,to,options){var reverse=this.options.reverse,startAngle=this.slotAngle(reverse?to:from),endAngle=this.slotAngle(reverse?from:to),range=this.createRange(startAngle,endAngle,this.getRangeRadius(),options);return this.ranges.append(range),range},ArcScale}(radial_scale);setDefaultOptions(ArcScale,{min:0,max:100,majorTicks:{visible:!1},minorTicks:{visible:!1},labels:{visible:!1},startAngle:0,endAngle:180,rangeLineCap:"round"});const arc_scale=ArcScale;var RangePointerAnimation=function(superclass){function RangePointerAnimation(element,options){superclass.call(this,element,options);var animationOptions=this.options,duration=Math.abs(animationOptions.newAngle-animationOptions.oldAngle)/animationOptions.duration*1e3;animationOptions.duration=limitValue(duration,150,800);var startColor=element.elements.options.get("stroke.color"),color=element.currentColor();startColor!==color&&(this.startColor=new color_color.A(startColor),this.color=new color_color.A(color))}return superclass&&(RangePointerAnimation.__proto__=superclass),RangePointerAnimation.prototype=Object.create(superclass&&superclass.prototype),RangePointerAnimation.prototype.constructor=RangePointerAnimation,RangePointerAnimation.prototype.step=function step(pos){var options=this.options,startColor=this.startColor,color=this.color,angle=interpolateValue(options.oldAngle,options.newAngle,pos);if(this.element.angle(angle),color){var r=drawing_utils_round(interpolateValue(startColor.r,color.r,pos)),g=drawing_utils_round(interpolateValue(startColor.g,color.g,pos)),b=drawing_utils_round(interpolateValue(startColor.b,color.b,pos));this.element.stroke(new color_color.A(r,g,b).toHex())}},RangePointerAnimation}(animation);setDefaultOptions(RangePointerAnimation,{easing:"linear",duration:150}),animation_factory.current.register("radialRangePointer",RangePointerAnimation);const range_pointer_animation=RangePointerAnimation;var RangePointer=function(Pointer){function RangePointer(){Pointer.apply(this,arguments)}return Pointer&&(RangePointer.__proto__=Pointer),RangePointer.prototype=Object.create(Pointer&&Pointer.prototype),RangePointer.prototype.constructor=RangePointer,RangePointer.prototype.repaint=function repaint(){var scale=this.scale,options=this.options,oldAngle=scale.slotAngle(options._oldValue),newAngle=scale.slotAngle(options.value);this.animation&&this.animation.abort(),!1===options.animation.transitions?(this.angle(newAngle),this.stroke(this.currentColor())):(this.animation=new range_pointer_animation(this,deepExtend(options.animation,{oldAngle,newAngle})),this.animation.play())},RangePointer.prototype.angle=function angle(value){var geometry=this.elements.geometry();this.scale.options.reverse?geometry.setStartAngle(value):geometry.setEndAngle(value),this.scale.placeholderRangeAngle(value)},RangePointer.prototype.stroke=function stroke(value){this.elements.stroke(value)},RangePointer.prototype.render=function render(){if(!this.elements){var scale=this.scale,options=this.options;!1!==options.animation&&deepExtend(options.animation,{startAngle:0,center:scale.arc.center,reverse:scale.options.reverse}),this.elements=scale.addRange(scale.options.min,this.options.value,{color:this.currentColor(),opacity:options.opacity,lineCap:scale.options.rangeLineCap})}},RangePointer.prototype.currentColor=function currentColor(){var ref=this.scale.options,min=ref.min,max=ref.max,ref$1=this.options,colors=ref$1.colors,color=ref$1.color,value=ref$1.value,currentValue=isNumber(value)?value:min;if(colors)for(var idx=0;idx<colors.length;idx++){var ref$2=colors[idx],rangeColor=ref$2.color,from=ref$2.from;void 0===from&&(from=min);var to=ref$2.to;if(void 0===to&&(to=max),from<=currentValue&&currentValue<=to)return rangeColor}return color},RangePointer.prototype.reflow=function reflow(){this.render(),this.bbox=this.elements.bbox()},RangePointer}(pointer);setDefaultOptions(RangePointer,{animation:{type:"radialRangePointer",duration:150}});const range_pointer=RangePointer;var ArcGauge=function(RadialGauge){function ArcGauge(){RadialGauge.apply(this,arguments)}return RadialGauge&&(ArcGauge.__proto__=RadialGauge),ArcGauge.prototype=Object.create(RadialGauge&&RadialGauge.prototype),ArcGauge.prototype.constructor=ArcGauge,ArcGauge.prototype._initTheme=function _initTheme(theme){RadialGauge.prototype._initTheme.call(this,theme),this.options.color=this.options.color||(this.theme.pointer||{}).color},ArcGauge.prototype._createModel=function _createModel(){var options=this.options,scale=this.scale=new arc_scale(options.scale,this.contextService),pointer=new range_pointer(scale,deepExtend({},{colors:options.colors,color:options.color,value:options.value,opacity:options.opacity,animation:{transitions:options.transitions}}));this.pointers=[pointer]},ArcGauge.prototype._buildPointers=function _buildPointers(pointers){for(var i=0;i<pointers.length;i++){var current=pointers[i];current.render(),current.value(current.options.value)}},ArcGauge.prototype._setValueOptions=function _setValueOptions(value){this.options.value=value},ArcGauge.prototype.currentColor=function currentColor(){var pointer=this.pointers[0];if(pointer)return pointer.currentColor()},ArcGauge.prototype.centerLabelPosition=function centerLabelPosition(width,height){var size=this.getSize(),center=this.scale.arc.center,left=center.x-width/2,top=center.y-height/2;if(width<size.width){var right=left+width;left=Math.max(left,0),right>size.width&&(left-=right-size.width)}if(height<size.height){var bbox=this.scale.bbox,yLimit=bbox.bottomRight().y,bottom=top+height;top=Math.max(top,bbox.origin.y),bottom>yLimit&&(top-=bottom-yLimit)}return{left,top}},ArcGauge}(radial_gauge);const arc_gauge=ArcGauge;var CircularGauge=function(ArcGauge){function CircularGauge(){ArcGauge.apply(this,arguments)}return ArcGauge&&(CircularGauge.__proto__=ArcGauge),CircularGauge.prototype=Object.create(ArcGauge&&ArcGauge.prototype),CircularGauge.prototype.constructor=CircularGauge,CircularGauge.prototype._createModel=function _createModel(){var scaleOptions=this.options.scale;"number"!=typeof scaleOptions.startAngle&&(scaleOptions.startAngle=90),scaleOptions.endAngle=scaleOptions.startAngle+360,ArcGauge.prototype._createModel.call(this)},CircularGauge}(arc_gauge);const circular_gauge=CircularGauge;var Encoding=function(Class){function Encoding(options){Class.call(this),this.setOptions(options),this.initProperties()}return Class&&(Encoding.__proto__=Class),Encoding.prototype=Object.create(Class&&Class.prototype),Encoding.prototype.constructor=Encoding,Encoding.prototype.initProperties=function initProperties(){},Encoding.prototype.setOptions=function setOptions(options){this.options=Object.assign({},this.options,options),this.quietZoneLength=this.options.addQuietZone?2*this.options.quietZoneLength:0},Encoding.prototype.encode=function encode(value,width,height){var convertedValue=drawing_utils_defined(value)?String(value):value;return this.initValue(convertedValue,width,height),this.options.addQuietZone&&this.addQuietZone(),this.addData(),this.options.addQuietZone&&this.addQuietZone(),{baseUnit:this.baseUnit,pattern:this.pattern}},Encoding.prototype.initValue=function initValue(){},Encoding.prototype.addQuietZone=function addQuietZone(){this.pattern.push(this.options.quietZoneLength||10)},Encoding.prototype.addData=function addData(){},Encoding.prototype.invalidCharacterError=function invalidCharacterError(character){throw new Error('Character "'+character+'" is not valid for symbology '+this.name+".")},Encoding}(common_class.A);setDefaultOptions(Encoding,{quietZoneLength:10,addQuietZone:!0,addCheckSum:!0});var extend=Object.assign,Code11=function(Encoding){function Code11(){Encoding.apply(this,arguments)}return Encoding&&(Code11.__proto__=Encoding),Code11.prototype=Object.create(Encoding&&Encoding.prototype),Code11.prototype.constructor=Code11,Code11.prototype.initProperties=function initProperties(){Encoding.prototype.initProperties.call(this),extend(this,{name:"Code 11",characterMap:["111121","211121","121121","221111","112121","212111","122111","111221","211211","211111","112111"],cCheckSumTotal:10,kCheckSumTotal:9,kCheckSumMinLength:10,checkSumMod:11,DASH_VALUE:10,DASH:"-",START:"112211",STOP:"11221"})},Code11.prototype.initValue=function initValue(value,width){this.pattern=[],this.value=value,this.width=width,this.totalUnits=0},Code11.prototype.addData=function addData(){var value=this.value;this.addPattern(this.START);for(var i=0;i<value.length;i++)this.addCharacter(value.charAt(i));this.options.addCheckSum&&this.addCheckSum(),this.addPattern(this.STOP),this.setBaseUnit()},Code11.prototype.setBaseUnit=function setBaseUnit(){this.baseUnit=this.width/(this.totalUnits+this.quietZoneLength)},Code11.prototype.addCheckSum=function addCheckSum(){var value=this.value,length=value.length,cValue=this.getWeightedSum(value,length,this.cCheckSumTotal)%this.checkSumMod;if(this.checksum=String(cValue),this.addPattern(this.characterMap[cValue]),++length>=this.kCheckSumMinLength){var kValue=(cValue+this.getWeightedSum(value,length,this.kCheckSumTotal))%this.checkSumMod;this.checksum+=kValue,this.addPattern(this.characterMap[kValue])}},Code11.prototype.getWeightedSum=function getWeightedSum(value,length,total){for(var weightedSum=0,i=0;i<value.length;i++)weightedSum+=this.weightedValue(this.getValue(value.charAt(i)),length,i,total);return weightedSum},Code11.prototype.weightedValue=function weightedValue(value,length,index,total){return((length-index)%total||total)*value},Code11.prototype.getValue=function getValue(character){return isNaN(character)?(character!==this.DASH&&this.invalidCharacterError(character),this.DASH_VALUE):parseInt(character,10)},Code11.prototype.addCharacter=function addCharacter(character){var value=this.getValue(character),pattern=this.characterMap[value];this.addPattern(pattern)},Code11.prototype.addPattern=function addPattern(pattern){for(var value,i=0;i<pattern.length;i++)value=parseInt(pattern.charAt(i),10),this.pattern.push(value),this.totalUnits+=value},Code11}(Encoding);setDefaultOptions(Code11,{addCheckSum:!0});var code39_extend=Object.assign,Code39Base=function(Encoding){function Code39Base(){Encoding.apply(this,arguments)}return Encoding&&(Code39Base.__proto__=Encoding),Code39Base.prototype=Object.create(Encoding&&Encoding.prototype),Code39Base.prototype.constructor=Code39Base,Code39Base.prototype.initProperties=function initProperties(){Encoding.prototype.initProperties.call(this),code39_extend(this,{minBaseUnitLength:.7})},Code39Base.prototype.addData=function addData(){var value=this.value;this.addStart();for(var idx=0;idx<value.length;idx++)this.addCharacter(value.charAt(idx));this.options.addCheckSum&&this.pushCheckSum(),this.addStop(),this.prepareValues()},Code39Base.prototype.addCharacter=function addCharacter(character){var characterData=this.characterMap[character];characterData||this.invalidCharacterError(character),this.addBase(characterData)},Code39Base.prototype.addBase=function addBase(){},Code39Base}(Encoding),Code39=function(Code39Base){function Code39(){Code39Base.apply(this,arguments)}return Code39Base&&(Code39.__proto__=Code39Base),Code39.prototype=Object.create(Code39Base&&Code39Base.prototype),Code39.prototype.constructor=Code39,Code39.prototype.initProperties=function initProperties(){Code39Base.prototype.initProperties.call(this),code39_extend(this,{name:"Code 39",checkSumMod:43,minRatio:2.5,maxRatio:3,gapWidth:1,splitCharacter:"|",patternMappings:{b:"1|",w:"1|",B:"ratio|",W:"ratio|"},characterMap:{0:{pattern:"bwbWBwBwb",value:0},1:{pattern:"BwbWbwbwB",value:1},2:{pattern:"bwBWbwbwB",value:2},3:{pattern:"BwBWbwbwb",value:3},4:{pattern:"bwbWBwbwB",value:4},5:{pattern:"BwbWBwbwb",value:5},6:{pattern:"bwBWBwbwb",value:6},7:{pattern:"bwbWbwBwB",value:7},8:{pattern:"BwbWbwBwb",value:8},9:{pattern:"bwBWbwBwb",value:9},A:{pattern:"BwbwbWbwB",value:10},B:{pattern:"bwBwbWbwB",value:11},C:{pattern:"BwBwbWbwb",value:12},D:{pattern:"bwbwBWbwB",value:13},E:{pattern:"BwbwBWbwb",value:14},F:{pattern:"bwBwBWbwb",value:15},G:{pattern:"bwbwbWBwB",value:16},H:{pattern:"BwbwbWBwb",value:17},I:{pattern:"bwBwbWBwb",value:18},J:{pattern:"bwbwBWBwb",value:19},K:{pattern:"BwbwbwbWB",value:20},L:{pattern:"bwBwbwbWB",value:21},M:{pattern:"BwBwbwbWb",value:22},N:{pattern:"bwbwBwbWB",value:23},O:{pattern:"BwbwBwbWb",value:24},P:{pattern:"bwBwBwbWb",value:25},Q:{pattern:"bwbwbwBWB",value:26},R:{pattern:"BwbwbwBWb",value:27},S:{pattern:"bwBwbwBWb",value:28},T:{pattern:"bwbwBwBWb",value:29},U:{pattern:"BWbwbwbwB",value:30},V:{pattern:"bWBwbwbwB",value:31},W:{pattern:"BWBwbwbwb",value:32},X:{pattern:"bWbwBwbwB",value:33},Y:{pattern:"BWbwBwbwb",value:34},Z:{pattern:"bWBwBwbwb",value:35},"-":{pattern:"bWbwbwBwB",value:36},".":{pattern:"BWbwbwBwb",value:37}," ":{pattern:"bWBwbwBwb",value:38},$:{pattern:"bWbWbWbwb",value:39},"/":{pattern:"bWbWbwbWb",value:40},"+":{pattern:"bWbwbWbWb",value:41},"%":{pattern:"bwbWbWbWb",value:42},START:{pattern:"bWbwBwBwb"}}})},Code39.prototype.initValue=function initValue(value,width,height){this.width=width,this.height=height,this.value=value,this.dataLength=value.length,this.pattern=[],this.patternString=""},Code39.prototype.prepareValues=function prepareValues(){var baseUnit,minBaseUnit=this.minBaseUnitLength,minRatio=this.minRatio,minHeight=Math.ceil(Math.max(.15*this.width,24)),ratio=this.maxRatio;if(this.height<minHeight)throw new Error("Insufficient height for Code39 encoding: the current height is "+this.height+"px and the minimum height is "+minHeight+"px.");for(baseUnit=this.getBaseUnit(ratio);baseUnit<minBaseUnit&&ratio>minRatio;)ratio=parseFloat((ratio-.1).toFixed(1)),baseUnit=this.getBaseUnit(ratio);if(baseUnit<minBaseUnit){var minWidth=Math.ceil(this.getBaseWidth(minRatio)*minBaseUnit);throw new Error("Insufficient width for Code39 encoding: the current width is "+this.width+'px and the minimum width for value "'+this.value+'" is '+minWidth+"px.")}this.ratio=ratio,this.baseUnit=baseUnit,this.patternString=this.patternString.substring(0,this.patternString.length-1),this.pattern=this.pattern.concat(this.patternString.replace(/ratio/g,ratio).split(this.splitCharacter))},Code39.prototype.getBaseUnit=function getBaseUnit(ratio){return this.width/this.getBaseWidth(ratio)},Code39.prototype.getBaseWidth=function getBaseWidth(ratio){var characterLength=3*(ratio+2);return this.quietZoneLength+characterLength*(this.dataLength+2)+this.gapWidth*(this.dataLength+1)},Code39.prototype.addStart=function addStart(){this.addPattern(this.characterMap.START.pattern),this.addCharacterGap()},Code39.prototype.addBase=function addBase(character){this.addPattern(character.pattern),this.addCharacterGap()},Code39.prototype.addStop=function addStop(){this.addPattern(this.characterMap.START.pattern)},Code39.prototype.addPattern=function addPattern(pattern){for(var i=0;i<pattern.length;i++)this.patternString+=this.patternMappings[pattern.charAt(i)]},Code39.prototype.addCharacterGap=function addCharacterGap(){this.patternString+=this.gapWidth+this.splitCharacter},Code39}(Code39Base);setDefaultOptions(Code39,{addCheckSum:!1});var Code39ExtendedBase={addCharacter:function addCharacter(character){this.characterMap[character]?this.addBase(this.characterMap[character]):character.charCodeAt(0)>127?this.invalidCharacterError(character):this.addExtended(character.charCodeAt(0))},addExtended:function addExtended(code){for(var patterns,i=0;i<this.extendedMappings.length;i++)if(patterns=this.extendedMappings[i].call(this,code)){for(var patternIndex=0;patternIndex<patterns.length;patternIndex++){var pattern=patterns[patternIndex];this.addBase(pattern)}return void(this.dataLength+=patterns.length-1)}},extendedMappings:[function(code){if(97<=code&&code<=122)return[this.characterMap[this.shiftCharacters[0]],this.characterMap[String.fromCharCode(code-32)]]},function(code){if(33<=code&&code<=58)return[this.characterMap[this.shiftCharacters[1]],this.characterMap[String.fromCharCode(code+32)]]},function(code){if(1<=code&&code<=26)return[this.characterMap[this.shiftCharacters[2]],this.characterMap[String.fromCharCode(code+64)]]},function(code){var result,dataCharacter;if(this.specialAsciiCodes[code]){result=[];for(var i=0;i<this.specialAsciiCodes[code].length;i++)result.push(this.characterMap[this.shiftCharacters[3]]),result.push(this.characterMap[this.specialAsciiCodes[code][i]])}else dataCharacter=6*Math.floor(code/32)+(code-27)%32+64,result=[this.characterMap[this.shiftCharacters[3]],this.characterMap[String.fromCharCode(dataCharacter)]];return result}],specialAsciiCodes:{0:["U"],64:["V"],96:["W"],127:["T","X","Y","Z"]},shiftValuesAsciiCodes:{39:36,40:47,41:43,42:37},characterMap:{"+":!1,"/":!1,$:!1,"%":!1},shiftCharacters:["SHIFT0","SHIFT1","SHIFT2","SHIFT3"]},Code39Extended=function(Code39){function Code39Extended(){Code39.apply(this,arguments)}return Code39&&(Code39Extended.__proto__=Code39),Code39Extended.prototype=Object.create(Code39&&Code39.prototype),Code39Extended.prototype.constructor=Code39Extended,Code39Extended.prototype.initProperties=function initProperties(){Code39.prototype.initProperties.call(this),deepExtend(this,Code39ExtendedBase,{name:"Code 39 extended",characterMap:{SHIFT0:{pattern:"bWbwbWbWb",value:41},SHIFT1:{pattern:"bWbWbwbWb",value:40},SHIFT2:{pattern:"bWbWbWbwb",value:39},SHIFT3:{pattern:"bwbWbWbWb",value:42}}})},Code39Extended}(Code39),code93_extend=Object.assign,Code93=function(Code39Base){function Code93(){Code39Base.apply(this,arguments)}return Code39Base&&(Code93.__proto__=Code39Base),Code93.prototype=Object.create(Code39Base&&Code39Base.prototype),Code93.prototype.constructor=Code93,Code93.prototype.initProperties=function initProperties(){Code39Base.prototype.initProperties.call(this),code93_extend(this,{name:"Code 93",cCheckSumTotal:20,kCheckSumTotal:15,checkSumMod:47,characterMap:{0:{pattern:"131112",value:0},1:{pattern:"111213",value:1},2:{pattern:"111312",value:2},3:{pattern:"111411",value:3},4:{pattern:"121113",value:4},5:{pattern:"121212",value:5},6:{pattern:"121311",value:6},7:{pattern:"111114",value:7},8:{pattern:"131211",value:8},9:{pattern:"141111",value:9},A:{pattern:"211113",value:10},B:{pattern:"211212",value:11},C:{pattern:"211311",value:12},D:{pattern:"221112",value:13},E:{pattern:"221211",value:14},F:{pattern:"231111",value:15},G:{pattern:"112113",value:16},H:{pattern:"112212",value:17},I:{pattern:"112311",value:18},J:{pattern:"122112",value:19},K:{pattern:"132111",value:20},L:{pattern:"111123",value:21},M:{pattern:"111222",value:22},N:{pattern:"111321",value:23},O:{pattern:"121122",value:24},P:{pattern:"131121",value:25},Q:{pattern:"212112",value:26},R:{pattern:"212211",value:27},S:{pattern:"211122",value:28},T:{pattern:"211221",value:29},U:{pattern:"221121",value:30},V:{pattern:"222111",value:31},W:{pattern:"112122",value:32},X:{pattern:"112221",value:33},Y:{pattern:"122121",value:34},Z:{pattern:"123111",value:35},"-":{pattern:"121131",value:36},".":{pattern:"311112",value:37}," ":{pattern:"311211",value:38},$:{pattern:"321111",value:39},"/":{pattern:"112131",value:40},"+":{pattern:"113121",value:41},"%":{pattern:"211131",value:42},SHIFT0:{pattern:"122211",value:46},SHIFT1:{pattern:"311121",value:45},SHIFT2:{pattern:"121221",value:43},SHIFT3:{pattern:"312111",value:44},START:{pattern:"111141"},TERMINATION_BAR:"1"}})},Code93.prototype.initValue=function initValue(value,width,height){this.value=value,this.width=width,this.height=height,this.pattern=[],this.values=[],this.dataLength=value.length},Code93.prototype.prepareValues=function prepareValues(){var minHeight=Math.ceil(Math.max(.15*this.width,24));if(this.height<minHeight)throw new Error("Insufficient height for Code93 encoding: the current height is "+this.height+"px, the minimum required height is "+minHeight+"px.");if(this.setBaseUnit(),this.baseUnit<this.minBaseUnitLength){var minWidth=Math.ceil(this.minBaseUnitLength*(this.width/this.baseUnit));throw new Error("Insufficient width for Code93 encoding: the current width is "+this.width+'px and the minimum required width for value "'+this.value+'" is '+minWidth+"px.")}},Code93.prototype.setBaseUnit=function setBaseUnit(){this.baseUnit=this.width/(9*(this.dataLength+2+2)+this.quietZoneLength+1)},Code93.prototype.addStart=function addStart(){var pattern=this.characterMap.START.pattern;this.addPattern(pattern)},Code93.prototype.addStop=function addStop(){this.addStart(),this.pattern.push(this.characterMap.TERMINATION_BAR)},Code93.prototype.addBase=function addBase(charData){this.addPattern(charData.pattern),this.values.push(charData.value)},Code93.prototype.pushCheckSum=function pushCheckSum(){var charData,checkValues=this._getCheckValues();this.checksum=checkValues.join("");for(var i=0;i<checkValues.length;i++)charData=this.characterMap[this._findCharacterByValue(checkValues[i])],this.addPattern(charData.pattern)},Code93.prototype._getCheckValues=function _getCheckValues(){var cValue,idx,values=this.values,length=values.length,wightedSum=0;for(idx=length-1;idx>=0;idx--)wightedSum+=this.weightedValue(values[idx],length-idx,this.cCheckSumTotal);for(cValue=wightedSum%this.checkSumMod,wightedSum=this.weightedValue(cValue,1,this.kCheckSumTotal),idx=length-1;idx>=0;idx--)wightedSum+=this.weightedValue(values[idx],length-idx+1,this.kCheckSumTotal);return[cValue,wightedSum%this.checkSumMod]},Code93.prototype._findCharacterByValue=function _findCharacterByValue(value){for(var character in this.characterMap)if(this.characterMap[character].value===value)return character},Code93.prototype.weightedValue=function weightedValue(value,index,total){return(index%total||total)*value},Code93.prototype.addPattern=function addPattern(pattern){for(var value,i=0;i<pattern.length;i++)value=parseInt(pattern.charAt(i),10),this.pattern.push(value)},Code93}(Code39Base),Code93Extended=function(Code93){function Code93Extended(){Code93.apply(this,arguments)}return Code93&&(Code93Extended.__proto__=Code93),Code93Extended.prototype=Object.create(Code93&&Code93.prototype),Code93Extended.prototype.constructor=Code93Extended,Code93Extended.prototype.initProperties=function initProperties(){Code93.prototype.initProperties.call(this),deepExtend(this,Code39ExtendedBase,{name:"Code 93 extended",pushCheckSum:function(){var value,checkValues=this._getCheckValues();this.checksum=checkValues.join("");for(var i=0;i<checkValues.length;i++)if(value=checkValues[i],this.shiftValuesAsciiCodes[value])this.addExtended(this.shiftValuesAsciiCodes[value]);else{var characterByValue=this._findCharacterByValue(value);this.addPattern(this.characterMap[characterByValue].pattern)}}})},Code93Extended}(Code93),numberRegex=/^\d+$/,postnet_extend=Object.assign,Postnet=function(Encoding){function Postnet(){Encoding.apply(this,arguments)}return Encoding&&(Postnet.__proto__=Encoding),Postnet.prototype=Object.create(Encoding&&Encoding.prototype),Postnet.prototype.constructor=Postnet,Postnet.prototype.initProperties=function initProperties(){Encoding.prototype.initProperties.call(this),postnet_extend(this,{name:"Postnet",START:"2",VALID_CODE_LENGTHS:[5,9,11],DIGIT_SEPARATOR:"-",characterMap:["22111","11122","11212","11221","12112","12121","12211","21112","21121","21211"]})},Postnet.prototype.initValue=function initValue(value,width,height){this.height=height,this.width=width,this.baseHeight=height/2,this.value=value.replace(new RegExp(this.DIGIT_SEPARATOR,"g"),""),this.pattern=[],this.validate(this.value),this.checkSum=0,this.setBaseUnit()},Postnet.prototype.addData=function addData(){var value=this.value;this.addPattern(this.START);for(var i=0;i<value.length;i++)this.addCharacter(value.charAt(i));this.options.addCheckSum&&this.addCheckSum(),this.addPattern(this.START),this.pattern.pop()},Postnet.prototype.addCharacter=function addCharacter(character){var pattern=this.characterMap[character];this.checkSum+=parseInt(character,10),this.addPattern(pattern)},Postnet.prototype.addCheckSum=function addCheckSum(){this.checksum=(10-this.checkSum%10)%10,this.addCharacter(this.checksum)},Postnet.prototype.setBaseUnit=function setBaseUnit(){this.baseUnit=this.width/(10*(this.value.length+1)+3+this.quietZoneLength)},Postnet.prototype.validate=function validate(value){if(numberRegex.test(value)||this.invalidCharacterError(value.match(/[^0-9]/)[0]),!inArray(value.length,this.VALID_CODE_LENGTHS))throw new Error("Invalid value length. Valid lengths for the Postnet symbology are "+this.VALID_CODE_LENGTHS.join(",")+".")},Postnet.prototype.addPattern=function addPattern(pattern){for(var y1,i=0;i<pattern.length;i++)y1=this.height-this.baseHeight*pattern.charAt(i),this.pattern.push({width:1,y1,y2:this.height}),this.pattern.push(1)},Postnet}(Encoding),code128_numberRegex=/^\d+$/,alphanumericRegex=/^[a-z0-9]+$/i,code128_extend=Object.assign,State128=function(Class){function State128(encoding){Class.call(this),this.encoding=encoding,this.initProperties()}return Class&&(State128.__proto__=Class),State128.prototype=Object.create(Class&&Class.prototype),State128.prototype.constructor=State128,State128.prototype.initProperties=function initProperties(){},State128.prototype.addStart=function addStart(){},State128.prototype.is=function is(){},State128.prototype.isCode=function isCode(){return!1},State128.prototype.move=function move(){},State128.prototype.pushState=function pushState(){},State128}(common_class.A),State128AB=function(State128){function State128AB(encoding,states){State128.call(this,encoding),this.states=states,this._initMoves(states)}return State128&&(State128AB.__proto__=State128),State128AB.prototype=Object.create(State128&&State128.prototype),State128AB.prototype.constructor=State128AB,State128AB.prototype.initProperties=function initProperties(){State128.prototype.initProperties.call(this),deepExtend(this,{FNC4:"FNC4",SHIFT:98})},State128AB.prototype.addStart=function addStart(){this.encoding.addPattern(this.START)},State128AB.prototype.is=function is(value,index){var code=value.charCodeAt(index);return this.isCode(code)},State128AB.prototype.move=function move(encodingState){for(var idx=0;!this._moves[idx].call(this,encodingState)&&idx<this._moves.length;)idx++},State128AB.prototype.pushState=function pushState(encodingState){var code,states=this.states,value=encodingState.value,maxLength=value.length;if(inArray("C",states)){var numberMatch=value.substr(encodingState.index).match(/\d{4,}/g);numberMatch&&(maxLength=value.indexOf(numberMatch[0],encodingState.index))}for(;(code=encodingState.value.charCodeAt(encodingState.index))>=0&&this.isCode(code)&&encodingState.index<maxLength;)this.encoding.addPattern(this.getValue(code)),encodingState.index++},State128AB.prototype._initMoves=function _initMoves(states){this._moves=[],inArray(this.FNC4,states)&&this._moves.push(this._moveFNC),inArray(this.shiftKey,states)&&this._moves.push(this._shiftState),this._moves.push(this._moveState)},State128AB.prototype._moveFNC=function _moveFNC(encodingState){if(encodingState.fnc)return encodingState.fnc=!1,encodingState.previousState===this.key},State128AB.prototype._shiftState=function _shiftState(encodingState){if(encodingState.previousState===this.shiftKey&&(encodingState.index+1>=encodingState.value.length||this.encoding[this.shiftKey].is(encodingState.value,encodingState.index+1)))return this.encoding.addPattern(this.SHIFT),encodingState.shifted=!0,!0},State128AB.prototype._moveState=function _moveState(){return this.encoding.addPattern(this.MOVE),!0},State128AB}(State128),states128={};states128.A=function(State128AB){function State128A(){State128AB.apply(this,arguments)}return State128AB&&(State128A.__proto__=State128AB),State128A.prototype=Object.create(State128AB&&State128AB.prototype),State128A.prototype.constructor=State128A,State128A.prototype.initProperties=function initProperties(){State128AB.prototype.initProperties.call(this),code128_extend(this,{key:"A",shiftKey:"B",MOVE:101,START:103})},State128A.prototype.isCode=function isCode(code){return 0<=code&&code<96},State128A.prototype.getValue=function getValue(code){return code<32?code+64:code-32},State128A}(State128AB),states128.B=function(State128AB){function State128B(){State128AB.apply(this,arguments)}return State128AB&&(State128B.__proto__=State128AB),State128B.prototype=Object.create(State128AB&&State128AB.prototype),State128B.prototype.constructor=State128B,State128B.prototype.initProperties=function initProperties(){State128AB.prototype.initProperties.call(this),code128_extend(this,{key:"B",shiftKey:"A",MOVE:100,START:104})},State128B.prototype.isCode=function isCode(code){return 32<=code&&code<128},State128B.prototype.getValue=function getValue(code){return code-32},State128B}(State128AB),states128.C=function(State128){function State128C(){State128.apply(this,arguments)}return State128&&(State128C.__proto__=State128),State128C.prototype=Object.create(State128&&State128.prototype),State128C.prototype.constructor=State128C,State128C.prototype.initProperties=function initProperties(){State128.prototype.initProperties.call(this),code128_extend(this,{key:"C",MOVE:99,START:105})},State128C.prototype.addStart=function addStart(){this.encoding.addPattern(this.START)},State128C.prototype.is=function is(value,index){var next4=getSubstring(value,index,4);return(index+4<=value.length||2===value.length)&&code128_numberRegex.test(next4)},State128C.prototype.move=function move(){this.encoding.addPattern(this.MOVE)},State128C.prototype.pushState=function pushState(encodingState){for(var code;(code=getSubstring(encodingState.value,encodingState.index,2))&&code128_numberRegex.test(code)&&2===code.length;)this.encoding.addPattern(parseInt(code,10)),encodingState.index+=2},State128C.prototype.getValue=function getValue(code){return code},State128C}(State128),states128.FNC4=function(State128){function State128FNC4(encoding,states){State128.call(this,encoding),this._initSubStates(states)}return State128&&(State128FNC4.__proto__=State128),State128FNC4.prototype=Object.create(State128&&State128.prototype),State128FNC4.prototype.constructor=State128FNC4,State128FNC4.prototype.initProperties=function initProperties(){State128.prototype.initProperties.call(this),code128_extend(this,{key:"FNC4",dependentStates:["A","B"]})},State128FNC4.prototype.addStart=function addStart(encodingState){var code=encodingState.value.charCodeAt(0)-128,subState=this._getSubState(code);this.encoding[subState].addStart()},State128FNC4.prototype.is=function is(value,index){var code=value.charCodeAt(index);return this.isCode(code)},State128FNC4.prototype.isCode=function isCode(code){return 128<=code&&code<256},State128FNC4.prototype.pushState=function pushState(encodingState){var code,subState=this._initSubState(encodingState),encoding=this.encoding,length=subState.value.length;if(encodingState.index+=length,length<3)for(;subState.index<length;subState.index++)code=subState.value.charCodeAt(subState.index),subState.state=this._getSubState(code),subState.previousState!==subState.state&&(subState.previousState=subState.state,encoding[subState.state].move(subState)),encoding.addPattern(encoding[subState.state].MOVE),encoding.addPattern(encoding[subState.state].getValue(code));else subState.state!==subState.previousState&&encoding[subState.state].move(subState),this._pushStart(subState),encoding.pushData(subState,this.subStates),encodingState.index<encodingState.value.length&&this._pushStart(subState);encodingState.fnc=!0,encodingState.state=subState.state},State128FNC4.prototype._pushStart=function _pushStart(subState){this.encoding.addPattern(this.encoding[subState.state].MOVE),this.encoding.addPattern(this.encoding[subState.state].MOVE)},State128FNC4.prototype._initSubState=function _initSubState(encodingState){var subState={value:this._getAll(encodingState.value,encodingState.index),index:0};return subState.state=this._getSubState(subState.value.charCodeAt(0)),subState.previousState=encodingState.previousState===this.key?subState.state:encodingState.previousState,subState},State128FNC4.prototype._initSubStates=function _initSubStates(states){this.subStates=[];for(var i=0;i<states.length;i++)inArray(states[i],this.dependentStates)&&this.subStates.push(states[i])},State128FNC4.prototype._getSubState=function _getSubState(code){for(var i=0;i<this.subStates.length;i++)if(this.encoding[this.subStates[i]].isCode(code))return this.subStates[i]},State128FNC4.prototype._getAll=function _getAll(value,index){for(var code,result="",i=index;(code=value.charCodeAt(i++))&&this.isCode(code);)result+=String.fromCharCode(code-128);return result},State128FNC4}(State128),states128.FNC1=function(State128){function States128FNC1(encoding,states){State128.call(this,encoding),this.states=states}return State128&&(States128FNC1.__proto__=State128),States128FNC1.prototype=Object.create(State128&&State128.prototype),States128FNC1.prototype.constructor=States128FNC1,States128FNC1.prototype.initProperties=function initProperties(){State128.prototype.initProperties.call(this),code128_extend(this,{key:"FNC1",startState:"C",startAI:"(",endAI:")",dependentStates:["C","B"],applicationIdentifiers:{22:{max:29,type:"alphanumeric"},402:{length:17},7004:{max:4,type:"alphanumeric"},242:{max:6,type:"alphanumeric"},8020:{max:25,type:"alphanumeric"},703:{min:3,max:30,type:"alphanumeric"},8008:{min:8,max:12,type:"alphanumeric"},253:{min:13,max:17,type:"alphanumeric"},8003:{min:14,max:30,type:"alphanumeric"},multiKey:[{ids:["15","17","8005","8100"],ranges:[[11,13],[310,316],[320,336],[340,369]],type:{length:6}},{ids:["240","241","250","251","400","401","403","7002","8004","8007","8110"],ranges:[[-9]],type:{max:30,type:"alphanumeric"}},{ids:["7001"],ranges:[[410,414]],type:{length:13}},{ids:["10","21","254","420","8002"],type:{max:20,type:"alphanumeric"}},{ids:["00","8006","8017","8018"],type:{length:18}},{ids:["01","02","8001"],type:{length:14}},{ids:["422"],ranges:[[424,426]],type:{length:3}},{ids:["20","8102"],type:{length:2}},{ids:["30","37"],type:{max:8,type:"alphanumeric"}},{ids:["390","392"],type:{max:15,type:"alphanumeric"}},{ids:["421","423"],type:{min:3,max:15,type:"alphanumeric"}},{ids:["391","393"],type:{min:3,max:18,type:"alphanumeric"}},{ids:["7003","8101"],type:{length:10}}]},START:102})},States128FNC1.prototype.addStart=function addStart(){this.encoding[this.startState].addStart()},States128FNC1.prototype.is=function is(){return inArray(this.key,this.states)},States128FNC1.prototype.pushState=function pushState(encodingState){var current,nextStart,separatorLength,encoding=this.encoding,value=encodingState.value.replace(/\s/g,""),regexSeparators=new RegExp("["+this.startAI+this.endAI+"]","g"),index=encodingState.index,subState={state:this.startState};encoding.addPattern(this.START);for(;;){if(subState.index=0,(current=(separatorLength=value.charAt(index)===this.startAI?2:0)>0?this.getBySeparator(value,index):this.getByLength(value,index)).ai.length)nextStart=index+separatorLength+current.id.length+current.ai.length;else if((nextStart=value.indexOf(this.startAI,index+1))<0){if(index+current.ai.max+current.id.length+separatorLength<value.length)throw new Error("Separators are required after variable length identifiers");nextStart=value.length}if(subState.value=value.substring(index,nextStart).replace(regexSeparators,""),this.validate(current,subState.value),encoding.pushData(subState,this.dependentStates),nextStart>=value.length)break;index=nextStart,subState.state!==this.startState&&(encoding[this.startState].move(subState),subState.state=this.startState),current.ai.length||encoding.addPattern(this.START)}encodingState.index=encodingState.value.length},States128FNC1.prototype.validate=function validate(current,value){var code=value.substr(current.id.length),ai=current.ai;if(!ai.type&&!code128_numberRegex.test(code))throw new Error("Application identifier "+current.id+" is numeric only but contains non numeric character(s).");if("alphanumeric"===ai.type&&!alphanumericRegex.test(code))throw new Error("Application identifier "+current.id+" is alphanumeric only but contains non alphanumeric character(s).");if(ai.length&&ai.length!==code.length)throw new Error("Application identifier "+current.id+" must be "+ai.length+" characters long.");if(ai.min&&ai.min>code.length)throw new Error("Application identifier "+current.id+" must be at least "+ai.min+" characters long.");if(ai.max&&ai.max<code.length)throw new Error("Application identifier "+current.id+" must be at most "+ai.max+" characters long.")},States128FNC1.prototype.getByLength=function getByLength(value,index){for(var id,applicationIdentifier,i=2;i<=4;i++)if(id=getSubstring(value,index,i),applicationIdentifier=this.getApplicationIdentifier(id)||this.getApplicationIdentifier(id.substring(0,id.length-1)))return{id,ai:applicationIdentifier};this.unsupportedAIError(id)},States128FNC1.prototype.unsupportedAIError=function unsupportedAIError(id){throw new Error("'"+id+"' is not a supported Application Identifier")},States128FNC1.prototype.getBySeparator=function getBySeparator(value,index){var start=value.indexOf(this.startAI,index),end=value.indexOf(this.endAI,start),id=value.substring(start+1,end),ai=this.getApplicationIdentifier(id)||this.getApplicationIdentifier(id.substr(id.length-1));return ai||this.unsupportedAIError(id),{ai,id}},States128FNC1.prototype.getApplicationIdentifier=function getApplicationIdentifier(id){var applicationIdentifier=this.applicationIdentifiers,multiKey=applicationIdentifier.multiKey;if(applicationIdentifier[id])return applicationIdentifier[id];for(var i=0;i<multiKey.length;i++){if(multiKey[i].ids&&inArray(id,multiKey[i].ids))return multiKey[i].type;if(multiKey[i].ranges)for(var ranges=multiKey[i].ranges,j=0;j<ranges.length;j++)if(ranges[j][0]<=id&&id<=ranges[j][1])return multiKey[i].type}},States128FNC1}(State128);var Code128Base=function(Encoding){function Code128Base(options){Encoding.call(this,options),this._initStates()}return Encoding&&(Code128Base.__proto__=Encoding),Code128Base.prototype=Object.create(Encoding&&Encoding.prototype),Code128Base.prototype.constructor=Code128Base,Code128Base.prototype.initProperties=function initProperties(){Encoding.prototype.initProperties.call(this),code128_extend(this,{characterMap:[212222,222122,222221,121223,121322,131222,122213,122312,132212,221213,221312,231212,112232,122132,122231,113222,123122,123221,223211,221132,221231,213212,223112,312131,311222,321122,321221,312212,322112,322211,212123,212321,232121,111323,131123,131321,112313,132113,132311,211313,231113,231311,112133,112331,132131,113123,113321,133121,313121,211331,231131,213113,213311,213131,311123,311321,331121,312113,312311,332111,314111,221411,431111,111224,111422,121124,121421,141122,141221,112214,112412,122114,122411,142112,142211,241211,221114,413111,241112,134111,111242,121142,121241,114212,124112,124211,411212,421112,421211,212141,214121,412121,111143,111341,131141,114113,114311,411113,411311,113141,114131,311141,411131,211412,211214,211232,2331112],STOP:106})},Code128Base.prototype._initStates=function _initStates(){for(var i=0;i<this.states.length;i++)this[this.states[i]]=new states128[this.states[i]](this,this.states)},Code128Base.prototype.initValue=function initValue(value,width,height){this.pattern=[],this.value=value,this.width=width,this.height=height,this.checkSum=0,this.totalUnits=0,this.index=0,this.position=1},Code128Base.prototype.addData=function addData(){var encodingState={value:this.value,index:0,state:""};0!==this.value.length&&(encodingState.state=encodingState.previousState=this.getNextState(encodingState,this.states),this.addStart(encodingState),this.pushData(encodingState,this.states),this.addCheckSum(),this.addStop(),this.setBaseUnit())},Code128Base.prototype.pushData=function pushData(encodingState,states){for(;this[encodingState.state].pushState(encodingState),!(encodingState.index>=encodingState.value.length);)if(encodingState.shifted){var temp=encodingState.state;encodingState.state=encodingState.previousState,encodingState.previousState=temp,encodingState.shifted=!1}else encodingState.previousState=encodingState.state,encodingState.state=this.getNextState(encodingState,states),this[encodingState.state].move(encodingState)},Code128Base.prototype.addStart=function addStart(encodingState){this[encodingState.state].addStart(encodingState),this.position=1},Code128Base.prototype.addCheckSum=function addCheckSum(){this.checksum=this.checkSum%103,this.addPattern(this.checksum)},Code128Base.prototype.addStop=function addStop(){this.addPattern(this.STOP)},Code128Base.prototype.setBaseUnit=function setBaseUnit(){this.baseUnit=this.width/(this.totalUnits+this.quietZoneLength)},Code128Base.prototype.addPattern=function addPattern(code){for(var value,pattern=this.characterMap[code].toString(),i=0;i<pattern.length;i++)value=parseInt(pattern.charAt(i),10),this.pattern.push(value),this.totalUnits+=value;this.checkSum+=code*this.position++},Code128Base.prototype.getNextState=function getNextState(encodingState,states){for(var i=0;i<states.length;i++)if(this[states[i]].is(encodingState.value,encodingState.index))return states[i];this.invalidCharacterError(encodingState.value.charAt(encodingState.index))},Code128Base}(Encoding),Code128a=function(Code128Base){function Code128a(){Code128Base.apply(this,arguments)}return Code128Base&&(Code128a.__proto__=Code128Base),Code128a.prototype=Object.create(Code128Base&&Code128Base.prototype),Code128a.prototype.constructor=Code128a,Code128a.prototype.initProperties=function initProperties(){Code128Base.prototype.initProperties.call(this),code128_extend(this,{name:"Code 128 A",states:["A"]})},Code128a}(Code128Base),Code128b=function(Code128Base){function Code128b(){Code128Base.apply(this,arguments)}return Code128Base&&(Code128b.__proto__=Code128Base),Code128b.prototype=Object.create(Code128Base&&Code128Base.prototype),Code128b.prototype.constructor=Code128b,Code128b.prototype.initProperties=function initProperties(){Code128Base.prototype.initProperties.call(this),code128_extend(this,{name:"Code 128 B",states:["B"]})},Code128b}(Code128Base),Code128c=function(Code128Base){function Code128c(){Code128Base.apply(this,arguments)}return Code128Base&&(Code128c.__proto__=Code128Base),Code128c.prototype=Object.create(Code128Base&&Code128Base.prototype),Code128c.prototype.constructor=Code128c,Code128c.prototype.initProperties=function initProperties(){Code128Base.prototype.initProperties.call(this),code128_extend(this,{name:"Code 128 C",states:["C"]})},Code128c}(Code128Base),Code128=function(Code128Base){function Code128(){Code128Base.apply(this,arguments)}return Code128Base&&(Code128.__proto__=Code128Base),Code128.prototype=Object.create(Code128Base&&Code128Base.prototype),Code128.prototype.constructor=Code128,Code128.prototype.initProperties=function initProperties(){Code128Base.prototype.initProperties.call(this),code128_extend(this,{name:"Code 128",states:["C","B","A","FNC4"]})},Code128}(Code128Base),CodeGS1128=function(Code128Base){function CodeGS1128(){Code128Base.apply(this,arguments)}return Code128Base&&(CodeGS1128.__proto__=Code128Base),CodeGS1128.prototype=Object.create(Code128Base&&Code128Base.prototype),CodeGS1128.prototype.constructor=CodeGS1128,CodeGS1128.prototype.initProperties=function initProperties(){Code128Base.prototype.initProperties.call(this),code128_extend(this,{name:"Code GS1-128",states:["FNC1","C","B"]})},CodeGS1128}(Code128Base);function getSubstring(value,index,count){return value.substring(index,index+count)}var msi_extend=Object.assign,MsiBase=function(Encoding){function MsiBase(){Encoding.apply(this,arguments)}return Encoding&&(MsiBase.__proto__=Encoding),MsiBase.prototype=Object.create(Encoding&&Encoding.prototype),MsiBase.prototype.constructor=MsiBase,MsiBase.prototype.initProperties=function initProperties(){Encoding.prototype.initProperties.call(this),msi_extend(this,{characterMap:["12121212","12121221","12122112","12122121","12211212","12211221","12212112","12212121","21121212","21121221"],START:"21",STOP:"121",checkSumType:"",checkSums})},MsiBase.prototype.initValue=function initValue(value,width){this.pattern=[],this.value=value,this.checkSumLength=0,this.width=width},MsiBase.prototype.setBaseUnit=function setBaseUnit(){this.baseUnit=this.width/(12*(this.value.length+this.checkSumLength)+this.quietZoneLength+7)},MsiBase.prototype.addData=function addData(){var value=this.value;this.addPattern(this.START);for(var i=0;i<value.length;i++)this.addCharacter(value.charAt(i));this.options.addCheckSum&&this.addCheckSum(),this.addPattern(this.STOP),this.setBaseUnit()},MsiBase.prototype.addCharacter=function addCharacter(character){var pattern=this.characterMap[character];pattern||this.invalidCharacterError(character),this.addPattern(pattern)},MsiBase.prototype.addPattern=function addPattern(pattern){for(var i=0;i<pattern.length;i++)this.pattern.push(parseInt(pattern.charAt(i),10))},MsiBase.prototype.addCheckSum=function addCheckSum(){var checkValues=this.checkSums[this.checkSumType].call(this.checkSums,this.value);this.checksum=checkValues.join("");for(var i=0;i<checkValues.length;i++)this.checkSumLength++,this.addPattern(this.characterMap[checkValues[i]])},MsiBase}(Encoding),MsiMod10=function(MsiBase){function MsiMod10(){MsiBase.apply(this,arguments)}return MsiBase&&(MsiMod10.__proto__=MsiBase),MsiMod10.prototype=Object.create(MsiBase&&MsiBase.prototype),MsiMod10.prototype.constructor=MsiMod10,MsiMod10.prototype.initProperties=function initProperties(){MsiBase.prototype.initProperties.call(this),msi_extend(this,{name:"MSI Modulo10",checkSumType:"Modulo10"})},MsiMod10}(MsiBase),MsiMod11=function(MsiBase){function MsiMod11(){MsiBase.apply(this,arguments)}return MsiBase&&(MsiMod11.__proto__=MsiBase),MsiMod11.prototype=Object.create(MsiBase&&MsiBase.prototype),MsiMod11.prototype.constructor=MsiMod11,MsiMod11.prototype.initProperties=function initProperties(){MsiBase.prototype.initProperties.call(this),msi_extend(this,{name:"MSI Modulo11",checkSumType:"Modulo11"})},MsiMod11}(MsiBase),MsiMod1010=function(MsiBase){function MsiMod1010(){MsiBase.apply(this,arguments)}return MsiBase&&(MsiMod1010.__proto__=MsiBase),MsiMod1010.prototype=Object.create(MsiBase&&MsiBase.prototype),MsiMod1010.prototype.constructor=MsiMod1010,MsiMod1010.prototype.initProperties=function initProperties(){MsiBase.prototype.initProperties.call(this),msi_extend(this,{name:"MSI Modulo10 Modulo10",checkSumType:"Modulo10Modulo10"})},MsiMod1010}(MsiBase),MsiMod1110=function(MsiBase){function MsiMod1110(){MsiBase.apply(this,arguments)}return MsiBase&&(MsiMod1110.__proto__=MsiBase),MsiMod1110.prototype=Object.create(MsiBase&&MsiBase.prototype),MsiMod1110.prototype.constructor=MsiMod1110,MsiMod1110.prototype.initProperties=function initProperties(){MsiBase.prototype.initProperties.call(this),msi_extend(this,{name:"MSI Modulo11 Modulo10",checkSumType:"Modulo11Modulo10"})},MsiMod1110}(MsiBase),checkSums={Modulo10:function Modulo10(value){var idx,evenSum,oddSum,checkValues=[0,""],odd=value.length%2;for(idx=0;idx<value.length;idx++)checkValues[(idx+odd)%2]+=parseInt(value.charAt(idx),10);for(oddSum=checkValues[0],evenSum=(2*checkValues[1]).toString(),idx=0;idx<evenSum.length;idx++)oddSum+=parseInt(evenSum.charAt(idx),10);return[(10-oddSum%10)%10]},Modulo11:function Modulo11(value){for(var checkValue,weightedSum=0,length=value.length,i=0;i<length;i++)weightedSum+=(((length-i)%6||6)+1)*value.charAt(i);return 10!==(checkValue=(11-weightedSum%11)%11)?[checkValue]:[1,0]},Modulo11Modulo10:function Modulo11Modulo10(value){var mod11Value,checkValues=this.Modulo11(value);return mod11Value=value+checkValues[0],checkValues.concat(this.Modulo10(mod11Value))},Modulo10Modulo10:function Modulo10Modulo10(value){var mod10Value,checkValues=this.Modulo10(value);return mod10Value=value+checkValues[0],checkValues.concat(this.Modulo10(mod10Value))}},ean13_extend=Object.assign,Ean13=function(Encoding){function Ean13(){Encoding.apply(this,arguments)}return Encoding&&(Ean13.__proto__=Encoding),Ean13.prototype=Object.create(Encoding&&Encoding.prototype),Ean13.prototype.constructor=Ean13,Ean13.prototype.initProperties=function initProperties(){Encoding.prototype.initProperties.call(this),ean13_extend(this,{name:"EAN 13",keyTable:["000000","001011","001101","001110","010011","011001","011100","010101","010110","011010"],characterMap:{digits:[[3,2,1,1],[2,2,2,1],[2,1,2,2],[1,4,1,1],[1,1,3,2],[1,2,3,1],[1,1,1,4],[1,3,1,2],[1,2,1,3],[3,1,1,2]],start:[1,1,1],middle:[1,1,1,1,1]}})},Ean13.prototype.initValue=function initValue(value,width,height){var valueAsString=String(value);if(12!==valueAsString.length||/\D/.test(valueAsString))throw new Error('The value of the "EAN13" encoding should be 12 symbols');this.pattern=[],this.options.height=height,this.baseUnit=width/(95+this.quietZoneLength),this.value=valueAsString,this.checksum=this.calculateChecksum(),this.leftKey=valueAsString[0],this.leftPart=valueAsString.substr(1,6),this.rightPart=valueAsString.substr(7)+this.checksum},Ean13.prototype.addData=function addData(){this.addPieces(this.characterMap.start),this.addSide(this.leftPart,this.leftKey),this.addPieces(this.characterMap.middle),this.addSide(this.rightPart),this.addPieces(this.characterMap.start)},Ean13.prototype.addSide=function addSide(leftPart,key){for(var i=0;i<leftPart.length;i++)key&&parseInt(this.keyTable[key].charAt(i),10)?this.addPieces(Array.prototype.slice.call(this.characterMap.digits[leftPart.charAt(i)]).reverse(),!0):this.addPieces(this.characterMap.digits[leftPart.charAt(i)],!0)},Ean13.prototype.addPieces=function addPieces(arrToAdd,limitedHeight){for(var i=0;i<arrToAdd.length;i++)limitedHeight?this.pattern.push({y1:0,y2:.95*this.options.height,width:arrToAdd[i]}):this.pattern.push(arrToAdd[i])},Ean13.prototype.calculateChecksum=function calculateChecksum(){for(var odd=0,even=0,value=this.value.split("").reverse().join(""),i=0;i<value.length;i++)i%2?even+=parseInt(value.charAt(i),10):odd+=parseInt(value.charAt(i),10);return(10-(3*odd+even)%10)%10},Ean13}(Encoding),ean8_extend=Object.assign,Ean8=function(Ean13){function Ean8(){Ean13.apply(this,arguments)}return Ean13&&(Ean8.__proto__=Ean13),Ean8.prototype=Object.create(Ean13&&Ean13.prototype),Ean8.prototype.constructor=Ean8,Ean8.prototype.initProperties=function initProperties(){Ean13.prototype.initProperties.call(this),ean8_extend(this,{name:"EAN 8"})},Ean8.prototype.initValue=function initValue(value,width,height){if(7!==value.length||/\D/.test(value))throw new Error("Invalid value provided");this.value=value,this.options.height=height,this.checksum=this.calculateChecksum(this.value),this.leftPart=this.value.substr(0,4),this.rightPart=this.value.substr(4)+this.checksum,this.pattern=[],this.baseUnit=width/(67+this.quietZoneLength)},Ean8}(Ean13),main_Encodings={code11:Code11,code39:Code39,code39extended:Code39Extended,code93:Code93,code93extended:Code93Extended,code128:Code128,code128a:Code128a,code128b:Code128b,code128c:Code128c};function surfaceSize(element,surfaceType){var display=element.style.display;"canvas"===surfaceType&&(element.style.display="block");var size={width:element.clientWidth,height:element.clientHeight};return element.style.display=display,size}main_Encodings["gs1-128"]=CodeGS1128,main_Encodings.msimod10=MsiMod10,main_Encodings.msimod11=MsiMod11,main_Encodings.msimod1010=MsiMod1010,main_Encodings.msimod1110=MsiMod1110,main_Encodings.postnet=Postnet,main_Encodings.ean8=Ean8,main_Encodings.ean13=Ean13;var Barcode=function(Class){function Barcode(element,options,errorHandler){void 0===errorHandler&&(errorHandler=defaultErrorHandler),Class.call(this),this.options=deepExtend({},this.options,options),this.element=element,this.onError=errorHandler,this._initElement(),this._initSurface(),this._setOptions(options),options&&drawing_utils_defined(options.value)&&this.redraw()}return Class&&(Barcode.__proto__=Class),Barcode.prototype=Object.create(Class&&Class.prototype),Barcode.prototype.constructor=Barcode,Barcode.prototype.destroy=function destroy(){this._destroySurface()},Barcode.prototype._initElement=function _initElement(){addClass(this.element,"k-barcode")},Barcode.prototype._initSurface=function _initSurface(){var options=this.options,surface=this.surface;surface&&surface.options.type===options.renderAs||(this._destroySurface(),this._initSurfaceElement(),this.surface=this._createSurface())},Barcode.prototype._createSurface=function _createSurface(){return es_surface.A.create(this.surfaceElement,{type:this.options.renderAs})},Barcode.prototype._destroySurface=function _destroySurface(){this.surface&&(this.surface.destroy(),this.surface=null,this._destroySurfaceElement())},Barcode.prototype._initSurfaceElement=function _initSurfaceElement(){this.surfaceElement||(this.surfaceElement=document.createElement("div"),this.surfaceElement.style.position="relative",this.element.appendChild(this.surfaceElement))},Barcode.prototype._destroySurfaceElement=function _destroySurfaceElement(){this.surfaceElement&&this.surfaceElement.parentNode&&(this.surfaceElement.parentNode.removeChild(this.surfaceElement),this.surfaceElement=null)},Barcode.prototype.setOptions=function setOptions(options){this._setOptions(options),this._initSurface(),this.redraw()},Barcode.prototype.redraw=function redraw(){var size=this._getSize();this.surface.clear(),this.surface.setSize({width:size.width,height:size.height}),this.createVisual(),this.surface.draw(this.visual)},Barcode.prototype.getSize=function getSize(){return{width:this.element.offsetWidth,height:this.element.offsetHeight}},Barcode.prototype._resize=function _resize(){this.redraw()},Barcode.prototype.createVisual=function createVisual(){this.visual=this._render()},Barcode.prototype._render=function _render(){var encodedValue,textToDisplay,options=this.options,value=options.value,textOptions=options.text,textMargin=getSpacing(textOptions.margin),size=this._getSize(),border=options.border||{},encoding=this.encoding,contentBox=new core_box(0,0,size.width,size.height).unpad(border.width).unpad(options.padding),barHeight=contentBox.height(),visual=new shapes_group.A;this.contentBox=contentBox,visual.append(this._getBackground(size)),textOptions.visible&&(barHeight-=measure_text.A(value,{font:textOptions.font}).height+textMargin.top+textMargin.bottom);try{encodedValue=encoding.encode(value,contentBox.width(),barHeight)}catch(error){return this.onError(error),visual}return textOptions.visible&&(textToDisplay=value,options.checksum&&drawing_utils_defined(encoding.checksum)&&(textToDisplay+=" "+encoding.checksum),visual.append(this._getText(textToDisplay))),this.barHeight=barHeight,this._bandsGroup=this._getBands(encodedValue.pattern,encodedValue.baseUnit),visual.append(this._bandsGroup),visual},Barcode.prototype.exportVisual=function exportVisual(){return this._render()},Barcode.prototype._getSize=function _getSize(){var elementSize=surfaceSize(this.element,this.options.renderAs),size=new geometry_size.A(300,100);return elementSize.width>0&&(size.width=elementSize.width),elementSize.height>0&&(size.height=elementSize.height),this.options.width&&(size.width=this.options.width),this.options.height&&(size.height=this.options.height),size},Barcode.prototype.value=function value(value$1){if(!drawing_utils_defined(value$1))return this.options.value;this.options.value=String(value$1),this.redraw()},Barcode.prototype._getBands=function _getBands(pattern,baseUnit){for(var stepX,patternItem,contentBox=this.contentBox,offsetX=contentBox.x1,group=new shapes_group.A,i=0;i<pattern.length;i++){if(stepX=(patternItem=isObject(pattern[i])?pattern[i]:{width:pattern[i],y1:0,y2:this.barHeight}).width*baseUnit,i%2){var rect=geometry_rect.A.fromPoints(new geometry_point.A(offsetX,patternItem.y1+contentBox.y1),new geometry_point.A(offsetX+stepX,patternItem.y2+contentBox.y1)),path=shapes_path.w.fromRect(rect,{fill:{color:this.options.color},stroke:null});group.append(path)}offsetX+=stepX}return group},Barcode.prototype._getBackground=function _getBackground(size){var options=this.options,border=options.border||{},box=new core_box(0,0,size.width,size.height).unpad(border.width/2);return shapes_path.w.fromRect(box.toRect(),{fill:{color:options.background},stroke:{color:border.width?border.color:"",width:border.width,dashType:border.dashType}})},Barcode.prototype._getText=function _getText(value){var textOptions=this.options.text,text=this._textbox=new text_box(value,{font:textOptions.font,color:textOptions.color,align:"center",vAlign:"bottom",margin:textOptions.margin});return text.reflow(this.contentBox),text.renderVisual(),text.visual},Barcode.prototype._setOptions=function _setOptions(options){if(this.type=(options.type||this.options.type).toLowerCase(),"upca"===this.type&&(this.type="ean13",options.value="0"+options.value),"upce"===this.type&&(this.type="ean8",options.value="0"+options.value),!main_Encodings[this.type])throw new Error("Encoding '"+this.type+"' is not supported.");this.encoding=new main_Encodings[this.type],this.options=deepExtend({},this.options,options)},Barcode}(common_class.A);setDefaultOptions(Barcode,{name:"Barcode",renderAs:"svg",value:"",type:"code39",checksum:!1,width:0,height:0,color:"black",background:"white",text:{visible:!0,font:"16px Consolas, Monaco, Sans Mono, monospace, sans-serif",color:"black",margin:{top:0,bottom:0,left:0,right:0}},border:{width:0,dashType:"solid",color:"black"},padding:{top:0,bottom:0,left:0,right:0}});const barcode=Barcode;var shapes_image=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/shapes/image.js"),utils_extend=Object.assign;function splitInto(str,chunkLength){for(var result=[],idx=0;idx<str.length;)result.push(str.substring(idx,idx+chunkLength)),idx+=chunkLength;return result}function toBitsString(value,length){var bitString=Number(value).toString(2);return bitString.length<length&&(bitString=new Array(length-bitString.length+1).join(0)+bitString),bitString}function toDecimal(value){return parseInt(value,2)}var FreeCellVisitor=function(Class){function FreeCellVisitor(matrix){Class.call(this),this.matrix=matrix,this.row=matrix.length-1,this.column=matrix.length-1,this.startColumn=this.column,this.dir=-1,this.c=0}return Class&&(FreeCellVisitor.__proto__=Class),FreeCellVisitor.prototype=Object.create(Class&&Class.prototype),FreeCellVisitor.prototype.constructor=FreeCellVisitor,FreeCellVisitor.prototype.move=function move(){this.row+=this.dir*this.c,this.c^=1,this.column=this.startColumn-this.c},FreeCellVisitor.prototype.getNextCell=function getNextCell(){for(;void 0!==this.matrix[this.row][this.column];)this.move(),(this.row<0||this.row>=this.matrix.length)&&(this.dir=-this.dir,this.startColumn-=8!==this.startColumn?2:3,this.column=this.startColumn,this.row=this.dir<0?this.matrix.length-1:0);return{row:this.row,column:this.column}},FreeCellVisitor.prototype.getNextRemainderCell=function getNextRemainderCell(){if(this.move(),void 0===this.matrix[this.row][this.column])return{row:this.row,column:this.column}},FreeCellVisitor}(common_class.A),EncodingResult=function(Class){function EncodingResult(dataString,version){Class.call(this),this.dataString=dataString,this.version=version}return Class&&(EncodingResult.__proto__=Class),EncodingResult.prototype=Object.create(Class&&Class.prototype),EncodingResult.prototype.constructor=EncodingResult,EncodingResult}(common_class.A),IsoEncoder=function(Class){function IsoEncoder(){Class.apply(this,arguments)}return Class&&(IsoEncoder.__proto__=Class),IsoEncoder.prototype=Object.create(Class&&Class.prototype),IsoEncoder.prototype.constructor=IsoEncoder,IsoEncoder.prototype.getEncodingResult=function getEncodingResult(inputString,errorCorrectionLevel){var modes=function getModes(inputString){var previousMode,modes=[],idx=0,str=inputString;modes.push(chooseMode(str,initMinNumericBeforeAlpha,initMinNumericBeforeByte,initMinAlphaBeforeByte,previousMode)),previousMode=modes[0].mode,str=str.substr(modes[0].modeString.length);for(;str.length>0;){var nextMode=chooseMode(str,minNumericBeforeAlpha,minNumericBeforeByte,minAlphaBeforeByte,previousMode);nextMode.mode!==previousMode?(previousMode=nextMode.mode,modes.push(nextMode),idx++):modes[idx].modeString+=nextMode.modeString,str=str.substr(nextMode.modeString.length)}return modes}(inputString),dataCodewordsCount=function getDataCodewordsCount(modes){for(var length=0,i=0;i<modes.length;i++)length+=DataModeInstances[modes[i].mode].getStringBitsLength(modes[i].modeString.length);return Math.ceil(length/8)}(modes),version=getVersion(dataCodewordsCount,errorCorrectionLevel),dataString=function getDataString(modes,version){for(var dataString="",i=0;i<modes.length;i++)dataString+=DataModeInstances[modes[i].mode].encode(modes[i].modeString,version);return dataString}(modes,version);return new EncodingResult(dataString,version)},IsoEncoder}(common_class.A),QRDataMode=function(Class){function QRDataMode(){Class.call(this),this.initProperties()}return Class&&(QRDataMode.__proto__=Class),QRDataMode.prototype=Object.create(Class&&Class.prototype),QRDataMode.prototype.constructor=QRDataMode,QRDataMode.prototype.initProperties=function initProperties(){utils_extend(this,{modeIndicator:"",bitsInCharacterCount:[]})},QRDataMode.prototype.getVersionIndex=function getVersionIndex(version){return version<10?0:version>26?2:1},QRDataMode.prototype.getBitsCharacterCount=function getBitsCharacterCount(version){return this.bitsInCharacterCount[this.getVersionIndex(version||40)]},QRDataMode.prototype.getModeCountString=function getModeCountString(length,version){return this.modeIndicator+toBitsString(length,this.getBitsCharacterCount(version))},QRDataMode.prototype.encode=function encode(){},QRDataMode.prototype.getStringBitsLength=function getStringBitsLength(){},QRDataMode.prototype.getValue=function getValue(){},QRDataMode}(common_class.A),NumericQRDataMode=function(QRDataMode){function NumericQRDataMode(){QRDataMode.apply(this,arguments)}return QRDataMode&&(NumericQRDataMode.__proto__=QRDataMode),NumericQRDataMode.prototype=Object.create(QRDataMode&&QRDataMode.prototype),NumericQRDataMode.prototype.constructor=NumericQRDataMode,NumericQRDataMode.prototype.initProperties=function initProperties(){QRDataMode.prototype.initProperties.call(this),utils_extend(this,{bitsInCharacterCount:[10,12,14],modeIndicator:"0001"})},NumericQRDataMode.prototype.getValue=function getValue(character){return parseInt(character,10)},NumericQRDataMode.prototype.encode=function encode(str,version){var i,parts=splitInto(str,3),result=this.getModeCountString(str.length,version);for(i=0;i<parts.length-1;i++)result+=toBitsString(parts[i],10);return result+toBitsString(parts[i],1+3*parts[i].length)},NumericQRDataMode.prototype.getStringBitsLength=function getStringBitsLength(inputLength,version){var mod3=inputLength%3;return 4+this.getBitsCharacterCount(version)+10*Math.floor(inputLength/3)+3*mod3+(0===mod3?0:1)},NumericQRDataMode}(QRDataMode),AlphaNumericQRDataMode=function(QRDataMode){function AlphaNumericQRDataMode(){QRDataMode.apply(this,arguments)}return QRDataMode&&(AlphaNumericQRDataMode.__proto__=QRDataMode),AlphaNumericQRDataMode.prototype=Object.create(QRDataMode&&QRDataMode.prototype),AlphaNumericQRDataMode.prototype.constructor=AlphaNumericQRDataMode,AlphaNumericQRDataMode.prototype.initProperties=function initProperties(){QRDataMode.prototype.initProperties.call(this),utils_extend(this,{characters:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,G:16,H:17,I:18,J:19,K:20,L:21,M:22,N:23,O:24,P:25,Q:26,R:27,S:28,T:29,U:30,V:31,W:32,X:33,Y:34,Z:35," ":36,$:37,"%":38,"*":39,"+":40,"-":41,".":42,"/":43,":":44},bitsInCharacterCount:[9,11,13],modeIndicator:"0010"})},AlphaNumericQRDataMode.prototype.getValue=function getValue(character){return this.characters[character]},AlphaNumericQRDataMode.prototype.encode=function encode(str,version){var i,parts=splitInto(str,2),result=this.getModeCountString(str.length,version);for(i=0;i<parts.length-1;i++)result+=toBitsString(45*this.getValue(parts[i].charAt(0))+this.getValue(parts[i].charAt(1)),11);return result+toBitsString(2===parts[i].length?45*this.getValue(parts[i].charAt(0))+this.getValue(parts[i].charAt(1)):this.getValue(parts[i].charAt(0)),1+5*parts[i].length)},AlphaNumericQRDataMode.prototype.getStringBitsLength=function getStringBitsLength(inputLength,version){return 4+this.getBitsCharacterCount(version)+11*Math.floor(inputLength/2)+inputLength%2*6},AlphaNumericQRDataMode}(QRDataMode),ByteQRDataMode=function(QRDataMode){function ByteQRDataMode(){QRDataMode.apply(this,arguments)}return QRDataMode&&(ByteQRDataMode.__proto__=QRDataMode),ByteQRDataMode.prototype=Object.create(QRDataMode&&QRDataMode.prototype),ByteQRDataMode.prototype.constructor=ByteQRDataMode,ByteQRDataMode.prototype.initProperties=function initProperties(){QRDataMode.prototype.initProperties.call(this),utils_extend(this,{bitsInCharacterCount:[8,16,16],modeIndicator:"0100"})},ByteQRDataMode.prototype.getValue=function getValue(character){var code=character.charCodeAt(0);if(code<=127||160<=code&&code<=255)return code;throw new Error('Unsupported character in QR Code: "'+character+'".')},ByteQRDataMode.prototype.encode=function encode(str,version){for(var result=this.getModeCountString(str.length,version),i=0;i<str.length;i++)result+=toBitsString(this.getValue(str.charAt(i)),8);return result},ByteQRDataMode.prototype.getStringBitsLength=function getStringBitsLength(inputLength,version){return 4+this.getBitsCharacterCount(version)+8*inputLength},ByteQRDataMode}(QRDataMode),DataModeInstances={};DataModeInstances.numeric=new NumericQRDataMode,DataModeInstances.alphanumeric=new AlphaNumericQRDataMode,DataModeInstances.byte=new ByteQRDataMode;var Utf8Encoder=function(Class){function Utf8Encoder(){Class.call(this),this.initProperties(),this.mode=DataModeInstances[this.encodingMode]}return Class&&(Utf8Encoder.__proto__=Class),Utf8Encoder.prototype=Object.create(Class&&Class.prototype),Utf8Encoder.prototype.constructor=Utf8Encoder,Utf8Encoder.prototype.initProperties=function initProperties(){utils_extend(this,{encodingMode:"byte",utfBOM:"111011111011101110111111",initialModeCountStringLength:20,ranges:[128,2048,65536,2097152,67108864]})},Utf8Encoder.prototype.getEncodingResult=function getEncodingResult(inputString,errorCorrectionLevel){var data=this.encode(inputString),version=getVersion(this.getDataCodewordsCount(data),errorCorrectionLevel),dataString=this.mode.getModeCountString(data.length/8,version)+data;return new EncodingResult(dataString,version)},Utf8Encoder.prototype.getDataCodewordsCount=function getDataCodewordsCount(data){var dataLength=data.length;return Math.ceil((this.initialModeCountStringLength+dataLength)/8)},Utf8Encoder.prototype.encode=function encode(str){for(var result=this.utfBOM,i=0;i<str.length;i++)result+=this.encodeCharacter(str.charCodeAt(i));return result},Utf8Encoder.prototype.encodeCharacter=function encodeCharacter(code){var bytesCount=this.getBytesCount(code),bc=bytesCount-1,result="";if(1===bytesCount)result=toBitsString(code,8);else{for(var significantOnes=8-bytesCount,i=0;i<bc;i++)result=toBitsString(code>>6*i&63|128,8)+result;result=(code>>6*bc|255>>significantOnes<<significantOnes).toString(2)+result}return result},Utf8Encoder.prototype.getBytesCount=function getBytesCount(code){for(var ranges=this.ranges,i=0;i<ranges.length;i++)if(code<ranges[i])return i+1},Utf8Encoder}(common_class.A),VersionsCodewordsInformation=[{L:{groups:[[1,19]],totalDataCodewords:19,errorCodewordsPerBlock:7},M:{groups:[[1,16]],totalDataCodewords:16,errorCodewordsPerBlock:10},Q:{groups:[[1,13]],totalDataCodewords:13,errorCodewordsPerBlock:13},H:{groups:[[1,9]],totalDataCodewords:9,errorCodewordsPerBlock:17}},{L:{groups:[[1,34]],totalDataCodewords:34,errorCodewordsPerBlock:10},M:{groups:[[1,28]],totalDataCodewords:28,errorCodewordsPerBlock:16},Q:{groups:[[1,22]],totalDataCodewords:22,errorCodewordsPerBlock:22},H:{groups:[[1,16]],totalDataCodewords:16,errorCodewordsPerBlock:28}},{L:{groups:[[1,55]],totalDataCodewords:55,errorCodewordsPerBlock:15},M:{groups:[[1,44]],totalDataCodewords:44,errorCodewordsPerBlock:26},Q:{groups:[[2,17]],totalDataCodewords:34,errorCodewordsPerBlock:18},H:{groups:[[2,13]],totalDataCodewords:26,errorCodewordsPerBlock:22}},{L:{groups:[[1,80]],totalDataCodewords:80,errorCodewordsPerBlock:20},M:{groups:[[2,32]],totalDataCodewords:64,errorCodewordsPerBlock:18},Q:{groups:[[2,24]],totalDataCodewords:48,errorCodewordsPerBlock:26},H:{groups:[[4,9]],totalDataCodewords:36,errorCodewordsPerBlock:16}},{L:{groups:[[1,108]],totalDataCodewords:108,errorCodewordsPerBlock:26},M:{groups:[[2,43]],totalDataCodewords:86,errorCodewordsPerBlock:24},Q:{groups:[[2,15],[2,16]],totalDataCodewords:62,errorCodewordsPerBlock:18},H:{groups:[[2,11],[2,12]],totalDataCodewords:46,errorCodewordsPerBlock:22}},{L:{groups:[[2,68]],totalDataCodewords:136,errorCodewordsPerBlock:18},M:{groups:[[4,27]],totalDataCodewords:108,errorCodewordsPerBlock:16},Q:{groups:[[4,19]],totalDataCodewords:76,errorCodewordsPerBlock:24},H:{groups:[[4,15]],totalDataCodewords:60,errorCodewordsPerBlock:28}},{L:{groups:[[2,78]],totalDataCodewords:156,errorCodewordsPerBlock:20},M:{groups:[[4,31]],totalDataCodewords:124,errorCodewordsPerBlock:18},Q:{groups:[[2,14],[4,15]],totalDataCodewords:88,errorCodewordsPerBlock:18},H:{groups:[[4,13],[1,14]],totalDataCodewords:66,errorCodewordsPerBlock:26}},{L:{groups:[[2,97]],totalDataCodewords:194,errorCodewordsPerBlock:24},M:{groups:[[2,38],[2,39]],totalDataCodewords:154,errorCodewordsPerBlock:22},Q:{groups:[[4,18],[2,19]],totalDataCodewords:110,errorCodewordsPerBlock:22},H:{groups:[[4,14],[2,15]],totalDataCodewords:86,errorCodewordsPerBlock:26}},{L:{groups:[[2,116]],totalDataCodewords:232,errorCodewordsPerBlock:30},M:{groups:[[3,36],[2,37]],totalDataCodewords:182,errorCodewordsPerBlock:22},Q:{groups:[[4,16],[4,17]],totalDataCodewords:132,errorCodewordsPerBlock:20},H:{groups:[[4,12],[4,13]],totalDataCodewords:100,errorCodewordsPerBlock:24}},{L:{groups:[[2,68],[2,69]],totalDataCodewords:274,errorCodewordsPerBlock:18},M:{groups:[[4,43],[1,44]],totalDataCodewords:216,errorCodewordsPerBlock:26},Q:{groups:[[6,19],[2,20]],totalDataCodewords:154,errorCodewordsPerBlock:24},H:{groups:[[6,15],[2,16]],totalDataCodewords:122,errorCodewordsPerBlock:28}},{L:{groups:[[4,81]],totalDataCodewords:324,errorCodewordsPerBlock:20},M:{groups:[[1,50],[4,51]],totalDataCodewords:254,errorCodewordsPerBlock:30},Q:{groups:[[4,22],[4,23]],totalDataCodewords:180,errorCodewordsPerBlock:28},H:{groups:[[3,12],[8,13]],totalDataCodewords:140,errorCodewordsPerBlock:24}},{L:{groups:[[2,92],[2,93]],totalDataCodewords:370,errorCodewordsPerBlock:24},M:{groups:[[6,36],[2,37]],totalDataCodewords:290,errorCodewordsPerBlock:22},Q:{groups:[[4,20],[6,21]],totalDataCodewords:206,errorCodewordsPerBlock:26},H:{groups:[[7,14],[4,15]],totalDataCodewords:158,errorCodewordsPerBlock:28}},{L:{groups:[[4,107]],totalDataCodewords:428,errorCodewordsPerBlock:26},M:{groups:[[8,37],[1,38]],totalDataCodewords:334,errorCodewordsPerBlock:22},Q:{groups:[[8,20],[4,21]],totalDataCodewords:244,errorCodewordsPerBlock:24},H:{groups:[[12,11],[4,12]],totalDataCodewords:180,errorCodewordsPerBlock:22}},{L:{groups:[[3,115],[1,116]],totalDataCodewords:461,errorCodewordsPerBlock:30},M:{groups:[[4,40],[5,41]],totalDataCodewords:365,errorCodewordsPerBlock:24},Q:{groups:[[11,16],[5,17]],totalDataCodewords:261,errorCodewordsPerBlock:20},H:{groups:[[11,12],[5,13]],totalDataCodewords:197,errorCodewordsPerBlock:24}},{L:{groups:[[5,87],[1,88]],totalDataCodewords:523,errorCodewordsPerBlock:22},M:{groups:[[5,41],[5,42]],totalDataCodewords:415,errorCodewordsPerBlock:24},Q:{groups:[[5,24],[7,25]],totalDataCodewords:295,errorCodewordsPerBlock:30},H:{groups:[[11,12],[7,13]],totalDataCodewords:223,errorCodewordsPerBlock:24}},{L:{groups:[[5,98],[1,99]],totalDataCodewords:589,errorCodewordsPerBlock:24},M:{groups:[[7,45],[3,46]],totalDataCodewords:453,errorCodewordsPerBlock:28},Q:{groups:[[15,19],[2,20]],totalDataCodewords:325,errorCodewordsPerBlock:24},H:{groups:[[3,15],[13,16]],totalDataCodewords:253,errorCodewordsPerBlock:30}},{L:{groups:[[1,107],[5,108]],totalDataCodewords:647,errorCodewordsPerBlock:28},M:{groups:[[10,46],[1,47]],totalDataCodewords:507,errorCodewordsPerBlock:28},Q:{groups:[[1,22],[15,23]],totalDataCodewords:367,errorCodewordsPerBlock:28},H:{groups:[[2,14],[17,15]],totalDataCodewords:283,errorCodewordsPerBlock:28}},{L:{groups:[[5,120],[1,121]],totalDataCodewords:721,errorCodewordsPerBlock:30},M:{groups:[[9,43],[4,44]],totalDataCodewords:563,errorCodewordsPerBlock:26},Q:{groups:[[17,22],[1,23]],totalDataCodewords:397,errorCodewordsPerBlock:28},H:{groups:[[2,14],[19,15]],totalDataCodewords:313,errorCodewordsPerBlock:28}},{L:{groups:[[3,113],[4,114]],totalDataCodewords:795,errorCodewordsPerBlock:28},M:{groups:[[3,44],[11,45]],totalDataCodewords:627,errorCodewordsPerBlock:26},Q:{groups:[[17,21],[4,22]],totalDataCodewords:445,errorCodewordsPerBlock:26},H:{groups:[[9,13],[16,14]],totalDataCodewords:341,errorCodewordsPerBlock:26}},{L:{groups:[[3,107],[5,108]],totalDataCodewords:861,errorCodewordsPerBlock:28},M:{groups:[[3,41],[13,42]],totalDataCodewords:669,errorCodewordsPerBlock:26},Q:{groups:[[15,24],[5,25]],totalDataCodewords:485,errorCodewordsPerBlock:30},H:{groups:[[15,15],[10,16]],totalDataCodewords:385,errorCodewordsPerBlock:28}},{L:{groups:[[4,116],[4,117]],totalDataCodewords:932,errorCodewordsPerBlock:28},M:{groups:[[17,42]],totalDataCodewords:714,errorCodewordsPerBlock:26},Q:{groups:[[17,22],[6,23]],totalDataCodewords:512,errorCodewordsPerBlock:28},H:{groups:[[19,16],[6,17]],totalDataCodewords:406,errorCodewordsPerBlock:30}},{L:{groups:[[2,111],[7,112]],totalDataCodewords:1006,errorCodewordsPerBlock:28},M:{groups:[[17,46]],totalDataCodewords:782,errorCodewordsPerBlock:28},Q:{groups:[[7,24],[16,25]],totalDataCodewords:568,errorCodewordsPerBlock:30},H:{groups:[[34,13]],totalDataCodewords:442,errorCodewordsPerBlock:24}},{L:{groups:[[4,121],[5,122]],totalDataCodewords:1094,errorCodewordsPerBlock:30},M:{groups:[[4,47],[14,48]],totalDataCodewords:860,errorCodewordsPerBlock:28},Q:{groups:[[11,24],[14,25]],totalDataCodewords:614,errorCodewordsPerBlock:30},H:{groups:[[16,15],[14,16]],totalDataCodewords:464,errorCodewordsPerBlock:30}},{L:{groups:[[6,117],[4,118]],totalDataCodewords:1174,errorCodewordsPerBlock:30},M:{groups:[[6,45],[14,46]],totalDataCodewords:914,errorCodewordsPerBlock:28},Q:{groups:[[11,24],[16,25]],totalDataCodewords:664,errorCodewordsPerBlock:30},H:{groups:[[30,16],[2,17]],totalDataCodewords:514,errorCodewordsPerBlock:30}},{L:{groups:[[8,106],[4,107]],totalDataCodewords:1276,errorCodewordsPerBlock:26},M:{groups:[[8,47],[13,48]],totalDataCodewords:1e3,errorCodewordsPerBlock:28},Q:{groups:[[7,24],[22,25]],totalDataCodewords:718,errorCodewordsPerBlock:30},H:{groups:[[22,15],[13,16]],totalDataCodewords:538,errorCodewordsPerBlock:30}},{L:{groups:[[10,114],[2,115]],totalDataCodewords:1370,errorCodewordsPerBlock:28},M:{groups:[[19,46],[4,47]],totalDataCodewords:1062,errorCodewordsPerBlock:28},Q:{groups:[[28,22],[6,23]],totalDataCodewords:754,errorCodewordsPerBlock:28},H:{groups:[[33,16],[4,17]],totalDataCodewords:596,errorCodewordsPerBlock:30}},{L:{groups:[[8,122],[4,123]],totalDataCodewords:1468,errorCodewordsPerBlock:30},M:{groups:[[22,45],[3,46]],totalDataCodewords:1128,errorCodewordsPerBlock:28},Q:{groups:[[8,23],[26,24]],totalDataCodewords:808,errorCodewordsPerBlock:30},H:{groups:[[12,15],[28,16]],totalDataCodewords:628,errorCodewordsPerBlock:30}},{L:{groups:[[3,117],[10,118]],totalDataCodewords:1531,errorCodewordsPerBlock:30},M:{groups:[[3,45],[23,46]],totalDataCodewords:1193,errorCodewordsPerBlock:28},Q:{groups:[[4,24],[31,25]],totalDataCodewords:871,errorCodewordsPerBlock:30},H:{groups:[[11,15],[31,16]],totalDataCodewords:661,errorCodewordsPerBlock:30}},{L:{groups:[[7,116],[7,117]],totalDataCodewords:1631,errorCodewordsPerBlock:30},M:{groups:[[21,45],[7,46]],totalDataCodewords:1267,errorCodewordsPerBlock:28},Q:{groups:[[1,23],[37,24]],totalDataCodewords:911,errorCodewordsPerBlock:30},H:{groups:[[19,15],[26,16]],totalDataCodewords:701,errorCodewordsPerBlock:30}},{L:{groups:[[5,115],[10,116]],totalDataCodewords:1735,errorCodewordsPerBlock:30},M:{groups:[[19,47],[10,48]],totalDataCodewords:1373,errorCodewordsPerBlock:28},Q:{groups:[[15,24],[25,25]],totalDataCodewords:985,errorCodewordsPerBlock:30},H:{groups:[[23,15],[25,16]],totalDataCodewords:745,errorCodewordsPerBlock:30}},{L:{groups:[[13,115],[3,116]],totalDataCodewords:1843,errorCodewordsPerBlock:30},M:{groups:[[2,46],[29,47]],totalDataCodewords:1455,errorCodewordsPerBlock:28},Q:{groups:[[42,24],[1,25]],totalDataCodewords:1033,errorCodewordsPerBlock:30},H:{groups:[[23,15],[28,16]],totalDataCodewords:793,errorCodewordsPerBlock:30}},{L:{groups:[[17,115]],totalDataCodewords:1955,errorCodewordsPerBlock:30},M:{groups:[[10,46],[23,47]],totalDataCodewords:1541,errorCodewordsPerBlock:28},Q:{groups:[[10,24],[35,25]],totalDataCodewords:1115,errorCodewordsPerBlock:30},H:{groups:[[19,15],[35,16]],totalDataCodewords:845,errorCodewordsPerBlock:30}},{L:{groups:[[17,115],[1,116]],totalDataCodewords:2071,errorCodewordsPerBlock:30},M:{groups:[[14,46],[21,47]],totalDataCodewords:1631,errorCodewordsPerBlock:28},Q:{groups:[[29,24],[19,25]],totalDataCodewords:1171,errorCodewordsPerBlock:30},H:{groups:[[11,15],[46,16]],totalDataCodewords:901,errorCodewordsPerBlock:30}},{L:{groups:[[13,115],[6,116]],totalDataCodewords:2191,errorCodewordsPerBlock:30},M:{groups:[[14,46],[23,47]],totalDataCodewords:1725,errorCodewordsPerBlock:28},Q:{groups:[[44,24],[7,25]],totalDataCodewords:1231,errorCodewordsPerBlock:30},H:{groups:[[59,16],[1,17]],totalDataCodewords:961,errorCodewordsPerBlock:30}},{L:{groups:[[12,121],[7,122]],totalDataCodewords:2306,errorCodewordsPerBlock:30},M:{groups:[[12,47],[26,48]],totalDataCodewords:1812,errorCodewordsPerBlock:28},Q:{groups:[[39,24],[14,25]],totalDataCodewords:1286,errorCodewordsPerBlock:30},H:{groups:[[22,15],[41,16]],totalDataCodewords:986,errorCodewordsPerBlock:30}},{L:{groups:[[6,121],[14,122]],totalDataCodewords:2434,errorCodewordsPerBlock:30},M:{groups:[[6,47],[34,48]],totalDataCodewords:1914,errorCodewordsPerBlock:28},Q:{groups:[[46,24],[10,25]],totalDataCodewords:1354,errorCodewordsPerBlock:30},H:{groups:[[2,15],[64,16]],totalDataCodewords:1054,errorCodewordsPerBlock:30}},{L:{groups:[[17,122],[4,123]],totalDataCodewords:2566,errorCodewordsPerBlock:30},M:{groups:[[29,46],[14,47]],totalDataCodewords:1992,errorCodewordsPerBlock:28},Q:{groups:[[49,24],[10,25]],totalDataCodewords:1426,errorCodewordsPerBlock:30},H:{groups:[[24,15],[46,16]],totalDataCodewords:1096,errorCodewordsPerBlock:30}},{L:{groups:[[4,122],[18,123]],totalDataCodewords:2702,errorCodewordsPerBlock:30},M:{groups:[[13,46],[32,47]],totalDataCodewords:2102,errorCodewordsPerBlock:28},Q:{groups:[[48,24],[14,25]],totalDataCodewords:1502,errorCodewordsPerBlock:30},H:{groups:[[42,15],[32,16]],totalDataCodewords:1142,errorCodewordsPerBlock:30}},{L:{groups:[[20,117],[4,118]],totalDataCodewords:2812,errorCodewordsPerBlock:30},M:{groups:[[40,47],[7,48]],totalDataCodewords:2216,errorCodewordsPerBlock:28},Q:{groups:[[43,24],[22,25]],totalDataCodewords:1582,errorCodewordsPerBlock:30},H:{groups:[[10,15],[67,16]],totalDataCodewords:1222,errorCodewordsPerBlock:30}},{L:{groups:[[19,118],[6,119]],totalDataCodewords:2956,errorCodewordsPerBlock:30},M:{groups:[[18,47],[31,48]],totalDataCodewords:2334,errorCodewordsPerBlock:28},Q:{groups:[[34,24],[34,25]],totalDataCodewords:1666,errorCodewordsPerBlock:30},H:{groups:[[20,15],[61,16]],totalDataCodewords:1276,errorCodewordsPerBlock:30}}],encoding_NUMERIC="numeric",encoding_ALPHA_NUMERIC="alphanumeric",encoding_BYTE="byte",powersOfTwo={1:0},powersOfTwoResult={0:1},irregularAlignmentPatternsStartDistance={15:20,16:20,18:24,19:24,22:20,24:22,26:24,28:20,30:20,31:24,32:28,33:24,36:18,37:22,39:20,40:24},finderPattern=[1,0,1,1,1],alignmentPattern=[1,0,1],errorCorrectionPatterns={L:"01",M:"00",Q:"11",H:"10"},paddingCodewords=["11101100","00010001"],maskPatternConditions=[function(row,column){return(row+column)%2==0},function(row,column){return row%2==0},function(row,column){return column%3==0},function(row,column){return(row+column)%3==0},function(row,column){return(Math.floor(row/2)+Math.floor(column/3))%2==0},function(row,column){return row*column%2+row*column%3==0},function(row,column){return(row*column%2+row*column%3)%2==0},function(row,column){return((row+column)%2+row*column%3)%2==0}],encoding_numberRegex=/^\d+/,alphaRegex=new RegExp("^[A-Z $%*+./:-]+"),alphaNumericRegex=new RegExp("^[A-Z0-9 $%*+./:-]+"),byteRegex=new RegExp("^[^A-Z0-9 $%*+./:-]+"),initMinNumericBeforeAlpha=8,initMinNumericBeforeByte=5,initMinAlphaBeforeByte=8,minNumericBeforeAlpha=17,minNumericBeforeByte=9,minAlphaBeforeByte=16,generatorPolynomials=[[1,0],[1,25,0]];function fillFunctionCell(matrices,bit,x,y){for(var i=0;i<matrices.length;i++)matrices[i][x][y]=bit}function fillDataCell(matrices,bit,x,y){for(var i=0;i<maskPatternConditions.length;i++)matrices[i][x][y]=maskPatternConditions[i](x,y)?1^bit:parseInt(bit,10)}function xorPolynomials(x,y){for(var result=[],i=x.length-2;i>=0;i--)result[i]=x[i]^y[i];return result}function multiplyPolynomials(x,y){for(var result=[],i=0;i<x.length;i++)for(var j=0;j<y.length;j++)void 0===result[i+j]?result[i+j]=(x[i]+(y[j]>=0?y[j]:0))%255:result[i+j]=powersOfTwo[powersOfTwoResult[result[i+j]]^powersOfTwoResult[(x[i]+y[j])%255]];return result}function multiplyByConstant(polynomial,power){var result=[],idx=polynomial.length-1;do{result[idx]=powersOfTwoResult[(polynomial[idx]+power)%255],idx--}while(void 0!==polynomial[idx]);return result}function generateErrorCodewords(data,errorCodewordsCount){var divisor,idx,generator=generatorPolynomials[errorCodewordsCount-1],result=new Array(errorCodewordsCount).concat(data),generatorPolynomial=new Array(result.length-generator.length).concat(generator),steps=data.length,errorCodewords=[];for(idx=0;idx<steps;idx++)divisor=multiplyByConstant(generatorPolynomial,powersOfTwo[result[result.length-1]]),generatorPolynomial.splice(0,1),result=xorPolynomials(divisor,result);for(idx=result.length-1;idx>=0;idx--)errorCodewords[errorCodewordsCount-1-idx]=toBitsString(result[idx],8);return errorCodewords}function chooseMode(str,minNumericBeforeAlpha,minNumericBeforeByte,minAlphaBeforeByte,previousMode){var mode,modeString,numeric=encoding_numberRegex.exec(str),numericMatch=numeric?numeric[0]:"",alpha=alphaRegex.exec(str),alphaMatch=alpha?alpha[0]:"",alphaNumeric=alphaNumericRegex.exec(str),alphaNumericMatch=alphaNumeric?alphaNumeric[0]:"";return numericMatch&&(numericMatch.length>=minNumericBeforeAlpha||str.length===numericMatch.length||numericMatch.length>=minNumericBeforeByte&&!alphaNumericRegex.test(str.charAt(numericMatch.length)))?(mode=encoding_NUMERIC,modeString=numericMatch):alphaNumericMatch&&(str.length===alphaNumericMatch.length||alphaNumericMatch.length>=minAlphaBeforeByte||previousMode===encoding_ALPHA_NUMERIC)?(mode=encoding_ALPHA_NUMERIC,modeString=numericMatch||alphaMatch):(mode=encoding_BYTE,modeString=alphaNumericMatch?alphaNumericMatch+byteRegex.exec(str.substring(alphaNumericMatch.length))[0]:byteRegex.exec(str)[0]),{mode,modeString}}function getVersion(dataCodewordsCount,errorCorrectionLevel){var x=0,y=VersionsCodewordsInformation.length-1,version=Math.floor(VersionsCodewordsInformation.length/2);do{dataCodewordsCount<VersionsCodewordsInformation[version][errorCorrectionLevel].totalDataCodewords?y=version:x=version,version=x+Math.floor((y-x)/2)}while(y-x>1);return dataCodewordsCount<=VersionsCodewordsInformation[x][errorCorrectionLevel].totalDataCodewords?version+1:y+1}function encodeBCH(value,generatorPolynomial,codeLength){var generatorNumber=toDecimal(generatorPolynomial),polynomialLength=generatorPolynomial.length-1,valueNumber=value<<polynomialLength,valueString=toBitsString(value,codeLength-polynomialLength),result=function dividePolynomials(numberX,numberY){var yLength=numberY.toString(2).length,xLength=numberX.toString(2).length,x=numberX;do{xLength=(x^=numberY<<xLength-yLength).toString(2).length}while(xLength>=yLength);return x}(valueNumber,generatorNumber);return result=valueString+toBitsString(result,polynomialLength)}function getNumberAt(str,idx){return parseInt(str.charAt(idx),10)}function addFormatInformation(matrices,formatString){var x,y,matrix=matrices[0],idx=0,length=formatString.length;for(x=0,y=8;x<=8;x++)6!==x&&fillFunctionCell(matrices,getNumberAt(formatString,length-1-idx++),x,y);for(x=8,y=7;y>=0;y--)6!==y&&fillFunctionCell(matrices,getNumberAt(formatString,length-1-idx++),x,y);for(idx=0,y=matrix.length-1,x=8;y>=matrix.length-8;y--)fillFunctionCell(matrices,getNumberAt(formatString,length-1-idx++),x,y);for(fillFunctionCell(matrices,1,matrix.length-8,8),x=matrix.length-7,y=8;x<matrix.length;x++)fillFunctionCell(matrices,getNumberAt(formatString,length-1-idx++),x,y)}function addVersionInformation(matrices,dataString){for(var quotient,mod,value,modules=matrices[0].length,y1=modules-11,x2=modules-11,idx=0;idx<dataString.length;idx++)quotient=Math.floor(idx/3),mod=idx%3,fillFunctionCell(matrices,value=getNumberAt(dataString,dataString.length-idx-1),0+quotient,y1+mod),fillFunctionCell(matrices,value,x2+mod,0+quotient)}function addCentricPattern(matrices,pattern,x,y){for(var value,size=pattern.length+2,length=pattern.length+1,i=0;i<pattern.length;i++)for(var j=i;j<size-i;j++)fillFunctionCell(matrices,value=pattern[i],x+j,y+i),fillFunctionCell(matrices,value,x+i,y+j),fillFunctionCell(matrices,value,x+length-j,y+length-i),fillFunctionCell(matrices,value,x+length-i,y+length-j)}function addFinderSeparator(matrices,direction,x,y){var nextX=x,nextY=y,matrix=matrices[0];do{fillFunctionCell(matrices,0,nextX,y),fillFunctionCell(matrices,0,x,nextY),nextX+=direction[0],nextY+=direction[1]}while(nextX>=0&&nextX<matrix.length)}function scoreFinderPatternOccurance(idx,patterns,scores,rowColumn,bit){patterns[idx][rowColumn]=(patterns[idx][rowColumn]<<1^bit)%128,93===patterns[idx][rowColumn]&&(scores[idx]+=40)}function scoreAdjacentSameBits(idx,scores,previousBits,bit,adjacentBits,rowColumn){previousBits[idx][rowColumn]===bit?adjacentBits[idx][rowColumn]++:(previousBits[idx][rowColumn]=bit,adjacentBits[idx][rowColumn]>=5&&(scores[idx]+=3+adjacentBits[idx][rowColumn]-5),adjacentBits[idx][rowColumn]=1)}function calculateDarkModulesRatioScore(darkModules,total){var percent=Math.floor(darkModules/total*100),mod5=percent%5,previous=Math.abs(percent-mod5-50),next=Math.abs(percent+5-mod5-50);return 10*Math.min(previous/5,next/5)}function encoding_encodeData(inputString,errorCorrectionLevel,encoding){var encoder=function createQRCodeDataEncoder(encoding){return encoding&&encoding.toLowerCase().indexOf("utf_8")>=0?new Utf8Encoder:new IsoEncoder}(encoding),encodingResult=encoder.getEncodingResult(inputString,errorCorrectionLevel),version=encodingResult.version,versionInformation=VersionsCodewordsInformation[version-1][errorCorrectionLevel],blocks=function getBlocks(dataStream,versionCodewordsInformation){for(var dataBlock,blockCodewordsCount,groupBlocksCount,messagePolynomial,codeword,codewordStart=0,dataBlocks=[],errorBlocks=[],versionGroups=versionCodewordsInformation.groups,groupIdx=0;groupIdx<versionGroups.length;groupIdx++){groupBlocksCount=versionGroups[groupIdx][0];for(var blockIdx=0;blockIdx<groupBlocksCount;blockIdx++){blockCodewordsCount=versionGroups[groupIdx][1],dataBlock=[],messagePolynomial=[];for(var codewordIdx=1;codewordIdx<=blockCodewordsCount;codewordIdx++)codeword=dataStream.substring(codewordStart,codewordStart+8),dataBlock.push(codeword),messagePolynomial[blockCodewordsCount-codewordIdx]=toDecimal(codeword),codewordStart+=8;dataBlocks.push(dataBlock),errorBlocks.push(generateErrorCodewords(messagePolynomial,versionCodewordsInformation.errorCodewordsPerBlock))}}return[dataBlocks,errorBlocks]}(function padDataString(initialDataString,totalDataCodewords){for(var dataBitsCount=8*totalDataCodewords,terminatorIndex=0,paddingCodewordIndex=0,dataString=initialDataString;dataString.length<dataBitsCount&&terminatorIndex<4;)dataString+="0000".charAt(terminatorIndex++);for(dataString.length%8!=0&&(dataString+=new Array(9-dataString.length%8).join("0"));dataString.length<dataBitsCount;)dataString+=paddingCodewords[paddingCodewordIndex],paddingCodewordIndex^=1;return dataString}(encodingResult.dataString,versionInformation.totalDataCodewords),versionInformation),matrices=function initMatrices(version){for(var matrices=[],modules=17+4*version,i=0;i<maskPatternConditions.length;i++){matrices[i]=new Array(modules);for(var j=0;j<modules;j++)matrices[i][j]=new Array(modules)}return matrices}(version);!function addFinderPatterns(matrices){var modules=matrices[0].length;addCentricPattern(matrices,finderPattern,0,0),addFinderSeparator(matrices,[-1,-1],7,7),addCentricPattern(matrices,finderPattern,modules-7,0),addFinderSeparator(matrices,[1,-1],modules-8,7),addCentricPattern(matrices,finderPattern,0,modules-7),addFinderSeparator(matrices,[-1,1],7,modules-8)}(matrices),function addAlignmentPatterns(matrices,version){if(!(version<2)){var startDistance,distance,matrix=matrices[0],modules=matrix.length,pointsCount=Math.floor(version/7),points=[6],idx=0;for((startDistance=irregularAlignmentPatternsStartDistance[version])?distance=(modules-13-startDistance)/pointsCount:startDistance=distance=(modules-13)/(pointsCount+1),points.push(points[idx++]+startDistance);points[idx]+distance<modules;)points.push(points[idx++]+distance);for(var i=0;i<points.length;i++)for(var j=0;j<points.length;j++)void 0===matrix[points[i]][points[j]]&&addCentricPattern(matrices,alignmentPattern,points[i]-2,points[j]-2)}}(matrices,version),function addTimingFunctions(matrices){for(var value=1,modules=matrices[0].length,i=8;i<modules-8;i++)fillFunctionCell(matrices,value,6,i),fillFunctionCell(matrices,value,i,6),value^=1}(matrices),version>=7&&addVersionInformation(matrices,toBitsString(0,18)),addFormatInformation(matrices,toBitsString(0,15)),function fillData(matrices,blocks){for(var block,codewordIdx,cell,cellVisitor=new FreeCellVisitor(matrices[0]),blockIdx=0;blockIdx<blocks.length;blockIdx++)for(block=blocks[blockIdx],codewordIdx=0;block.length>0;){for(var i=0;i<block.length;i++)for(var j=0;j<8;j++)cell=cellVisitor.getNextCell(),fillDataCell(matrices,block[i][codewordIdx].charAt(j),cell.row,cell.column);for(codewordIdx++;block[0]&&codewordIdx===block[0].length;)block.splice(0,1)}for(;cell=cellVisitor.getNextRemainderCell();)fillDataCell(matrices,0,cell.row,cell.column)}(matrices,blocks);var minIdx=function scoreMaskMatrixes(matrices){var matrix,i,scores=[],previousBits=[],darkModules=[],patterns=[],adjacentSameBits=[],modulesLength=matrices[0].length;for(i=0;i<matrices.length;i++)scores[i]=0,darkModules[i]=0,adjacentSameBits[i]=[0,0],patterns[i]=[0,0],previousBits[i]=[];for(var rowIndex=0;rowIndex<modulesLength;rowIndex++)for(var columnIndex=0;columnIndex<modulesLength;columnIndex++)for(var matrixIndex=0;matrixIndex<matrices.length;matrixIndex++)matrix=matrices[matrixIndex],darkModules[matrixIndex]+=parseInt(matrix[rowIndex][columnIndex],10),previousBits[matrixIndex][0]===matrix[rowIndex][columnIndex]&&rowIndex+1<modulesLength&&columnIndex-1>=0&&matrix[rowIndex+1][columnIndex]===previousBits[matrixIndex][0]&&matrix[rowIndex+1][columnIndex-1]===previousBits[matrixIndex][0]&&(scores[matrixIndex]+=3),scoreFinderPatternOccurance(matrixIndex,patterns,scores,0,matrix[rowIndex][columnIndex]),scoreFinderPatternOccurance(matrixIndex,patterns,scores,1,matrix[columnIndex][rowIndex]),scoreAdjacentSameBits(matrixIndex,scores,previousBits,matrix[rowIndex][columnIndex],adjacentSameBits,0),scoreAdjacentSameBits(matrixIndex,scores,previousBits,matrix[columnIndex][rowIndex],adjacentSameBits,1);var minIdx,total=modulesLength*modulesLength,min=Number.MAX_VALUE;for(i=0;i<scores.length;i++)scores[i]+=calculateDarkModulesRatioScore(darkModules[i],total),scores[i]<min&&(min=scores[i],minIdx=i);return minIdx}(matrices),optimalMatrix=matrices[minIdx];return version>=7&&addVersionInformation([optimalMatrix],function encodeVersionInformation(version){return encodeBCH(version,"1111100100101",18)}(version)),addFormatInformation([optimalMatrix],function encodeFormatInformation(format){var encodedString,result="";if(0===toDecimal(format))return"101010000010010";encodedString=encodeBCH(toDecimal(format),"10100110111",15);for(var i=0;i<encodedString.length;i++)result+=encodedString.charAt(i)^"101010000010010".charAt(i);return result}(errorCorrectionPatterns[errorCorrectionLevel]+toBitsString(minIdx,3))),optimalMatrix}!function generatePowersOfTwo(){var result,power;for(power=1;power<255;power++)(result=2*powersOfTwoResult[power-1])>255&&(result^=285),powersOfTwoResult[power]=result,powersOfTwo[result]=power;result=2*powersOfTwoResult[power-1]^285,powersOfTwoResult[power]=result,powersOfTwoResult[-1]=0}(),function generateGeneratorPolynomials(){for(var idx=2;idx<=68;idx++){var firstPolynomial=generatorPolynomials[idx-1],secondPolynomial=[idx,0];generatorPolynomials[idx]=multiplyPolynomials(firstPolynomial,secondPolynomial)}}();var qrcode_round=Math.round,crossPattern=[[0,1],[1,1],[1,2],[2,2],[2,1],[3,1],[3,0],[2,0],[2,-1],[1,-1],[1,0]],squarePattern=[[0,1],[1,1],[1,0]],QRCodeDefaults_DEFAULT_SIZE=200,QRCodeDefaults_DEFAULT_ERROR_CORRECTION_LEVEL="L",QRCodeDefaults_DEFAULT_BACKGROUND="#fff",QRCodeDefaults_DEFAULT_DARK_MODULE_COLOR="#000",QRCodeDefaults_MIN_BASE_UNIT_SIZE=1,QRCodeDefaults_DEFAULT_LOGO_SIZE=7,QRCode=function(Class){function QRCode(element,options,errorHandler){void 0===errorHandler&&(errorHandler=defaultErrorHandler),Class.call(this),this.options=deepExtend({},this.options,options),this.element=element,this.wrapper=this.element,this.onError=errorHandler,this._initElement(),this._initSurface(),this.setOptions(options)}return Class&&(QRCode.__proto__=Class),QRCode.prototype=Object.create(Class&&Class.prototype),QRCode.prototype.constructor=QRCode,QRCode.prototype.destroy=function destroy(){this._destroySurface()},QRCode.prototype._initElement=function _initElement(){addClass(this.element,"k-qrcode")},QRCode.prototype._initSurface=function _initSurface(){var options=this.options,surface=this.surface;surface&&surface.options.type===options.renderAs||(this._destroySurface(),this._initSurfaceElement(),this.surface=this._createSurface())},QRCode.prototype._createSurface=function _createSurface(){return es_surface.A.create(this.surfaceElement,{type:this.options.renderAs})},QRCode.prototype._destroySurface=function _destroySurface(){this.surface&&(this.surface.destroy(),this.surface=null,this._destroySurfaceElement())},QRCode.prototype._initSurfaceElement=function _initSurfaceElement(){this.surfaceElement||(this.surfaceElement=document.createElement("div"),this.surfaceElement.style.position="relative",this.element.appendChild(this.surfaceElement))},QRCode.prototype._destroySurfaceElement=function _destroySurfaceElement(){this.surfaceElement&&this.surfaceElement.parentNode&&(this.surfaceElement.parentNode.removeChild(this.surfaceElement),this.surfaceElement=null)},QRCode.prototype.redraw=function redraw(){var size=this._getSize();this.surface.clear(),this.surface.setSize({width:size,height:size}),this.createVisual(),this.surface.draw(this.visual)},QRCode.prototype.getSize=function getSize(){var element=this.element,elementWidth=element.clientWidth,elementHeight=element.clientHeight,size={width:0,height:0};return elementWidth>0&&(size.width=elementWidth),elementHeight&&(size.height=elementHeight),size},QRCode.prototype._resize=function _resize(){this.redraw()},QRCode.prototype.createVisual=function createVisual(){this.visual=this._render()},QRCode.prototype.exportVisual=function exportVisual(){return this._render()},QRCode.prototype._render=function _render(){var baseUnit,quietZoneSize,matrix,size,contentSize,value=this._value,border=this.options.border||{},padding=this.options.padding||0,borderWidth=border.width||0;border.width=borderWidth;var visual=new shapes_group.A;try{value&&(matrix=encoding_encodeData(value,this.options.errorCorrection,this.options.encoding),contentSize=(size=this._getSize())-2*(borderWidth+padding),baseUnit=this._calculateBaseUnit(contentSize,matrix.length),quietZoneSize=borderWidth+padding+(contentSize-matrix.length*baseUnit)/2,visual.append(this._renderBackground(size,border)),visual.append(this._renderMatrix(matrix,baseUnit,quietZoneSize)),this._hasCustomLogo()?visual.append(this._renderLogo(size,baseUnit)):this._isSwiss()&&visual.append(this._renderSwissCode(size,baseUnit)))}catch(error){this.onError(error)}return visual},QRCode.prototype._renderLogo=function _renderLogo(qrSize,baseUnit){var imageRect,center=qrcode_round(qrSize/2),logoSize=this._getLogoSize(baseUnit*QRCodeDefaults_DEFAULT_LOGO_SIZE),logoUrl=this.options.overlay.imageUrl,position={x:center-logoSize.width/2,y:center-logoSize.height/2};return imageRect=new geometry_rect.A(new geometry_point.A(position.x,position.y),new geometry_size.A(logoSize.width,logoSize.height)),new shapes_image.A(logoUrl,imageRect)},QRCode.prototype._renderSwissCode=function _renderSwissCode(qrSize,baseUnit){var logoSize=this._getLogoSize(baseUnit*QRCodeDefaults_DEFAULT_LOGO_SIZE),crossSize=(logoSize=Math.max(logoSize.width,logoSize.height))/4,crossOffset=crossSize/2,center=qrSize/2,start={},visual=new shapes_group.A;return start.x=start.y=Math.ceil(center-baseUnit-logoSize/2),visual.append(this._renderShape(start,Math.ceil(logoSize+2*baseUnit),squarePattern,"#fff")),start.x=start.y=center-logoSize/2,visual.append(this._renderShape(start,logoSize,squarePattern,this.options.color)),start.x=center+crossOffset-logoSize/2,start.y=center+crossOffset+crossSize-logoSize/2,visual.append(this._renderShape(start,crossSize,crossPattern,"#fff")),visual},QRCode.prototype._renderShape=function _renderShape(start,step,pattern,color){var path=new shapes_path.P({fill:{color},stroke:null});path.moveTo(start.x,start.y);for(var i=0;i<pattern.length;i++)path.lineTo(start.x+step*pattern[i][0],start.y+step*pattern[i][1]);return path.close(),path},QRCode.prototype._getSize=function _getSize(){var size;if(this.options.size)size=parseInt(this.options.size,10);else{var elementSize=surfaceSize(this.element,this.options.renderAs),min=Math.min(elementSize.width,elementSize.height);size=min>0?min:QRCodeDefaults_DEFAULT_SIZE}return size},QRCode.prototype._calculateBaseUnit=function _calculateBaseUnit(size,matrixSize){var baseUnit=Math.floor(size/matrixSize);if(baseUnit<QRCodeDefaults_MIN_BASE_UNIT_SIZE){var minSize=Math.ceil(matrixSize*QRCodeDefaults_MIN_BASE_UNIT_SIZE);this.onError(new Error("Insufficient size for QR Code: the current size is "+size+"px and the minimum size is "+minSize+"px."))}else baseUnit*matrixSize>=size&&baseUnit-1>=QRCodeDefaults_MIN_BASE_UNIT_SIZE&&baseUnit--;return baseUnit},QRCode.prototype._renderMatrix=function _renderMatrix(matrix,baseUnit,quietZoneSize){for(var path=new shapes_path.P({fill:{color:this.options.color},stroke:null}),row=0;row<matrix.length;row++)for(var y=quietZoneSize+row*baseUnit,column=0;column<matrix.length;){for(;0===matrix[row][column]&&column<matrix.length;)column++;if(column<matrix.length){for(var x=column;1===matrix[row][column];)column++;var x1=qrcode_round(quietZoneSize+x*baseUnit),y1=qrcode_round(y),x2=qrcode_round(quietZoneSize+column*baseUnit),y2=qrcode_round(y+baseUnit);path.moveTo(x1,y1).lineTo(x1,y2).lineTo(x2,y2).lineTo(x2,y1).close()}}return path},QRCode.prototype._renderBackground=function _renderBackground(size,border){var box=new core_box(0,0,size,size).unpad(border.width/2);return shapes_path.w.fromRect(box.toRect(),{fill:{color:this.options.background},stroke:{color:border.color,width:border.width}})},QRCode.prototype.setOptions=function setOptions(options){var newOptions=options||{};this.options=utils_extend(this.options,newOptions),void 0!==options.value&&(this._value=String(this.options.value)),this._initSurface(),this.redraw()},QRCode.prototype.value=function value(value$1){if(void 0===value$1)return this._value;this._value=String(value$1),this.redraw()},QRCode.prototype._hasCustomLogo=function _hasCustomLogo(){return Boolean(this.options.overlay.imageUrl)},QRCode.prototype._isSwiss=function _isSwiss(){return"swiss"===this.options.overlay.type},QRCode.prototype._getLogoSize=function _getLogoSize(defautLogoSize){var width=this.options.overlay.width,height=this.options.overlay.height;return width||height?width&&!height?height=width:!width&&height&&(width=height):width=height=defautLogoSize,{width,height}},QRCode}(common_class.A);setDefaultOptions(QRCode,{name:"QRCode",renderAs:"svg",encoding:"ISO_8859_1",value:"",errorCorrection:QRCodeDefaults_DEFAULT_ERROR_CORRECTION_LEVEL,background:QRCodeDefaults_DEFAULT_BACKGROUND,color:QRCodeDefaults_DEFAULT_DARK_MODULE_COLOR,size:"",padding:0,border:{color:"",width:0},overlay:{type:"image",imageUrl:"",width:0,height:0}});const qrcode=QRCode;var datums={WGS84:{a:6378137,b:6356752.314245179,f:.0033528106647474805,e:.08181919084262149}};function toSquare(value){return value*value}var math=Math,abs=math.abs,atan=math.atan,atan2=math.atan2,cos=math.cos,sin=math.sin,tan=math.tan,Location=function(Class){function Location(lat,lng){Class.call(this),this.initProperties(),1===arguments.length?(this.lat=lat[0],this.lng=lat[1]):(this.lat=lat,this.lng=lng)}return Class&&(Location.__proto__=Class),Location.prototype=Object.create(Class&&Class.prototype),Location.prototype.constructor=Location,Location.prototype.initProperties=function initProperties(){deepExtend(this,{DISTANCE_ITERATIONS:100,DISTANCE_CONVERGENCE:1e-12,DISTANCE_PRECISION:2,FORMAT:"{0:N6}{1:N6}"})},Location.prototype.toArray=function toArray(){return[this.lat,this.lng]},Location.prototype.equals=function equals(loc){return loc&&loc.lat===this.lat&&loc.lng===this.lng},Location.prototype.clone=function clone(){return new Location(this.lat,this.lng)},Location.prototype.round=function round$1(precision){return this.lng=drawing_utils_round(this.lng,precision),this.lat=drawing_utils_round(this.lat,precision),this},Location.prototype.wrap=function wrap(){return this.lng=this.lng%180,this.lat=this.lat%90,this},Location.prototype.distanceTo=function distanceTo(dest,datum){return this.greatCircleTo(dest,datum).distance},Location.prototype.destination=function destination(distance,initialBearing,initialDatum){var bearing=rad(initialBearing),datum=initialDatum||datums.WGS84,fromLat=rad(this.lat),fromLng=rad(this.lng),dToR=distance/datum.a,lat=math.asin(sin(fromLat)*cos(dToR)+cos(fromLat)*sin(dToR)*cos(bearing)),lng=fromLng+atan2(sin(bearing)*sin(dToR)*cos(fromLat),cos(dToR)-sin(fromLat)*sin(lat));return new Location(deg(lat),deg(lng))},Location.prototype.greatCircleTo=function greatCircleTo(initialDest,initialDatum){var dest=Location.create(dest),datum=initialDatum||datums.WGS84;if(!dest||this.clone().round(8).equals(dest.clone().round(8)))return{distance:0,azimuthFrom:0,azimuthTo:0};for(var prevLambda,sinLambda,cosLambda,sino,cosA2,coso,cos2om,sigma,a=datum.a,b=datum.b,f=datum.f,L=rad(dest.lng-this.lng),U1=atan((1-f)*tan(rad(this.lat))),sinU1=sin(U1),cosU1=cos(U1),U2=atan((1-f)*tan(rad(dest.lat))),sinU2=sin(U2),cosU2=cos(U2),lambda=L,i=this.DISTANCE_ITERATIONS,converged=!1;!converged&&i-- >0;){sinLambda=sin(lambda),cosLambda=cos(lambda),sino=math.sqrt(toSquare(cosU2*sinLambda)+toSquare(cosU1*sinU2-sinU1*cosU2*cosLambda)),sigma=atan2(sino,coso=sinU1*sinU2+cosU1*cosU2*cosLambda);var sinA=cosU1*cosU2*sinLambda/sino;cos2om=0,0!==(cosA2=1-toSquare(sinA))&&(cos2om=coso-2*sinU1*sinU2/cosA2),prevLambda=lambda;var C=f/16*cosA2*(4+f*(4-3*cosA2));lambda=L+(1-C)*f*sinA*(sigma+C*sino*(cos2om+C*coso*(2*toSquare(cos2om)-1))),converged=abs(lambda-prevLambda)<=this.DISTANCE_CONVERGENCE}var u2=cosA2*(toSquare(a)-toSquare(b))/toSquare(b),A=1+u2/16384*(4096+u2*(u2*(320-175*u2)-768)),B=u2/1024*(256+u2*(u2*(74-47*u2)-128)),deltao=B*sino*(cos2om+B/4*(coso*(2*toSquare(cos2om)-1)-B/6*cos2om*(4*toSquare(sino)-3)*(4*toSquare(cos2om)-3))),azimuthFrom=atan2(cosU2*sinLambda,cosU1*sinU2-sinU1*cosU2*cosLambda),azimuthTo=atan2(cosU1*sinLambda,-sinU1*cosU2+cosU1*sinU2*cosLambda);return{distance:drawing_utils_round(b*A*(sigma-deltao),this.DISTANCE_PRECISION),azimuthFrom:deg(azimuthFrom),azimuthTo:deg(azimuthTo)}},Location.prototype.toString=function toString(){return String(this.lat)+","+String(this.lng)},Location.fromLngLat=function fromLngLat(lngAndLat){return new Location(lngAndLat[1],lngAndLat[0])},Location.fromLatLng=function fromLatLng(lngAndLat){return new Location(lngAndLat[0],lngAndLat[1])},Location.create=function create(a,b){if(drawing_utils_defined(a))return a instanceof Location?a.clone():1===arguments.length&&2===a.length?Location.fromLatLng(a):new Location(a,b)},Location}(common_class.A),crs_math=Math,crs_atan=crs_math.atan,exp=crs_math.exp,pow=crs_math.pow,crs_sin=crs_math.sin,crs_log=crs_math.log,crs_tan=crs_math.tan,crs_Point=geometry_point.A,PI=crs_math.PI,PI_DIV_2=PI/2,PI_DIV_4=PI/4,DEG_TO_RAD=PI/180,crs_WGS84=datums.WGS84,Mercator=function(Class){function Mercator(options){Class.call(this),this.initProperties(),this._initOptions(options)}return Class&&(Mercator.__proto__=Class),Mercator.prototype=Object.create(Class&&Class.prototype),Mercator.prototype.constructor=Mercator,Mercator.prototype._initOptions=function _initOptions(options){this.options=deepExtend({},this.options,options)},Mercator.prototype.initProperties=function initProperties(){deepExtend(this,{MAX_LNG:180,MAX_LAT:85.0840590501,INVERSE_ITERATIONS:15,INVERSE_CONVERGENCE:1e-12})},Mercator.prototype.forward=function forward(loc,clamp){var options=this.options,r=options.datum.a,lng0=options.centralMeridian,lat=limitValue(loc.lat,-this.MAX_LAT,this.MAX_LAT),lng=clamp?limitValue(loc.lng,-this.MAX_LNG,this.MAX_LNG):loc.lng,x=rad(lng-lng0)*r,y=this._projectLat(lat);return new crs_Point(x,y)},Mercator.prototype._projectLat=function _projectLat(lat){var datum=this.options.datum,ecc=datum.e,r=datum.a,y=rad(lat),ts=crs_tan(PI_DIV_4+y/2),con=ecc*crs_sin(y),p=pow((1-con)/(1+con),ecc/2);return r*crs_log(ts*p)},Mercator.prototype.inverse=function inverse(point,clamp){var options=this.options,r=options.datum.a,lng0=options.centralMeridian,lng=point.x/(DEG_TO_RAD*r)+lng0,lat=limitValue(this._inverseY(point.y),-this.MAX_LAT,this.MAX_LAT);return clamp&&(lng=limitValue(lng,-this.MAX_LNG,this.MAX_LNG)),new Location(lat,lng)},Mercator.prototype._inverseY=function _inverseY(y){var i,datum=this.options.datum,r=datum.a,ecc=datum.e,ecch=ecc/2,ts=exp(-y/r),phi=PI_DIV_2-2*crs_atan(ts);for(i=0;i<=this.INVERSE_ITERATIONS;i++){var con=ecc*crs_sin(phi),p=pow((1-con)/(1+con),ecch),dphi=PI_DIV_2-2*crs_atan(ts*p)-phi;if(phi+=dphi,crs_math.abs(dphi)<=this.INVERSE_CONVERGENCE)break}return deg(phi)},Mercator}(common_class.A);setDefaultOptions(Mercator,{centralMeridian:0,datum:crs_WGS84});var SphericalMercator=function(Mercator){function SphericalMercator(){Mercator.apply(this,arguments)}return Mercator&&(SphericalMercator.__proto__=Mercator),SphericalMercator.prototype=Object.create(Mercator&&Mercator.prototype),SphericalMercator.prototype.constructor=SphericalMercator,SphericalMercator.prototype.initProperties=function initProperties(){Mercator.prototype.initProperties.call(this),deepExtend(this,{MAX_LAT:85.0511287798})},SphericalMercator.prototype._projectLat=function _projectLat(lat){var r=this.options.datum.a,y=rad(lat),ts=crs_tan(PI_DIV_4+y/2);return r*crs_log(ts)},SphericalMercator.prototype._inverseY=function _inverseY(y){var r=this.options.datum.a,ts=exp(-y/r);return deg(PI_DIV_2-2*crs_atan(ts))},SphericalMercator}(Mercator),Equirectangular=function(Class){function Equirectangular(){Class.apply(this,arguments)}return Class&&(Equirectangular.__proto__=Class),Equirectangular.prototype=Object.create(Class&&Class.prototype),Equirectangular.prototype.constructor=Equirectangular,Equirectangular.prototype.forward=function forward(loc){return new crs_Point(loc.lng,loc.lat)},Equirectangular.prototype.inverse=function inverse(point){return new Location(point.y,point.x)},Equirectangular}(common_class.A),EPSG3857=function(Class){function EPSG3857(){Class.call(this);var proj=this._proj=new SphericalMercator,c=this.c=2*PI*proj.options.datum.a;this._tm=geometry_transform.A().translate(.5,.5).scale(1/c,-1/c),this._itm=geometry_transform.A().scale(c,-c).translate(-.5,-.5)}return Class&&(EPSG3857.__proto__=Class),EPSG3857.prototype=Object.create(Class&&Class.prototype),EPSG3857.prototype.constructor=EPSG3857,EPSG3857.prototype.toPoint=function toPoint(loc,scale,clamp){return this._proj.forward(loc,clamp).transform(this._tm).scale(scale||1)},EPSG3857.prototype.toLocation=function toLocation(point,scale,clamp){var newPoint=point.clone().scale(1/(scale||1)).transform(this._itm);return this._proj.inverse(newPoint,clamp)},EPSG3857}(common_class.A),defineProperty=(function(Class){function EPSG3395(){Class.call(this),this._proj=new Mercator}Class&&(EPSG3395.__proto__=Class),EPSG3395.prototype=Object.create(Class&&Class.prototype),EPSG3395.prototype.constructor=EPSG3395,EPSG3395.prototype.toPoint=function toPoint(loc){return this._proj.forward(loc)},EPSG3395.prototype.toLocation=function toLocation(point){return this._proj.inverse(point)}}(common_class.A),function(Class){function EPSG4326(){Class.call(this),this._proj=new Equirectangular}Class&&(EPSG4326.__proto__=Class),EPSG4326.prototype=Object.create(Class&&Class.prototype),EPSG4326.prototype.constructor=EPSG4326,EPSG4326.prototype.toPoint=function toPoint(loc){return this._proj.forward(loc)},EPSG4326.prototype.toLocation=function toLocation(point){return this._proj.inverse(point)}}(common_class.A),Object.defineProperty),convertToHtml=(Object.assign,function(html){var div=document.createElement("div");return div.innerHTML=html,div.firstChild}),removeChildren=function(element){for(;element.firstChild;)element.removeChild(element.firstChild)},prepend=function(element,originElement){originElement.insertBefore(element,originElement.firstChild)},toHyphens=function(str){return str.replace(/([a-z][A-Z])/g,(function(g){return g.charAt(0)+"-"+g.charAt(1).toLowerCase()}))},toPixels=function(value){return value&&String(value).endsWith("px")?value:String(value)+"px"},detectOS=function(ua){var minorVersion,os=!1,match=[],agentRxs={wp:/(Windows Phone(?: OS)?)\s(\d+)\.(\d+(\.\d+)?)/,fire:/(Silk)\/(\d+)\.(\d+(\.\d+)?)/,android:/(Android|Android.*(?:Opera|Firefox).*?\/)\s*(\d+)\.?(\d+(\.\d+)?)?/,iphone:/(iPhone|iPod).*OS\s+(\d+)[\._]([\d\._]+)/,ipad:/(iPad).*OS\s+(\d+)[\._]([\d_]+)/,meego:/(MeeGo).+NokiaBrowser\/(\d+)\.([\d\._]+)/,webos:/(webOS)\/(\d+)\.(\d+(\.\d+)?)/,blackberry:/(BlackBerry|BB10).*?Version\/(\d+)\.(\d+(\.\d+)?)/,playbook:/(PlayBook).*?Tablet\s*OS\s*(\d+)\.(\d+(\.\d+)?)/,windows:/(MSIE)\s+(\d+)\.(\d+(\.\d+)?)/,tizen:/(tizen).*?Version\/(\d+)\.(\d+(\.\d+)?)/i,sailfish:/(sailfish).*rv:(\d+)\.(\d+(\.\d+)?).*firefox/i,ffos:/(Mobile).*rv:(\d+)\.(\d+(\.\d+)?).*Firefox/},osRxs={ios:/^i(phone|pad|pod)$/i,android:/^android|fire$/i,blackberry:/^blackberry|playbook/i,windows:/windows/,wp:/wp/,flat:/sailfish|ffos|tizen/i,meego:/meego/},formFactorRxs={tablet:/playbook|ipad|fire/i},browserRxs={omini:/Opera\sMini/i,omobile:/Opera\sMobi/i,firefox:/Firefox|Fennec/i,mobilesafari:/version\/.*safari/i,ie:/MSIE|Windows\sPhone/i,chrome:/chrome|crios/i,webkit:/webkit/i};for(var agent in agentRxs)if(agentRxs.hasOwnProperty(agent)&&(match=ua.match(agentRxs[agent]))){if("windows"===agent&&"plugins"in navigator)return!1;(os={}).device=agent,os.tablet=testRegex(agent,formFactorRxs,!1),os.browser=testRegex(ua,browserRxs,"default"),os.name=testRegex(agent,osRxs),os[os.name]=!0,os.majorVersion=match[2],os.minorVersion=(match[3]||"0").replace("_","."),minorVersion=os.minorVersion.replace(".","").substr(0,2),os.flatVersion=os.majorVersion+minorVersion+new Array(3-(minorVersion.length<3?minorVersion.length:2)).join("0");break}return os};function testRegex(agent,regexes,dflt){for(var regex in regexes)if(regexes.hasOwnProperty(regex)&&regexes[regex].test(agent))return regex;return void 0!==dflt?dflt:agent}var getEventMap=function(){var eventMap={down:"touchstart mousedown",move:"mousemove touchmove",up:"mouseup touchend touchcancel",cancel:"mouseleave touchcancel"},support=getSupportedFeatures();return support.touch&&(support.mobileOS.ios||support.mobileOS.android)?eventMap={down:"touchstart",move:"touchmove",up:"touchend touchcancel",cancel:"touchcancel"}:support.pointers?eventMap={down:"pointerdown",move:"pointermove",up:"pointerup",cancel:"pointercancel pointerleave"}:support.msPointers&&(eventMap={down:"MSPointerDown",move:"MSPointerMove",up:"MSPointerUp",cancel:"MSPointerCancel MSPointerLeave"}),eventMap},getSupportedFeatures=function(){var os=detectOS(navigator.userAgent),browser=function(userAgent){var browser=!1,match=[],browserRxs={edge:/(edge)[ \/]([\w.]+)/i,webkit:/(chrome|crios)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,opera:/(opera)(?:.*version|)[ \/]([\w.]+)/i,msie:/(msie\s|trident.*? rv:)([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i};for(var agent in browserRxs)if(browserRxs.hasOwnProperty(agent)&&(match=userAgent.match(browserRxs[agent]))){(browser={})[agent]=!0,browser[match[1].toLowerCase().split(" ")[0].split("/")[0]]=!0,browser.version=parseInt(document.documentMode||match[2],10);break}return browser}(navigator.userAgent),chrome=browser.chrome,mobileChrome=browser.crios,mozilla=browser.mozilla,safari=browser.safari,support={};support.mobileOS=os,support.touch="ontouchstart"in window,support.pointers=!chrome&&!mobileChrome&&!mozilla&&!safari&&window.PointerEvent,support.msPointers=!chrome&&window.MSPointerEvent,support.mouseAndTouchPresent=support.touch&&!(support.mobileOS.ios||support.mobileOS.android),support.eventCapture=document.documentElement.addEventListener;var table=document.createElement("table"),transitions=support.transitions=!1,transforms=support.transforms=!1;return["Moz","webkit","O","ms"].forEach((function(prefix){var hasTransitions="string"==typeof table.style[prefix+"Transition"];if(hasTransitions||"string"==typeof table.style[prefix+"Transform"]){var lowPrefix=prefix.toLowerCase();return transforms={css:"ms"!==lowPrefix?"-"+lowPrefix+"-":"",prefix,event:"o"===lowPrefix||"webkit"===lowPrefix?lowPrefix:""},hasTransitions&&((transitions=transforms).event=transitions.event?transitions.event+"TransitionEnd":"transitionend"),!1}})),table=null,support.transforms=transforms,support.transitions=transitions,support.delayedClick=function(){if(support.touch){if(support.mobileOS.ios)return!0;if(support.mobileOS.android){if(!support.browser.chrome)return!0;if(support.browser.version<32)return!1;var meta=document.querySelector("meta[name=viewport]");return!(meta?meta.getAttribute("content"):"").match(/user-scalable=no/i)}}return!1},support},proxy=function(method,context){return method.bind(context)};var on=function(element,events,filter,handler,useCapture){addEventListeners(element,events,filter,handler,useCapture)},addEventListeners=function(element,events,filter,handler,useCapture){(isArray(events)?events:(events||"").split(" ")).forEach((function(eventName){addEventListener(element,eventName,filter,handler,useCapture)}))},addEventListener=function(element,event,filter,handler,useCapture){var eventFilter,eventHandler=handler;filter&&isFunction(filter)&&!handler?eventHandler=filter:filter&&function utils_isString(value){return"string"==typeof value}(filter)&&isFunction(eventHandler)&&(eventFilter=filter),element.addEventListener(event,(function(e){var closestMatchingTarget=e.target?e.target.closest(eventFilter):null;if(!eventFilter||eventFilter&&e.target&&closestMatchingTarget){var currentTarget=eventFilter?closestMatchingTarget:e.currentTarget;defineProperty(e,"currentTarget",{value:currentTarget}),defineProperty(e,"delegateTarget",{value:element}),eventHandler(e)}}),Boolean(useCapture))},off=function(element,events,filter,handler,useCapture){removeEventListeners(element,events,filter,handler,useCapture)},removeEventListeners=function(element,events,handler,useCapture){(isArray(events)?events:(events||"").split(" ")).forEach((function(eventName){removeEventListener(element,eventName,handler,useCapture)}))},removeEventListener=function(element,event,handler,useCapture){element.removeEventListener(event,handler,Boolean(useCapture))},applyEventMap=function(events){var eventMap=getEventMap(navigator.userAgent);return events.replace(/([^ ]+)/g,(function queryEventMap(e){return eventMap[e]||e}))},setDefaultEvents=function(type,events){var proto=type.prototype;proto.events?events.forEach((function(event){proto.events.indexOf(event)<0&&proto.events.push(event)})):proto.events=events},utils_now=function(){return Number(new Date)},noop=function(){},renderPos=function(pos){var result=[];if(pos)for(var parts=toHyphens(pos).split("-"),i=0;i<parts.length;i++)result.push("k-pos-"+parts[i]);return result.join(" ")},observable_preventDefault=function(){this._defaultPrevented=!0},isDefaultPrevented=function(){return!0===this._defaultPrevented},Observable=function(Class){function Observable(){Class.call(this),this._events={}}return Class&&(Observable.__proto__=Class),Observable.prototype=Object.create(Class&&Class.prototype),Observable.prototype.constructor=Observable,Observable.prototype.destroy=function destroy(){this.unbind()},Observable.prototype.bind=function bind(event,handlers,one){var idx,length,original,handler,that=this,eventNames="string"==typeof event?[event]:event||[],handlersIsFunction="function"==typeof handlers;if(void 0===handlers){for(idx in event)that.bind(idx,event[idx]);return that}var loop=function(){var eventName=eventNames[idx];(handler=handlersIsFunction?handlers:handlers[eventName])&&(one&&(original=handler,handler=function(){that.unbind(eventName,handler),original.apply(that,arguments)},handler.original=original),(that._events[eventName]=that._events[eventName]||[]).push(handler))};for(idx=0,length=eventNames.length;idx<length;idx++)loop();return that},Observable.prototype.one=function one(eventNames,handlers){return this.bind(eventNames,handlers,!0)},Observable.prototype.first=function first(eventName,handlers){var idx,length,handler,eventNames="string"==typeof eventName?[eventName]:eventName,handlersIsFunction="function"==typeof handlers;for(idx=0,length=eventNames.length;idx<length;idx++){var eventName$1=eventNames[idx];(handler=handlersIsFunction?handlers:handlers[eventName$1])&&(this._events[eventName$1]=this._events[eventName$1]||[]).unshift(handler)}return this},Observable.prototype.trigger=function trigger(eventName,eventArgs){var idx,length,events=this._events[eventName];if(events){var e=eventArgs||{};for(e.sender=this,e._defaultPrevented=!1,e.preventDefault=observable_preventDefault,e.isDefaultPrevented=isDefaultPrevented,idx=0,length=(events=events.slice()).length;idx<length;idx++)events[idx].call(this,e);return!0===e._defaultPrevented}return!1},Observable.prototype.unbind=function unbind(eventName,handler){var idx,events=this._events[eventName];if(void 0===eventName)this._events={};else if(events)if(handler)for(idx=events.length-1;idx>=0;idx--)events[idx]!==handler&&events[idx].original!==handler||events.splice(idx,1);else this._events[eventName]=[];return this},Observable.prototype._setEvents=function _setEvents(options){for(var length=(this.events||[]).length,idx=0;idx<length;idx++){var e=this.events[idx];this.options[e]&&options[e]&&(this.unbind(e,this.options[e]),this._events&&this._events[e]&&delete this._events[e])}this.bind(this.events,options)},Observable}(common_class.A),Attribution=function(Observable){function Attribution(element,options){Observable.call(this),this.element=element,this._initOptions(options),this.items=[],addClass(this.element,"k-widget k-attribution")}return Observable&&(Attribution.__proto__=Observable),Attribution.prototype=Object.create(Observable&&Observable.prototype),Attribution.prototype.constructor=Attribution,Attribution.prototype._initOptions=function _initOptions(options){this.options=deepExtend({},this.options,options)},Attribution.prototype.filter=function filter(extent,zoom){this._extent=extent,this._zoom=zoom,this._render()},Attribution.prototype.add=function add(item){var newItem=item;drawing_utils_defined(item)&&("string"==typeof item&&(newItem={text:item}),this.items.push(newItem),this._render())},Attribution.prototype.remove=function remove(text){for(var result=[],i=0;i<this.items.length;i++){var item=this.items[i];item.text!==text&&result.push(item)}this.items=result,this._render()},Attribution.prototype.clear=function clear(){this.items=[],removeChildren(this.element)},Attribution.prototype._render=function _render(){for(var result=[],i=0;i<this.items.length;i++){var item=this.items[i],text=this._itemText(item);""!==text&&result.push(text)}result.length>0?(removeChildren(this.element),function(html,element){var div=document.createElement("div");for(div.innerHTML=html;div.childNodes.length>0;)element.appendChild(div.childNodes[0])}(result.join(this.options.separator),this.element),this.showElement()):this.hideElement()},Attribution.prototype.hideElement=function hideElement(){this.element.style.display="none"},Attribution.prototype.showElement=function showElement(){this.element.style.display=""},Attribution.prototype._itemText=function _itemText(item){var text="",inZoomLevel=this._inZoomLevel(item.minZoom,item.maxZoom),inArea=this._inArea(item.extent);return inZoomLevel&&inArea&&(text+=item.text),text},Attribution.prototype._inZoomLevel=function _inZoomLevel(min,max){var newMin=valueOrDefault(min,-Number.MAX_VALUE),newMax=valueOrDefault(max,Number.MAX_VALUE);return this._zoom>newMin&&this._zoom<newMax},Attribution.prototype._inArea=function _inArea(area){var result=!0;return area&&(result=area.contains(this._extent)),result},Attribution}(Observable);setDefaultOptions(Attribution,{name:"Attribution",separator:"&nbsp;|&nbsp;"});var directionsMap={up:{className:"k-navigator-n",iconClass:"k-i-caret-alt-up"},down:{className:"k-navigator-s",iconClass:"k-i-caret-alt-down"},right:{className:"k-navigator-e",iconClass:"k-i-caret-alt-right"},left:{className:"k-navigator-w",iconClass:"k-i-caret-alt-left"}};function createButton(direction,iconOptions){var html='<button class="k-button k-button-square k-rounded-full k-button-flat k-button-flat-base k-icon-button '+directionsMap[direction].className+'" aria-label="move '+direction+'">'+renderIcon({icon:"caret-alt-"+direction,iconClass:"k-button-icon",svgIcons:iconOptions.svgIcons,type:iconOptions.type})+"</button>";return convertToHtml(html)}var navigator_Navigator=function(Observable){function Navigator(element,options){Observable.call(this),this.element=element,this._initOptions(options);var navigateUpButton=createButton("up",options.icons),navigateRightlButton=createButton("right",options.icons),navigateDownButton=createButton("down",options.icons),navigateLeftButton=createButton("left",options.icons);this.element.appendChild(navigateUpButton),this.element.appendChild(navigateRightlButton),this.element.appendChild(navigateDownButton),this.element.appendChild(navigateLeftButton),addClass(this.element,"k-widget k-navigator"),on(this.element,"click",".k-button",proxy(this._click,this));var parentElement=this.element.parentNode.closest("[data-role]");this._keyroot=parentElement||this.element,this._tabindex(this._keyroot),this._keydownHandler=proxy(this._keydown,this),on(this._keyroot,"keydown",this._keydownHandler)}return Observable&&(Navigator.__proto__=Observable),Navigator.prototype=Object.create(Observable&&Observable.prototype),Navigator.prototype.constructor=Navigator,Navigator.prototype.destroy=function destroy(){this.dispose()},Navigator.prototype.dispose=function dispose(){off(this._keyroot,"keydown",this._keydownHandler)},Navigator.prototype._tabindex=function _tabindex(target){var targetElement=target||this.wrapper||this.element,element=this.element,tabindex=targetElement.getAttribute("tabindex")||element.getAttribute("tabindex");element.removeAttribute("tabindex"),targetElement.setAttribute("tabindex",isNaN(tabindex)?0:tabindex)},Navigator.prototype._initOptions=function _initOptions(options){this.options=deepExtend({},this.options,options)},Navigator.prototype._pan=function _pan(x,y){var panStep=this.options.panStep;this.trigger("pan",{x:x*panStep,y:y*panStep})},Navigator.prototype._click=function _click(e){var x=0,y=0,button=e.currentTarget;button.matches(".k-navigator-n")?y=1:button.matches(".k-navigator-s")?y=-1:button.matches(".k-navigator-e")?x=1:button.matches(".k-navigator-w")&&(x=-1),this._pan(x,y),e.preventDefault()},Navigator.prototype._keydown=function _keydown(e){switch(e.which){case common_keys.UP:this._pan(0,1),e.preventDefault();break;case common_keys.DOWN:this._pan(0,-1),e.preventDefault();break;case common_keys.RIGHT:this._pan(1,0),e.preventDefault();break;case common_keys.LEFT:this._pan(-1,0),e.preventDefault()}},Navigator}(Observable);function zoom_createButton(direction,icon,iconOptions){var html='<button class="k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-zoom-'+direction+'" title="zoom-'+direction+'" aria-label="zoom-'+direction+'">'+renderIcon({icon,iconClass:"k-button-icon",svgIcons:iconOptions.svgIcons,type:iconOptions.type})+"</button>";return convertToHtml(html)}setDefaultOptions(navigator_Navigator,{name:"Navigator",panStep:1}),setDefaultEvents(navigator_Navigator,["pan"]);var ZoomControl=function(Observable){function ZoomControl(element,options,iconOptions){Observable.call(this),this.element=element,this._initOptions(options);var zoomInButton=zoom_createButton("in","plus",iconOptions),zoomOutButton=zoom_createButton("out","minus",iconOptions);this.element.appendChild(zoomInButton),this.element.appendChild(zoomOutButton),addClass(this.element,"k-widget k-zoom-control k-button-group k-group-horizontal"),this._clickHandler=this._click.bind(this),on(this.element,"click",".k-button",this._clickHandler);var parentElement=this.element.parentNode.closest("[data-role]");this._keyroot=parentElement||this.element,this._tabindex(this._keyroot),this._keydownHandler=this._keydown.bind(this),on(this._keyroot,"keydown",this._keydownHandler)}return Observable&&(ZoomControl.__proto__=Observable),ZoomControl.prototype=Object.create(Observable&&Observable.prototype),ZoomControl.prototype.constructor=ZoomControl,ZoomControl.prototype.destroy=function destroy(){this.element&&off(this.element,"click",this._clickHandler),this._keyroot&&off(this._keyroot,"keydown",this._keydownHandler)},ZoomControl.prototype._tabindex=function _tabindex(target){var targetElement=target||this.wrapper||this.element,element=this.element,tabindex=targetElement.getAttribute("tabindex")||element.getAttribute("tabindex");element.removeAttribute("tabindex"),targetElement.setAttribute("tabindex",isNaN(tabindex)?0:tabindex)},ZoomControl.prototype._initOptions=function _initOptions(options){this.options=deepExtend({},this.options,options)},ZoomControl.prototype._change=function _change(direction){var zoomStep=this.options.zoomStep;this.trigger("change",{delta:direction*zoomStep})},ZoomControl.prototype._click=function _click(e){var direction=1;hasClasses(e.currentTarget,"k-zoom-out")&&(direction=-1),this._change(direction),e.preventDefault()},ZoomControl.prototype._keydown=function _keydown(e){switch(e.which){case common_keys.NUMPAD_PLUS:case 187:case 61:this._change(1);break;case common_keys.NUMPAD_MINUS:case 189:case 173:this._change(-1)}},ZoomControl}(Observable);setDefaultOptions(ZoomControl,{name:"ZoomControl",zoomStep:1}),setDefaultEvents(ZoomControl,["change"]);var extent_math=Math,max=extent_math.max,min=extent_math.min,Extent=function(Class){function Extent(initialNw,initialSe){Class.call(this);var nw=Location.create(initialNw),se=Location.create(initialSe);nw.lng+180>se.lng+180&&nw.lat+90<se.lat+90?(this.se=nw,this.nw=se):(this.se=se,this.nw=nw)}Class&&(Extent.__proto__=Class),Extent.prototype=Object.create(Class&&Class.prototype),Extent.prototype.constructor=Extent;var staticAccessors={World:{configurable:!0}};return Extent.prototype.contains=function contains(loc){var nw=this.nw,se=this.se,lng=valueOrDefault(loc.lng,loc[1]),lat=valueOrDefault(loc.lat,loc[0]);return loc&&lng+180>=nw.lng+180&&lng+180<=se.lng+180&&lat+90>=se.lat+90&&lat+90<=nw.lat+90},Extent.prototype.center=function center(){var nw=this.nw,se=this.se,lng=nw.lng+(se.lng-nw.lng)/2,lat=nw.lat+(se.lat-nw.lat)/2;return new Location(lat,lng)},Extent.prototype.containsAny=function containsAny(locs){for(var result=!1,i=0;i<locs.length;i++)result=result||this.contains(locs[i]);return result},Extent.prototype.include=function include(loc){var nw=this.nw,se=this.se,lng=valueOrDefault(loc.lng,loc[1]),lat=valueOrDefault(loc.lat,loc[0]);nw.lng=min(nw.lng,lng),nw.lat=max(nw.lat,lat),se.lng=max(se.lng,lng),se.lat=min(se.lat,lat)},Extent.prototype.includeAll=function includeAll(locs){for(var i=0;i<locs.length;i++)this.include(locs[i])},Extent.prototype.edges=function edges(){var nw=this.nw,se=this.se;return{nw:this.nw,ne:new Location(nw.lat,se.lng),se:this.se,sw:new Location(se.lat,nw.lng)}},Extent.prototype.toArray=function toArray(){var nw=this.nw,se=this.se;return[nw,new Location(nw.lat,se.lng),se,new Location(se.lat,nw.lng)]},Extent.prototype.overlaps=function overlaps(extent){return this.containsAny(extent.toArray())||extent.containsAny(this.toArray())},Extent.create=function create(a,b){return a instanceof Extent?a:a&&b?new Extent(a,b):a&&4===a.length&&!b?new Extent([a[0],a[1]],[a[2],a[3]]):void 0},staticAccessors.World.get=function(){return new Extent([90,-180],[-90,180])},Object.defineProperties(Extent,staticAccessors),Extent}(common_class.A),tooltip_Tooltip=function(Class){function Tooltip(widgetService,options){Class.call(this),this.widgetService=widgetService,this.options=deepExtend({},this.options,options),this.offset={x:0,y:0}}Class&&(Tooltip.__proto__=Class),Tooltip.prototype=Object.create(Class&&Class.prototype),Tooltip.prototype.constructor=Tooltip;var prototypeAccessors={anchor:{configurable:!0}};return Tooltip.prototype.show=function show(anchor,args){this.location!==args.location&&(this.anchor=anchor,this.location=args.location,this.widgetService.notify("showTooltip",Object.assign({anchor:this.anchor},args)),this.visible=!0)},Tooltip.prototype.hide=function hide(){this.widgetService&&this.widgetService.notify("hideTooltip"),this.visible=!1,this.location=null},prototypeAccessors.anchor.get=function(){return this._anchor},prototypeAccessors.anchor.set=function(anchor){var documentPoint=this.widgetService.widget._toDocumentCoordinates({x:anchor.left-this.offset.x,y:anchor.top-this.offset.y});this._anchor={left:documentPoint.left,top:documentPoint.top}},Tooltip.prototype.destroy=function destroy(){this.widgetService=null},Object.defineProperties(Tooltip.prototype,prototypeAccessors),Tooltip}(common_class.A);setDefaultOptions(tooltip_Tooltip,{border:{width:1},opacity:1});var Layer=function(Class){function Layer(map,options){Class.call(this),this.support=getSupportedFeatures(),this._initOptions(options),this.map=map;var element=document.createElement("div");addClass(element,"k-layer"),element.style.zIndex=this.options.zIndex,element.style.opacity=this.options.opacity,this.element=element,map.scrollElement.appendChild(this.element),this._beforeReset=this._beforeReset.bind(this),this._reset=this._reset.bind(this),this._resize=this._resize.bind(this),this._panEnd=this._panEnd.bind(this),this._activate(),this._updateAttribution()}return Class&&(Layer.__proto__=Class),Layer.prototype=Object.create(Class&&Class.prototype),Layer.prototype.constructor=Layer,Layer.prototype.destroy=function destroy(){this._deactivate()},Layer.prototype._initOptions=function _initOptions(options){this.options=deepExtend({},this.options,options)},Layer.prototype.show=function show(){this.reset(),this._activate(),this._applyExtent(!0)},Layer.prototype.hide=function hide(){this._deactivate(),this._setVisibility(!1)},Layer.prototype.reset=function reset(){this._beforeReset(),this._reset()},Layer.prototype._reset=function _reset(){this._applyExtent()},Layer.prototype._beforeReset=function _beforeReset(){},Layer.prototype._resize=function _resize(){},Layer.prototype._panEnd=function _panEnd(){this._applyExtent()},Layer.prototype._applyExtent=function _applyExtent(){var options=this.options,zoom=this.map.zoom(),matchMinZoom=!drawing_utils_defined(options.minZoom)||zoom>=options.minZoom,matchMaxZoom=!drawing_utils_defined(options.maxZoom)||zoom<=options.maxZoom,extent=Extent.create(options.extent),inside=!extent||extent.overlaps(this.map.extent());this._setVisibility(matchMinZoom&&matchMaxZoom&&inside)},Layer.prototype._setVisibility=function _setVisibility(visible){this.element.style.display=visible?"":"none"},Layer.prototype._activate=function _activate(){var map=this.map;this._deactivate(),map.bind("beforeReset",this._beforeReset),map.bind("reset",this._reset),map.bind("resize",this._resize),map.bind("panEnd",this._panEnd)},Layer.prototype._deactivate=function _deactivate(){var map=this.map;map.unbind("beforeReset",this._beforeReset),map.unbind("reset",this._reset),map.unbind("resize",this._resize),map.unbind("panEnd",this._panEnd)},Layer.prototype._updateAttribution=function _updateAttribution(){var attribution=this.map.attribution;attribution&&attribution.add(this.options.attribution)},Layer.prototype._readData=function _readData(){return this.options.data||[]},Layer.prototype._hasData=function _hasData(){return this._data&&this._data.length>0},Layer.prototype._layerIndex=function _layerIndex(){return(this.map.layers||[]).indexOf(this)},Layer}(common_class.A),tile_math=Math,tile_Point=geometry_point.A;function compileTemplate(template){return isFunction(template)?template:template_service.compile(template)}function roundPoint(point){return new tile_Point(drawing_utils_round(point.x),drawing_utils_round(point.y))}function renderSize(size){var newSize=size;return"string"!=typeof size&&(newSize+="px"),newSize}var TileLayer=function(Layer){function TileLayer(map,options){Layer.call(this,map,options),"string"==typeof this.options.subdomains&&(this.options.subdomains=this.options.subdomains.split(""));var viewType=this._viewType();this._view=new viewType(this.element,this.options)}return Layer&&(TileLayer.__proto__=Layer),TileLayer.prototype=Object.create(Layer&&Layer.prototype),TileLayer.prototype.constructor=TileLayer,TileLayer.prototype.destroy=function destroy(){Layer.prototype.destroy.call(this),this._view.destroy(),this._view=null},TileLayer.prototype._beforeReset=function _beforeReset(){var map=this.map,origin=map.locationToLayer(map.extent().nw).round();this._view.viewOrigin(origin)},TileLayer.prototype._reset=function _reset(){Layer.prototype._reset.call(this),this._updateView(),this._view.reset()},TileLayer.prototype._viewType=function _viewType(){return TileView},TileLayer.prototype._activate=function _activate(){Layer.prototype._activate.call(this),this.support.mobileOS||(this._pan||(this._pan=(0,throttle.A)(this._render.bind(this),100)),this.map.bind("pan",this._pan))},TileLayer.prototype._deactivate=function _deactivate(){Layer.prototype._deactivate.call(this),this._pan&&this.map.unbind("pan",this._pan)},TileLayer.prototype._updateView=function _updateView(){var view=this._view,map=this.map,extent=map.extent(),extentToPoint={nw:map.locationToLayer(extent.nw).round(),se:map.locationToLayer(extent.se).round()};view.center(map.locationToLayer(map.center())),view.extent(extentToPoint),view.zoom(map.zoom())},TileLayer.prototype._resize=function _resize(){this._render()},TileLayer.prototype._panEnd=function _panEnd(e){Layer.prototype._panEnd.call(this,e),this._render()},TileLayer.prototype._render=function _render(){this._updateView(),this._view.render()},TileLayer}(Layer);setDefaultOptions(TileLayer,{tileSize:256,subdomains:["a","b","c"],urlTemplate:"",zIndex:1});var TileView=function(Class){function TileView(element,options){Class.call(this),this.element=element,this._initOptions(options),this.pool=new TilePool}return Class&&(TileView.__proto__=Class),TileView.prototype=Object.create(Class&&Class.prototype),TileView.prototype.constructor=TileView,TileView.prototype._initOptions=function _initOptions(options){this.options=deepExtend({},this.options,options)},TileView.prototype.center=function center(center$1){this._center=center$1},TileView.prototype.extent=function extent(extent$1){this._extent=extent$1},TileView.prototype.viewOrigin=function viewOrigin(origin){this._viewOrigin=origin},TileView.prototype.zoom=function zoom(zoom$1){this._zoom=zoom$1},TileView.prototype.pointToTileIndex=function pointToTileIndex(point){return new tile_Point(tile_math.floor(point.x/this.options.tileSize),tile_math.floor(point.y/this.options.tileSize))},TileView.prototype.tileCount=function tileCount(){var size=this.size(),firstTileIndex=this.pointToTileIndex(this._extent.nw),nw=this._extent.nw,point=this.indexToPoint(firstTileIndex).translate(-nw.x,-nw.y);return{x:tile_math.ceil((tile_math.abs(point.x)+size.width)/this.options.tileSize),y:tile_math.ceil((tile_math.abs(point.y)+size.height)/this.options.tileSize)}},TileView.prototype.size=function size(){var nw=this._extent.nw,diff=this._extent.se.clone().translate(-nw.x,-nw.y);return{width:diff.x,height:diff.y}},TileView.prototype.indexToPoint=function indexToPoint(index){var x=index.x,y=index.y;return new tile_Point(x*this.options.tileSize,y*this.options.tileSize)},TileView.prototype.subdomainText=function subdomainText(){var subdomains=this.options.subdomains;return subdomains[this.subdomainIndex++%subdomains.length]},TileView.prototype.destroy=function destroy(){removeChildren(this.element),this.pool.empty()},TileView.prototype.reset=function reset(){this.pool.reset(),this.subdomainIndex=0,this.render()},TileView.prototype.render=function render(){var tile,x,y,size=this.tileCount(),firstTileIndex=this.pointToTileIndex(this._extent.nw);for(x=0;x<size.x;x++)for(y=0;y<size.y;y++)(tile=this.createTile({x:firstTileIndex.x+x,y:firstTileIndex.y+y})).visible||tile.show()},TileView.prototype.createTile=function createTile(currentIndex){var options=this.tileOptions(currentIndex),tile=this.pool.get(this._center,options);return tile.element.parentNode||this.element.append(tile.element),tile},TileView.prototype.tileOptions=function tileOptions(currentIndex){var index=this.wrapIndex(currentIndex),point=this.indexToPoint(currentIndex),origin=this._viewOrigin,offset=point.clone().translate(-origin.x,-origin.y);return{index,currentIndex,point,offset:roundPoint(offset),zoom:this._zoom,size:this.options.tileSize,subdomain:this.subdomainText(),urlTemplate:this.options.urlTemplate,errorUrlTemplate:this.options.errorUrlTemplate}},TileView.prototype.wrapIndex=function wrapIndex(index){var boundary=tile_math.pow(2,this._zoom);return{x:this.wrapValue(index.x,boundary),y:limitValue(index.y,0,boundary-1)}},TileView.prototype.wrapValue=function wrapValue(value,boundary){var remainder=tile_math.abs(value)%boundary;return value>=0?remainder:boundary-(0===remainder?boundary:remainder)},TileView}(common_class.A),ImageTile=function(Class){function ImageTile(id,options){Class.call(this),this.id=id,this.visible=!0,this._initOptions(options),this.createElement(),this.show()}return Class&&(ImageTile.__proto__=Class),ImageTile.prototype=Object.create(Class&&Class.prototype),ImageTile.prototype.constructor=ImageTile,ImageTile.prototype.destroy=function destroy(){var element=this.element,parentNode=element?element.parentNode:null;element&&(parentNode&&parentNode.removeChild(element),this.element=null)},ImageTile.prototype._initOptions=function _initOptions(options){this.options=deepExtend({},this.options,options)},ImageTile.prototype.createElement=function createElement(){var el=document.createElement("img"),size=this.options.size+"px";el.style.position="absolute",el.style.display="block",el.style.width=el.style.maxWidth=size,el.style.height=el.style.maxHeight=size,this.element=el},ImageTile.prototype.show=function show(){var element=this.element;element.style.top=renderSize(this.options.offset.y),element.style.left=renderSize(this.options.offset.x);var url=this.url();url&&element.setAttribute("src",url),element.style.visibility="visible",this.visible=!0},ImageTile.prototype.hide=function hide(){this.element.style.visibility="hidden",this.visible=!1},ImageTile.prototype.url=function url(){return compileTemplate(this.options.urlTemplate)(this.urlOptions())},ImageTile.prototype.errorUrl=function errorUrl(){return compileTemplate(this.options.errorUrlTemplate)(this.urlOptions())},ImageTile.prototype.urlOptions=function urlOptions(){var options=this.options;return{zoom:options.zoom,subdomain:options.subdomain,z:options.zoom,x:options.index.x,y:options.index.y,s:options.subdomain,quadkey:options.quadkey,q:options.quadkey,culture:options.culture,c:options.culture}},ImageTile}(common_class.A);setDefaultOptions(ImageTile,{urlTemplate:"",errorUrlTemplate:""});var TilePool=function(Class){function TilePool(){Class.call(this),this._items=[]}return Class&&(TilePool.__proto__=Class),TilePool.prototype=Object.create(Class&&Class.prototype),TilePool.prototype.constructor=TilePool,TilePool.prototype.get=function get(center,options){return this._items.length>=this.options.maxSize&&this._remove(center),this._create(options)},TilePool.prototype.empty=function empty(){for(var items=this._items,i=0;i<items.length;i++)items[i].destroy();this._items=[]},TilePool.prototype.reset=function reset(){for(var items=this._items,i=0;i<items.length;i++)items[i].hide()},TilePool.prototype._create=function _create(options){for(var tile,items=this._items,id=hashKey(options.point.toString()+options.offset.toString()+options.zoom+options.urlTemplate),i=0;i<items.length;i++)if(items[i].id===id){tile=items[i];break}return tile?tile.show():(tile=new ImageTile(id,options),this._items.push(tile)),tile},TilePool.prototype._remove=function _remove(center){for(var items=this._items,maxDist=-1,index=-1,i=0;i<items.length;i++){var dist=items[i].options.point.distanceTo(center);dist>maxDist&&!items[i].visible&&(index=i,maxDist=dist)}-1!==index&&(items[index].destroy(),items.splice(index,1))},TilePool}(common_class.A);setDefaultOptions(TilePool,{maxSize:100});var draggable_extend=Object.assign,TapCapture=function(Observable){function TapCapture(element,options){Observable.call(this);var that=this,domElement=element[0]||element;that.capture=!1;var eventMap=getEventMap(navigator.userAgent);domElement.addEventListener?(eventMap.down.split(" ").forEach((function(event){domElement.addEventListener(event,proxy(that._press,that),!0)})),eventMap.up.split(" ").forEach((function(event){domElement.addEventListener(event,proxy(that._release,that),!0)}))):(eventMap.down.split(" ").forEach((function(event){domElement.attachEvent(event,proxy(that._press,that))})),eventMap.up.split(" ").forEach((function(event){domElement.attachEvent(event,proxy(that._release,that))}))),that.bind(["press","release"],options||{})}return Observable&&(TapCapture.__proto__=Observable),TapCapture.prototype=Object.create(Observable&&Observable.prototype),TapCapture.prototype.constructor=TapCapture,TapCapture.prototype.captureNext=function captureNext(){this.capture=!0},TapCapture.prototype.cancelCapture=function cancelCapture(){this.capture=!1},TapCapture.prototype._press=function _press(e){this.trigger("press"),this.capture&&e.preventDefault()},TapCapture.prototype._release=function _release(e){this.trigger("release"),this.capture&&(e.preventDefault(),this.cancelCapture())},TapCapture}(Observable),PaneDimension=function(Observable){function PaneDimension(options){Observable.call(this);this.forcedEnabled=!1,draggable_extend(this,options),this.scale=1,this.horizontal?(this.measure="offsetWidth",this.scrollSize="scrollWidth",this.axis="x"):(this.measure="offsetHeight",this.scrollSize="scrollHeight",this.axis="y")}return Observable&&(PaneDimension.__proto__=Observable),PaneDimension.prototype=Object.create(Observable&&Observable.prototype),PaneDimension.prototype.constructor=PaneDimension,PaneDimension.prototype.makeVirtual=function makeVirtual(){draggable_extend(this,{virtual:!0,forcedEnabled:!0,_virtualMin:0,_virtualMax:0})},PaneDimension.prototype.virtualSize=function virtualSize(min,max){this._virtualMin===min&&this._virtualMax===max||(this._virtualMin=min,this._virtualMax=max,this.update())},PaneDimension.prototype.outOfBounds=function outOfBounds(offset){return offset>this.max||offset<this.min},PaneDimension.prototype.forceEnabled=function forceEnabled(){this.forcedEnabled=!0},PaneDimension.prototype.getSize=function getSize(){return this.container[this.measure]},PaneDimension.prototype.getTotal=function getTotal(){return this.element[this.scrollSize]},PaneDimension.prototype.rescale=function rescale(scale){this.scale=scale},PaneDimension.prototype.update=function update(silent){var total=this.virtual?this._virtualMax:this.getTotal(),scaledTotal=total*this.scale,size=this.getSize();(0!==total||this.forcedEnabled)&&(this.max=this.virtual?-this._virtualMin:0,this.size=size,this.total=scaledTotal,this.min=Math.min(this.max,size-scaledTotal),this.minScale=size/total,this.centerOffset=(scaledTotal-size)/2,this.enabled=this.forcedEnabled||scaledTotal>size,silent||this.trigger("change",this))},PaneDimension}(Observable),PaneDimensions=function(Observable){function PaneDimensions(options){Observable.call(this);this.x=new PaneDimension(draggable_extend({horizontal:!0},options)),this.y=new PaneDimension(draggable_extend({horizontal:!1},options)),this.container=options.container,this.forcedMinScale=options.minScale,this.maxScale=options.maxScale||100,this.bind("change",options)}return Observable&&(PaneDimensions.__proto__=Observable),PaneDimensions.prototype=Object.create(Observable&&Observable.prototype),PaneDimensions.prototype.constructor=PaneDimensions,PaneDimensions.prototype.rescale=function rescale(newScale){this.x.rescale(newScale),this.y.rescale(newScale),this.refresh()},PaneDimensions.prototype.centerCoordinates=function centerCoordinates(){return{x:Math.min(0,-this.x.centerOffset),y:Math.min(0,-this.y.centerOffset)}},PaneDimensions.prototype.refresh=function refresh(){this.x.update(),this.y.update(),this.enabled=this.x.enabled||this.y.enabled,this.minScale=this.forcedMinScale||Math.min(this.x.minScale,this.y.minScale),this.fitScale=Math.max(this.x.minScale,this.y.minScale),this.trigger("change")},PaneDimensions}(Observable),PaneAxis=function(Observable){function PaneAxis(options){Observable.call(this),draggable_extend(this,options)}return Observable&&(PaneAxis.__proto__=Observable),PaneAxis.prototype=Object.create(Observable&&Observable.prototype),PaneAxis.prototype.constructor=PaneAxis,PaneAxis.prototype.outOfBounds=function outOfBounds(){return this.dimension.outOfBounds(this.movable[this.axis])},PaneAxis.prototype.dragMove=function dragMove(delta){var dimension=this.dimension,axis=this.axis,movable=this.movable,position=movable[axis]+delta;if(dimension.enabled){var dragDelta=delta;(position<dimension.min&&delta<0||position>dimension.max&&delta>0)&&(dragDelta*=this.resistance),movable.translateAxis(axis,dragDelta),this.trigger("change",this)}},PaneAxis}(Observable),draggable_Pane=function(Class){function Pane(options){Class.call(this);var x,y,resistance,movable,that=this;draggable_extend(that,{elastic:!0},options),resistance=that.elastic?.5:0,movable=that.movable,that.x=x=new PaneAxis({axis:"x",dimension:that.dimensions.x,resistance,movable}),that.y=y=new PaneAxis({axis:"y",dimension:that.dimensions.y,resistance,movable}),that.userEvents.bind(["press","move","end","gesturestart","gesturechange"],{gesturestart:function gesturestart(e){that.gesture=e,that.offset=elementOffset(that.dimensions.container)},press:function press(e){var closestAnchor=e.event.target.closest("a");closestAnchor&&closestAnchor.matches("[data-navigate-on-press=true]")&&e.sender.cancel()},gesturechange:function gesturechange(e){var coordinates,previousGesture=that.gesture,previousCenter=previousGesture.center,center=e.center,scaleDelta=e.distance/previousGesture.distance,minScale=that.dimensions.minScale,maxScale=that.dimensions.maxScale;movable.scale<=minScale&&scaleDelta<1&&(scaleDelta+=.8*(1-scaleDelta)),movable.scale*scaleDelta>=maxScale&&(scaleDelta=maxScale/movable.scale);var offsetX=movable.x+that.offset.left,offsetY=movable.y+that.offset.top;coordinates={x:(offsetX-previousCenter.x)*scaleDelta+center.x-offsetX,y:(offsetY-previousCenter.y)*scaleDelta+center.y-offsetY},movable.scaleWith(scaleDelta),x.dragMove(coordinates.x),y.dragMove(coordinates.y),that.dimensions.rescale(movable.scale),that.gesture=e,e.preventDefault()},move:function move(e){e.event.target.tagName.match(/textarea|input/i)||(x.dimension.enabled||y.dimension.enabled?(x.dragMove(e.x.delta),y.dragMove(e.y.delta),e.preventDefault()):e.touch.skip())},end:function end(e){e.preventDefault()}})}return Class&&(Pane.__proto__=Class),Pane.prototype=Object.create(Class&&Class.prototype),Pane.prototype.constructor=Pane,Pane}(common_class.A),translate=function(x,y,scale){return"translate3d("+x+"px,"+y+"px,0) scale("+scale+")"},Movable=function(Observable){function Movable(element){Observable.call(this);this.support=getSupportedFeatures(),this.transformStyle=this.support.transitions.prefix+"Transform",this.element=element,this.element.style.webkitTransformOrigin="left top",this.x=0,this.y=0,this.scale=1;var coordinates=translate(this.x,this.y,this.scale);this.element.style[this.transformStyle]=coordinates,this._saveCoordinates(coordinates)}return Observable&&(Movable.__proto__=Observable),Movable.prototype=Object.create(Observable&&Observable.prototype),Movable.prototype.constructor=Movable,Movable.prototype.translateAxis=function translateAxis(axis,by){this[axis]+=by,this.refresh()},Movable.prototype.scaleTo=function scaleTo(scale){this.scale=scale,this.refresh()},Movable.prototype.scaleWith=function scaleWith(scaleDelta){this.scale*=scaleDelta,this.refresh()},Movable.prototype.translate=function translate(coordinates){this.x+=coordinates.x,this.y+=coordinates.y,this.refresh()},Movable.prototype.moveAxis=function moveAxis(axis,value){this[axis]=value,this.refresh()},Movable.prototype.moveTo=function moveTo(coordinates){draggable_extend(this,coordinates),this.refresh()},Movable.prototype.refresh=function refresh(){var newCoordinates,x=this.x,y=this.y;this.round&&(x=Math.round(x),y=Math.round(y)),(newCoordinates=translate(x,y,this.scale))!==this.coordinates&&(this.element.style[this.transformStyle]=newCoordinates,this._saveCoordinates(newCoordinates),this.trigger("change"))},Movable.prototype._saveCoordinates=function _saveCoordinates(coordinates){this.coordinates=coordinates},Movable}(Observable),shape_Group=shapes_group.A,ShapeLayer=function(Layer){function ShapeLayer(map,options){Layer.call(this,map,options),this._pan=proxy(this._pan,this),this.surface=es_surface.A.create(this.element,{width:map.scrollElement.clientWidth,height:map.scrollElement.clientHeight}),this._initRoot(),this.movable=new Movable(this.surface.element),this._markers=[],this._click=this._handler("shapeClick"),this.surface.bind("click",this._click),this._mouseleave=this._handler("shapeMouseLeave"),this.surface.bind("mouseleave",this._mouseleave),this.surface.bind("mouseenter",this._mouseenter.bind(this))}return Layer&&(ShapeLayer.__proto__=Layer),ShapeLayer.prototype=Object.create(Layer&&Layer.prototype),ShapeLayer.prototype.constructor=ShapeLayer,ShapeLayer.prototype.destroy=function destroy(){Layer.prototype.destroy.call(this),this.surface.destroy()},ShapeLayer.prototype._reset=function _reset(){Layer.prototype._reset.call(this),this._translateSurface(),this._data=this._readData(),this._hasData()&&this._load(this._data)},ShapeLayer.prototype._initRoot=function _initRoot(){this._root=new shape_Group,this.surface.draw(this._root)},ShapeLayer.prototype._beforeReset=function _beforeReset(){this.surface.clear(),this._initRoot()},ShapeLayer.prototype._resize=function _resize(){this.surface.size(this.map.size())},ShapeLayer.prototype._readData=function _readData(){var data=Layer.prototype._readData.call(this);return"FeatureCollection"===data.type?data.features:"GeometryCollection"===data.type?data.geometries:data},ShapeLayer.prototype._load=function _load(data){this._data=data,this._clearMarkers(),this._loader||(this._loader=new GeoJsonLoader(this.map,this.options.style,this));for(var container=new shape_Group,i=0;i<data.length;i++){var shape=this._loader.parse(data[i]);shape&&container.append(shape)}this._root.clear(),this._root.append(container)},ShapeLayer.prototype.shapeCreated=function shapeCreated(shape){var cancelled=!1;if(shape instanceof shapes_circle.A&&this.map.options.renderPointsAsMarkers&&(cancelled=drawing_utils_defined(this._createMarker(shape))),!cancelled){var args={layer:this,shape};cancelled=this.map.trigger("shapeCreated",args)}return cancelled},ShapeLayer.prototype.featureCreated=function featureCreated(e){e.layer=this,this.map.trigger("shapeFeatureCreated",e)},ShapeLayer.prototype._createMarker=function _createMarker(shape){var marker=this.map.markers.bind({location:shape.location},shape.dataItem);return marker&&this._markers.push(marker),marker},ShapeLayer.prototype._clearMarkers=function _clearMarkers(){for(var i=0;i<this._markers.length;i++)this.map.markers.remove(this._markers[i]);this._markers=[]},ShapeLayer.prototype._pan=function _pan(){this._panning||(this._panning=!0,this.surface.suspendTracking())},ShapeLayer.prototype._panEnd=function _panEnd(e){Layer.prototype._panEnd.call(this,e),this._translateSurface(),this.surface.resumeTracking(),this._panning=!1},ShapeLayer.prototype._translateSurface=function _translateSurface(){var map=this.map,nw=map.locationToView(map.extent().nw);this.surface.translate&&(this.surface.translate(nw),this.movable.moveTo({x:nw.x,y:nw.y}))},ShapeLayer.prototype._eventArgs=function _eventArgs(e){return{layer:this,layerIndex:this._layerIndex(),shape:e.element,shapeIndex:(this._data||[]).indexOf(e.element.dataItem),originalEvent:e.originalEvent}},ShapeLayer.prototype._handler=function _handler(eventName){var this$1=this;return function(e){e.element&&this$1.map.trigger(eventName,this$1._eventArgs(e))}},ShapeLayer.prototype._mouseenter=function _mouseenter(e){if(e.element){this.map.trigger("shapeMouseEnter",this._eventArgs(e));var shape=e.element,anchor=this._tooltipAnchor(e);this.map._tooltip.show(anchor,this._tooltipContext(shape))}},ShapeLayer.prototype._tooltipContext=function _tooltipContext(shape){return{type:"shape",layerIndex:this._layerIndex(),className:"k-map-shape-tooltip",dataItem:shape.dataItem,location:shape.location}},ShapeLayer.prototype._tooltipAnchor=function _tooltipAnchor(e){var cursor=this.map.eventOffset(e.originalEvent);return{top:cursor.y,left:cursor.x}},ShapeLayer.prototype._activate=function _activate(){Layer.prototype._activate.call(this),this._panHandler=proxy(this._pan,this),this.map.bind("pan",this.panHandler)},ShapeLayer.prototype._deactivate=function _deactivate(){Layer.prototype._deactivate.call(this),this.map.unbind("pan",this._panHandler)},ShapeLayer}(Layer);setDefaultOptions(ShapeLayer,{autoBind:!0,zIndex:100});var GeoJsonLoader=function(Class){function GeoJsonLoader(locator,defaultStyle,observer){Class.call(this),this.observer=observer,this.locator=locator,this.style=defaultStyle}return Class&&(GeoJsonLoader.__proto__=Class),GeoJsonLoader.prototype=Object.create(Class&&Class.prototype),GeoJsonLoader.prototype.constructor=GeoJsonLoader,GeoJsonLoader.prototype.parse=function parse(item){var root=new shape_Group,unwrap=!0;return"Feature"===item.type?(unwrap=!1,this._loadGeometryTo(root,item.geometry,item),this._featureCreated(root,item)):this._loadGeometryTo(root,item,item),unwrap&&root.children.length<2&&(root=root.children[0]),root},GeoJsonLoader.prototype._shapeCreated=function _shapeCreated(shape){var cancelled=!1;return this.observer&&this.observer.shapeCreated&&(cancelled=this.observer.shapeCreated(shape)),cancelled},GeoJsonLoader.prototype._featureCreated=function _featureCreated(group,dataItem){this.observer&&this.observer.featureCreated&&this.observer.featureCreated({group,dataItem,properties:dataItem.properties})},GeoJsonLoader.prototype._loadGeometryTo=function _loadGeometryTo(container,geometry,dataItem){var i,path,coords=geometry.coordinates;switch(geometry.type){case"LineString":path=this._loadPolygon(container,[coords],dataItem),this._setLineFill(path);break;case"MultiLineString":for(i=0;i<coords.length;i++)path=this._loadPolygon(container,[coords[i]],dataItem),this._setLineFill(path);break;case"Polygon":this._loadPolygon(container,coords,dataItem);break;case"MultiPolygon":for(i=0;i<coords.length;i++)this._loadPolygon(container,coords[i],dataItem);break;case"Point":this._loadPoint(container,coords,dataItem);break;case"MultiPoint":for(i=0;i<coords.length;i++)this._loadPoint(container,coords[i],dataItem)}},GeoJsonLoader.prototype._setLineFill=function _setLineFill(path){var segments=path.segments;(segments.length<4||!segments[0].anchor().equals(last(segments).anchor()))&&(path.options.fill=null)},GeoJsonLoader.prototype._loadShape=function _loadShape(container,shape){return this._shapeCreated(shape)||container.append(shape),shape},GeoJsonLoader.prototype._loadPolygon=function _loadPolygon(container,rings,dataItem){var shape=this._buildPolygon(rings);return shape.dataItem=dataItem,shape.location=this.locator.viewToLocation(shape.bbox().center()),this._loadShape(container,shape)},GeoJsonLoader.prototype._buildPolygon=function _buildPolygon(rings){for(var path=new(rings.length>1?shapes_path.P:shapes_path.w)(this.style),i=0;i<rings.length;i++)for(var j=0;j<rings[i].length;j++){var point=this.locator.locationToView(Location.fromLngLat(rings[i][j]));0===j?path.moveTo(point.x,point.y):path.lineTo(point.x,point.y)}return path},GeoJsonLoader.prototype._loadPoint=function _loadPoint(container,coords,dataItem){var location=Location.fromLngLat(coords),point=this.locator.locationToView(location),circle=new geometry_circle.A(point,10),shape=new shapes_circle.A(circle,this.style);return shape.dataItem=dataItem,shape.location=location,this._loadShape(container,shape)},GeoJsonLoader}(common_class.A),BubbleLayer=function(ShapeLayer){function BubbleLayer(){ShapeLayer.apply(this,arguments)}return ShapeLayer&&(BubbleLayer.__proto__=ShapeLayer),BubbleLayer.prototype=Object.create(ShapeLayer&&ShapeLayer.prototype),BubbleLayer.prototype.constructor=BubbleLayer,BubbleLayer.prototype._readData=function _readData(){return this.options.data||[]},BubbleLayer.prototype._load=function _load(data){if(this._data=data,this.surface.clear(),0!==data.length){var options=this.options,getValue=getter(options.valueField),newData=data.slice(0);newData.sort((function(a,b){return getValue(b)-getValue(a)}));for(var scale,scaleType=this._scaleType(),getLocation=getter(this.options.locationField),i=0;i<newData.length;i++){var dataItem=newData[i],location=getLocation(dataItem),value=getValue(dataItem);if(drawing_utils_defined(location)&&drawing_utils_defined(value)){scale||(scale=new scaleType([0,value],[options.minSize,options.maxSize])),location=Location.create(location);var center=this.map.locationToView(location),size=scale.map(value),symbol=this._createSymbol({center,size,style:options.style,dataItem,location});symbol.dataItem=dataItem,symbol.location=location,symbol.value=value,this._drawSymbol(symbol)}}}},BubbleLayer.prototype._scaleType=function _scaleType(){var scale=this.options.scale;return isFunction(scale)?scale:Scales[scale]},BubbleLayer.prototype._createSymbol=function _createSymbol(args){var symbol=this.options.symbol;return isFunction(symbol)||(symbol=Symbols[symbol]),symbol(args)},BubbleLayer.prototype._drawSymbol=function _drawSymbol(shape){var args={layer:this,shape};this.map.trigger("shapeCreated",args)||this.surface.draw(shape)},BubbleLayer.prototype._tooltipContext=function _tooltipContext(shape){return{type:"bubble",layerIndex:this._layerIndex(),className:"k-map-bubble-tooltip",dataItem:shape.dataItem,location:shape.location,value:shape.value}},BubbleLayer.prototype._tooltipAnchor=function _tooltipAnchor(e){var center=e.element.bbox().center();return{top:center.y,left:center.x}},BubbleLayer}(ShapeLayer);setDefaultOptions(BubbleLayer,{locationField:"location",valueField:"value",minSize:0,maxSize:100,scale:"sqrt",symbol:"circle",zIndex:200});var Scales={sqrt:function(Class){function SqrtScale(domain,range){Class.call(this),this._domain=domain,this._range=range;var domainRange=Math.sqrt(domain[1])-Math.sqrt(domain[0]),outputRange=range[1]-range[0];this._ratio=outputRange/domainRange}return Class&&(SqrtScale.__proto__=Class),SqrtScale.prototype=Object.create(Class&&Class.prototype),SqrtScale.prototype.constructor=SqrtScale,SqrtScale.prototype.map=function map(value){var rel=(Math.sqrt(value)-Math.sqrt(this._domain[0]))*this._ratio;return this._range[0]+rel},SqrtScale}(common_class.A)},Symbols={circle:function(args){var geo=new geometry_circle.A(args.center,args.size/2);return new shapes_circle.A(geo,args.style)},square:function(args){var path=new shapes_path.w(args.style),halfSize=args.size/2,center=args.center;return path.moveTo(center.x-halfSize,center.y-halfSize).lineTo(center.x+halfSize,center.y-halfSize).lineTo(center.x+halfSize,center.y+halfSize).lineTo(center.x-halfSize,center.y+halfSize).close(),path}},marker_extend=Object.assign,MarkerLayer=function(Layer){function MarkerLayer(map,options){Layer.call(this,map,options),this._markerClickHandler=proxy(this._markerClick,this),on(this.element,"click",".k-marker",this._markerClickHandler),this.items=[],this._load(this._readData())}return Layer&&(MarkerLayer.__proto__=Layer),MarkerLayer.prototype=Object.create(Layer&&Layer.prototype),MarkerLayer.prototype.constructor=MarkerLayer,MarkerLayer.prototype.destroy=function destroy(){Layer.prototype.destroy.call(this),off(this.element,"click",this._markerClickHandler),this.clear()},MarkerLayer.prototype.add=function add(args){if(!isArray(args))return this._addOne(args);for(var i=0;i<args.length;i++)this._addOne(args[i])},MarkerLayer.prototype.remove=function remove(marker){marker.destroy();var index=(this.items||[]).indexOf(marker);index>-1&&this.items.splice(index,1)},MarkerLayer.prototype.clear=function clear(){for(var i=0;i<this.items.length;i++)this.items[i].destroy();this.items=[]},MarkerLayer.prototype.update=function update(marker){var location=marker.location();if(location){marker.showAt(this.map.locationToView(location));var args={marker,layer:this};this.map.trigger("markerActivate",args)}},MarkerLayer.prototype._reset=function _reset(){Layer.prototype._reset.call(this);for(var items=this.items,i=0;i<items.length;i++)this.update(items[i])},MarkerLayer.prototype.bind=function bind(options,dataItem){var marker=Marker.create(options,this.options);marker.dataItem=dataItem;var args={marker,layer:this};if(!this.map.trigger("markerCreated",args))return this.add(marker),marker},MarkerLayer.prototype._addOne=function _addOne(arg){var marker=Marker.create(arg,this.options);return marker.addTo(this),marker},MarkerLayer.prototype._readData=function _readData(){return this.options.data||[]},MarkerLayer.prototype._load=function _load(data){this._data=data,this.clear();for(var getLocation=getter(this.options.locationField),getTitle=getter(this.options.titleField),i=0;i<data.length;i++){var dataItem=data[i];this.bind({location:getLocation(dataItem),title:getTitle(dataItem)},dataItem)}},MarkerLayer.prototype._markerClick=function _markerClick(e){var marker=e.currentTarget._kendoNode,args={layer:this,layerIndex:this._layerIndex(),marker,markerIndex:(this.items||[]).indexOf(marker),originalEvent:e};this.map.trigger("markerClick",args)},MarkerLayer.prototype._markerMouseEnter=function _markerMouseEnter(e){var args=this._createMarkerEventArgs(e);this.map.trigger("markerMouseEnter",args)},MarkerLayer.prototype._markerMouseLeave=function _markerMouseLeave(e){var args=this._createMarkerEventArgs(e);this.map.trigger("markerMouseLeave",args)},MarkerLayer.prototype._createMarkerEventArgs=function _createMarkerEventArgs(e){var marker=e.marker;return marker_extend({},{layer:this,layerIndex:this._layerIndex(),marker,markerIndex:(this.items||[]).indexOf(marker)},e)},MarkerLayer}(Layer);setDefaultOptions(MarkerLayer,{zIndex:1e3,autoBind:!0,locationField:"location",titleField:"title",template:""});var Marker=function(Class){function Marker(options){Class.call(this),this.options=options||{}}return Class&&(Marker.__proto__=Class),Marker.prototype=Object.create(Class&&Class.prototype),Marker.prototype.constructor=Marker,Marker.prototype.destroy=function destroy(){this.layer=null,this.unbindEvents(),this.hide()},Marker.prototype.addTo=function addTo(parent){this.layer=parent.markers||parent,this.layer.items.push(this),this.layer.update(this)},Marker.prototype.location=function location(value){return value?(this.options.location=Location.create(value).toArray(),this.layer&&this.layer.update(this),this):Location.create(this.options.location)},Marker.prototype.showAt=function showAt(point){this.render(),this._anchor={left:Math.round(point.x),top:Math.round(point.y)},this.element.style.left=toPixels(this._anchor.left),this.element.style.top=toPixels(this._anchor.top)},Marker.prototype.hide=function hide(){this.element&&(this.element.remove(),this.element=null)},Marker.prototype.bindEvents=function bindEvents(){this.element&&(this._mouseEnterHandler=proxy(this._mouseEnter,this),on(this.element,"mouseenter",".k-marker",this._mouseEnterHandler),this._mouseLeaveHandler=proxy(this._mouseLeave,this),on(this.element,"mouseleave",".k-marker",this._mouseLeaveHandler))},Marker.prototype.unbindEvents=function unbindEvents(){this.element&&(off(this.element,"mouseenter",this._mouseEnterHandler),off(this.element,"mouseleave",this._mouseLeaveHandler))},Marker.prototype.render=function render(){if(!this.element){var options=this.options,layer=this.layer,element=document.createElement("span");if(addClass(element,"k-marker"),this.options.template){var templateHtml=this._compileTemplate(this.options.template)(this.dataItem),templateElement=convertToHtml(templateHtml);element.appendChild(templateElement)}else if(options.svgIcon)renderIcon(element,{icon:options.svgIcon,iconClass:"k-icon-xxl",svgIcons:this.options.icons.svgIcons,type:"svg"});else{var iconOptions={icon:"map-marker",iconClass:"k-icon-xxl",svgIcons:this.options.icons.svgIcons,type:this.options.icons.type};options.shape?"pinTarget"===options.shape?(iconOptions.icon="map-marker-target",renderIcon(element,iconOptions)):"pin"===options.shape?renderIcon(element,iconOptions):addClass(element,"k-icon k-icon-xxl k-i-marker-"+toHyphens(options.shape||"pin")):renderIcon(element,iconOptions)}options.title&&element.setAttribute("title",options.title);var attributes=options.attributes||{};Object.keys(attributes).forEach((function(key){element.setAttribute(key,attributes[key])})),element._kendoNode=this,element.style.zIndex=options.zIndex,this.element=element,layer&&layer.element.appendChild(this.element),this.bindEvents()}},Marker.prototype._mouseEnter=function _mouseEnter(e){var args=this._createEventArgs(e);this.layer._markerMouseEnter(args),this.layer.map._tooltip.show({top:this._anchor.top-this.element.offsetHeight,left:this._anchor.left},this._tooltipContext())},Marker.prototype._tooltipContext=function _tooltipContext(){return{type:"marker",layerIndex:this.layer._layerIndex(),className:"k-map-marker-tooltip",dataItem:this.dataItem,title:this.options.title,location:this.location()}},Marker.prototype._mouseLeave=function _mouseLeave(e){var args=this._createEventArgs(e);this.layer._markerMouseLeave(args)},Marker.prototype._createEventArgs=function _createEventArgs(e){return{marker:this,originalEvent:e}},Marker.prototype._compileTemplate=function _compileTemplate(template){return template_service.compile(template,{paramName:"dataItem",useWithBlock:!1})},Marker.create=function create(arg,defaults){return arg instanceof Marker?arg:new Marker(deepExtend({},defaults,arg))},Marker}(common_class.A),fx_extend=Object.assign;function animationFrame(callback){window.requestAnimationFrame(callback)}var fx_Animation=function(Class){function Animation(){Class.call(this);this._tickProxy=proxy(this._tick,this),this._started=!1}return Class&&(Animation.__proto__=Class),Animation.prototype=Object.create(Class&&Class.prototype),Animation.prototype.constructor=Animation,Animation.prototype.tick=function tick(){},Animation.prototype.done=function done(){},Animation.prototype.onEnd=function onEnd(){},Animation.prototype.onCancel=function onCancel(){},Animation.prototype.start=function start(){this.enabled()&&(this.done()?this.onEnd():(this._started=!0,animationFrame(this._tickProxy)))},Animation.prototype.enabled=function enabled(){return!0},Animation.prototype.cancel=function cancel(){this._started=!1,this.onCancel()},Animation.prototype._tick=function _tick(){this._started&&(this.tick(),this.done()?(this._started=!1,this.onEnd()):animationFrame(this._tickProxy))},Animation}(common_class.A),Transition=function(Animation){function Transition(options){Animation.call(this),fx_extend(this,options)}return Animation&&(Transition.__proto__=Animation),Transition.prototype=Object.create(Animation&&Animation.prototype),Transition.prototype.constructor=Transition,Transition.prototype.done=function done(){return this.timePassed()>=this.duration},Transition.prototype.timePassed=function timePassed(){return Math.min(this.duration,utils_now()-this.startDate)},Transition.prototype.moveTo=function moveTo(options){var movable=this.movable;this.initial=movable[this.axis],this.delta=options.location-this.initial,this.duration="number"==typeof options.duration?options.duration:300,this.tick=this._easeProxy(options.ease),this.startDate=utils_now(),this.start()},Transition.prototype._easeProxy=function _easeProxy(ease){var that=this;return function(){that.movable.moveAxis(that.axis,ease(that.timePassed(),that.initial,that.delta,that.duration))}},Transition.easeOutExpo=function easeOutExpo(t,b,c,d){return t===d?b+c:c*(1-Math.pow(2,-10*t/d))+b},Transition}(fx_Animation),user_events_extend=Object.assign,user_events_preventDefault=function(e){e.preventDefault()},DEFAULT_MIN_HOLD=800,DEFAULT_THRESHOLD=0,THRESHOLD={api:0,touch:0,mouse:9,pointer:9};function getTouches(e){var length,changedTouches,touch,support=getSupportedFeatures(),touches=[],originalEvent=e.originalEvent||e,currentTarget=e.currentTarget,idx=0;if(e.api)touches.push({id:2,event:e,target:e.target,currentTarget:e.target,location:e,type:"api"});else if(e.type.match(/touch/))for(length=(changedTouches=originalEvent?originalEvent.changedTouches:[]).length;idx<length;idx++)touch=changedTouches[idx],touches.push({location:touch,event:e,target:touch.target,currentTarget,id:touch.identifier,type:"touch"});else support.pointers||support.msPointers?touches.push({location:originalEvent,event:e,target:e.target,currentTarget,id:originalEvent.pointerId,type:"pointer"}):touches.push({id:1,event:e,target:e.target,currentTarget,location:e,type:"mouse"});return touches}var TouchAxis=function(Class){function TouchAxis(axis,location){Class.call(this);this.support=getSupportedFeatures(),this.invalidZeroEvents=this.support.mobileOS&&this.support.mobileOS.android,this.axis=axis,this._updateLocationData(location),this.startLocation=this.location,this.velocity=this.delta=0,this.timeStamp=utils_now()}return Class&&(TouchAxis.__proto__=Class),TouchAxis.prototype=Object.create(Class&&Class.prototype),TouchAxis.prototype.constructor=TouchAxis,TouchAxis.prototype.move=function move(location){var offset=location["page"+this.axis],timeStamp=utils_now(),timeDelta=timeStamp-this.timeStamp||1;!offset&&this.invalidZeroEvents||(this.delta=offset-this.location,this._updateLocationData(location),this.initialDelta=offset-this.startLocation,this.velocity=this.delta/timeDelta,this.timeStamp=timeStamp)},TouchAxis.prototype._updateLocationData=function _updateLocationData(location){var axis=this.axis;this.location=location["page"+axis],this.client=location["client"+axis],this.screen=location["screen"+axis]},TouchAxis}(common_class.A),Touch=function(Class){function Touch(userEvents,target,touchInfo){Class.call(this),user_events_extend(this,{x:new TouchAxis("X",touchInfo.location),y:new TouchAxis("Y",touchInfo.location),type:touchInfo.type,useClickAsTap:userEvents.useClickAsTap,threshold:userEvents.threshold||THRESHOLD[touchInfo.type],userEvents,target,currentTarget:touchInfo.currentTarget,initialTouch:touchInfo.target,id:touchInfo.id,pressEvent:touchInfo,_clicks:userEvents._clicks,supportDoubleTap:userEvents.supportDoubleTap,_moved:!1,_finished:!1})}return Class&&(Touch.__proto__=Class),Touch.prototype=Object.create(Class&&Class.prototype),Touch.prototype.constructor=Touch,Touch.prototype.press=function press(){this._holdTimeout=setTimeout(proxy(this._hold,this),this.userEvents.minHold),this._trigger("press",this.pressEvent)},Touch.prototype._tap=function _tap(touchInfo){var that=this;that.userEvents._clicks++,1===that.userEvents._clicks&&(that._clickTimeout=setTimeout((function(){1===that.userEvents._clicks?that._trigger("tap",touchInfo):that._trigger("doubleTap",touchInfo),that.userEvents._clicks=0}),300))},Touch.prototype._hold=function _hold(){this._trigger("hold",this.pressEvent)},Touch.prototype.move=function move(touchInfo){var preventMove="api"!==touchInfo.type&&this.userEvents._shouldNotMove;if(!this._finished&&!preventMove){if(this.x.move(touchInfo.location),this.y.move(touchInfo.location),!this._moved){if(this._withinIgnoreThreshold())return;if(UserEvents.current&&UserEvents.current!==this.userEvents)return this.dispose();this._start(touchInfo)}this._finished||this._trigger("move",touchInfo)}},Touch.prototype.end=function end(touchInfo){this.endTime=utils_now(),this._finished||(this._finished=!0,this._trigger("release",touchInfo),this._moved?this._trigger("end",touchInfo):this.useClickAsTap||(this.supportDoubleTap?this._tap(touchInfo):this._trigger("tap",touchInfo)),clearTimeout(this._holdTimeout),this.dispose())},Touch.prototype.dispose=function dispose(){var activeTouches=this.userEvents.touches||[];this._finished=!0,this.pressEvent=null,clearTimeout(this._holdTimeout);var activeTouchIndex=activeTouches.indexOf(this);activeTouches.splice(activeTouchIndex,1)},Touch.prototype.skip=function skip(){this.dispose()},Touch.prototype.cancel=function cancel(){this.dispose()},Touch.prototype.isMoved=function isMoved(){return this._moved},Touch.prototype._start=function _start(touchInfo){clearTimeout(this._holdTimeout),this.startTime=utils_now(),this._moved=!0,this._trigger("start",touchInfo)},Touch.prototype._trigger=function _trigger(name,touchInfo){var jQueryEvent=touchInfo.event,data={touch:this,x:this.x,y:this.y,target:this.target,event:jQueryEvent};this.userEvents.notify(name,data)&&jQueryEvent.preventDefault()},Touch.prototype._withinIgnoreThreshold=function _withinIgnoreThreshold(){var xDelta=this.x.initialDelta,yDelta=this.y.initialDelta;return Math.sqrt(xDelta*xDelta+yDelta*yDelta)<=this.threshold},Touch}(common_class.A);function withEachUpEvent(callback){for(var downEvents=getEventMap(navigator.userAgent).up.split(" "),idx=0,length=downEvents.length;idx<length;idx++)callback(downEvents[idx])}var UserEvents=function(Observable){function UserEvents(element,options){Observable.call(this);var filter,support=getSupportedFeatures();this.support=support,options=options||{},this.options=options,filter=this.filter=options.filter,this.threshold=options.threshold||DEFAULT_THRESHOLD,this.minHold=options.minHold||DEFAULT_MIN_HOLD,this.touches=[],this._maxTouches=options.multiTouch?2:1,this.allowSelection=options.allowSelection,this.captureUpIfMoved=options.captureUpIfMoved,this.useClickAsTap=!options.fastTap&&!support.delayedClick(),this._clicks=0,this.supportDoubleTap=options.supportDoubleTap;var enableGlobalSurface=!support.touch||support.mouseAndTouchPresent;if(user_events_extend(this,{element,surface:options.global&&enableGlobalSurface?element.ownerDocument.documentElement:options.surface||element,stopPropagation:options.stopPropagation,pressed:!1}),this._surfaceMoveHandler=proxy(this._move,this),on(this.surface,applyEventMap("move"),this._surfaceMoveHandler),this._surfaceEndHandler=proxy(this._end,this),on(this.surface,applyEventMap("up cancel"),this._surfaceEndHandler),this._elementStartHandler=proxy(this._start,this),on(element,applyEventMap("down"),filter,this._elementStartHandler),this.useClickAsTap&&(this._elementClickHandler=proxy(this._click,this),on(element,applyEventMap("click"),filter,this._elementClickHandler)),support.pointers||support.msPointers)if(support.browser.version<11){element.style["-ms-touch-action"]=options.touchAction&&"none"!==options.touchAction?"pinch-zoom double-tap-zoom "+options.touchAction:"pinch-zoom double-tap-zoom"}else element.style["touch-action"]=options.touchAction||"none";if(options.preventDragEvent&&(this._elementDragStartHandler=user_events_preventDefault,on(element,applyEventMap("dragstart"),this._elementDragStartHandler)),this._elementSelectHandler=proxy(this._select,this),on(element,applyEventMap("mousedown"),filter,this._elementSelectHandler),this.captureUpIfMoved&&support.eventCapture){var surfaceElement=this.surface,preventIfMovingProxy=proxy(this.preventIfMoving,this);withEachUpEvent((function(eventName){surfaceElement.addEventListener(eventName,preventIfMovingProxy,!0)}))}this.bind(["press","hold","tap","doubleTap","start","move","end","release","cancel","gesturestart","gesturechange","gestureend","gesturetap","select"],options)}return Observable&&(UserEvents.__proto__=Observable),UserEvents.prototype=Object.create(Observable&&Observable.prototype),UserEvents.prototype.constructor=UserEvents,UserEvents.prototype.preventIfMoving=function preventIfMoving(e){this._isMoved()&&e.preventDefault()},UserEvents.prototype.destroy=function destroy(){var that=this,options=this.options,element=this.element;if(!that._destroyed){if(that._destroyed=!0,that.captureUpIfMoved&&this.support.eventCapture){var surfaceElement=that.surface;withEachUpEvent((function(eventName){surfaceElement.removeEventListener(eventName,that.preventIfMoving)}))}off(that.surface,applyEventMap("move"),this._surfaceMoveHandler),off(that.surface,applyEventMap("up cancel"),this._surfaceEndHandler),off(element,applyEventMap("down"),this._elementStartHandler),that.useClickAsTap&&off(element,applyEventMap("click"),this._elementClickHandler),options.preventDragEvent&&off(element,applyEventMap("dragstart"),this._elementDragStartHandler),off(element,applyEventMap("mousedown"),this._elementSelectHandler),that._disposeAll(),that.unbind(),delete that.surface,delete that.element,delete that.currentTarget}},UserEvents.prototype.capture=function capture(){UserEvents.current=this},UserEvents.prototype.cancel=function cancel(){this._disposeAll(),this.trigger("cancel")},UserEvents.prototype.notify=function notify(event,data){var touches=this.touches,eventName=event;if(this._isMultiTouch()){switch(eventName){case"move":eventName="gesturechange";break;case"end":eventName="gestureend";break;case"tap":eventName="gesturetap"}user_events_extend(data,{touches},function touchDelta(touch1,touch2){var x1=touch1.x.location,y1=touch1.y.location,x2=touch2.x.location,y2=touch2.y.location,dx=x1-x2,dy=y1-y2;return{center:{x:(x1+x2)/2,y:(y1+y2)/2},distance:Math.sqrt(dx*dx+dy*dy)}}(touches[0],touches[1]))}return this.trigger(eventName,user_events_extend(data,{type:eventName}))},UserEvents.prototype.press=function press(x,y,target){this._apiCall("_start",x,y,target)},UserEvents.prototype.move=function move(x,y){this._apiCall("_move",x,y)},UserEvents.prototype.end=function end(x,y){this._apiCall("_end",x,y)},UserEvents.prototype._isMultiTouch=function _isMultiTouch(){return this.touches.length>1},UserEvents.prototype._maxTouchesReached=function _maxTouchesReached(){return this.touches.length>=this._maxTouches},UserEvents.prototype._disposeAll=function _disposeAll(){for(var touches=this.touches;touches.length>0;)touches.pop().dispose()},UserEvents.prototype._isMoved=function _isMoved(){return grep(this.touches,(function(touch){return touch.isMoved()})).length},UserEvents.prototype._select=function _select(e){this.allowSelection&&!this.trigger("select",{event:e})||e.preventDefault()},UserEvents.prototype._start=function _start(e){var target,touch,idx=0,filter=this.filter,touches=getTouches(e),length=touches.length,which=e.which;if(!(which&&which>1||this._maxTouchesReached()))for(UserEvents.current=null,this.currentTarget=e.currentTarget,this.stopPropagation&&e.stopPropagation();idx<length&&!this._maxTouchesReached();idx++)touch=touches[idx],(target=filter?touch.currentTarget:this.element)&&0===target.length||(touch=new Touch(this,target,touch),this.touches.push(touch),touch.press(),this._isMultiTouch()&&this.notify("gesturestart",{}))},UserEvents.prototype._move=function _move(e){this._eachTouch("move",e)},UserEvents.prototype._end=function _end(e){this._eachTouch("end",e)},UserEvents.prototype._click=function _click(e){var data={touch:{initialTouch:e.target,target:e.currentTarget,endTime:utils_now(),x:{location:e.pageX,client:e.clientX},y:{location:e.pageY,client:e.clientY}},x:e.pageX,y:e.pageY,target:e.currentTarget,event:e,type:"tap"};this.trigger("tap",data)&&e.preventDefault()},UserEvents.prototype._eachTouch=function _eachTouch(methodName,e){var idx,touch,touchInfo,matchingTouch,dict={},touches=getTouches(e),activeTouches=this.touches;for(idx=0;idx<activeTouches.length;idx++)dict[(touch=activeTouches[idx]).id]=touch;for(idx=0;idx<touches.length;idx++)(matchingTouch=dict[(touchInfo=touches[idx]).id])&&matchingTouch[methodName](touchInfo)},UserEvents.prototype._apiCall=function _apiCall(type,x,y,target){this[type]({api:!0,pageX:x,pageY:y,clientX:x,clientY:y,target:target||this.element,stopPropagation:noop,preventDefault:noop})},UserEvents.defaultThreshold=function defaultThreshold(value){DEFAULT_THRESHOLD=value},UserEvents.minHold=function minHold(value){DEFAULT_MIN_HOLD=value},UserEvents}(Observable),scroller_extend=Object.assign,scroller_abs=Math.abs,ZoomSnapBack=function(Animation){function ZoomSnapBack(options){Animation.call(this,options);scroller_extend(this,options),this.userEvents.bind("gestureend",this.start.bind(this)),this.tapCapture.bind("press",this.cancel.bind(this))}return Animation&&(ZoomSnapBack.__proto__=Animation),ZoomSnapBack.prototype=Object.create(Animation&&Animation.prototype),ZoomSnapBack.prototype.constructor=ZoomSnapBack,ZoomSnapBack.prototype.enabled=function enabled(){return this.movable.scale<this.dimensions.minScale},ZoomSnapBack.prototype.done=function done(){return this.dimensions.minScale-this.movable.scale<.01},ZoomSnapBack.prototype.tick=function tick(){var movable=this.movable;movable.scaleWith(1.1),this.dimensions.rescale(movable.scale)},ZoomSnapBack.prototype.onEnd=function onEnd(){var movable=this.movable;movable.scaleTo(this.dimensions.minScale),this.dimensions.rescale(movable.scale)},ZoomSnapBack}(fx_Animation),DragInertia=function(Animation){function DragInertia(options){Animation.call(this);var that=this;scroller_extend(that,options,{transition:new Transition({axis:options.axis,movable:options.movable,onEnd:function onEnd(){that._end()}})}),that.tapCapture.bind("press",(function(){that.cancel()})),that.userEvents.bind("end",proxy(that.start,that)),that.userEvents.bind("gestureend",proxy(that.start,that)),that.userEvents.bind("tap",proxy(that.onEnd,that))}return Animation&&(DragInertia.__proto__=Animation),DragInertia.prototype=Object.create(Animation&&Animation.prototype),DragInertia.prototype.constructor=DragInertia,DragInertia.prototype.onCancel=function onCancel(){this.transition.cancel()},DragInertia.prototype.freeze=function freeze(location){this.cancel(),this._moveTo(location)},DragInertia.prototype.onEnd=function onEnd(){this.paneAxis.outOfBounds()?this._snapBack():this._end()},DragInertia.prototype.done=function done(){return scroller_abs(this.velocity)<1},DragInertia.prototype.start=function start(e){var velocity;this.dimension.enabled&&(this.paneAxis.outOfBounds()?this.transition._started?(this.transition.cancel(),this.velocity=Math.min(e.touch[this.axis].velocity*this.velocityMultiplier,55),Animation.prototype.start.call(this)):this._snapBack():(velocity=2===e.touch.id?0:e.touch[this.axis].velocity,this.velocity=Math.max(Math.min(velocity*this.velocityMultiplier,55),-55),this.tapCapture.captureNext(),Animation.prototype.start.call(this)))},DragInertia.prototype.tick=function tick(){var dimension=this.dimension,friction=this.paneAxis.outOfBounds()?.5:this.friction,delta=this.velocity*=friction,location=this.movable[this.axis]+delta;!this.elastic&&dimension.outOfBounds(location)&&(location=Math.max(Math.min(location,dimension.max),dimension.min),this.velocity=0),this.movable.moveAxis(this.axis,location)},DragInertia.prototype._end=function _end(){this.tapCapture.cancelCapture(),this.end()},DragInertia.prototype._snapBack=function _snapBack(){var dimension=this.dimension,snapBack=this.movable[this.axis]>dimension.max?dimension.max:dimension.min;this._moveTo(snapBack)},DragInertia.prototype._moveTo=function _moveTo(location){this.transition.moveTo({location,duration:500,ease:Transition.easeOutExpo})},DragInertia}(fx_Animation),AnimatedScroller=function(Animation){function AnimatedScroller(options){Animation.call(this,options);scroller_extend(this,options,{origin:{},destination:{},offset:{}})}return Animation&&(AnimatedScroller.__proto__=Animation),AnimatedScroller.prototype=Object.create(Animation&&Animation.prototype),AnimatedScroller.prototype.constructor=AnimatedScroller,AnimatedScroller.prototype.tick=function tick(){this._updateCoordinates(),this.moveTo(this.origin)},AnimatedScroller.prototype.done=function done(){return scroller_abs(this.offset.y)<5&&scroller_abs(this.offset.x)<5},AnimatedScroller.prototype.onEnd=function onEnd(){this.moveTo(this.destination),this.callback&&this.callback.call()},AnimatedScroller.prototype.setCoordinates=function setCoordinates(from,to){this.offset={},this.origin=from,this.destination=to},AnimatedScroller.prototype.setCallback=function setCallback(callback){callback&&isFunction(callback)?this.callback=callback:callback=void 0},AnimatedScroller.prototype._updateCoordinates=function _updateCoordinates(){this.offset={x:(this.destination.x-this.origin.x)/4,y:(this.destination.y-this.origin.y)/4},this.origin={y:this.origin.y+this.offset.y,x:this.origin.x+this.offset.x}},AnimatedScroller}(fx_Animation),ScrollBar=function(Class){function ScrollBar(options){Class.call(this);var horizontal="x"===options.axis,element=convertToHtml('<div class="km-touch-scrollbar km-'+(horizontal?"horizontal":"vertical")+'-scrollbar" />');scroller_extend(this,options,{element,elementSize:0,movable:new Movable(element),scrollMovable:options.movable,alwaysVisible:options.alwaysVisible,size:horizontal?"width":"height"}),this.scrollMovable.bind("change",this.refresh.bind(this)),this.container.appendChild(element),options.alwaysVisible&&this.show()}return Class&&(ScrollBar.__proto__=Class),ScrollBar.prototype=Object.create(Class&&Class.prototype),ScrollBar.prototype.constructor=ScrollBar,ScrollBar.prototype.refresh=function refresh(){var axis=this.axis,dimension=this.dimension,paneSize=dimension.size,scrollMovable=this.scrollMovable,sizeRatio=paneSize/dimension.total,position=Math.round(-scrollMovable[axis]*sizeRatio),size=Math.round(paneSize*sizeRatio);this.element.style.display=sizeRatio>=1?"none":"",position+size>paneSize?size=paneSize-position:position<0&&(size+=position,position=0),this.elementSize!==size&&(this.element.style[this.size]=size+"px",this.elementSize=size),this.movable.moveAxis(axis,position)},ScrollBar.prototype.show=function show(){this.element.style.opacity=.7,this.element.style.visibility="visible"},ScrollBar.prototype.hide=function hide(){this.alwaysVisible||(this.element.style.opacity=0)},ScrollBar}(common_class.A),Scroller=function(Observable){function Scroller(element,options){Observable.call(this);var that=this;this.element=element,this._initOptions(options);var userAgent,os,hasScrolling=(userAgent=navigator.userAgent,(os=detectOS(userAgent)).ios||os.android);that._native=that.options.useNative&&hasScrolling;var scrollHeader=convertToHtml('<div class="km-scroll-header"/>');if(that._native)return addClass(element,"km-native-scroller"),prepend(scrollHeader,element),void scroller_extend(that,{scrollElement:element,fixedContainer:element.children[0]});element.style.overflow="hidden",addClass(element,"km-scroll-wrapper"),function(parent,wrapper){for(parent.appendChild(wrapper);parent.firstChild!==wrapper;)wrapper.appendChild(parent.firstChild)}(element,convertToHtml('<div class="km-scroll-container"/>')),prepend(scrollHeader,element);var inner=element.children[1],tapCapture=new TapCapture(element),movable=new Movable(inner),dimensions=new PaneDimensions({element:inner,container:element,forcedEnabled:that.options.zoom}),avoidScrolling=this.options.avoidScrolling,userEvents=new UserEvents(element,{touchAction:"pan-y",fastTap:!0,allowSelection:!0,preventDragEvent:!0,captureUpIfMoved:!0,multiTouch:that.options.zoom,supportDoubleTap:that.options.supportDoubleTap,start:function start(e){dimensions.refresh();var velocityX=scroller_abs(e.x.velocity),velocityY=scroller_abs(e.y.velocity),horizontalSwipe=2*velocityX>=velocityY,originatedFromFixedContainer=function(parent,element){return parent===element||function(parent,element){if(!element)return!1;for(var node=element.parentNode;null!==node;){if(node===parent)return!0;node=node.parentNode}return!1}(parent,element)}(that.fixedContainer,e.event.target),verticalSwipe=2*velocityY>=velocityX;!originatedFromFixedContainer&&!avoidScrolling(e)&&that.enabled&&(dimensions.x.enabled&&horizontalSwipe||dimensions.y.enabled&&verticalSwipe)?userEvents.capture():userEvents.cancel()}}),pane=new draggable_Pane({movable,dimensions,userEvents,elastic:that.options.elastic}),zoomSnapBack=new ZoomSnapBack({movable,dimensions,userEvents,tapCapture}),animatedScroller=new AnimatedScroller({moveTo:function moveTo(coordinates){that.scrollTo(coordinates.x,coordinates.y)}});movable.bind("change",(function(){that.scrollTop=-movable.y,that.scrollLeft=-movable.x,that.trigger("scroll",{scrollTop:that.scrollTop,scrollLeft:that.scrollLeft})})),that.options.mousewheelScrolling&&(this._wheelScrollHandler=this._wheelScroll.bind(this),on(element,"wheel",this._wheelScrollHandler)),scroller_extend(that,{movable,dimensions,zoomSnapBack,animatedScroller,userEvents,pane,tapCapture,pulled:!1,enabled:!0,scrollElement:inner,scrollTop:0,scrollLeft:0,fixedContainer:element.children[0]}),that._initAxis("x"),that._initAxis("y"),that._wheelEnd=function(){that._wheel=!1,that.userEvents.end(0,that._wheelY)},dimensions.refresh(),that.options.pullToRefresh&&that._initPullToRefresh()}return Observable&&(Scroller.__proto__=Observable),Scroller.prototype=Object.create(Observable&&Observable.prototype),Scroller.prototype.constructor=Scroller,Scroller.prototype._initOptions=function _initOptions(options){this.options=deepExtend({},this.options,options)},Scroller.prototype._wheelScroll=function _wheelScroll(e){if(!e.ctrlKey){this._wheel||(this._wheel=!0,this._wheelY=0,this.userEvents.press(0,this._wheelY)),clearTimeout(this._wheelTimeout),this._wheelTimeout=setTimeout(this._wheelEnd,50);var delta=function(jQueryEvent){var delta,e=jQueryEvent.originalEvent||jQueryEvent,deltaY=e.wheelDeltaY;return e.wheelDelta?(void 0===deltaY||deltaY)&&(delta=e.wheelDelta):e.detail&&e.axis===e.VERTICAL_AXIS&&(delta=10*-e.detail),delta}(e);delta&&(this._wheelY+=delta,this.userEvents.move(0,this._wheelY)),e.preventDefault()}},Scroller.prototype.makeVirtual=function makeVirtual(){this.dimensions.y.makeVirtual()},Scroller.prototype.virtualSize=function virtualSize(min,max){this.dimensions.y.virtualSize(min,max)},Scroller.prototype.height=function height(){return this.dimensions.y.size},Scroller.prototype.scrollHeight=function scrollHeight(){return this.scrollElement.scrollHeight},Scroller.prototype.scrollWidth=function scrollWidth(){return this.scrollElement.scrollWidth},Scroller.prototype._resize=function _resize(){this._native||this.contentResized()},Scroller.prototype.setOptions=function setOptions(options){this._initOptions(options),options.pullToRefresh&&this._initPullToRefresh()},Scroller.prototype.reset=function reset(){this._native?this.scrollElement.scrollTop(0):(this.movable.moveTo({x:0,y:0}),this._scale(1))},Scroller.prototype.contentResized=function contentResized(){this.dimensions.refresh(),this.pane.x.outOfBounds()&&this.movable.moveAxis("x",this.dimensions.x.min),this.pane.y.outOfBounds()&&this.movable.moveAxis("y",this.dimensions.y.min)},Scroller.prototype.zoomOut=function zoomOut(){var dimensions=this.dimensions;dimensions.refresh(),this._scale(dimensions.fitScale),this.movable.moveTo(dimensions.centerCoordinates())},Scroller.prototype.enable=function enable(){this.enabled=!0},Scroller.prototype.disable=function disable(){this.enabled=!1},Scroller.prototype.scrollTo=function scrollTo(x,y){this._native?(this.scrollElement.scrollLeft(scroller_abs(x)),this.scrollElement.scrollTop(scroller_abs(y))):(this.dimensions.refresh(),this.movable.moveTo({x,y}))},Scroller.prototype.animatedScrollTo=function animatedScrollTo(x,y,callback){var from,to;this._native?this.scrollTo(x,y):(from={x:this.movable.x,y:this.movable.y},to={x,y},this.animatedScroller.setCoordinates(from,to),this.animatedScroller.setCallback(callback),this.animatedScroller.start())},Scroller.prototype.pullHandled=function pullHandled(){},Scroller.prototype.destroy=function destroy(){var element=this.element;off(element,"wheel",this._wheelScrollHandler),this.userEvents&&this.userEvents.destroy()},Scroller.prototype._scale=function _scale(scale){this.dimensions.rescale(scale),this.movable.scaleTo(scale)},Scroller.prototype._initPullToRefresh=function _initPullToRefresh(){},Scroller.prototype._dragEnd=function _dragEnd(){},Scroller.prototype._paneChange=function _paneChange(){},Scroller.prototype._initAxis=function _initAxis(axis){var that=this,movable=that.movable,dimension=that.dimensions[axis],tapCapture=that.tapCapture,paneAxis=that.pane[axis],scrollBar=new ScrollBar({axis,movable,dimension,container:that.element,alwaysVisible:that.options.visibleScrollHints});dimension.bind("change",(function(){scrollBar.refresh()})),paneAxis.bind("change",(function(){scrollBar.show()})),that[axis+"inertia"]=new DragInertia({axis,paneAxis,movable,tapCapture,userEvents:that.userEvents,dimension,elastic:that.options.elastic,friction:that.options.friction||.96,velocityMultiplier:that.options.velocityMultiplier||10,end:function end(){scrollBar.hide(),that.trigger("scrollEnd",{axis,scrollTop:that.scrollTop,scrollLeft:that.scrollLeft})}})},Scroller}(Observable);setDefaultOptions(Scroller,{name:"Scroller",zoom:!1,pullOffset:140,visibleScrollHints:!1,elastic:!0,useNative:!1,mousewheelScrolling:!0,avoidScrolling:function avoidScrolling(){return!1},pullToRefresh:!1,messages:{pullTemplate:"Pull to refresh",releaseTemplate:"Release to refresh",refreshTemplate:"Refreshing"}}),setDefaultEvents(Scroller,["pull","scroll","resize"]);var MapService=function MapService(widget,context){void 0===context&&(context={}),this.sender=context.sender||widget,this.widget=widget,this.rtl=Boolean(context.rtl)};MapService.prototype.notify=function notify(name,args){this.widget&&this.widget.trigger(name,args)};const map_service=MapService;var map_math=Math,map_min=map_math.min,map_pow=map_math.pow,map_Point=geometry_point.A,layersMap={bubble:BubbleLayer,shape:ShapeLayer,tile:TileLayer};layersMap.marker=MarkerLayer;var map_Map=function(Observable){function Map(element,options,themeOptions,context){void 0===options&&(options={}),void 0===themeOptions&&(themeOptions={}),void 0===context&&(context={}),Observable.call(this),this._init(element,options,themeOptions,context)}return Observable&&(Map.__proto__=Observable),Map.prototype=Object.create(Observable&&Observable.prototype),Map.prototype.constructor=Map,Map.prototype.destroy=function destroy(){this.scroller.destroy(),this._tooltip&&this._tooltip.destroy(),this.navigator&&this.navigator.destroy(),this.attribution&&this.attribution.destroy(),this.zoomControl&&this.zoomControl.destroy(),isArray(this.markers)?this.markers.forEach((function(markerLayer){markerLayer.destroy()})):this.markers.destroy();for(var i=0;i<this.layers.length;i++)this.layers[i].destroy();off(this.element,"wheel",this._mousewheelHandler),Observable.prototype.destroy.call(this)},Map.prototype._init=function _init(element,options,themeOptions,context){void 0===options&&(options={}),void 0===themeOptions&&(themeOptions={}),void 0===context&&(context={}),this.support=getSupportedFeatures(),this.context=context,this.initObserver(context),this.initServices(context),this._notifyObserver("init"),this._initOptions(options),this._setEvents(options),this.crs=new EPSG3857,this._initElement(element),this._viewOrigin=this._getOrigin(),this._tooltip=this._createTooltip(),this._initScroller(),this._initMarkers(),this._initControls(),this._initLayers(),this._reset();var mousewheelThrottled=(0,throttle.A)(this._mousewheel.bind(this),50);this._mousewheelHandler=function(e){e.preventDefault(),mousewheelThrottled(e)},on(this.element,"wheel",this._mousewheelHandler)},Map.prototype._initOptions=function _initOptions(options){this.options=deepExtend({},this.options,options)},Map.prototype._initElement=function _initElement(element){this.element=element,addClass(element,"k-map"),element.style.position="relative",element.setAttribute("data-role","map"),removeChildren(element);var div=convertToHtml("<div />");this.element.appendChild(div)},Map.prototype.initServices=function initServices(context){void 0===context&&(context={}),this.widgetService=new map_service(this,context)},Map.prototype.initObserver=function initObserver(context){void 0===context&&(context={}),this.observers=[],this.addObserver(context.observer)},Map.prototype.addObserver=function addObserver(observer){observer&&this.observers.push(observer)},Map.prototype.removeObserver=function removeObserver(observer){var index=this.observers.indexOf(observer);index>=0&&this.observers.splice(index,1)},Map.prototype.requiresHandlers=function requiresHandlers(eventNames){for(var observers=this.observers,idx=0;idx<observers.length;idx++)if(observers[idx].requiresHandlers(eventNames))return!0},Map.prototype.trigger=function trigger(name,args){void 0===args&&(args={}),args.sender=this;for(var observers=this.observers,isDefaultPrevented=!1,idx=0;idx<observers.length;idx++)observers[idx].trigger(name,args)&&(isDefaultPrevented=!0);return isDefaultPrevented||Observable.prototype.trigger.call(this,name,args),isDefaultPrevented},Map.prototype._notifyObserver=function _notifyObserver(name,args){void 0===args&&(args={}),args.sender=this;for(var observers=this.observers,isDefaultPrevented=!1,idx=0;idx<observers.length;idx++)observers[idx].trigger(name,args)&&(isDefaultPrevented=!0);return isDefaultPrevented},Map.prototype.zoom=function zoom(level){var result,options=this.options;if(drawing_utils_defined(level)){var zoomLevel=map_math.round(limitValue(level,options.minZoom,options.maxZoom));options.zoom!==zoomLevel&&(options.zoom=zoomLevel,this.widgetService.notify("zoomChange",{zoom:options.zoom}),this._reset()),result=this}else result=options.zoom;return result},Map.prototype.center=function center(center$1){var result;if(center$1){var current=Location.create(center$1),previous=Location.create(this.options.center);current.equals(previous)||(this.options.center=current.toArray(),this.widgetService.notify("centerChange",{center:this.options.center}),this._reset()),result=this}else result=Location.create(this.options.center);return result},Map.prototype.extent=function extent(extent$1){var result;return extent$1?(this._setExtent(extent$1),result=this):result=this._getExtent(),result},Map.prototype.setOptions=function setOptions(options){void 0===options&&(options={});var element=this.element;this.destroy(),removeChildren(element),this._init(element,options,{},this.context),this._reset()},Map.prototype.locationToLayer=function locationToLayer(location,zoom){var clamp=!this.options.wraparound,locationObject=Location.create(location);return this.crs.toPoint(locationObject,this._layerSize(zoom),clamp)},Map.prototype.layerToLocation=function layerToLocation(point,zoom){var clamp=!this.options.wraparound,pointObject=map_Point.create(point);return this.crs.toLocation(pointObject,this._layerSize(zoom),clamp)},Map.prototype.locationToView=function locationToView(location){var locationObject=Location.create(location),origin=this.locationToLayer(this._viewOrigin);return this.locationToLayer(locationObject).translateWith(origin.scale(-1))},Map.prototype.viewToLocation=function viewToLocation(point,zoom){var origin=this.locationToLayer(this._getOrigin(),zoom),pointResult=map_Point.create(point).clone().translateWith(origin);return this.layerToLocation(pointResult,zoom)},Map.prototype.eventOffset=function eventOffset(e){var x,y,offset=elementOffset(this.element);if(e.x&&e.x.location||e.y&&e.y.location)x=e.x.location-offset.left,y=e.y.location-offset.top;else{var event=e.originalEvent||e;x=valueOrDefault(event.pageX,event.clientX)-offset.left,y=valueOrDefault(event.pageY,event.clientY)-offset.top}return new geometry_point.A(x,y)},Map.prototype.eventToView=function eventToView(e){var cursor=this.eventOffset(e);return this.locationToView(this.viewToLocation(cursor))},Map.prototype.eventToLayer=function eventToLayer(e){return this.locationToLayer(this.eventToLocation(e))},Map.prototype.eventToLocation=function eventToLocation(e){var cursor=this.eventOffset(e);return this.viewToLocation(cursor)},Map.prototype.viewSize=function viewSize(){var element=this.element,scale=this._layerSize(),width=element.clientWidth;return this.options.wraparound||(width=map_min(scale,width)),{width,height:map_min(scale,element.clientHeight)}},Map.prototype.exportVisual=function exportVisual(){return this._reset(),!1},Map.prototype.hideTooltip=function hideTooltip(){this._tooltip&&this._tooltip.hide()},Map.prototype._setOrigin=function _setOrigin(origin,zoom){var topLeft,size=this.viewSize(),originLocation=this._origin=Location.create(origin);return(topLeft=this.locationToLayer(originLocation,zoom)).x+=size.width/2,topLeft.y+=size.height/2,this.options.center=this.layerToLocation(topLeft,zoom).toArray(),this.widgetService.notify("centerChange",{center:this.options.center}),this},Map.prototype._getOrigin=function _getOrigin(invalidate){var topLeft,size=this.viewSize();return!invalidate&&this._origin||((topLeft=this.locationToLayer(this.center())).x-=size.width/2,topLeft.y-=size.height/2,this._origin=this.layerToLocation(topLeft)),this._origin},Map.prototype._setExtent=function _setExtent(newExtent){var raw=Extent.create(newExtent),se=raw.se.clone();this.options.wraparound&&se.lng<0&&newExtent.nw.lng>0&&(se.lng=180+(180+se.lng));var extent=new Extent(raw.nw,se);this.center(extent.center());var zoom,width=this.element.clientWidth,height=this.element.clientHeight;for(zoom=this.options.maxZoom;zoom>=this.options.minZoom;zoom--){var topLeft=this.locationToLayer(extent.nw,zoom),bottomRight=this.locationToLayer(extent.se,zoom),layerWidth=map_math.abs(bottomRight.x-topLeft.x),layerHeight=map_math.abs(bottomRight.y-topLeft.y);if(layerWidth<=width&&layerHeight<=height)break}this.zoom(zoom)},Map.prototype._getExtent=function _getExtent(){var nw=this._getOrigin(),bottomRight=this.locationToLayer(nw),size=this.viewSize();bottomRight.x+=size.width,bottomRight.y+=size.height;var se=this.layerToLocation(bottomRight);return new Extent(nw,se)},Map.prototype._zoomAround=function _zoomAround(pivot,level){this._setOrigin(this.layerToLocation(pivot,level),level),this.zoom(level)},Map.prototype._initControls=function _initControls(){var controls=this.options.controls;controls.attribution&&this._createAttribution(controls.attribution),this.support.mobileOS||(controls.navigator&&this._createNavigator(controls.navigator),controls.zoom&&this._createZoomControl(controls.zoom))},Map.prototype._createControlElement=function _createControlElement(options,defaultPosition){var pos=options.position||defaultPosition,posSelector="."+renderPos(pos).replace(" ","."),wrap=this.element.querySelector(".k-map-controls"+posSelector)||[];if(0===wrap.length){var div$1=document.createElement("div");addClass(div$1,"k-map-controls "+renderPos(pos)),wrap=div$1,this.element.appendChild(wrap)}var div=document.createElement("div");return wrap.appendChild(div),div},Map.prototype._createAttribution=function _createAttribution(options){var element=this._createControlElement(options,"bottomRight");this.attribution=new Attribution(element,options)},Map.prototype._createNavigator=function _createNavigator(options){var element=this._createControlElement(options,"topLeft"),navigator=this.navigator=new navigator_Navigator(element,deepExtend({},options,{icons:this.options.icons}));this._navigatorPan=this._navigatorPan.bind(this),navigator.bind("pan",this._navigatorPan),this._navigatorCenter=this._navigatorCenter.bind(this),navigator.bind("center",this._navigatorCenter)},Map.prototype._navigatorPan=function _navigatorPan(e){var scroller=this.scroller,x=scroller.scrollLeft+e.x,y=scroller.scrollTop-e.y,bounds=this._virtualSize,width=this.element.clientWidth,height=this.element.clientHeight;x=limitValue(x,bounds.x.min,bounds.x.max-width),y=limitValue(y,bounds.y.min,bounds.y.max-height),this.scroller.one("scroll",proxy(this._scrollEnd,this)),this.scroller.scrollTo(-x,-y)},Map.prototype._navigatorCenter=function _navigatorCenter(){this.center(this.options.center)},Map.prototype._createZoomControl=function _createZoomControl(options){var element=this._createControlElement(options,"topLeft"),zoomControl=this.zoomControl=new ZoomControl(element,options,this.options.icons);this._zoomControlChange=this._zoomControlChange.bind(this),zoomControl.bind("change",this._zoomControlChange)},Map.prototype._zoomControlChange=function _zoomControlChange(e){this.trigger("zoomStart",{originalEvent:e})||(this.zoom(this.zoom()+e.delta),this.trigger("zoomEnd",{originalEvent:e}))},Map.prototype._initScroller=function _initScroller(){var friction=this.support.mobileOS?.93:.9,zoomable=!1!==this.options.zoomable,scroller=this.scroller=new Scroller(this.element.children[0],{friction,velocityMultiplier:5,zoom:zoomable,mousewheelScrolling:!1,supportDoubleTap:!0});scroller.bind("scroll",proxy(this._scroll,this)),scroller.bind("scrollEnd",proxy(this._scrollEnd,this)),scroller.userEvents.bind("gesturestart",proxy(this._scaleStart,this)),scroller.userEvents.bind("gestureend",proxy(this._scale,this)),scroller.userEvents.bind("doubleTap",proxy(this._doubleTap,this)),scroller.userEvents.bind("tap",proxy(this._tap,this)),this.scrollElement=scroller.scrollElement},Map.prototype._initLayers=function _initLayers(){for(var defs=this.options.layers,layers=this.layers=[],i=0;i<defs.length;i++){var options=defs[i],layer=this._createLayer(options);layers.push(layer)}},Map.prototype._createLayer=function _createLayer(options){var type=options.type||"shape",layerDefaults=this.options.layerDefaults[type],layerOptions="marker"===type?deepExtend({},this.options.markerDefaults,options,{icons:this.options.icons}):deepExtend({},layerDefaults,options),layer=new(0,layersMap[type])(this,layerOptions);return"marker"===type&&(this.markers=layer),layer},Map.prototype._createTooltip=function _createTooltip(){return new tooltip_Tooltip(this.widgetService,this.options.tooltip)},Map.prototype._initMarkers=function _initMarkers(){(this.options.layers||[]).filter((function(x){return x&&"marker"===x.type})).length>0||(this.markers=new MarkerLayer(this,deepExtend({},this.options.markerDefaults,{icons:this.options.icons})),this.markers.add(this.options.markers))},Map.prototype._scroll=function _scroll(e){var origin=this.locationToLayer(this._viewOrigin).round(),movable=e.sender.movable,offset=new geometry_point.A(movable.x,movable.y).scale(-1).scale(1/movable.scale);origin.x+=offset.x,origin.y+=offset.y,this._scrollOffset=offset,this._tooltip.offset=offset,this.hideTooltip(),this._setOrigin(this.layerToLocation(origin)),this.trigger("pan",{originalEvent:e,origin:this._getOrigin(),center:this.center()})},Map.prototype._scrollEnd=function _scrollEnd(e){this._scrollOffset&&this._panComplete()&&(this._scrollOffset=null,this._panEndTimestamp=utils_now(),this.trigger("panEnd",{originalEvent:e,origin:this._getOrigin(),center:this.center()}))},Map.prototype._panComplete=function _panComplete(){return utils_now()-(this._panEndTimestamp||0)>50},Map.prototype._scaleStart=function _scaleStart(e){if(this.trigger("zoomStart",{originalEvent:e})){var touch=e.touches[1];touch&&touch.cancel()}},Map.prototype._scale=function _scale(e){var scale=this.scroller.movable.scale,zoom=this._scaleToZoom(scale),gestureCenter=new geometry_point.A(e.center.x,e.center.y),centerLocation=this.viewToLocation(gestureCenter,zoom),originPoint=this.locationToLayer(centerLocation,zoom).translate(-gestureCenter.x,-gestureCenter.y);this._zoomAround(originPoint,zoom),this.trigger("zoomEnd",{originalEvent:e})},Map.prototype._scaleToZoom=function _scaleToZoom(scaleDelta){var tiles=this._layerSize()*scaleDelta/this.options.minSize,zoom=map_math.log(tiles)/map_math.log(2);return map_math.round(zoom)},Map.prototype._reset=function _reset(){this.attribution&&this.attribution.filter(this.center(),this.zoom()),this._viewOrigin=this._getOrigin(!0),this._resetScroller(),this.hideTooltip(),this.trigger("beforeReset"),this.trigger("reset")},Map.prototype._resetScroller=function _resetScroller(){var scroller=this.scroller,x=scroller.dimensions.x,y=scroller.dimensions.y,scale=this._layerSize(),nw=this.extent().nw,topLeft=this.locationToLayer(nw).round();scroller.movable.round=!0,scroller.reset(),scroller.userEvents.cancel();var zoom=this.zoom();scroller.dimensions.forcedMinScale=map_pow(2,this.options.minZoom-zoom),scroller.dimensions.maxScale=map_pow(2,this.options.maxZoom-zoom);var xBounds={min:-topLeft.x,max:scale-topLeft.x},yBounds={min:-topLeft.y,max:scale-topLeft.y};if(this.options.wraparound&&(xBounds.max=20*scale,xBounds.min=-xBounds.max),!1===this.options.pannable){var viewSize=this.viewSize();xBounds.min=yBounds.min=0,xBounds.max=viewSize.width,yBounds.max=viewSize.height}x.makeVirtual(),y.makeVirtual(),x.virtualSize(xBounds.min,xBounds.max),y.virtualSize(yBounds.min,yBounds.max),this._virtualSize={x:xBounds,y:yBounds}},Map.prototype._renderLayers=function _renderLayers(){},Map.prototype._layerSize=function _layerSize(zoom){var newZoom=valueOrDefault(zoom,this.options.zoom);return this.options.minSize*map_pow(2,newZoom)},Map.prototype._tap=function _tap(e){if(this._panComplete()){var cursor=this.eventOffset(e);this.hideTooltip(),this.trigger("click",{originalEvent:e,location:this.viewToLocation(cursor)})}},Map.prototype._doubleTap=function _doubleTap(e){if(!1!==this.options.zoomable&&!this.trigger("zoomStart",{originalEvent:e})){var toZoom=this.zoom()+1,cursor=this.eventOffset(e),location=this.viewToLocation(cursor),origin=this.locationToLayer(location,toZoom).translate(-cursor.x,-cursor.y);this._zoomAround(origin,toZoom),this.trigger("zoomEnd",{originalEvent:e})}},Map.prototype._mousewheel=function _mousewheel(e){var delta=mousewheelDelta(e)>0?-1:1,options=this.options,fromZoom=this.zoom(),toZoom=limitValue(fromZoom+delta,options.minZoom,options.maxZoom);if(!1!==options.zoomable&&toZoom!==fromZoom&&!this.trigger("zoomStart",{originalEvent:e})){var cursor=this.eventOffset(e),location=this.viewToLocation(cursor),origin=this.locationToLayer(location,toZoom).translate(-cursor.x,-cursor.y);this._zoomAround(origin,toZoom),this.trigger("zoomEnd",{originalEvent:e})}},Map.prototype._toDocumentCoordinates=function _toDocumentCoordinates(point){var offset=elementOffset(this.element);return{left:drawing_utils_round(point.x+offset.left),top:drawing_utils_round(point.y+offset.top)}},Map}(Observable);setDefaultOptions(map_Map,{name:"Map",controls:{attribution:!0,navigator:{panStep:100},zoom:!0},layers:[],layerDefaults:{shape:{style:{fill:{color:"#fff"},stroke:{color:"#aaa",width:.5}}},bubble:{style:{fill:{color:"#fff",opacity:.5},stroke:{color:"#aaa",width:.5}}},marker:{shape:"pinTarget",tooltip:{position:"top"}}},center:[0,0],icons:{type:"font",svgIcons:{}},zoom:3,minSize:256,minZoom:1,maxZoom:19,markers:[],markerDefaults:{shape:"pinTarget",tooltip:{position:"top"}},wraparound:!0,renderPointsAsMarkers:!1}),setDefaultEvents(map_Map,["beforeReset","click","markerActivate","markerClick","markerCreated","markerMouseEnter","markerMouseLeave","pan","panEnd","reset","shapeClick","shapeCreated","shapeFeatureCreated","shapeMouseEnter","shapeMouseLeave","zoomEnd","zoomStart"]);const map_map=map_Map;var SANS="Arial, Helvetica, sans-serif",SANS11="11px "+SANS,SANS12="12px "+SANS,SANS16="16px "+SANS,notes=function(){return{icon:{border:{width:1}},label:{font:SANS12,padding:3},line:{length:10,width:2},visible:!0}},funnelSeries=function(){return{labels:{background:"",color:"",padding:{top:5,bottom:5,left:7,right:7}}}},pyramidSeries=funnelSeries,seriesDefaults=function(options){return Object.assign({visible:!0,labels:{font:SANS11},overlay:options.gradients?{}:{gradient:"none"},area:{highlight:{markers:{border:{}}},line:{opacity:1,width:0},markers:{size:6,visible:!1},opacity:.4},rangeArea:{highlight:{markers:{border:{}}},line:{opacity:1,width:0},markers:{size:6,visible:!1},opacity:.4},verticalRangeArea:{highlight:{markers:{border:{}}},line:{opacity:1,width:0},markers:{size:6,visible:!1},opacity:.4},bar:{gap:1.5,spacing:.4},boxPlot:{outliersField:"",meanField:"",border:{_brightness:.8,width:1},downColor:"#fff",gap:1,highlight:{border:{opacity:1,width:2},whiskers:{width:3},mean:{width:2},median:{width:2}},mean:{width:2},median:{width:2},spacing:.3,whiskers:{width:2}},bubble:{border:{width:0},labels:{background:"transparent"},opacity:.6},bullet:{gap:1.5,spacing:.4,target:{color:"#ff0000"}},candlestick:{border:{_brightness:.8,width:1},downColor:"#fff",gap:1,highlight:{border:{opacity:1,width:2},line:{width:2}},line:{color:"#000",width:1},spacing:.3},column:{gap:1.5,spacing:.4},heatmap:{labels:{color:"",background:"transparent",visible:!0},highlight:{border:{width:0}}},pie:{labels:{background:"",color:"",padding:{top:5,bottom:5,left:7,right:7}}},donut:{margin:1},funnel:{labels:{background:"",color:"",padding:{top:5,bottom:5,left:7,right:7}}},pyramid:pyramidSeries(),horizontalWaterfall:{gap:.5,line:{color:"#000",width:1},spacing:.4},line:{width:2},notes:notes(),ohlc:{gap:1,highlight:{line:{opacity:1,width:3}},line:{width:1},spacing:.3},radarArea:{line:{opacity:1,width:0},markers:{size:6,visible:!1},opacity:.5},radarLine:{markers:{visible:!1},width:2},polarArea:{line:{opacity:1,width:0},markers:{size:6,visible:!1},opacity:.5},polarLine:{markers:{visible:!1},width:2},rangeBar:{gap:1.5,spacing:.4},rangeColumn:{gap:1.5,spacing:.4},scatterLine:{width:1},verticalArea:{highlight:{markers:{border:{}}},line:{opacity:1,width:0},markers:{size:6,visible:!1},opacity:.4},verticalBoxPlot:{outliersField:"",meanField:"",border:{_brightness:.8,width:1},downColor:"#fff",gap:1,highlight:{border:{opacity:1,width:2},whiskers:{width:3},mean:{width:2},median:{width:2}},mean:{width:2},median:{width:2},spacing:.3,whiskers:{width:2}},verticalBullet:{gap:1.5,spacing:.4,target:{color:"#ff0000"}},verticalLine:{width:2},waterfall:{gap:.5,line:{color:"#000",width:1},spacing:.4}},TRENDLINE_SERIES.reduce((function(options,type){return options[type]={color:"inherit",trendline:{},markers:{visible:!1},width:1,dashType:"longDash"},options}),{}))},baseTheme=function(options){return void 0===options&&(options={}),{axisDefaults:{labels:{font:SANS12},notes:notes(),title:{font:SANS16,margin:5}},categoryAxis:{majorGridLines:{visible:!0}},navigator:{pane:{height:90,margin:{top:10}}},seriesDefaults:seriesDefaults(options),title:{font:SANS16},subtitle:{font:SANS12},legend:{labels:{font:SANS12}}}}},"./node_modules/@progress/kendo-drawing/dist/es/common/color/color.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _class__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/common/class.js"),_named_colors__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/common/color/named-colors.js"),_parse_color__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/common/color/parse-color.js"),Color=function(Class){function Color(value){if(Class.call(this),1===arguments.length)for(var formats=Color.formats,resolvedColor=this.resolveColor(value),idx=0;idx<formats.length;idx++){var formatRegex=formats[idx].re,processor=formats[idx].process,parts=formatRegex.exec(resolvedColor);if(parts){var channels=processor(parts);this.r=channels[0],this.g=channels[1],this.b=channels[2]}}else this.r=arguments[0],this.g=arguments[1],this.b=arguments[2];this.r=this.normalizeByte(this.r),this.g=this.normalizeByte(this.g),this.b=this.normalizeByte(this.b)}return Class&&(Color.__proto__=Class),Color.prototype=Object.create(Class&&Class.prototype),Color.prototype.constructor=Color,Color.prototype.toHex=function toHex(){var pad=this.padDigit,r=this.r.toString(16),g=this.g.toString(16),b=this.b.toString(16);return"#"+pad(r)+pad(g)+pad(b)},Color.prototype.resolveColor=function resolveColor(value){var color=value||"black";return"#"===color.charAt(0)&&(color=color.substr(1,6)),color=(color=color.replace(/ /g,"")).toLowerCase(),color=Color.namedColors[color]||color},Color.prototype.normalizeByte=function normalizeByte(value){return value<0||isNaN(value)?0:value>255?255:value},Color.prototype.padDigit=function padDigit(value){return 1===value.length?"0"+value:value},Color.prototype.brightness=function brightness(value){var round=Math.round;return this.r=round(this.normalizeByte(this.r*value)),this.g=round(this.normalizeByte(this.g*value)),this.b=round(this.normalizeByte(this.b*value)),this},Color.prototype.percBrightness=function percBrightness(){return Math.sqrt(.241*this.r*this.r+.691*this.g*this.g+.068*this.b*this.b)},Color.prototype.isDark=function isDark(){return this.percBrightness()<180},Color.fromBytes=function fromBytes(r,g,b,a){return new _parse_color__WEBPACK_IMPORTED_MODULE_0__.Ix(r,g,b,null!=a?a:1)},Color.fromRGB=function fromRGB(r,g,b,a){return new _parse_color__WEBPACK_IMPORTED_MODULE_0__.m0(r,g,b,null!=a?a:1)},Color.fromHSV=function fromHSV(h,s,v,a){return new _parse_color__WEBPACK_IMPORTED_MODULE_0__.WV(h,s,v,null!=a?a:1)},Color.fromHSL=function fromHSL(h,s,l,a){return new _parse_color__WEBPACK_IMPORTED_MODULE_0__.i8(h,s,l,null!=a?a:1)},Color}(_class__WEBPACK_IMPORTED_MODULE_1__.A);Color.formats=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,process:function(parts){return[parseInt(parts[1],10),parseInt(parts[2],10),parseInt(parts[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,process:function(parts){return[parseInt(parts[1],16),parseInt(parts[2],16),parseInt(parts[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,process:function(parts){return[parseInt(parts[1]+parts[1],16),parseInt(parts[2]+parts[2],16),parseInt(parts[3]+parts[3],16)]}}],Color.namedColors=_named_colors__WEBPACK_IMPORTED_MODULE_2__.A;const __WEBPACK_DEFAULT_EXPORT__=Color},"./node_modules/@progress/kendo-drawing/dist/es/geometry/circle.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _mixins_with_accessors__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/mixins/with-accessors.js"),_point__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/geometry/point.js"),_rect__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/geometry/rect.js"),_math_ellipse_extreme_angles__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/geometry/math/ellipse-extreme-angles.js"),_core_has_observers__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/core/has-observers.js"),_util__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/util/rad.js"),PI_DIV_2=Math.PI/2;const __WEBPACK_DEFAULT_EXPORT__=function(superclass){function Circle(center,radius){void 0===center&&(center=new _point__WEBPACK_IMPORTED_MODULE_0__.A),void 0===radius&&(radius=0),superclass.call(this),this.setCenter(center),this.setRadius(radius)}return superclass&&(Circle.__proto__=superclass),Circle.prototype=Object.create(superclass&&superclass.prototype),Circle.prototype.constructor=Circle,Circle.prototype.setCenter=function setCenter(value){return this._observerField("center",_point__WEBPACK_IMPORTED_MODULE_0__.A.create(value)),this.geometryChange(),this},Circle.prototype.getCenter=function getCenter(){return this.center},Circle.prototype.equals=function equals(other){return other&&other.center.equals(this.center)&&other.radius===this.radius},Circle.prototype.clone=function clone(){return new Circle(this.center.clone(),this.radius)},Circle.prototype.pointAt=function pointAt(angle){return this._pointAt((0,_util__WEBPACK_IMPORTED_MODULE_1__.A)(angle))},Circle.prototype.bbox=function bbox(matrix){for(var extremeAngles=(0,_math_ellipse_extreme_angles__WEBPACK_IMPORTED_MODULE_2__.A)(this.center,this.radius,this.radius,matrix),minPoint=_point__WEBPACK_IMPORTED_MODULE_0__.A.maxPoint(),maxPoint=_point__WEBPACK_IMPORTED_MODULE_0__.A.minPoint(),i=0;i<4;i++){var currentPointX=this._pointAt(extremeAngles.x+i*PI_DIV_2).transformCopy(matrix),currentPointY=this._pointAt(extremeAngles.y+i*PI_DIV_2).transformCopy(matrix),currentPoint=new _point__WEBPACK_IMPORTED_MODULE_0__.A(currentPointX.x,currentPointY.y);minPoint=_point__WEBPACK_IMPORTED_MODULE_0__.A.min(minPoint,currentPoint),maxPoint=_point__WEBPACK_IMPORTED_MODULE_0__.A.max(maxPoint,currentPoint)}return _rect__WEBPACK_IMPORTED_MODULE_3__.A.fromPoints(minPoint,maxPoint)},Circle.prototype._pointAt=function _pointAt(angle){var center=this.center,radius=this.radius;return new _point__WEBPACK_IMPORTED_MODULE_0__.A(center.x+radius*Math.cos(angle),center.y+radius*Math.sin(angle))},Circle.prototype.containsPoint=function containsPoint(point){var center=this.center,radius=this.radius;return Math.pow(point.x-center.x,2)+Math.pow(point.y-center.y,2)<=Math.pow(radius,2)},Circle.prototype._isOnPath=function _isOnPath(point,width){var center=this.center,radius=this.radius,pointDistance=center.distanceTo(point);return radius-width<=pointDistance&&pointDistance<=radius+width},Circle}((0,_mixins_with_accessors__WEBPACK_IMPORTED_MODULE_4__.A)(_core_has_observers__WEBPACK_IMPORTED_MODULE_5__.A,["radius"]))},"./node_modules/@progress/kendo-drawing/dist/es/shapes/circle.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _geometry_circle__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/geometry/circle.js"),_mixins_paintable__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/mixins/paintable.js"),_mixins_measurable__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/mixins/measurable.js"),_mixins_with_geometry__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/mixins/with-geometry.js"),_element__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/shapes/element.js"),_util__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/util/defined.js");const __WEBPACK_DEFAULT_EXPORT__=function(superclass){function Circle(geometry,options){void 0===geometry&&(geometry=new _geometry_circle__WEBPACK_IMPORTED_MODULE_0__.A),void 0===options&&(options={}),superclass.call(this,options),this.geometry(geometry),(0,_util__WEBPACK_IMPORTED_MODULE_1__.A)(this.options.stroke)||this.stroke("#000")}superclass&&(Circle.__proto__=superclass),Circle.prototype=Object.create(superclass&&superclass.prototype),Circle.prototype.constructor=Circle;var prototypeAccessors={nodeType:{configurable:!0}};return prototypeAccessors.nodeType.get=function(){return"Circle"},Circle.prototype.rawBBox=function rawBBox(){return this._geometry.bbox()},Circle.prototype._bbox=function _bbox(matrix){return this._geometry.bbox(matrix)},Circle.prototype._containsPoint=function _containsPoint(point){return this.geometry().containsPoint(point)},Circle.prototype._isOnPath=function _isOnPath(point){return this.geometry()._isOnPath(point,this.options.stroke.width/2)},Object.defineProperties(Circle.prototype,prototypeAccessors),Circle}((0,_mixins_paintable__WEBPACK_IMPORTED_MODULE_2__.A)((0,_mixins_measurable__WEBPACK_IMPORTED_MODULE_3__.A)((0,_mixins_with_geometry__WEBPACK_IMPORTED_MODULE_4__.A)(_element__WEBPACK_IMPORTED_MODULE_5__.A))))},"./node_modules/@progress/kendo-drawing/dist/es/shapes/text.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _element__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/shapes/element.js"),_geometry_point__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/geometry/point.js"),_geometry_rect__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/geometry/rect.js"),_geometry_to_matrix__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/geometry/to-matrix.js"),_mixins_paintable__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/mixins/paintable.js"),_mixins_with_points__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/mixins/with-points.js"),_util__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/util/defined.js"),_util__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/text-metrics/measure-text.js");const __WEBPACK_DEFAULT_EXPORT__=function(superclass){function Text(content,position,options){void 0===position&&(position=new _geometry_point__WEBPACK_IMPORTED_MODULE_0__.A),void 0===options&&(options={}),superclass.call(this,options),this.content(content),this.position(position),this.options.font||(this.options.font="12px sans-serif"),(0,_util__WEBPACK_IMPORTED_MODULE_1__.A)(this.options.fill)||this.fill("#000")}superclass&&(Text.__proto__=superclass),Text.prototype=Object.create(superclass&&superclass.prototype),Text.prototype.constructor=Text;var prototypeAccessors={nodeType:{configurable:!0}};return prototypeAccessors.nodeType.get=function(){return"Text"},Text.prototype.content=function content(value){return(0,_util__WEBPACK_IMPORTED_MODULE_1__.A)(value)?(this.options.set("content",value),this):this.options.get("content")},Text.prototype.measure=function measure(){return(0,_util__WEBPACK_IMPORTED_MODULE_2__.A)(this.content(),{font:this.options.get("font")})},Text.prototype.rect=function rect(){var size=this.measure(),pos=this.position().clone();return new _geometry_rect__WEBPACK_IMPORTED_MODULE_3__.A(pos,[size.width,size.height])},Text.prototype.bbox=function bbox(transformation){var combinedMatrix=(0,_geometry_to_matrix__WEBPACK_IMPORTED_MODULE_4__.A)(this.currentTransform(transformation));return this.rect().bbox(combinedMatrix)},Text.prototype.rawBBox=function rawBBox(){return this.rect().bbox()},Text.prototype._containsPoint=function _containsPoint(point){return this.rect().containsPoint(point)},Object.defineProperties(Text.prototype,prototypeAccessors),Text}((0,_mixins_paintable__WEBPACK_IMPORTED_MODULE_5__.A)((0,_mixins_with_points__WEBPACK_IMPORTED_MODULE_6__.A)(_element__WEBPACK_IMPORTED_MODULE_7__.A,["position"])))}}]);