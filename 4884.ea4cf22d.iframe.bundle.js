/*! For license information please see 4884.ea4cf22d.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkkendoreact_storybook=self.webpackChunkkendoreact_storybook||[]).push([[4884],{"./node_modules/@progress/kendo-drawing/dist/es/gradients/radial-gradient.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _mixins_with_points__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/mixins/with-points.js"),_geometry_point__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/geometry/point.js"),_gradient__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/gradients/gradient.js"),_util__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/util/defined.js");const __WEBPACK_DEFAULT_EXPORT__=function(superclass){function RadialGradient(options){void 0===options&&(options={}),superclass.call(this,options),this.center(options.center||new _geometry_point__WEBPACK_IMPORTED_MODULE_0__.A),this._radius=(0,_util__WEBPACK_IMPORTED_MODULE_1__.A)(options.radius)?options.radius:1,this._fallbackFill=options.fallbackFill}return superclass&&(RadialGradient.__proto__=superclass),RadialGradient.prototype=Object.create(superclass&&superclass.prototype),RadialGradient.prototype.constructor=RadialGradient,RadialGradient.prototype.radius=function radius(value){return(0,_util__WEBPACK_IMPORTED_MODULE_1__.A)(value)?(this._radius=value,this.geometryChange(),this):this._radius},RadialGradient.prototype.fallbackFill=function fallbackFill(value){return(0,_util__WEBPACK_IMPORTED_MODULE_1__.A)(value)?(this._fallbackFill=value,this.optionsChange(),this):this._fallbackFill},RadialGradient}((0,_mixins_with_points__WEBPACK_IMPORTED_MODULE_2__.A)(_gradient__WEBPACK_IMPORTED_MODULE_3__.A,["center"]))},"./node_modules/@progress/kendo-editor-common/dist/es/main.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function OrderedMap(content){this.content=content}__webpack_require__.d(__webpack_exports__,{i55:()=>AllSelection,rnf:()=>CellSelection,$t2:()=>EditorState,Lzz:()=>EditorView,nhb:()=>dist_NodeSelection,k_1:()=>dist_Plugin,hsM:()=>PluginKey,Sjr:()=>Schema,LN_:()=>Selection,J3d:()=>TableMap,U3g:()=>dist_TextSelection,GUe:()=>table_addColumnAfter,RC6:()=>table_addColumnBefore,gC5:()=>table_addRowAfter,JDY:()=>table_addRowBefore,_gP:()=>alignBlocks,G9V:()=>alignCenterRules,btE:()=>alignJustifyRules,IwV:()=>alignLeftRules,BY2:()=>alignRemoveRules,Xq8:()=>alignRightRules,fqb:()=>applyInlineStyle,jUY:()=>applyLink,RVE:()=>baseKeymap,CrB:()=>commands_bold,yOP:()=>canIndentAsListItem,cz2:()=>canInsert,V0W:()=>canOutdentAsListItem,FDz:()=>caretColor,st8:()=>dist_chainCommands,DNf:()=>cleanFormatting,j1R:()=>convertMsLists,ZRK:()=>createTable,KqN:()=>cspFix,gRK:()=>table_deleteColumn,aRg:()=>deleteRow,kGE:()=>deleteTable,Aah:()=>dropCursor,I$r:()=>dist_exitCode,I6j:()=>find,JWU:()=>findAll,EY$:()=>formatBlockElements,fHs:()=>fragmentToHtml,zfS:()=>gapCursor,am5:()=>getBlockFormats,uNC:()=>getHtml,i8$:()=>getInlineStyles,ut7:()=>getMark,D8:()=>goToNextCell,mP6:()=>hasMark,j4p:()=>blockNode_hasNode,b6A:()=>dist_history,f9v:()=>htmlToFragment,HLg:()=>imageResizeKey,Tf5:()=>imageResizing,vNW:()=>indentBlocks,mPn:()=>indentHtml,iLv:()=>indent_rules_indentRules,onD:()=>utils_insertNode,Zxn:()=>isAligned,w0G:()=>isIndented,TNI:()=>commands_italic,w4p:()=>keymap,T2x:()=>dist_liftListItem,nfo:()=>commands_link,Of_:()=>listStyle,Z8F:()=>marks,w7X:()=>mergeCells,a98:()=>nodes,nni:()=>indent_rules_outdentRules,FsP:()=>source_parseContent,asB:()=>pasteCleanup,Jm5:()=>pmDocToFragment,ZSj:()=>dist_redo,DeF:()=>removeAttribute,N5k:()=>removeComments,vL5:()=>removeLink,b4D:()=>removeTag,HCR:()=>find_replace_replace,yhl:()=>replaceAll,qPM:()=>replaceImageSourcesFromRtf,ajW:()=>sanitize,VM3:()=>sanitizeClassAttr,YLm:()=>sanitizeStyleAttr,Ubm:()=>selectAll,PY2:()=>selectedLineTextOnly,t6n:()=>selectionCell,gE9:()=>setHtml,$BU:()=>dist_sinkListItem,h8Q:()=>spacesFix,L09:()=>splitCell,wnP:()=>dist_splitListItem,ofj:()=>strikethrough,iH5:()=>subscript,Lmf:()=>superscript,LFN:()=>tableEditing,O8q:()=>table_resize_tableResizing,qzw:()=>textHighlight,FAO:()=>textHighlightKey,L4q:()=>inline_style_toggleInlineFormat,vvv:()=>toggleList,maF:()=>trimWhitespace,V1U:()=>commands_underline,tNi:()=>dist_undo,dvq:()=>dist_undoInputRule}),OrderedMap.prototype={constructor:OrderedMap,find:function(key){for(var i=0;i<this.content.length;i+=2)if(this.content[i]===key)return i;return-1},get:function(key){var found=this.find(key);return-1==found?void 0:this.content[found+1]},update:function(key,value,newKey){var self=newKey&&newKey!=key?this.remove(newKey):this,found=self.find(key),content=self.content.slice();return-1==found?content.push(newKey||key,value):(content[found+1]=value,newKey&&(content[found]=newKey)),new OrderedMap(content)},remove:function(key){var found=this.find(key);if(-1==found)return this;var content=this.content.slice();return content.splice(found,2),new OrderedMap(content)},addToStart:function(key,value){return new OrderedMap([key,value].concat(this.remove(key).content))},addToEnd:function(key,value){var content=this.remove(key).content.slice();return content.push(key,value),new OrderedMap(content)},addBefore:function(place,key,value){var without=this.remove(key),content=without.content.slice(),found=without.find(place);return content.splice(-1==found?content.length:found,0,key,value),new OrderedMap(content)},forEach:function(f){for(var i=0;i<this.content.length;i+=2)f(this.content[i],this.content[i+1])},prepend:function(map){return(map=OrderedMap.from(map)).size?new OrderedMap(map.content.concat(this.subtract(map).content)):this},append:function(map){return(map=OrderedMap.from(map)).size?new OrderedMap(this.subtract(map).content.concat(map.content)):this},subtract:function(map){var result=this;map=OrderedMap.from(map);for(var i=0;i<map.content.length;i+=2)result=result.remove(map.content[i]);return result},toObject:function(){var result={};return this.forEach((function(key,value){result[key]=value})),result},get size(){return this.content.length>>1}},OrderedMap.from=function(value){if(value instanceof OrderedMap)return value;var content=[];if(value)for(var prop in value)content.push(prop,value[prop]);return new OrderedMap(content)};const dist=OrderedMap;function findDiffStart(a,b,pos){for(let i=0;;i++){if(i==a.childCount||i==b.childCount)return a.childCount==b.childCount?null:pos;let childA=a.child(i),childB=b.child(i);if(childA!=childB){if(!childA.sameMarkup(childB))return pos;if(childA.isText&&childA.text!=childB.text){for(let j=0;childA.text[j]==childB.text[j];j++)pos++;return pos}if(childA.content.size||childB.content.size){let inner=findDiffStart(childA.content,childB.content,pos+1);if(null!=inner)return inner}pos+=childA.nodeSize}else pos+=childA.nodeSize}}function findDiffEnd(a,b,posA,posB){for(let iA=a.childCount,iB=b.childCount;;){if(0==iA||0==iB)return iA==iB?null:{a:posA,b:posB};let childA=a.child(--iA),childB=b.child(--iB),size=childA.nodeSize;if(childA!=childB){if(!childA.sameMarkup(childB))return{a:posA,b:posB};if(childA.isText&&childA.text!=childB.text){let same=0,minSize=Math.min(childA.text.length,childB.text.length);for(;same<minSize&&childA.text[childA.text.length-same-1]==childB.text[childB.text.length-same-1];)same++,posA--,posB--;return{a:posA,b:posB}}if(childA.content.size||childB.content.size){let inner=findDiffEnd(childA.content,childB.content,posA-1,posB-1);if(inner)return inner}posA-=size,posB-=size}else posA-=size,posB-=size}}class dist_Fragment{constructor(content,size){if(this.content=content,this.size=size||0,null==size)for(let i=0;i<content.length;i++)this.size+=content[i].nodeSize}nodesBetween(from,to,f,nodeStart=0,parent){for(let i=0,pos=0;pos<to;i++){let child=this.content[i],end=pos+child.nodeSize;if(end>from&&!1!==f(child,nodeStart+pos,parent||null,i)&&child.content.size){let start=pos+1;child.nodesBetween(Math.max(0,from-start),Math.min(child.content.size,to-start),f,nodeStart+start)}pos=end}}descendants(f){this.nodesBetween(0,this.size,f)}textBetween(from,to,blockSeparator,leafText){let text="",separated=!0;return this.nodesBetween(from,to,((node,pos)=>{node.isText?(text+=node.text.slice(Math.max(from,pos)-pos,to-pos),separated=!blockSeparator):node.isLeaf?(leafText?text+="function"==typeof leafText?leafText(node):leafText:node.type.spec.leafText&&(text+=node.type.spec.leafText(node)),separated=!blockSeparator):!separated&&node.isBlock&&(text+=blockSeparator,separated=!0)}),0),text}append(other){if(!other.size)return this;if(!this.size)return other;let last=this.lastChild,first=other.firstChild,content=this.content.slice(),i=0;for(last.isText&&last.sameMarkup(first)&&(content[content.length-1]=last.withText(last.text+first.text),i=1);i<other.content.length;i++)content.push(other.content[i]);return new dist_Fragment(content,this.size+other.size)}cut(from,to=this.size){if(0==from&&to==this.size)return this;let result=[],size=0;if(to>from)for(let i=0,pos=0;pos<to;i++){let child=this.content[i],end=pos+child.nodeSize;end>from&&((pos<from||end>to)&&(child=child.isText?child.cut(Math.max(0,from-pos),Math.min(child.text.length,to-pos)):child.cut(Math.max(0,from-pos-1),Math.min(child.content.size,to-pos-1))),result.push(child),size+=child.nodeSize),pos=end}return new dist_Fragment(result,size)}cutByIndex(from,to){return from==to?dist_Fragment.empty:0==from&&to==this.content.length?this:new dist_Fragment(this.content.slice(from,to))}replaceChild(index,node){let current=this.content[index];if(current==node)return this;let copy=this.content.slice(),size=this.size+node.nodeSize-current.nodeSize;return copy[index]=node,new dist_Fragment(copy,size)}addToStart(node){return new dist_Fragment([node].concat(this.content),this.size+node.nodeSize)}addToEnd(node){return new dist_Fragment(this.content.concat(node),this.size+node.nodeSize)}eq(other){if(this.content.length!=other.content.length)return!1;for(let i=0;i<this.content.length;i++)if(!this.content[i].eq(other.content[i]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(index){let found=this.content[index];if(!found)throw new RangeError("Index "+index+" out of range for "+this);return found}maybeChild(index){return this.content[index]||null}forEach(f){for(let i=0,p=0;i<this.content.length;i++){let child=this.content[i];f(child,p,i),p+=child.nodeSize}}findDiffStart(other,pos=0){return findDiffStart(this,other,pos)}findDiffEnd(other,pos=this.size,otherPos=other.size){return findDiffEnd(this,other,pos,otherPos)}findIndex(pos,round=-1){if(0==pos)return retIndex(0,pos);if(pos==this.size)return retIndex(this.content.length,pos);if(pos>this.size||pos<0)throw new RangeError(`Position ${pos} outside of fragment (${this})`);for(let i=0,curPos=0;;i++){let end=curPos+this.child(i).nodeSize;if(end>=pos)return end==pos||round>0?retIndex(i+1,end):retIndex(i,curPos);curPos=end}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map((n=>n.toJSON())):null}static fromJSON(schema,value){if(!value)return dist_Fragment.empty;if(!Array.isArray(value))throw new RangeError("Invalid input for Fragment.fromJSON");return new dist_Fragment(value.map(schema.nodeFromJSON))}static fromArray(array){if(!array.length)return dist_Fragment.empty;let joined,size=0;for(let i=0;i<array.length;i++){let node=array[i];size+=node.nodeSize,i&&node.isText&&array[i-1].sameMarkup(node)?(joined||(joined=array.slice(0,i)),joined[joined.length-1]=node.withText(joined[joined.length-1].text+node.text)):joined&&joined.push(node)}return new dist_Fragment(joined||array,size)}static from(nodes){if(!nodes)return dist_Fragment.empty;if(nodes instanceof dist_Fragment)return nodes;if(Array.isArray(nodes))return this.fromArray(nodes);if(nodes.attrs)return new dist_Fragment([nodes],nodes.nodeSize);throw new RangeError("Can not convert "+nodes+" to a Fragment"+(nodes.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}dist_Fragment.empty=new dist_Fragment([],0);const found={index:0,offset:0};function retIndex(index,offset){return found.index=index,found.offset=offset,found}function compareDeep(a,b){if(a===b)return!0;if(!a||"object"!=typeof a||!b||"object"!=typeof b)return!1;let array=Array.isArray(a);if(Array.isArray(b)!=array)return!1;if(array){if(a.length!=b.length)return!1;for(let i=0;i<a.length;i++)if(!compareDeep(a[i],b[i]))return!1}else{for(let p in a)if(!(p in b)||!compareDeep(a[p],b[p]))return!1;for(let p in b)if(!(p in a))return!1}return!0}class Mark{constructor(type,attrs){this.type=type,this.attrs=attrs}addToSet(set){let copy,placed=!1;for(let i=0;i<set.length;i++){let other=set[i];if(this.eq(other))return set;if(this.type.excludes(other.type))copy||(copy=set.slice(0,i));else{if(other.type.excludes(this.type))return set;!placed&&other.type.rank>this.type.rank&&(copy||(copy=set.slice(0,i)),copy.push(this),placed=!0),copy&&copy.push(other)}}return copy||(copy=set.slice()),placed||copy.push(this),copy}removeFromSet(set){for(let i=0;i<set.length;i++)if(this.eq(set[i]))return set.slice(0,i).concat(set.slice(i+1));return set}isInSet(set){for(let i=0;i<set.length;i++)if(this.eq(set[i]))return!0;return!1}eq(other){return this==other||this.type==other.type&&compareDeep(this.attrs,other.attrs)}toJSON(){let obj={type:this.type.name};for(let _ in this.attrs){obj.attrs=this.attrs;break}return obj}static fromJSON(schema,json){if(!json)throw new RangeError("Invalid input for Mark.fromJSON");let type=schema.marks[json.type];if(!type)throw new RangeError(`There is no mark type ${json.type} in this schema`);return type.create(json.attrs)}static sameSet(a,b){if(a==b)return!0;if(a.length!=b.length)return!1;for(let i=0;i<a.length;i++)if(!a[i].eq(b[i]))return!1;return!0}static setFrom(marks){if(!marks||Array.isArray(marks)&&0==marks.length)return Mark.none;if(marks instanceof Mark)return[marks];let copy=marks.slice();return copy.sort(((a,b)=>a.type.rank-b.type.rank)),copy}}Mark.none=[];class ReplaceError extends Error{}class dist_Slice{constructor(content,openStart,openEnd){this.content=content,this.openStart=openStart,this.openEnd=openEnd}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(pos,fragment){let content=insertInto(this.content,pos+this.openStart,fragment);return content&&new dist_Slice(content,this.openStart,this.openEnd)}removeBetween(from,to){return new dist_Slice(removeRange(this.content,from+this.openStart,to+this.openStart),this.openStart,this.openEnd)}eq(other){return this.content.eq(other.content)&&this.openStart==other.openStart&&this.openEnd==other.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let json={content:this.content.toJSON()};return this.openStart>0&&(json.openStart=this.openStart),this.openEnd>0&&(json.openEnd=this.openEnd),json}static fromJSON(schema,json){if(!json)return dist_Slice.empty;let openStart=json.openStart||0,openEnd=json.openEnd||0;if("number"!=typeof openStart||"number"!=typeof openEnd)throw new RangeError("Invalid input for Slice.fromJSON");return new dist_Slice(dist_Fragment.fromJSON(schema,json.content),openStart,openEnd)}static maxOpen(fragment,openIsolating=!0){let openStart=0,openEnd=0;for(let n=fragment.firstChild;n&&!n.isLeaf&&(openIsolating||!n.type.spec.isolating);n=n.firstChild)openStart++;for(let n=fragment.lastChild;n&&!n.isLeaf&&(openIsolating||!n.type.spec.isolating);n=n.lastChild)openEnd++;return new dist_Slice(fragment,openStart,openEnd)}}function removeRange(content,from,to){let{index,offset}=content.findIndex(from),child=content.maybeChild(index),{index:indexTo,offset:offsetTo}=content.findIndex(to);if(offset==from||child.isText){if(offsetTo!=to&&!content.child(indexTo).isText)throw new RangeError("Removing non-flat range");return content.cut(0,from).append(content.cut(to))}if(index!=indexTo)throw new RangeError("Removing non-flat range");return content.replaceChild(index,child.copy(removeRange(child.content,from-offset-1,to-offset-1)))}function insertInto(content,dist,insert,parent){let{index,offset}=content.findIndex(dist),child=content.maybeChild(index);if(offset==dist||child.isText)return parent&&!parent.canReplace(index,index,insert)?null:content.cut(0,dist).append(insert).append(content.cut(dist));let inner=insertInto(child.content,dist-offset-1,insert);return inner&&content.replaceChild(index,child.copy(inner))}function replace($from,$to,slice){if(slice.openStart>$from.depth)throw new ReplaceError("Inserted content deeper than insertion position");if($from.depth-slice.openStart!=$to.depth-slice.openEnd)throw new ReplaceError("Inconsistent open depths");return replaceOuter($from,$to,slice,0)}function replaceOuter($from,$to,slice,depth){let index=$from.index(depth),node=$from.node(depth);if(index==$to.index(depth)&&depth<$from.depth-slice.openStart){let inner=replaceOuter($from,$to,slice,depth+1);return node.copy(node.content.replaceChild(index,inner))}if(slice.content.size){if(slice.openStart||slice.openEnd||$from.depth!=depth||$to.depth!=depth){let{start,end}=function prepareSliceForReplace(slice,$along){let extra=$along.depth-slice.openStart,node=$along.node(extra).copy(slice.content);for(let i=extra-1;i>=0;i--)node=$along.node(i).copy(dist_Fragment.from(node));return{start:node.resolveNoCache(slice.openStart+extra),end:node.resolveNoCache(node.content.size-slice.openEnd-extra)}}(slice,$from);return dist_close(node,replaceThreeWay($from,start,end,$to,depth))}{let parent=$from.parent,content=parent.content;return dist_close(parent,content.cut(0,$from.parentOffset).append(slice.content).append(content.cut($to.parentOffset)))}}return dist_close(node,replaceTwoWay($from,$to,depth))}function checkJoin(main,sub){if(!sub.type.compatibleContent(main.type))throw new ReplaceError("Cannot join "+sub.type.name+" onto "+main.type.name)}function joinable($before,$after,depth){let node=$before.node(depth);return checkJoin(node,$after.node(depth)),node}function addNode(child,target){let last=target.length-1;last>=0&&child.isText&&child.sameMarkup(target[last])?target[last]=child.withText(target[last].text+child.text):target.push(child)}function addRange($start,$end,depth,target){let node=($end||$start).node(depth),startIndex=0,endIndex=$end?$end.index(depth):node.childCount;$start&&(startIndex=$start.index(depth),$start.depth>depth?startIndex++:$start.textOffset&&(addNode($start.nodeAfter,target),startIndex++));for(let i=startIndex;i<endIndex;i++)addNode(node.child(i),target);$end&&$end.depth==depth&&$end.textOffset&&addNode($end.nodeBefore,target)}function dist_close(node,content){return node.type.checkContent(content),node.copy(content)}function replaceThreeWay($from,$start,$end,$to,depth){let openStart=$from.depth>depth&&joinable($from,$start,depth+1),openEnd=$to.depth>depth&&joinable($end,$to,depth+1),content=[];return addRange(null,$from,depth,content),openStart&&openEnd&&$start.index(depth)==$end.index(depth)?(checkJoin(openStart,openEnd),addNode(dist_close(openStart,replaceThreeWay($from,$start,$end,$to,depth+1)),content)):(openStart&&addNode(dist_close(openStart,replaceTwoWay($from,$start,depth+1)),content),addRange($start,$end,depth,content),openEnd&&addNode(dist_close(openEnd,replaceTwoWay($end,$to,depth+1)),content)),addRange($to,null,depth,content),new dist_Fragment(content)}function replaceTwoWay($from,$to,depth){let content=[];if(addRange(null,$from,depth,content),$from.depth>depth){addNode(dist_close(joinable($from,$to,depth+1),replaceTwoWay($from,$to,depth+1)),content)}return addRange($to,null,depth,content),new dist_Fragment(content)}dist_Slice.empty=new dist_Slice(dist_Fragment.empty,0,0);class ResolvedPos{constructor(pos,path,parentOffset){this.pos=pos,this.path=path,this.parentOffset=parentOffset,this.depth=path.length/3-1}resolveDepth(val){return null==val?this.depth:val<0?this.depth+val:val}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(depth){return this.path[3*this.resolveDepth(depth)]}index(depth){return this.path[3*this.resolveDepth(depth)+1]}indexAfter(depth){return depth=this.resolveDepth(depth),this.index(depth)+(depth!=this.depth||this.textOffset?1:0)}start(depth){return 0==(depth=this.resolveDepth(depth))?0:this.path[3*depth-1]+1}end(depth){return depth=this.resolveDepth(depth),this.start(depth)+this.node(depth).content.size}before(depth){if(!(depth=this.resolveDepth(depth)))throw new RangeError("There is no position before the top-level node");return depth==this.depth+1?this.pos:this.path[3*depth-1]}after(depth){if(!(depth=this.resolveDepth(depth)))throw new RangeError("There is no position after the top-level node");return depth==this.depth+1?this.pos:this.path[3*depth-1]+this.path[3*depth].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let parent=this.parent,index=this.index(this.depth);if(index==parent.childCount)return null;let dOff=this.pos-this.path[this.path.length-1],child=parent.child(index);return dOff?parent.child(index).cut(dOff):child}get nodeBefore(){let index=this.index(this.depth),dOff=this.pos-this.path[this.path.length-1];return dOff?this.parent.child(index).cut(0,dOff):0==index?null:this.parent.child(index-1)}posAtIndex(index,depth){depth=this.resolveDepth(depth);let node=this.path[3*depth],pos=0==depth?0:this.path[3*depth-1]+1;for(let i=0;i<index;i++)pos+=node.child(i).nodeSize;return pos}marks(){let parent=this.parent,index=this.index();if(0==parent.content.size)return Mark.none;if(this.textOffset)return parent.child(index).marks;let main=parent.maybeChild(index-1),other=parent.maybeChild(index);if(!main){let tmp=main;main=other,other=tmp}let marks=main.marks;for(var i=0;i<marks.length;i++)!1!==marks[i].type.spec.inclusive||other&&marks[i].isInSet(other.marks)||(marks=marks[i--].removeFromSet(marks));return marks}marksAcross($end){let after=this.parent.maybeChild(this.index());if(!after||!after.isInline)return null;let marks=after.marks,next=$end.parent.maybeChild($end.index());for(var i=0;i<marks.length;i++)!1!==marks[i].type.spec.inclusive||next&&marks[i].isInSet(next.marks)||(marks=marks[i--].removeFromSet(marks));return marks}sharedDepth(pos){for(let depth=this.depth;depth>0;depth--)if(this.start(depth)<=pos&&this.end(depth)>=pos)return depth;return 0}blockRange(other=this,pred){if(other.pos<this.pos)return other.blockRange(this);for(let d=this.depth-(this.parent.inlineContent||this.pos==other.pos?1:0);d>=0;d--)if(other.pos<=this.end(d)&&(!pred||pred(this.node(d))))return new NodeRange(this,other,d);return null}sameParent(other){return this.pos-this.parentOffset==other.pos-other.parentOffset}max(other){return other.pos>this.pos?other:this}min(other){return other.pos<this.pos?other:this}toString(){let str="";for(let i=1;i<=this.depth;i++)str+=(str?"/":"")+this.node(i).type.name+"_"+this.index(i-1);return str+":"+this.parentOffset}static resolve(doc,pos){if(!(pos>=0&&pos<=doc.content.size))throw new RangeError("Position "+pos+" out of range");let path=[],start=0,parentOffset=pos;for(let node=doc;;){let{index,offset}=node.content.findIndex(parentOffset),rem=parentOffset-offset;if(path.push(node,index,start+offset),!rem)break;if(node=node.child(index),node.isText)break;parentOffset=rem-1,start+=offset+1}return new ResolvedPos(pos,path,parentOffset)}static resolveCached(doc,pos){for(let i=0;i<resolveCache.length;i++){let cached=resolveCache[i];if(cached.pos==pos&&cached.doc==doc)return cached}let result=resolveCache[resolveCachePos]=ResolvedPos.resolve(doc,pos);return resolveCachePos=(resolveCachePos+1)%resolveCacheSize,result}}let resolveCache=[],resolveCachePos=0,resolveCacheSize=12;class NodeRange{constructor($from,$to,depth){this.$from=$from,this.$to=$to,this.depth=depth}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const emptyAttrs=Object.create(null);class dist_Node{constructor(type,attrs,content,marks=Mark.none){this.type=type,this.attrs=attrs,this.marks=marks,this.content=content||dist_Fragment.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(index){return this.content.child(index)}maybeChild(index){return this.content.maybeChild(index)}forEach(f){this.content.forEach(f)}nodesBetween(from,to,f,startPos=0){this.content.nodesBetween(from,to,f,startPos,this)}descendants(f){this.nodesBetween(0,this.content.size,f)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(from,to,blockSeparator,leafText){return this.content.textBetween(from,to,blockSeparator,leafText)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(other){return this==other||this.sameMarkup(other)&&this.content.eq(other.content)}sameMarkup(other){return this.hasMarkup(other.type,other.attrs,other.marks)}hasMarkup(type,attrs,marks){return this.type==type&&compareDeep(this.attrs,attrs||type.defaultAttrs||emptyAttrs)&&Mark.sameSet(this.marks,marks||Mark.none)}copy(content=null){return content==this.content?this:new dist_Node(this.type,this.attrs,content,this.marks)}mark(marks){return marks==this.marks?this:new dist_Node(this.type,this.attrs,this.content,marks)}cut(from,to=this.content.size){return 0==from&&to==this.content.size?this:this.copy(this.content.cut(from,to))}slice(from,to=this.content.size,includeParents=!1){if(from==to)return dist_Slice.empty;let $from=this.resolve(from),$to=this.resolve(to),depth=includeParents?0:$from.sharedDepth(to),start=$from.start(depth),content=$from.node(depth).content.cut($from.pos-start,$to.pos-start);return new dist_Slice(content,$from.depth-depth,$to.depth-depth)}replace(from,to,slice){return replace(this.resolve(from),this.resolve(to),slice)}nodeAt(pos){for(let node=this;;){let{index,offset}=node.content.findIndex(pos);if(node=node.maybeChild(index),!node)return null;if(offset==pos||node.isText)return node;pos-=offset+1}}childAfter(pos){let{index,offset}=this.content.findIndex(pos);return{node:this.content.maybeChild(index),index,offset}}childBefore(pos){if(0==pos)return{node:null,index:0,offset:0};let{index,offset}=this.content.findIndex(pos);if(offset<pos)return{node:this.content.child(index),index,offset};let node=this.content.child(index-1);return{node,index:index-1,offset:offset-node.nodeSize}}resolve(pos){return ResolvedPos.resolveCached(this,pos)}resolveNoCache(pos){return ResolvedPos.resolve(this,pos)}rangeHasMark(from,to,type){let found=!1;return to>from&&this.nodesBetween(from,to,(node=>(type.isInSet(node.marks)&&(found=!0),!found))),found}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let name=this.type.name;return this.content.size&&(name+="("+this.content.toStringInner()+")"),wrapMarks(this.marks,name)}contentMatchAt(index){let match=this.type.contentMatch.matchFragment(this.content,0,index);if(!match)throw new Error("Called contentMatchAt on a node with invalid content");return match}canReplace(from,to,replacement=dist_Fragment.empty,start=0,end=replacement.childCount){let one=this.contentMatchAt(from).matchFragment(replacement,start,end),two=one&&one.matchFragment(this.content,to);if(!two||!two.validEnd)return!1;for(let i=start;i<end;i++)if(!this.type.allowsMarks(replacement.child(i).marks))return!1;return!0}canReplaceWith(from,to,type,marks){if(marks&&!this.type.allowsMarks(marks))return!1;let start=this.contentMatchAt(from).matchType(type),end=start&&start.matchFragment(this.content,to);return!!end&&end.validEnd}canAppend(other){return other.content.size?this.canReplace(this.childCount,this.childCount,other.content):this.type.compatibleContent(other.type)}check(){this.type.checkContent(this.content);let copy=Mark.none;for(let i=0;i<this.marks.length;i++)copy=this.marks[i].addToSet(copy);if(!Mark.sameSet(copy,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map((m=>m.type.name))}`);this.content.forEach((node=>node.check()))}toJSON(){let obj={type:this.type.name};for(let _ in this.attrs){obj.attrs=this.attrs;break}return this.content.size&&(obj.content=this.content.toJSON()),this.marks.length&&(obj.marks=this.marks.map((n=>n.toJSON()))),obj}static fromJSON(schema,json){if(!json)throw new RangeError("Invalid input for Node.fromJSON");let marks=null;if(json.marks){if(!Array.isArray(json.marks))throw new RangeError("Invalid mark data for Node.fromJSON");marks=json.marks.map(schema.markFromJSON)}if("text"==json.type){if("string"!=typeof json.text)throw new RangeError("Invalid text node in JSON");return schema.text(json.text,marks)}let content=dist_Fragment.fromJSON(schema,json.content);return schema.nodeType(json.type).create(json.attrs,content,marks)}}dist_Node.prototype.text=void 0;class TextNode extends dist_Node{constructor(type,attrs,content,marks){if(super(type,attrs,null,marks),!content)throw new RangeError("Empty text nodes are not allowed");this.text=content}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):wrapMarks(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(from,to){return this.text.slice(from,to)}get nodeSize(){return this.text.length}mark(marks){return marks==this.marks?this:new TextNode(this.type,this.attrs,this.text,marks)}withText(text){return text==this.text?this:new TextNode(this.type,this.attrs,text,this.marks)}cut(from=0,to=this.text.length){return 0==from&&to==this.text.length?this:this.withText(this.text.slice(from,to))}eq(other){return this.sameMarkup(other)&&this.text==other.text}toJSON(){let base=super.toJSON();return base.text=this.text,base}}function wrapMarks(marks,str){for(let i=marks.length-1;i>=0;i--)str=marks[i].type.name+"("+str+")";return str}class ContentMatch{constructor(validEnd){this.validEnd=validEnd,this.next=[],this.wrapCache=[]}static parse(string,nodeTypes){let stream=new TokenStream(string,nodeTypes);if(null==stream.next)return ContentMatch.empty;let expr=parseExpr(stream);stream.next&&stream.err("Unexpected trailing text");let match=function dfa(nfa){let labeled=Object.create(null);return explore(nullFrom(nfa,0));function explore(states){let out=[];states.forEach((node=>{nfa[node].forEach((({term,to})=>{if(!term)return;let set;for(let i=0;i<out.length;i++)out[i][0]==term&&(set=out[i][1]);nullFrom(nfa,to).forEach((node=>{set||out.push([term,set=[]]),-1==set.indexOf(node)&&set.push(node)}))}))}));let state=labeled[states.join(",")]=new ContentMatch(states.indexOf(nfa.length-1)>-1);for(let i=0;i<out.length;i++){let states=out[i][1].sort(cmp);state.next.push({type:out[i][0],next:labeled[states.join(",")]||explore(states)})}return state}}(function nfa(expr){let nfa=[[]];return connect(compile(expr,0),node()),nfa;function node(){return nfa.push([])-1}function edge(from,to,term){let edge={term,to};return nfa[from].push(edge),edge}function connect(edges,to){edges.forEach((edge=>edge.to=to))}function compile(expr,from){if("choice"==expr.type)return expr.exprs.reduce(((out,expr)=>out.concat(compile(expr,from))),[]);if("seq"!=expr.type){if("star"==expr.type){let loop=node();return edge(from,loop),connect(compile(expr.expr,loop),loop),[edge(loop)]}if("plus"==expr.type){let loop=node();return connect(compile(expr.expr,from),loop),connect(compile(expr.expr,loop),loop),[edge(loop)]}if("opt"==expr.type)return[edge(from)].concat(compile(expr.expr,from));if("range"==expr.type){let cur=from;for(let i=0;i<expr.min;i++){let next=node();connect(compile(expr.expr,cur),next),cur=next}if(-1==expr.max)connect(compile(expr.expr,cur),cur);else for(let i=expr.min;i<expr.max;i++){let next=node();edge(cur,next),connect(compile(expr.expr,cur),next),cur=next}return[edge(cur)]}if("name"==expr.type)return[edge(from,void 0,expr.value)];throw new Error("Unknown expr type")}for(let i=0;;i++){let next=compile(expr.exprs[i],from);if(i==expr.exprs.length-1)return next;connect(next,from=node())}}}(expr));return function checkForDeadEnds(match,stream){for(let i=0,work=[match];i<work.length;i++){let state=work[i],dead=!state.validEnd,nodes=[];for(let j=0;j<state.next.length;j++){let{type,next}=state.next[j];nodes.push(type.name),!dead||type.isText||type.hasRequiredAttrs()||(dead=!1),-1==work.indexOf(next)&&work.push(next)}dead&&stream.err("Only non-generatable nodes ("+nodes.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(match,stream),match}matchType(type){for(let i=0;i<this.next.length;i++)if(this.next[i].type==type)return this.next[i].next;return null}matchFragment(frag,start=0,end=frag.childCount){let cur=this;for(let i=start;cur&&i<end;i++)cur=cur.matchType(frag.child(i).type);return cur}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let i=0;i<this.next.length;i++){let{type}=this.next[i];if(!type.isText&&!type.hasRequiredAttrs())return type}return null}compatible(other){for(let i=0;i<this.next.length;i++)for(let j=0;j<other.next.length;j++)if(this.next[i].type==other.next[j].type)return!0;return!1}fillBefore(after,toEnd=!1,startIndex=0){let seen=[this];return function search(match,types){let finished=match.matchFragment(after,startIndex);if(finished&&(!toEnd||finished.validEnd))return dist_Fragment.from(types.map((tp=>tp.createAndFill())));for(let i=0;i<match.next.length;i++){let{type,next}=match.next[i];if(!type.isText&&!type.hasRequiredAttrs()&&-1==seen.indexOf(next)){seen.push(next);let found=search(next,types.concat(type));if(found)return found}}return null}(this,[])}findWrapping(target){for(let i=0;i<this.wrapCache.length;i+=2)if(this.wrapCache[i]==target)return this.wrapCache[i+1];let computed=this.computeWrapping(target);return this.wrapCache.push(target,computed),computed}computeWrapping(target){let seen=Object.create(null),active=[{match:this,type:null,via:null}];for(;active.length;){let current=active.shift(),match=current.match;if(match.matchType(target)){let result=[];for(let obj=current;obj.type;obj=obj.via)result.push(obj.type);return result.reverse()}for(let i=0;i<match.next.length;i++){let{type,next}=match.next[i];type.isLeaf||type.hasRequiredAttrs()||type.name in seen||current.type&&!next.validEnd||(active.push({match:type.contentMatch,type,via:current}),seen[type.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(n){if(n>=this.next.length)throw new RangeError(`There's no ${n}th edge in this content match`);return this.next[n]}toString(){let seen=[];return function scan(m){seen.push(m);for(let i=0;i<m.next.length;i++)-1==seen.indexOf(m.next[i].next)&&scan(m.next[i].next)}(this),seen.map(((m,i)=>{let out=i+(m.validEnd?"*":" ")+" ";for(let i=0;i<m.next.length;i++)out+=(i?", ":"")+m.next[i].type.name+"->"+seen.indexOf(m.next[i].next);return out})).join("\n")}}ContentMatch.empty=new ContentMatch(!0);class TokenStream{constructor(string,nodeTypes){this.string=string,this.nodeTypes=nodeTypes,this.inline=null,this.pos=0,this.tokens=string.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(tok){return this.next==tok&&(this.pos++||!0)}err(str){throw new SyntaxError(str+" (in content expression '"+this.string+"')")}}function parseExpr(stream){let exprs=[];do{exprs.push(parseExprSeq(stream))}while(stream.eat("|"));return 1==exprs.length?exprs[0]:{type:"choice",exprs}}function parseExprSeq(stream){let exprs=[];do{exprs.push(parseExprSubscript(stream))}while(stream.next&&")"!=stream.next&&"|"!=stream.next);return 1==exprs.length?exprs[0]:{type:"seq",exprs}}function parseExprSubscript(stream){let expr=function parseExprAtom(stream){if(stream.eat("(")){let expr=parseExpr(stream);return stream.eat(")")||stream.err("Missing closing paren"),expr}if(!/\W/.test(stream.next)){let exprs=function resolveName(stream,name){let types=stream.nodeTypes,type=types[name];if(type)return[type];let result=[];for(let typeName in types){let type=types[typeName];type.groups.indexOf(name)>-1&&result.push(type)}0==result.length&&stream.err("No node type or group '"+name+"' found");return result}(stream,stream.next).map((type=>(null==stream.inline?stream.inline=type.isInline:stream.inline!=type.isInline&&stream.err("Mixing inline and block content"),{type:"name",value:type})));return stream.pos++,1==exprs.length?exprs[0]:{type:"choice",exprs}}stream.err("Unexpected token '"+stream.next+"'")}(stream);for(;;)if(stream.eat("+"))expr={type:"plus",expr};else if(stream.eat("*"))expr={type:"star",expr};else if(stream.eat("?"))expr={type:"opt",expr};else{if(!stream.eat("{"))break;expr=parseExprRange(stream,expr)}return expr}function parseNum(stream){/\D/.test(stream.next)&&stream.err("Expected number, got '"+stream.next+"'");let result=Number(stream.next);return stream.pos++,result}function parseExprRange(stream,expr){let min=parseNum(stream),max=min;return stream.eat(",")&&(max="}"!=stream.next?parseNum(stream):-1),stream.eat("}")||stream.err("Unclosed braced range"),{type:"range",min,max,expr}}function cmp(a,b){return b-a}function nullFrom(nfa,node){let result=[];return function scan(node){let edges=nfa[node];if(1==edges.length&&!edges[0].term)return scan(edges[0].to);result.push(node);for(let i=0;i<edges.length;i++){let{term,to}=edges[i];term||-1!=result.indexOf(to)||scan(to)}}(node),result.sort(cmp)}function defaultAttrs(attrs){let defaults=Object.create(null);for(let attrName in attrs){let attr=attrs[attrName];if(!attr.hasDefault)return null;defaults[attrName]=attr.default}return defaults}function computeAttrs(attrs,value){let built=Object.create(null);for(let name in attrs){let given=value&&value[name];if(void 0===given){let attr=attrs[name];if(!attr.hasDefault)throw new RangeError("No value supplied for attribute "+name);given=attr.default}built[name]=given}return built}function initAttrs(attrs){let result=Object.create(null);if(attrs)for(let name in attrs)result[name]=new Attribute(attrs[name]);return result}class NodeType{constructor(name,schema,spec){this.name=name,this.schema=schema,this.spec=spec,this.markSet=null,this.groups=spec.group?spec.group.split(" "):[],this.attrs=initAttrs(spec.attrs),this.defaultAttrs=defaultAttrs(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(spec.inline||"text"==name),this.isText="text"==name}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ContentMatch.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let n in this.attrs)if(this.attrs[n].isRequired)return!0;return!1}compatibleContent(other){return this==other||this.contentMatch.compatible(other.contentMatch)}computeAttrs(attrs){return!attrs&&this.defaultAttrs?this.defaultAttrs:computeAttrs(this.attrs,attrs)}create(attrs=null,content,marks){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new dist_Node(this,this.computeAttrs(attrs),dist_Fragment.from(content),Mark.setFrom(marks))}createChecked(attrs=null,content,marks){return content=dist_Fragment.from(content),this.checkContent(content),new dist_Node(this,this.computeAttrs(attrs),content,Mark.setFrom(marks))}createAndFill(attrs=null,content,marks){if(attrs=this.computeAttrs(attrs),(content=dist_Fragment.from(content)).size){let before=this.contentMatch.fillBefore(content);if(!before)return null;content=before.append(content)}let matched=this.contentMatch.matchFragment(content),after=matched&&matched.fillBefore(dist_Fragment.empty,!0);return after?new dist_Node(this,attrs,content.append(after),Mark.setFrom(marks)):null}validContent(content){let result=this.contentMatch.matchFragment(content);if(!result||!result.validEnd)return!1;for(let i=0;i<content.childCount;i++)if(!this.allowsMarks(content.child(i).marks))return!1;return!0}checkContent(content){if(!this.validContent(content))throw new RangeError(`Invalid content for node ${this.name}: ${content.toString().slice(0,50)}`)}allowsMarkType(markType){return null==this.markSet||this.markSet.indexOf(markType)>-1}allowsMarks(marks){if(null==this.markSet)return!0;for(let i=0;i<marks.length;i++)if(!this.allowsMarkType(marks[i].type))return!1;return!0}allowedMarks(marks){if(null==this.markSet)return marks;let copy;for(let i=0;i<marks.length;i++)this.allowsMarkType(marks[i].type)?copy&&copy.push(marks[i]):copy||(copy=marks.slice(0,i));return copy?copy.length?copy:Mark.none:marks}static compile(nodes,schema){let result=Object.create(null);nodes.forEach(((name,spec)=>result[name]=new NodeType(name,schema,spec)));let topType=schema.spec.topNode||"doc";if(!result[topType])throw new RangeError("Schema is missing its top node type ('"+topType+"')");if(!result.text)throw new RangeError("Every schema needs a 'text' type");for(let _ in result.text.attrs)throw new RangeError("The text node type should not have attributes");return result}}class Attribute{constructor(options){this.hasDefault=Object.prototype.hasOwnProperty.call(options,"default"),this.default=options.default}get isRequired(){return!this.hasDefault}}class MarkType{constructor(name,rank,schema,spec){this.name=name,this.rank=rank,this.schema=schema,this.spec=spec,this.attrs=initAttrs(spec.attrs),this.excluded=null;let defaults=defaultAttrs(this.attrs);this.instance=defaults?new Mark(this,defaults):null}create(attrs=null){return!attrs&&this.instance?this.instance:new Mark(this,computeAttrs(this.attrs,attrs))}static compile(marks,schema){let result=Object.create(null),rank=0;return marks.forEach(((name,spec)=>result[name]=new MarkType(name,rank++,schema,spec))),result}removeFromSet(set){for(var i=0;i<set.length;i++)set[i].type==this&&(set=set.slice(0,i).concat(set.slice(i+1)),i--);return set}isInSet(set){for(let i=0;i<set.length;i++)if(set[i].type==this)return set[i]}excludes(other){return this.excluded.indexOf(other)>-1}}class Schema{constructor(spec){this.cached=Object.create(null);let instanceSpec=this.spec={};for(let prop in spec)instanceSpec[prop]=spec[prop];instanceSpec.nodes=dist.from(spec.nodes),instanceSpec.marks=dist.from(spec.marks||{}),this.nodes=NodeType.compile(this.spec.nodes,this),this.marks=MarkType.compile(this.spec.marks,this);let contentExprCache=Object.create(null);for(let prop in this.nodes){if(prop in this.marks)throw new RangeError(prop+" can not be both a node and a mark");let type=this.nodes[prop],contentExpr=type.spec.content||"",markExpr=type.spec.marks;type.contentMatch=contentExprCache[contentExpr]||(contentExprCache[contentExpr]=ContentMatch.parse(contentExpr,this.nodes)),type.inlineContent=type.contentMatch.inlineContent,type.markSet="_"==markExpr?null:markExpr?gatherMarks(this,markExpr.split(" ")):""!=markExpr&&type.inlineContent?null:[]}for(let prop in this.marks){let type=this.marks[prop],excl=type.spec.excludes;type.excluded=null==excl?[type]:""==excl?[]:gatherMarks(this,excl.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(type,attrs=null,content,marks){if("string"==typeof type)type=this.nodeType(type);else{if(!(type instanceof NodeType))throw new RangeError("Invalid node type: "+type);if(type.schema!=this)throw new RangeError("Node type from different schema used ("+type.name+")")}return type.createChecked(attrs,content,marks)}text(text,marks){let type=this.nodes.text;return new TextNode(type,type.defaultAttrs,text,Mark.setFrom(marks))}mark(type,attrs){return"string"==typeof type&&(type=this.marks[type]),type.create(attrs)}nodeFromJSON(json){return dist_Node.fromJSON(this,json)}markFromJSON(json){return Mark.fromJSON(this,json)}nodeType(name){let found=this.nodes[name];if(!found)throw new RangeError("Unknown node type: "+name);return found}}function gatherMarks(schema,marks){let found=[];for(let i=0;i<marks.length;i++){let name=marks[i],mark=schema.marks[name],ok=mark;if(mark)found.push(mark);else for(let prop in schema.marks){let mark=schema.marks[prop];("_"==name||mark.spec.group&&mark.spec.group.split(" ").indexOf(name)>-1)&&found.push(ok=mark)}if(!ok)throw new SyntaxError("Unknown mark type: '"+marks[i]+"'")}return found}class DOMParser{constructor(schema,rules){this.schema=schema,this.rules=rules,this.tags=[],this.styles=[],rules.forEach((rule=>{rule.tag?this.tags.push(rule):rule.style&&this.styles.push(rule)})),this.normalizeLists=!this.tags.some((r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let node=schema.nodes[r.node];return node.contentMatch.matchType(node)}))}parse(dom,options={}){let context=new ParseContext(this,options,!1);return context.addAll(dom,options.from,options.to),context.finish()}parseSlice(dom,options={}){let context=new ParseContext(this,options,!0);return context.addAll(dom,options.from,options.to),dist_Slice.maxOpen(context.finish())}matchTag(dom,context,after){for(let i=after?this.tags.indexOf(after)+1:0;i<this.tags.length;i++){let rule=this.tags[i];if(matches(dom,rule.tag)&&(void 0===rule.namespace||dom.namespaceURI==rule.namespace)&&(!rule.context||context.matchesContext(rule.context))){if(rule.getAttrs){let result=rule.getAttrs(dom);if(!1===result)continue;rule.attrs=result||void 0}return rule}}}matchStyle(prop,value,context,after){for(let i=after?this.styles.indexOf(after)+1:0;i<this.styles.length;i++){let rule=this.styles[i],style=rule.style;if(!(0!=style.indexOf(prop)||rule.context&&!context.matchesContext(rule.context)||style.length>prop.length&&(61!=style.charCodeAt(prop.length)||style.slice(prop.length+1)!=value))){if(rule.getAttrs){let result=rule.getAttrs(value);if(!1===result)continue;rule.attrs=result||void 0}return rule}}}static schemaRules(schema){let result=[];function insert(rule){let priority=null==rule.priority?50:rule.priority,i=0;for(;i<result.length;i++){let next=result[i];if((null==next.priority?50:next.priority)<priority)break}result.splice(i,0,rule)}for(let name in schema.marks){let rules=schema.marks[name].spec.parseDOM;rules&&rules.forEach((rule=>{insert(rule=copy(rule)),rule.mark||rule.ignore||rule.clearMark||(rule.mark=name)}))}for(let name in schema.nodes){let rules=schema.nodes[name].spec.parseDOM;rules&&rules.forEach((rule=>{insert(rule=copy(rule)),rule.node||rule.ignore||rule.mark||(rule.node=name)}))}return result}static fromSchema(schema){return schema.cached.domParser||(schema.cached.domParser=new DOMParser(schema,DOMParser.schemaRules(schema)))}}const blockTags={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ignoreTags={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},listTags={ol:!0,ul:!0};function wsOptionsFor(type,preserveWhitespace,base){return null!=preserveWhitespace?(preserveWhitespace?1:0)|("full"===preserveWhitespace?2:0):type&&"pre"==type.whitespace?3:-5&base}class NodeContext{constructor(type,attrs,marks,pendingMarks,solid,match,options){this.type=type,this.attrs=attrs,this.marks=marks,this.pendingMarks=pendingMarks,this.solid=solid,this.options=options,this.content=[],this.activeMarks=Mark.none,this.stashMarks=[],this.match=match||(4&options?null:type.contentMatch)}findWrapping(node){if(!this.match){if(!this.type)return[];let fill=this.type.contentMatch.fillBefore(dist_Fragment.from(node));if(!fill){let wrap,start=this.type.contentMatch;return(wrap=start.findWrapping(node.type))?(this.match=start,wrap):null}this.match=this.type.contentMatch.matchFragment(fill)}return this.match.findWrapping(node.type)}finish(openEnd){if(!(1&this.options)){let m,last=this.content[this.content.length-1];if(last&&last.isText&&(m=/[ \t\r\n\u000c]+$/.exec(last.text))){let text=last;last.text.length==m[0].length?this.content.pop():this.content[this.content.length-1]=text.withText(text.text.slice(0,text.text.length-m[0].length))}}let content=dist_Fragment.from(this.content);return!openEnd&&this.match&&(content=content.append(this.match.fillBefore(dist_Fragment.empty,!0))),this.type?this.type.create(this.attrs,content,this.marks):content}popFromStashMark(mark){for(let i=this.stashMarks.length-1;i>=0;i--)if(mark.eq(this.stashMarks[i]))return this.stashMarks.splice(i,1)[0]}applyPending(nextType){for(let i=0,pending=this.pendingMarks;i<pending.length;i++){let mark=pending[i];(this.type?this.type.allowsMarkType(mark.type):markMayApply(mark.type,nextType))&&!mark.isInSet(this.activeMarks)&&(this.activeMarks=mark.addToSet(this.activeMarks),this.pendingMarks=mark.removeFromSet(this.pendingMarks))}}inlineContext(node){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:node.parentNode&&!blockTags.hasOwnProperty(node.parentNode.nodeName.toLowerCase())}}class ParseContext{constructor(parser,options,isOpen){this.parser=parser,this.options=options,this.isOpen=isOpen,this.open=0;let topContext,topNode=options.topNode,topOptions=wsOptionsFor(null,options.preserveWhitespace,0)|(isOpen?4:0);topContext=topNode?new NodeContext(topNode.type,topNode.attrs,Mark.none,Mark.none,!0,options.topMatch||topNode.type.contentMatch,topOptions):new NodeContext(isOpen?null:parser.schema.topNodeType,null,Mark.none,Mark.none,!0,null,topOptions),this.nodes=[topContext],this.find=options.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(dom){3==dom.nodeType?this.addTextNode(dom):1==dom.nodeType&&this.addElement(dom)}withStyleRules(dom,f){let style=dom.getAttribute("style");if(!style)return f();let marks=this.readStyles(function parseStyles(style){let m,re=/\s*([\w-]+)\s*:\s*([^;]+)/g,result=[];for(;m=re.exec(style);)result.push(m[1],m[2].trim());return result}(style));if(!marks)return;let[addMarks,removeMarks]=marks,top=this.top;for(let i=0;i<removeMarks.length;i++)this.removePendingMark(removeMarks[i],top);for(let i=0;i<addMarks.length;i++)this.addPendingMark(addMarks[i]);f();for(let i=0;i<addMarks.length;i++)this.removePendingMark(addMarks[i],top);for(let i=0;i<removeMarks.length;i++)this.addPendingMark(removeMarks[i])}addTextNode(dom){let value=dom.nodeValue,top=this.top;if(2&top.options||top.inlineContext(dom)||/[^ \t\r\n\u000c]/.test(value)){if(1&top.options)value=2&top.options?value.replace(/\r\n?/g,"\n"):value.replace(/\r?\n|\r/g," ");else if(value=value.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(value)&&this.open==this.nodes.length-1){let nodeBefore=top.content[top.content.length-1],domNodeBefore=dom.previousSibling;(!nodeBefore||domNodeBefore&&"BR"==domNodeBefore.nodeName||nodeBefore.isText&&/[ \t\r\n\u000c]$/.test(nodeBefore.text))&&(value=value.slice(1))}value&&this.insertNode(this.parser.schema.text(value)),this.findInText(dom)}else this.findInside(dom)}addElement(dom,matchAfter){let ruleID,name=dom.nodeName.toLowerCase();listTags.hasOwnProperty(name)&&this.parser.normalizeLists&&function normalizeList(dom){for(let child=dom.firstChild,prevItem=null;child;child=child.nextSibling){let name=1==child.nodeType?child.nodeName.toLowerCase():null;name&&listTags.hasOwnProperty(name)&&prevItem?(prevItem.appendChild(child),child=prevItem):"li"==name?prevItem=child:name&&(prevItem=null)}}(dom);let rule=this.options.ruleFromNode&&this.options.ruleFromNode(dom)||(ruleID=this.parser.matchTag(dom,this,matchAfter));if(rule?rule.ignore:ignoreTags.hasOwnProperty(name))this.findInside(dom),this.ignoreFallback(dom);else if(!rule||rule.skip||rule.closeParent){rule&&rule.closeParent?this.open=Math.max(0,this.open-1):rule&&rule.skip.nodeType&&(dom=rule.skip);let sync,top=this.top,oldNeedsBlock=this.needsBlock;if(blockTags.hasOwnProperty(name))top.content.length&&top.content[0].isInline&&this.open&&(this.open--,top=this.top),sync=!0,top.type||(this.needsBlock=!0);else if(!dom.firstChild)return void this.leafFallback(dom);rule&&rule.skip?this.addAll(dom):this.withStyleRules(dom,(()=>this.addAll(dom))),sync&&this.sync(top),this.needsBlock=oldNeedsBlock}else this.withStyleRules(dom,(()=>{this.addElementByRule(dom,rule,!1===rule.consuming?ruleID:void 0)}))}leafFallback(dom){"BR"==dom.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(dom.ownerDocument.createTextNode("\n"))}ignoreFallback(dom){"BR"!=dom.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))}readStyles(styles){let add=Mark.none,remove=Mark.none;for(let i=0;i<styles.length;i+=2)for(let after;;){let rule=this.parser.matchStyle(styles[i],styles[i+1],this,after);if(!rule)break;if(rule.ignore)return null;if(rule.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach((m=>{rule.clearMark(m)&&(remove=m.addToSet(remove))})):add=this.parser.schema.marks[rule.mark].create(rule.attrs).addToSet(add),!1!==rule.consuming)break;after=rule}return[add,remove]}addElementByRule(dom,rule,continueAfter){let sync,nodeType,mark;if(rule.node)nodeType=this.parser.schema.nodes[rule.node],nodeType.isLeaf?this.insertNode(nodeType.create(rule.attrs))||this.leafFallback(dom):sync=this.enter(nodeType,rule.attrs||null,rule.preserveWhitespace);else{mark=this.parser.schema.marks[rule.mark].create(rule.attrs),this.addPendingMark(mark)}let startIn=this.top;if(nodeType&&nodeType.isLeaf)this.findInside(dom);else if(continueAfter)this.addElement(dom,continueAfter);else if(rule.getContent)this.findInside(dom),rule.getContent(dom,this.parser.schema).forEach((node=>this.insertNode(node)));else{let contentDOM=dom;"string"==typeof rule.contentElement?contentDOM=dom.querySelector(rule.contentElement):"function"==typeof rule.contentElement?contentDOM=rule.contentElement(dom):rule.contentElement&&(contentDOM=rule.contentElement),this.findAround(dom,contentDOM,!0),this.addAll(contentDOM)}sync&&this.sync(startIn)&&this.open--,mark&&this.removePendingMark(mark,startIn)}addAll(parent,startIndex,endIndex){let index=startIndex||0;for(let dom=startIndex?parent.childNodes[startIndex]:parent.firstChild,end=null==endIndex?null:parent.childNodes[endIndex];dom!=end;dom=dom.nextSibling,++index)this.findAtPoint(parent,index),this.addDOM(dom);this.findAtPoint(parent,index)}findPlace(node){let route,sync;for(let depth=this.open;depth>=0;depth--){let cx=this.nodes[depth],found=cx.findWrapping(node);if(found&&(!route||route.length>found.length)&&(route=found,sync=cx,!found.length))break;if(cx.solid)break}if(!route)return!1;this.sync(sync);for(let i=0;i<route.length;i++)this.enterInner(route[i],null,!1);return!0}insertNode(node){if(node.isInline&&this.needsBlock&&!this.top.type){let block=this.textblockFromContext();block&&this.enterInner(block)}if(this.findPlace(node)){this.closeExtra();let top=this.top;top.applyPending(node.type),top.match&&(top.match=top.match.matchType(node.type));let marks=top.activeMarks;for(let i=0;i<node.marks.length;i++)top.type&&!top.type.allowsMarkType(node.marks[i].type)||(marks=node.marks[i].addToSet(marks));return top.content.push(node.mark(marks)),!0}return!1}enter(type,attrs,preserveWS){let ok=this.findPlace(type.create(attrs));return ok&&this.enterInner(type,attrs,!0,preserveWS),ok}enterInner(type,attrs=null,solid=!1,preserveWS){this.closeExtra();let top=this.top;top.applyPending(type),top.match=top.match&&top.match.matchType(type);let options=wsOptionsFor(type,preserveWS,top.options);4&top.options&&0==top.content.length&&(options|=4),this.nodes.push(new NodeContext(type,attrs,top.activeMarks,top.pendingMarks,solid,null,options)),this.open++}closeExtra(openEnd=!1){let i=this.nodes.length-1;if(i>this.open){for(;i>this.open;i--)this.nodes[i-1].content.push(this.nodes[i].finish(openEnd));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(to){for(let i=this.open;i>=0;i--)if(this.nodes[i]==to)return this.open=i,!0;return!1}get currentPos(){this.closeExtra();let pos=0;for(let i=this.open;i>=0;i--){let content=this.nodes[i].content;for(let j=content.length-1;j>=0;j--)pos+=content[j].nodeSize;i&&pos++}return pos}findAtPoint(parent,offset){if(this.find)for(let i=0;i<this.find.length;i++)this.find[i].node==parent&&this.find[i].offset==offset&&(this.find[i].pos=this.currentPos)}findInside(parent){if(this.find)for(let i=0;i<this.find.length;i++)null==this.find[i].pos&&1==parent.nodeType&&parent.contains(this.find[i].node)&&(this.find[i].pos=this.currentPos)}findAround(parent,content,before){if(parent!=content&&this.find)for(let i=0;i<this.find.length;i++)if(null==this.find[i].pos&&1==parent.nodeType&&parent.contains(this.find[i].node)){content.compareDocumentPosition(this.find[i].node)&(before?2:4)&&(this.find[i].pos=this.currentPos)}}findInText(textNode){if(this.find)for(let i=0;i<this.find.length;i++)this.find[i].node==textNode&&(this.find[i].pos=this.currentPos-(textNode.nodeValue.length-this.find[i].offset))}matchesContext(context){if(context.indexOf("|")>-1)return context.split(/\s*\|\s*/).some(this.matchesContext,this);let parts=context.split("/"),option=this.options.context,useRoot=!(this.isOpen||option&&option.parent.type!=this.nodes[0].type),minDepth=-(option?option.depth+1:0)+(useRoot?0:1),match=(i,depth)=>{for(;i>=0;i--){let part=parts[i];if(""==part){if(i==parts.length-1||0==i)continue;for(;depth>=minDepth;depth--)if(match(i-1,depth))return!0;return!1}{let next=depth>0||0==depth&&useRoot?this.nodes[depth].type:option&&depth>=minDepth?option.node(depth-minDepth).type:null;if(!next||next.name!=part&&-1==next.groups.indexOf(part))return!1;depth--}}return!0};return match(parts.length-1,this.open)}textblockFromContext(){let $context=this.options.context;if($context)for(let d=$context.depth;d>=0;d--){let deflt=$context.node(d).contentMatchAt($context.indexAfter(d)).defaultType;if(deflt&&deflt.isTextblock&&deflt.defaultAttrs)return deflt}for(let name in this.parser.schema.nodes){let type=this.parser.schema.nodes[name];if(type.isTextblock&&type.defaultAttrs)return type}}addPendingMark(mark){let found=function findSameMarkInSet(mark,set){for(let i=0;i<set.length;i++)if(mark.eq(set[i]))return set[i]}(mark,this.top.pendingMarks);found&&this.top.stashMarks.push(found),this.top.pendingMarks=mark.addToSet(this.top.pendingMarks)}removePendingMark(mark,upto){for(let depth=this.open;depth>=0;depth--){let level=this.nodes[depth];if(level.pendingMarks.lastIndexOf(mark)>-1)level.pendingMarks=mark.removeFromSet(level.pendingMarks);else{level.activeMarks=mark.removeFromSet(level.activeMarks);let stashMark=level.popFromStashMark(mark);stashMark&&level.type&&level.type.allowsMarkType(stashMark.type)&&(level.activeMarks=stashMark.addToSet(level.activeMarks))}if(level==upto)break}}}function matches(dom,selector){return(dom.matches||dom.msMatchesSelector||dom.webkitMatchesSelector||dom.mozMatchesSelector).call(dom,selector)}function copy(obj){let copy={};for(let prop in obj)copy[prop]=obj[prop];return copy}function markMayApply(markType,nodeType){let nodes=nodeType.schema.nodes;for(let name in nodes){let parent=nodes[name];if(!parent.allowsMarkType(markType))continue;let seen=[],scan=match=>{seen.push(match);for(let i=0;i<match.edgeCount;i++){let{type,next}=match.edge(i);if(type==nodeType)return!0;if(seen.indexOf(next)<0&&scan(next))return!0}};if(scan(parent.contentMatch))return!0}}class DOMSerializer{constructor(nodes,marks){this.nodes=nodes,this.marks=marks}serializeFragment(fragment,options={},target){target||(target=doc(options).createDocumentFragment());let top=target,active=[];return fragment.forEach((node=>{if(active.length||node.marks.length){let keep=0,rendered=0;for(;keep<active.length&&rendered<node.marks.length;){let next=node.marks[rendered];if(this.marks[next.type.name]){if(!next.eq(active[keep][0])||!1===next.type.spec.spanning)break;keep++,rendered++}else rendered++}for(;keep<active.length;)top=active.pop()[1];for(;rendered<node.marks.length;){let add=node.marks[rendered++],markDOM=this.serializeMark(add,node.isInline,options);markDOM&&(active.push([add,top]),top.appendChild(markDOM.dom),top=markDOM.contentDOM||markDOM.dom)}}top.appendChild(this.serializeNodeInner(node,options))})),target}serializeNodeInner(node,options){let{dom,contentDOM}=DOMSerializer.renderSpec(doc(options),this.nodes[node.type.name](node));if(contentDOM){if(node.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(node.content,options,contentDOM)}return dom}serializeNode(node,options={}){let dom=this.serializeNodeInner(node,options);for(let i=node.marks.length-1;i>=0;i--){let wrap=this.serializeMark(node.marks[i],node.isInline,options);wrap&&((wrap.contentDOM||wrap.dom).appendChild(dom),dom=wrap.dom)}return dom}serializeMark(mark,inline,options={}){let toDOM=this.marks[mark.type.name];return toDOM&&DOMSerializer.renderSpec(doc(options),toDOM(mark,inline))}static renderSpec(doc,structure,xmlNS=null){if("string"==typeof structure)return{dom:doc.createTextNode(structure)};if(null!=structure.nodeType)return{dom:structure};if(structure.dom&&null!=structure.dom.nodeType)return structure;let contentDOM,tagName=structure[0],space=tagName.indexOf(" ");space>0&&(xmlNS=tagName.slice(0,space),tagName=tagName.slice(space+1));let dom=xmlNS?doc.createElementNS(xmlNS,tagName):doc.createElement(tagName),attrs=structure[1],start=1;if(attrs&&"object"==typeof attrs&&null==attrs.nodeType&&!Array.isArray(attrs)){start=2;for(let name in attrs)if(null!=attrs[name]){let space=name.indexOf(" ");space>0?dom.setAttributeNS(name.slice(0,space),name.slice(space+1),attrs[name]):dom.setAttribute(name,attrs[name])}}for(let i=start;i<structure.length;i++){let child=structure[i];if(0===child){if(i<structure.length-1||i>start)throw new RangeError("Content hole must be the only child of its parent node");return{dom,contentDOM:dom}}{let{dom:inner,contentDOM:innerContent}=DOMSerializer.renderSpec(doc,child,xmlNS);if(dom.appendChild(inner),innerContent){if(contentDOM)throw new RangeError("Multiple content holes");contentDOM=innerContent}}}return{dom,contentDOM}}static fromSchema(schema){return schema.cached.domSerializer||(schema.cached.domSerializer=new DOMSerializer(this.nodesFromSchema(schema),this.marksFromSchema(schema)))}static nodesFromSchema(schema){let result=gatherToDOM(schema.nodes);return result.text||(result.text=node=>node.text),result}static marksFromSchema(schema){return gatherToDOM(schema.marks)}}function gatherToDOM(obj){let result={};for(let name in obj){let toDOM=obj[name].spec.toDOM;toDOM&&(result[name]=toDOM)}return result}function doc(options){return options.document||window.document}const factor16=Math.pow(2,16);function recoverIndex(value){return 65535&value}class MapResult{constructor(pos,delInfo,recover){this.pos=pos,this.delInfo=delInfo,this.recover=recover}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class StepMap{constructor(ranges,inverted=!1){if(this.ranges=ranges,this.inverted=inverted,!ranges.length&&StepMap.empty)return StepMap.empty}recover(value){let diff=0,index=recoverIndex(value);if(!this.inverted)for(let i=0;i<index;i++)diff+=this.ranges[3*i+2]-this.ranges[3*i+1];return this.ranges[3*index]+diff+function recoverOffset(value){return(value-(65535&value))/factor16}(value)}mapResult(pos,assoc=1){return this._map(pos,assoc,!1)}map(pos,assoc=1){return this._map(pos,assoc,!0)}_map(pos,assoc,simple){let diff=0,oldIndex=this.inverted?2:1,newIndex=this.inverted?1:2;for(let i=0;i<this.ranges.length;i+=3){let start=this.ranges[i]-(this.inverted?diff:0);if(start>pos)break;let oldSize=this.ranges[i+oldIndex],newSize=this.ranges[i+newIndex],end=start+oldSize;if(pos<=end){let result=start+diff+((oldSize?pos==start?-1:pos==end?1:assoc:assoc)<0?0:newSize);if(simple)return result;let recover=pos==(assoc<0?start:end)?null:i/3+(pos-start)*factor16,del=pos==start?2:pos==end?1:4;return(assoc<0?pos!=start:pos!=end)&&(del|=8),new MapResult(result,del,recover)}diff+=newSize-oldSize}return simple?pos+diff:new MapResult(pos+diff,0,null)}touches(pos,recover){let diff=0,index=recoverIndex(recover),oldIndex=this.inverted?2:1,newIndex=this.inverted?1:2;for(let i=0;i<this.ranges.length;i+=3){let start=this.ranges[i]-(this.inverted?diff:0);if(start>pos)break;let oldSize=this.ranges[i+oldIndex];if(pos<=start+oldSize&&i==3*index)return!0;diff+=this.ranges[i+newIndex]-oldSize}return!1}forEach(f){let oldIndex=this.inverted?2:1,newIndex=this.inverted?1:2;for(let i=0,diff=0;i<this.ranges.length;i+=3){let start=this.ranges[i],oldStart=start-(this.inverted?diff:0),newStart=start+(this.inverted?0:diff),oldSize=this.ranges[i+oldIndex],newSize=this.ranges[i+newIndex];f(oldStart,oldStart+oldSize,newStart,newStart+newSize),diff+=newSize-oldSize}}invert(){return new StepMap(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(n){return 0==n?StepMap.empty:new StepMap(n<0?[0,-n,0]:[0,0,n])}}StepMap.empty=new StepMap([]);class Mapping{constructor(maps=[],mirror,from=0,to=maps.length){this.maps=maps,this.mirror=mirror,this.from=from,this.to=to}slice(from=0,to=this.maps.length){return new Mapping(this.maps,this.mirror,from,to)}copy(){return new Mapping(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(map,mirrors){this.to=this.maps.push(map),null!=mirrors&&this.setMirror(this.maps.length-1,mirrors)}appendMapping(mapping){for(let i=0,startSize=this.maps.length;i<mapping.maps.length;i++){let mirr=mapping.getMirror(i);this.appendMap(mapping.maps[i],null!=mirr&&mirr<i?startSize+mirr:void 0)}}getMirror(n){if(this.mirror)for(let i=0;i<this.mirror.length;i++)if(this.mirror[i]==n)return this.mirror[i+(i%2?-1:1)]}setMirror(n,m){this.mirror||(this.mirror=[]),this.mirror.push(n,m)}appendMappingInverted(mapping){for(let i=mapping.maps.length-1,totalSize=this.maps.length+mapping.maps.length;i>=0;i--){let mirr=mapping.getMirror(i);this.appendMap(mapping.maps[i].invert(),null!=mirr&&mirr>i?totalSize-mirr-1:void 0)}}invert(){let inverse=new Mapping;return inverse.appendMappingInverted(this),inverse}map(pos,assoc=1){if(this.mirror)return this._map(pos,assoc,!0);for(let i=this.from;i<this.to;i++)pos=this.maps[i].map(pos,assoc);return pos}mapResult(pos,assoc=1){return this._map(pos,assoc,!1)}_map(pos,assoc,simple){let delInfo=0;for(let i=this.from;i<this.to;i++){let result=this.maps[i].mapResult(pos,assoc);if(null!=result.recover){let corr=this.getMirror(i);if(null!=corr&&corr>i&&corr<this.to){i=corr,pos=this.maps[corr].recover(result.recover);continue}}delInfo|=result.delInfo,pos=result.pos}return simple?pos:new MapResult(pos,delInfo,null)}}const stepsByID=Object.create(null);class Step{getMap(){return StepMap.empty}merge(other){return null}static fromJSON(schema,json){if(!json||!json.stepType)throw new RangeError("Invalid input for Step.fromJSON");let type=stepsByID[json.stepType];if(!type)throw new RangeError(`No step type ${json.stepType} defined`);return type.fromJSON(schema,json)}static jsonID(id,stepClass){if(id in stepsByID)throw new RangeError("Duplicate use of step JSON ID "+id);return stepsByID[id]=stepClass,stepClass.prototype.jsonID=id,stepClass}}class StepResult{constructor(doc,failed){this.doc=doc,this.failed=failed}static ok(doc){return new StepResult(doc,null)}static fail(message){return new StepResult(null,message)}static fromReplace(doc,from,to,slice){try{return StepResult.ok(doc.replace(from,to,slice))}catch(e){if(e instanceof ReplaceError)return StepResult.fail(e.message);throw e}}}function mapFragment(fragment,f,parent){let mapped=[];for(let i=0;i<fragment.childCount;i++){let child=fragment.child(i);child.content.size&&(child=child.copy(mapFragment(child.content,f,child))),child.isInline&&(child=f(child,parent,i)),mapped.push(child)}return dist_Fragment.fromArray(mapped)}class AddMarkStep extends Step{constructor(from,to,mark){super(),this.from=from,this.to=to,this.mark=mark}apply(doc){let oldSlice=doc.slice(this.from,this.to),$from=doc.resolve(this.from),parent=$from.node($from.sharedDepth(this.to)),slice=new dist_Slice(mapFragment(oldSlice.content,((node,parent)=>node.isAtom&&parent.type.allowsMarkType(this.mark.type)?node.mark(this.mark.addToSet(node.marks)):node),parent),oldSlice.openStart,oldSlice.openEnd);return StepResult.fromReplace(doc,this.from,this.to,slice)}invert(){return new RemoveMarkStep(this.from,this.to,this.mark)}map(mapping){let from=mapping.mapResult(this.from,1),to=mapping.mapResult(this.to,-1);return from.deleted&&to.deleted||from.pos>=to.pos?null:new AddMarkStep(from.pos,to.pos,this.mark)}merge(other){return other instanceof AddMarkStep&&other.mark.eq(this.mark)&&this.from<=other.to&&this.to>=other.from?new AddMarkStep(Math.min(this.from,other.from),Math.max(this.to,other.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(schema,json){if("number"!=typeof json.from||"number"!=typeof json.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new AddMarkStep(json.from,json.to,schema.markFromJSON(json.mark))}}Step.jsonID("addMark",AddMarkStep);class RemoveMarkStep extends Step{constructor(from,to,mark){super(),this.from=from,this.to=to,this.mark=mark}apply(doc){let oldSlice=doc.slice(this.from,this.to),slice=new dist_Slice(mapFragment(oldSlice.content,(node=>node.mark(this.mark.removeFromSet(node.marks))),doc),oldSlice.openStart,oldSlice.openEnd);return StepResult.fromReplace(doc,this.from,this.to,slice)}invert(){return new AddMarkStep(this.from,this.to,this.mark)}map(mapping){let from=mapping.mapResult(this.from,1),to=mapping.mapResult(this.to,-1);return from.deleted&&to.deleted||from.pos>=to.pos?null:new RemoveMarkStep(from.pos,to.pos,this.mark)}merge(other){return other instanceof RemoveMarkStep&&other.mark.eq(this.mark)&&this.from<=other.to&&this.to>=other.from?new RemoveMarkStep(Math.min(this.from,other.from),Math.max(this.to,other.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(schema,json){if("number"!=typeof json.from||"number"!=typeof json.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new RemoveMarkStep(json.from,json.to,schema.markFromJSON(json.mark))}}Step.jsonID("removeMark",RemoveMarkStep);class AddNodeMarkStep extends Step{constructor(pos,mark){super(),this.pos=pos,this.mark=mark}apply(doc){let node=doc.nodeAt(this.pos);if(!node)return StepResult.fail("No node at mark step's position");let updated=node.type.create(node.attrs,null,this.mark.addToSet(node.marks));return StepResult.fromReplace(doc,this.pos,this.pos+1,new dist_Slice(dist_Fragment.from(updated),0,node.isLeaf?0:1))}invert(doc){let node=doc.nodeAt(this.pos);if(node){let newSet=this.mark.addToSet(node.marks);if(newSet.length==node.marks.length){for(let i=0;i<node.marks.length;i++)if(!node.marks[i].isInSet(newSet))return new AddNodeMarkStep(this.pos,node.marks[i]);return new AddNodeMarkStep(this.pos,this.mark)}}return new RemoveNodeMarkStep(this.pos,this.mark)}map(mapping){let pos=mapping.mapResult(this.pos,1);return pos.deletedAfter?null:new AddNodeMarkStep(pos.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(schema,json){if("number"!=typeof json.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new AddNodeMarkStep(json.pos,schema.markFromJSON(json.mark))}}Step.jsonID("addNodeMark",AddNodeMarkStep);class RemoveNodeMarkStep extends Step{constructor(pos,mark){super(),this.pos=pos,this.mark=mark}apply(doc){let node=doc.nodeAt(this.pos);if(!node)return StepResult.fail("No node at mark step's position");let updated=node.type.create(node.attrs,null,this.mark.removeFromSet(node.marks));return StepResult.fromReplace(doc,this.pos,this.pos+1,new dist_Slice(dist_Fragment.from(updated),0,node.isLeaf?0:1))}invert(doc){let node=doc.nodeAt(this.pos);return node&&this.mark.isInSet(node.marks)?new AddNodeMarkStep(this.pos,this.mark):this}map(mapping){let pos=mapping.mapResult(this.pos,1);return pos.deletedAfter?null:new RemoveNodeMarkStep(pos.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(schema,json){if("number"!=typeof json.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new RemoveNodeMarkStep(json.pos,schema.markFromJSON(json.mark))}}Step.jsonID("removeNodeMark",RemoveNodeMarkStep);class dist_ReplaceStep extends Step{constructor(from,to,slice,structure=!1){super(),this.from=from,this.to=to,this.slice=slice,this.structure=structure}apply(doc){return this.structure&&contentBetween(doc,this.from,this.to)?StepResult.fail("Structure replace would overwrite content"):StepResult.fromReplace(doc,this.from,this.to,this.slice)}getMap(){return new StepMap([this.from,this.to-this.from,this.slice.size])}invert(doc){return new dist_ReplaceStep(this.from,this.from+this.slice.size,doc.slice(this.from,this.to))}map(mapping){let from=mapping.mapResult(this.from,1),to=mapping.mapResult(this.to,-1);return from.deletedAcross&&to.deletedAcross?null:new dist_ReplaceStep(from.pos,Math.max(from.pos,to.pos),this.slice)}merge(other){if(!(other instanceof dist_ReplaceStep)||other.structure||this.structure)return null;if(this.from+this.slice.size!=other.from||this.slice.openEnd||other.slice.openStart){if(other.to!=this.from||this.slice.openStart||other.slice.openEnd)return null;{let slice=this.slice.size+other.slice.size==0?dist_Slice.empty:new dist_Slice(other.slice.content.append(this.slice.content),other.slice.openStart,this.slice.openEnd);return new dist_ReplaceStep(other.from,this.to,slice,this.structure)}}{let slice=this.slice.size+other.slice.size==0?dist_Slice.empty:new dist_Slice(this.slice.content.append(other.slice.content),this.slice.openStart,other.slice.openEnd);return new dist_ReplaceStep(this.from,this.to+(other.to-other.from),slice,this.structure)}}toJSON(){let json={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(json.slice=this.slice.toJSON()),this.structure&&(json.structure=!0),json}static fromJSON(schema,json){if("number"!=typeof json.from||"number"!=typeof json.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new dist_ReplaceStep(json.from,json.to,dist_Slice.fromJSON(schema,json.slice),!!json.structure)}}Step.jsonID("replace",dist_ReplaceStep);class ReplaceAroundStep extends Step{constructor(from,to,gapFrom,gapTo,slice,insert,structure=!1){super(),this.from=from,this.to=to,this.gapFrom=gapFrom,this.gapTo=gapTo,this.slice=slice,this.insert=insert,this.structure=structure}apply(doc){if(this.structure&&(contentBetween(doc,this.from,this.gapFrom)||contentBetween(doc,this.gapTo,this.to)))return StepResult.fail("Structure gap-replace would overwrite content");let gap=doc.slice(this.gapFrom,this.gapTo);if(gap.openStart||gap.openEnd)return StepResult.fail("Gap is not a flat range");let inserted=this.slice.insertAt(this.insert,gap.content);return inserted?StepResult.fromReplace(doc,this.from,this.to,inserted):StepResult.fail("Content does not fit in gap")}getMap(){return new StepMap([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(doc){let gap=this.gapTo-this.gapFrom;return new ReplaceAroundStep(this.from,this.from+this.slice.size+gap,this.from+this.insert,this.from+this.insert+gap,doc.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(mapping){let from=mapping.mapResult(this.from,1),to=mapping.mapResult(this.to,-1),gapFrom=mapping.map(this.gapFrom,-1),gapTo=mapping.map(this.gapTo,1);return from.deletedAcross&&to.deletedAcross||gapFrom<from.pos||gapTo>to.pos?null:new ReplaceAroundStep(from.pos,to.pos,gapFrom,gapTo,this.slice,this.insert,this.structure)}toJSON(){let json={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(json.slice=this.slice.toJSON()),this.structure&&(json.structure=!0),json}static fromJSON(schema,json){if("number"!=typeof json.from||"number"!=typeof json.to||"number"!=typeof json.gapFrom||"number"!=typeof json.gapTo||"number"!=typeof json.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ReplaceAroundStep(json.from,json.to,json.gapFrom,json.gapTo,dist_Slice.fromJSON(schema,json.slice),json.insert,!!json.structure)}}function contentBetween(doc,from,to){let $from=doc.resolve(from),dist=to-from,depth=$from.depth;for(;dist>0&&depth>0&&$from.indexAfter(depth)==$from.node(depth).childCount;)depth--,dist--;if(dist>0){let next=$from.node(depth).maybeChild($from.indexAfter(depth));for(;dist>0;){if(!next||next.isLeaf)return!0;next=next.firstChild,dist--}}return!1}function canCut(node,start,end){return(0==start||node.canReplace(start,node.childCount))&&(end==node.childCount||node.canReplace(0,end))}function dist_liftTarget(range){let content=range.parent.content.cutByIndex(range.startIndex,range.endIndex);for(let depth=range.depth;;--depth){let node=range.$from.node(depth),index=range.$from.index(depth),endIndex=range.$to.indexAfter(depth);if(depth<range.depth&&node.canReplace(index,endIndex,content))return depth;if(0==depth||node.type.spec.isolating||!canCut(node,index,endIndex))break}return null}function withAttrs(type){return{type,attrs:null}}function canSplit(doc,pos,depth=1,typesAfter){let $pos=doc.resolve(pos),base=$pos.depth-depth,innerType=typesAfter&&typesAfter[typesAfter.length-1]||$pos.parent;if(base<0||$pos.parent.type.spec.isolating||!$pos.parent.canReplace($pos.index(),$pos.parent.childCount)||!innerType.type.validContent($pos.parent.content.cutByIndex($pos.index(),$pos.parent.childCount)))return!1;for(let d=$pos.depth-1,i=depth-2;d>base;d--,i--){let node=$pos.node(d),index=$pos.index(d);if(node.type.spec.isolating)return!1;let rest=node.content.cutByIndex(index,node.childCount),overrideChild=typesAfter&&typesAfter[i+1];overrideChild&&(rest=rest.replaceChild(0,overrideChild.type.create(overrideChild.attrs)));let after=typesAfter&&typesAfter[i]||node;if(!node.canReplace(index+1,node.childCount)||!after.type.validContent(rest))return!1}let index=$pos.indexAfter(base),baseType=typesAfter&&typesAfter[0];return $pos.node(base).canReplaceWith(index,index,baseType?baseType.type:$pos.node(base+1).type)}function dist_canJoin(doc,pos){let $pos=doc.resolve(pos),index=$pos.index();return dist_joinable($pos.nodeBefore,$pos.nodeAfter)&&$pos.parent.canReplace(index,index+1)}function dist_joinable(a,b){return!(!a||!b||a.isLeaf||!a.canAppend(b))}function dropPoint(doc,pos,slice){let $pos=doc.resolve(pos);if(!slice.content.size)return pos;let content=slice.content;for(let i=0;i<slice.openStart;i++)content=content.firstChild.content;for(let pass=1;pass<=(0==slice.openStart&&slice.size?2:1);pass++)for(let d=$pos.depth;d>=0;d--){let bias=d==$pos.depth?0:$pos.pos<=($pos.start(d+1)+$pos.end(d+1))/2?-1:1,insertPos=$pos.index(d)+(bias>0?1:0),parent=$pos.node(d),fits=!1;if(1==pass)fits=parent.canReplace(insertPos,insertPos,content);else{let wrapping=parent.contentMatchAt(insertPos).findWrapping(content.firstChild.type);fits=wrapping&&parent.canReplaceWith(insertPos,insertPos,wrapping[0])}if(fits)return 0==bias?$pos.pos:bias<0?$pos.before(d+1):$pos.after(d+1)}return null}function dist_replaceStep(doc,from,to=from,slice=dist_Slice.empty){if(from==to&&!slice.size)return null;let $from=doc.resolve(from),$to=doc.resolve(to);return fitsTrivially($from,$to,slice)?new dist_ReplaceStep(from,to,slice):new Fitter($from,$to,slice).fit()}function fitsTrivially($from,$to,slice){return!slice.openStart&&!slice.openEnd&&$from.start()==$to.start()&&$from.parent.canReplace($from.index(),$to.index(),slice.content)}Step.jsonID("replaceAround",ReplaceAroundStep);class Fitter{constructor($from,$to,unplaced){this.$from=$from,this.$to=$to,this.unplaced=unplaced,this.frontier=[],this.placed=dist_Fragment.empty;for(let i=0;i<=$from.depth;i++){let node=$from.node(i);this.frontier.push({type:node.type,match:node.contentMatchAt($from.indexAfter(i))})}for(let i=$from.depth;i>0;i--)this.placed=dist_Fragment.from($from.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let fit=this.findFittable();fit?this.placeNodes(fit):this.openMore()||this.dropNode()}let moveInline=this.mustMoveInline(),placedSize=this.placed.size-this.depth-this.$from.depth,$from=this.$from,$to=this.close(moveInline<0?this.$to:$from.doc.resolve(moveInline));if(!$to)return null;let content=this.placed,openStart=$from.depth,openEnd=$to.depth;for(;openStart&&openEnd&&1==content.childCount;)content=content.firstChild.content,openStart--,openEnd--;let slice=new dist_Slice(content,openStart,openEnd);return moveInline>-1?new ReplaceAroundStep($from.pos,moveInline,this.$to.pos,this.$to.end(),slice,placedSize):slice.size||$from.pos!=this.$to.pos?new dist_ReplaceStep($from.pos,$to.pos,slice):null}findFittable(){let startDepth=this.unplaced.openStart;for(let cur=this.unplaced.content,d=0,openEnd=this.unplaced.openEnd;d<startDepth;d++){let node=cur.firstChild;if(cur.childCount>1&&(openEnd=0),node.type.spec.isolating&&openEnd<=d){startDepth=d;break}cur=node.content}for(let pass=1;pass<=2;pass++)for(let sliceDepth=1==pass?startDepth:this.unplaced.openStart;sliceDepth>=0;sliceDepth--){let fragment,parent=null;sliceDepth?(parent=contentAt(this.unplaced.content,sliceDepth-1).firstChild,fragment=parent.content):fragment=this.unplaced.content;let first=fragment.firstChild;for(let frontierDepth=this.depth;frontierDepth>=0;frontierDepth--){let wrap,{type,match}=this.frontier[frontierDepth],inject=null;if(1==pass&&(first?match.matchType(first.type)||(inject=match.fillBefore(dist_Fragment.from(first),!1)):parent&&type.compatibleContent(parent.type)))return{sliceDepth,frontierDepth,parent,inject};if(2==pass&&first&&(wrap=match.findWrapping(first.type)))return{sliceDepth,frontierDepth,parent,wrap};if(parent&&match.matchType(parent.type))break}}}openMore(){let{content,openStart,openEnd}=this.unplaced,inner=contentAt(content,openStart);return!(!inner.childCount||inner.firstChild.isLeaf)&&(this.unplaced=new dist_Slice(content,openStart+1,Math.max(openEnd,inner.size+openStart>=content.size-openEnd?openStart+1:0)),!0)}dropNode(){let{content,openStart,openEnd}=this.unplaced,inner=contentAt(content,openStart);if(inner.childCount<=1&&openStart>0){let openAtEnd=content.size-openStart<=openStart+inner.size;this.unplaced=new dist_Slice(dropFromFragment(content,openStart-1,1),openStart-1,openAtEnd?openStart-1:openEnd)}else this.unplaced=new dist_Slice(dropFromFragment(content,openStart,1),openStart,openEnd)}placeNodes({sliceDepth,frontierDepth,parent,inject,wrap}){for(;this.depth>frontierDepth;)this.closeFrontierNode();if(wrap)for(let i=0;i<wrap.length;i++)this.openFrontierNode(wrap[i]);let slice=this.unplaced,fragment=parent?parent.content:slice.content,openStart=slice.openStart-sliceDepth,taken=0,add=[],{match,type}=this.frontier[frontierDepth];if(inject){for(let i=0;i<inject.childCount;i++)add.push(inject.child(i));match=match.matchFragment(inject)}let openEndCount=fragment.size+sliceDepth-(slice.content.size-slice.openEnd);for(;taken<fragment.childCount;){let next=fragment.child(taken),matches=match.matchType(next.type);if(!matches)break;taken++,(taken>1||0==openStart||next.content.size)&&(match=matches,add.push(closeNodeStart(next.mark(type.allowedMarks(next.marks)),1==taken?openStart:0,taken==fragment.childCount?openEndCount:-1)))}let toEnd=taken==fragment.childCount;toEnd||(openEndCount=-1),this.placed=addToFragment(this.placed,frontierDepth,dist_Fragment.from(add)),this.frontier[frontierDepth].match=match,toEnd&&openEndCount<0&&parent&&parent.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let i=0,cur=fragment;i<openEndCount;i++){let node=cur.lastChild;this.frontier.push({type:node.type,match:node.contentMatchAt(node.childCount)}),cur=node.content}this.unplaced=toEnd?0==sliceDepth?dist_Slice.empty:new dist_Slice(dropFromFragment(slice.content,sliceDepth-1,1),sliceDepth-1,openEndCount<0?slice.openEnd:sliceDepth-1):new dist_Slice(dropFromFragment(slice.content,sliceDepth,taken),slice.openStart,slice.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let level,top=this.frontier[this.depth];if(!top.type.isTextblock||!contentAfterFits(this.$to,this.$to.depth,top.type,top.match,!1)||this.$to.depth==this.depth&&(level=this.findCloseLevel(this.$to))&&level.depth==this.depth)return-1;let{depth}=this.$to,after=this.$to.after(depth);for(;depth>1&&after==this.$to.end(--depth);)++after;return after}findCloseLevel($to){scan:for(let i=Math.min(this.depth,$to.depth);i>=0;i--){let{match,type}=this.frontier[i],dropInner=i<$to.depth&&$to.end(i+1)==$to.pos+($to.depth-(i+1)),fit=contentAfterFits($to,i,type,match,dropInner);if(fit){for(let d=i-1;d>=0;d--){let{match,type}=this.frontier[d],matches=contentAfterFits($to,d,type,match,!0);if(!matches||matches.childCount)continue scan}return{depth:i,fit,move:dropInner?$to.doc.resolve($to.after(i+1)):$to}}}}close($to){let close=this.findCloseLevel($to);if(!close)return null;for(;this.depth>close.depth;)this.closeFrontierNode();close.fit.childCount&&(this.placed=addToFragment(this.placed,close.depth,close.fit)),$to=close.move;for(let d=close.depth+1;d<=$to.depth;d++){let node=$to.node(d),add=node.type.contentMatch.fillBefore(node.content,!0,$to.index(d));this.openFrontierNode(node.type,node.attrs,add)}return $to}openFrontierNode(type,attrs=null,content){let top=this.frontier[this.depth];top.match=top.match.matchType(type),this.placed=addToFragment(this.placed,this.depth,dist_Fragment.from(type.create(attrs,content))),this.frontier.push({type,match:type.contentMatch})}closeFrontierNode(){let add=this.frontier.pop().match.fillBefore(dist_Fragment.empty,!0);add.childCount&&(this.placed=addToFragment(this.placed,this.frontier.length,add))}}function dropFromFragment(fragment,depth,count){return 0==depth?fragment.cutByIndex(count,fragment.childCount):fragment.replaceChild(0,fragment.firstChild.copy(dropFromFragment(fragment.firstChild.content,depth-1,count)))}function addToFragment(fragment,depth,content){return 0==depth?fragment.append(content):fragment.replaceChild(fragment.childCount-1,fragment.lastChild.copy(addToFragment(fragment.lastChild.content,depth-1,content)))}function contentAt(fragment,depth){for(let i=0;i<depth;i++)fragment=fragment.firstChild.content;return fragment}function closeNodeStart(node,openStart,openEnd){if(openStart<=0)return node;let frag=node.content;return openStart>1&&(frag=frag.replaceChild(0,closeNodeStart(frag.firstChild,openStart-1,1==frag.childCount?openEnd-1:0))),openStart>0&&(frag=node.type.contentMatch.fillBefore(frag).append(frag),openEnd<=0&&(frag=frag.append(node.type.contentMatch.matchFragment(frag).fillBefore(dist_Fragment.empty,!0)))),node.copy(frag)}function contentAfterFits($to,depth,type,match,open){let node=$to.node(depth),index=open?$to.indexAfter(depth):$to.index(depth);if(index==node.childCount&&!type.compatibleContent(node.type))return null;let fit=match.fillBefore(node.content,!0,index);return fit&&!function invalidMarks(type,fragment,start){for(let i=start;i<fragment.childCount;i++)if(!type.allowsMarks(fragment.child(i).marks))return!0;return!1}(type,node.content,index)?fit:null}function closeFragment(fragment,depth,oldOpen,newOpen,parent){if(depth<oldOpen){let first=fragment.firstChild;fragment=fragment.replaceChild(0,first.copy(closeFragment(first.content,depth+1,oldOpen,newOpen,first)))}if(depth>newOpen){let match=parent.contentMatchAt(0),start=match.fillBefore(fragment).append(fragment);fragment=start.append(match.matchFragment(start).fillBefore(dist_Fragment.empty,!0))}return fragment}function coveredDepths($from,$to){let result=[];for(let d=Math.min($from.depth,$to.depth);d>=0;d--){let start=$from.start(d);if(start<$from.pos-($from.depth-d)||$to.end(d)>$to.pos+($to.depth-d)||$from.node(d).type.spec.isolating||$to.node(d).type.spec.isolating)break;(start==$to.start(d)||d==$from.depth&&d==$to.depth&&$from.parent.inlineContent&&$to.parent.inlineContent&&d&&$to.start(d-1)==start-1)&&result.push(d)}return result}class AttrStep extends Step{constructor(pos,attr,value){super(),this.pos=pos,this.attr=attr,this.value=value}apply(doc){let node=doc.nodeAt(this.pos);if(!node)return StepResult.fail("No node at attribute step's position");let attrs=Object.create(null);for(let name in node.attrs)attrs[name]=node.attrs[name];attrs[this.attr]=this.value;let updated=node.type.create(attrs,null,node.marks);return StepResult.fromReplace(doc,this.pos,this.pos+1,new dist_Slice(dist_Fragment.from(updated),0,node.isLeaf?0:1))}getMap(){return StepMap.empty}invert(doc){return new AttrStep(this.pos,this.attr,doc.nodeAt(this.pos).attrs[this.attr])}map(mapping){let pos=mapping.mapResult(this.pos,1);return pos.deletedAfter?null:new AttrStep(pos.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(schema,json){if("number"!=typeof json.pos||"string"!=typeof json.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new AttrStep(json.pos,json.attr,json.value)}}Step.jsonID("attr",AttrStep);let TransformError=class extends Error{};TransformError=function TransformError(message){let err=Error.call(this,message);return err.__proto__=TransformError.prototype,err},(TransformError.prototype=Object.create(Error.prototype)).constructor=TransformError,TransformError.prototype.name="TransformError";class Transform{constructor(doc){this.doc=doc,this.steps=[],this.docs=[],this.mapping=new Mapping}get before(){return this.docs.length?this.docs[0]:this.doc}step(step){let result=this.maybeStep(step);if(result.failed)throw new TransformError(result.failed);return this}maybeStep(step){let result=step.apply(this.doc);return result.failed||this.addStep(step,result.doc),result}get docChanged(){return this.steps.length>0}addStep(step,doc){this.docs.push(this.doc),this.steps.push(step),this.mapping.appendMap(step.getMap()),this.doc=doc}replace(from,to=from,slice=dist_Slice.empty){let step=dist_replaceStep(this.doc,from,to,slice);return step&&this.step(step),this}replaceWith(from,to,content){return this.replace(from,to,new dist_Slice(dist_Fragment.from(content),0,0))}delete(from,to){return this.replace(from,to,dist_Slice.empty)}insert(pos,content){return this.replaceWith(pos,pos,content)}replaceRange(from,to,slice){return function replaceRange(tr,from,to,slice){if(!slice.size)return tr.deleteRange(from,to);let $from=tr.doc.resolve(from),$to=tr.doc.resolve(to);if(fitsTrivially($from,$to,slice))return tr.step(new dist_ReplaceStep(from,to,slice));let targetDepths=coveredDepths($from,tr.doc.resolve(to));0==targetDepths[targetDepths.length-1]&&targetDepths.pop();let preferredTarget=-($from.depth+1);targetDepths.unshift(preferredTarget);for(let d=$from.depth,pos=$from.pos-1;d>0;d--,pos--){let spec=$from.node(d).type.spec;if(spec.defining||spec.definingAsContext||spec.isolating)break;targetDepths.indexOf(d)>-1?preferredTarget=d:$from.before(d)==pos&&targetDepths.splice(1,0,-d)}let preferredTargetIndex=targetDepths.indexOf(preferredTarget),leftNodes=[],preferredDepth=slice.openStart;for(let content=slice.content,i=0;;i++){let node=content.firstChild;if(leftNodes.push(node),i==slice.openStart)break;content=node.content}for(let d=preferredDepth-1;d>=0;d--){let leftNode=leftNodes[d],def=(type=leftNode.type).spec.defining||type.spec.definingForContent;if(def&&!leftNode.sameMarkup($from.node(Math.abs(preferredTarget)-1)))preferredDepth=d;else if(def||!leftNode.type.isTextblock)break}var type;for(let j=slice.openStart;j>=0;j--){let openDepth=(j+preferredDepth+1)%(slice.openStart+1),insert=leftNodes[openDepth];if(insert)for(let i=0;i<targetDepths.length;i++){let targetDepth=targetDepths[(i+preferredTargetIndex)%targetDepths.length],expand=!0;targetDepth<0&&(expand=!1,targetDepth=-targetDepth);let parent=$from.node(targetDepth-1),index=$from.index(targetDepth-1);if(parent.canReplaceWith(index,index,insert.type,insert.marks))return tr.replace($from.before(targetDepth),expand?$to.after(targetDepth):to,new dist_Slice(closeFragment(slice.content,0,slice.openStart,openDepth),openDepth,slice.openEnd))}}let startSteps=tr.steps.length;for(let i=targetDepths.length-1;i>=0&&(tr.replace(from,to,slice),!(tr.steps.length>startSteps));i--){let depth=targetDepths[i];depth<0||(from=$from.before(depth),to=$to.after(depth))}}(this,from,to,slice),this}replaceRangeWith(from,to,node){return function replaceRangeWith(tr,from,to,node){if(!node.isInline&&from==to&&tr.doc.resolve(from).parent.content.size){let point=function insertPoint(doc,pos,nodeType){let $pos=doc.resolve(pos);if($pos.parent.canReplaceWith($pos.index(),$pos.index(),nodeType))return pos;if(0==$pos.parentOffset)for(let d=$pos.depth-1;d>=0;d--){let index=$pos.index(d);if($pos.node(d).canReplaceWith(index,index,nodeType))return $pos.before(d+1);if(index>0)return null}if($pos.parentOffset==$pos.parent.content.size)for(let d=$pos.depth-1;d>=0;d--){let index=$pos.indexAfter(d);if($pos.node(d).canReplaceWith(index,index,nodeType))return $pos.after(d+1);if(index<$pos.node(d).childCount)return null}return null}(tr.doc,from,node.type);null!=point&&(from=to=point)}tr.replaceRange(from,to,new dist_Slice(dist_Fragment.from(node),0,0))}(this,from,to,node),this}deleteRange(from,to){return function deleteRange(tr,from,to){let $from=tr.doc.resolve(from),$to=tr.doc.resolve(to),covered=coveredDepths($from,$to);for(let i=0;i<covered.length;i++){let depth=covered[i],last=i==covered.length-1;if(last&&0==depth||$from.node(depth).type.contentMatch.validEnd)return tr.delete($from.start(depth),$to.end(depth));if(depth>0&&(last||$from.node(depth-1).canReplace($from.index(depth-1),$to.indexAfter(depth-1))))return tr.delete($from.before(depth),$to.after(depth))}for(let d=1;d<=$from.depth&&d<=$to.depth;d++)if(from-$from.start(d)==$from.depth-d&&to>$from.end(d)&&$to.end(d)-to!=$to.depth-d)return tr.delete($from.before(d),to);tr.delete(from,to)}(this,from,to),this}lift(range,target){return function lift(tr,range,target){let{$from,$to,depth}=range,gapStart=$from.before(depth+1),gapEnd=$to.after(depth+1),start=gapStart,end=gapEnd,before=dist_Fragment.empty,openStart=0;for(let d=depth,splitting=!1;d>target;d--)splitting||$from.index(d)>0?(splitting=!0,before=dist_Fragment.from($from.node(d).copy(before)),openStart++):start--;let after=dist_Fragment.empty,openEnd=0;for(let d=depth,splitting=!1;d>target;d--)splitting||$to.after(d+1)<$to.end(d)?(splitting=!0,after=dist_Fragment.from($to.node(d).copy(after)),openEnd++):end++;tr.step(new ReplaceAroundStep(start,end,gapStart,gapEnd,new dist_Slice(before.append(after),openStart,openEnd),before.size-openStart,!0))}(this,range,target),this}join(pos,depth=1){return function join(tr,pos,depth){let step=new dist_ReplaceStep(pos-depth,pos+depth,dist_Slice.empty,!0);tr.step(step)}(this,pos,depth),this}wrap(range,wrappers){return function wrap(tr,range,wrappers){let content=dist_Fragment.empty;for(let i=wrappers.length-1;i>=0;i--){if(content.size){let match=wrappers[i].type.contentMatch.matchFragment(content);if(!match||!match.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}content=dist_Fragment.from(wrappers[i].type.create(wrappers[i].attrs,content))}let start=range.start,end=range.end;tr.step(new ReplaceAroundStep(start,end,start,end,new dist_Slice(content,0,0),wrappers.length,!0))}(this,range,wrappers),this}setBlockType(from,to=from,type,attrs=null){return function setBlockType(tr,from,to,type,attrs){if(!type.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let mapFrom=tr.steps.length;tr.doc.nodesBetween(from,to,((node,pos)=>{if(node.isTextblock&&!node.hasMarkup(type,attrs)&&function canChangeType(doc,pos,type){let $pos=doc.resolve(pos),index=$pos.index();return $pos.parent.canReplaceWith(index,index+1,type)}(tr.doc,tr.mapping.slice(mapFrom).map(pos),type)){tr.clearIncompatible(tr.mapping.slice(mapFrom).map(pos,1),type);let mapping=tr.mapping.slice(mapFrom),startM=mapping.map(pos,1),endM=mapping.map(pos+node.nodeSize,1);return tr.step(new ReplaceAroundStep(startM,endM,startM+1,endM-1,new dist_Slice(dist_Fragment.from(type.create(attrs,null,node.marks)),0,0),1,!0)),!1}}))}(this,from,to,type,attrs),this}setNodeMarkup(pos,type,attrs=null,marks){return function setNodeMarkup(tr,pos,type,attrs,marks){let node=tr.doc.nodeAt(pos);if(!node)throw new RangeError("No node at given position");type||(type=node.type);let newNode=type.create(attrs,null,marks||node.marks);if(node.isLeaf)return tr.replaceWith(pos,pos+node.nodeSize,newNode);if(!type.validContent(node.content))throw new RangeError("Invalid content for node type "+type.name);tr.step(new ReplaceAroundStep(pos,pos+node.nodeSize,pos+1,pos+node.nodeSize-1,new dist_Slice(dist_Fragment.from(newNode),0,0),1,!0))}(this,pos,type,attrs,marks),this}setNodeAttribute(pos,attr,value){return this.step(new AttrStep(pos,attr,value)),this}addNodeMark(pos,mark){return this.step(new AddNodeMarkStep(pos,mark)),this}removeNodeMark(pos,mark){if(!(mark instanceof Mark)){let node=this.doc.nodeAt(pos);if(!node)throw new RangeError("No node at position "+pos);if(!(mark=mark.isInSet(node.marks)))return this}return this.step(new RemoveNodeMarkStep(pos,mark)),this}split(pos,depth=1,typesAfter){return function split(tr,pos,depth=1,typesAfter){let $pos=tr.doc.resolve(pos),before=dist_Fragment.empty,after=dist_Fragment.empty;for(let d=$pos.depth,e=$pos.depth-depth,i=depth-1;d>e;d--,i--){before=dist_Fragment.from($pos.node(d).copy(before));let typeAfter=typesAfter&&typesAfter[i];after=dist_Fragment.from(typeAfter?typeAfter.type.create(typeAfter.attrs,after):$pos.node(d).copy(after))}tr.step(new dist_ReplaceStep(pos,pos,new dist_Slice(before.append(after),depth,depth),!0))}(this,pos,depth,typesAfter),this}addMark(from,to,mark){return function addMark(tr,from,to,mark){let removing,adding,removed=[],added=[];tr.doc.nodesBetween(from,to,((node,pos,parent)=>{if(!node.isInline)return;let marks=node.marks;if(!mark.isInSet(marks)&&parent.type.allowsMarkType(mark.type)){let start=Math.max(pos,from),end=Math.min(pos+node.nodeSize,to),newSet=mark.addToSet(marks);for(let i=0;i<marks.length;i++)marks[i].isInSet(newSet)||(removing&&removing.to==start&&removing.mark.eq(marks[i])?removing.to=end:removed.push(removing=new RemoveMarkStep(start,end,marks[i])));adding&&adding.to==start?adding.to=end:added.push(adding=new AddMarkStep(start,end,mark))}})),removed.forEach((s=>tr.step(s))),added.forEach((s=>tr.step(s)))}(this,from,to,mark),this}removeMark(from,to,mark){return function removeMark(tr,from,to,mark){let matched=[],step=0;tr.doc.nodesBetween(from,to,((node,pos)=>{if(!node.isInline)return;step++;let toRemove=null;if(mark instanceof MarkType){let found,set=node.marks;for(;found=mark.isInSet(set);)(toRemove||(toRemove=[])).push(found),set=found.removeFromSet(set)}else mark?mark.isInSet(node.marks)&&(toRemove=[mark]):toRemove=node.marks;if(toRemove&&toRemove.length){let end=Math.min(pos+node.nodeSize,to);for(let i=0;i<toRemove.length;i++){let found,style=toRemove[i];for(let j=0;j<matched.length;j++){let m=matched[j];m.step==step-1&&style.eq(matched[j].style)&&(found=m)}found?(found.to=end,found.step=step):matched.push({style,from:Math.max(pos,from),to:end,step})}}})),matched.forEach((m=>tr.step(new RemoveMarkStep(m.from,m.to,m.style))))}(this,from,to,mark),this}clearIncompatible(pos,parentType,match){return function clearIncompatible(tr,pos,parentType,match=parentType.contentMatch){let node=tr.doc.nodeAt(pos),replSteps=[],cur=pos+1;for(let i=0;i<node.childCount;i++){let child=node.child(i),end=cur+child.nodeSize,allowed=match.matchType(child.type);if(allowed){match=allowed;for(let j=0;j<child.marks.length;j++)parentType.allowsMarkType(child.marks[j].type)||tr.step(new RemoveMarkStep(cur,end,child.marks[j]));if(child.isText&&!parentType.spec.code){let m,slice,newline=/\r?\n|\r/g;for(;m=newline.exec(child.text);)slice||(slice=new dist_Slice(dist_Fragment.from(parentType.schema.text(" ",parentType.allowedMarks(child.marks))),0,0)),replSteps.push(new dist_ReplaceStep(cur+m.index,cur+m.index+m[0].length,slice))}}else replSteps.push(new dist_ReplaceStep(cur,end,dist_Slice.empty));cur=end}if(!match.validEnd){let fill=match.fillBefore(dist_Fragment.empty,!0);tr.replace(cur,cur,new dist_Slice(fill,0,0))}for(let i=replSteps.length-1;i>=0;i--)tr.step(replSteps[i])}(this,pos,parentType,match),this}}const classesById=Object.create(null);class Selection{constructor($anchor,$head,ranges){this.$anchor=$anchor,this.$head=$head,this.ranges=ranges||[new SelectionRange($anchor.min($head),$anchor.max($head))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let ranges=this.ranges;for(let i=0;i<ranges.length;i++)if(ranges[i].$from.pos!=ranges[i].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(tr,content=dist_Slice.empty){let lastNode=content.content.lastChild,lastParent=null;for(let i=0;i<content.openEnd;i++)lastParent=lastNode,lastNode=lastNode.lastChild;let mapFrom=tr.steps.length,ranges=this.ranges;for(let i=0;i<ranges.length;i++){let{$from,$to}=ranges[i],mapping=tr.mapping.slice(mapFrom);tr.replaceRange(mapping.map($from.pos),mapping.map($to.pos),i?dist_Slice.empty:content),0==i&&selectionToInsertionEnd(tr,mapFrom,(lastNode?lastNode.isInline:lastParent&&lastParent.isTextblock)?-1:1)}}replaceWith(tr,node){let mapFrom=tr.steps.length,ranges=this.ranges;for(let i=0;i<ranges.length;i++){let{$from,$to}=ranges[i],mapping=tr.mapping.slice(mapFrom),from=mapping.map($from.pos),to=mapping.map($to.pos);i?tr.deleteRange(from,to):(tr.replaceRangeWith(from,to,node),selectionToInsertionEnd(tr,mapFrom,node.isInline?-1:1))}}static findFrom($pos,dir,textOnly=!1){let inner=$pos.parent.inlineContent?new dist_TextSelection($pos):findSelectionIn($pos.node(0),$pos.parent,$pos.pos,$pos.index(),dir,textOnly);if(inner)return inner;for(let depth=$pos.depth-1;depth>=0;depth--){let found=dir<0?findSelectionIn($pos.node(0),$pos.node(depth),$pos.before(depth+1),$pos.index(depth),dir,textOnly):findSelectionIn($pos.node(0),$pos.node(depth),$pos.after(depth+1),$pos.index(depth)+1,dir,textOnly);if(found)return found}return null}static near($pos,bias=1){return this.findFrom($pos,bias)||this.findFrom($pos,-bias)||new AllSelection($pos.node(0))}static atStart(doc){return findSelectionIn(doc,doc,0,0,1)||new AllSelection(doc)}static atEnd(doc){return findSelectionIn(doc,doc,doc.content.size,doc.childCount,-1)||new AllSelection(doc)}static fromJSON(doc,json){if(!json||!json.type)throw new RangeError("Invalid input for Selection.fromJSON");let cls=classesById[json.type];if(!cls)throw new RangeError(`No selection type ${json.type} defined`);return cls.fromJSON(doc,json)}static jsonID(id,selectionClass){if(id in classesById)throw new RangeError("Duplicate use of selection JSON ID "+id);return classesById[id]=selectionClass,selectionClass.prototype.jsonID=id,selectionClass}getBookmark(){return dist_TextSelection.between(this.$anchor,this.$head).getBookmark()}}Selection.prototype.visible=!0;class SelectionRange{constructor($from,$to){this.$from=$from,this.$to=$to}}let warnedAboutTextSelection=!1;function checkTextSelection($pos){warnedAboutTextSelection||$pos.parent.inlineContent||(warnedAboutTextSelection=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+$pos.parent.type.name+")"))}class dist_TextSelection extends Selection{constructor($anchor,$head=$anchor){checkTextSelection($anchor),checkTextSelection($head),super($anchor,$head)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(doc,mapping){let $head=doc.resolve(mapping.map(this.head));if(!$head.parent.inlineContent)return Selection.near($head);let $anchor=doc.resolve(mapping.map(this.anchor));return new dist_TextSelection($anchor.parent.inlineContent?$anchor:$head,$head)}replace(tr,content=dist_Slice.empty){if(super.replace(tr,content),content==dist_Slice.empty){let marks=this.$from.marksAcross(this.$to);marks&&tr.ensureMarks(marks)}}eq(other){return other instanceof dist_TextSelection&&other.anchor==this.anchor&&other.head==this.head}getBookmark(){return new TextBookmark(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(doc,json){if("number"!=typeof json.anchor||"number"!=typeof json.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new dist_TextSelection(doc.resolve(json.anchor),doc.resolve(json.head))}static create(doc,anchor,head=anchor){let $anchor=doc.resolve(anchor);return new this($anchor,head==anchor?$anchor:doc.resolve(head))}static between($anchor,$head,bias){let dPos=$anchor.pos-$head.pos;if(bias&&!dPos||(bias=dPos>=0?1:-1),!$head.parent.inlineContent){let found=Selection.findFrom($head,bias,!0)||Selection.findFrom($head,-bias,!0);if(!found)return Selection.near($head,bias);$head=found.$head}return $anchor.parent.inlineContent||(0==dPos||($anchor=(Selection.findFrom($anchor,-bias,!0)||Selection.findFrom($anchor,bias,!0)).$anchor).pos<$head.pos!=dPos<0)&&($anchor=$head),new dist_TextSelection($anchor,$head)}}Selection.jsonID("text",dist_TextSelection);class TextBookmark{constructor(anchor,head){this.anchor=anchor,this.head=head}map(mapping){return new TextBookmark(mapping.map(this.anchor),mapping.map(this.head))}resolve(doc){return dist_TextSelection.between(doc.resolve(this.anchor),doc.resolve(this.head))}}class dist_NodeSelection extends Selection{constructor($pos){let node=$pos.nodeAfter,$end=$pos.node(0).resolve($pos.pos+node.nodeSize);super($pos,$end),this.node=node}map(doc,mapping){let{deleted,pos}=mapping.mapResult(this.anchor),$pos=doc.resolve(pos);return deleted?Selection.near($pos):new dist_NodeSelection($pos)}content(){return new dist_Slice(dist_Fragment.from(this.node),0,0)}eq(other){return other instanceof dist_NodeSelection&&other.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new NodeBookmark(this.anchor)}static fromJSON(doc,json){if("number"!=typeof json.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new dist_NodeSelection(doc.resolve(json.anchor))}static create(doc,from){return new dist_NodeSelection(doc.resolve(from))}static isSelectable(node){return!node.isText&&!1!==node.type.spec.selectable}}dist_NodeSelection.prototype.visible=!1,Selection.jsonID("node",dist_NodeSelection);class NodeBookmark{constructor(anchor){this.anchor=anchor}map(mapping){let{deleted,pos}=mapping.mapResult(this.anchor);return deleted?new TextBookmark(pos,pos):new NodeBookmark(pos)}resolve(doc){let $pos=doc.resolve(this.anchor),node=$pos.nodeAfter;return node&&dist_NodeSelection.isSelectable(node)?new dist_NodeSelection($pos):Selection.near($pos)}}class AllSelection extends Selection{constructor(doc){super(doc.resolve(0),doc.resolve(doc.content.size))}replace(tr,content=dist_Slice.empty){if(content==dist_Slice.empty){tr.delete(0,tr.doc.content.size);let sel=Selection.atStart(tr.doc);sel.eq(tr.selection)||tr.setSelection(sel)}else super.replace(tr,content)}toJSON(){return{type:"all"}}static fromJSON(doc){return new AllSelection(doc)}map(doc){return new AllSelection(doc)}eq(other){return other instanceof AllSelection}getBookmark(){return AllBookmark}}Selection.jsonID("all",AllSelection);const AllBookmark={map(){return this},resolve:doc=>new AllSelection(doc)};function findSelectionIn(doc,node,pos,index,dir,text=!1){if(node.inlineContent)return dist_TextSelection.create(doc,pos);for(let i=index-(dir>0?0:1);dir>0?i<node.childCount:i>=0;i+=dir){let child=node.child(i);if(child.isAtom){if(!text&&dist_NodeSelection.isSelectable(child))return dist_NodeSelection.create(doc,pos-(dir<0?child.nodeSize:0))}else{let inner=findSelectionIn(doc,child,pos+dir,dir<0?child.childCount:0,dir,text);if(inner)return inner}pos+=child.nodeSize*dir}return null}function selectionToInsertionEnd(tr,startLen,bias){let last=tr.steps.length-1;if(last<startLen)return;let end,step=tr.steps[last];(step instanceof dist_ReplaceStep||step instanceof ReplaceAroundStep)&&(tr.mapping.maps[last].forEach(((_from,_to,_newFrom,newTo)=>{null==end&&(end=newTo)})),tr.setSelection(Selection.near(tr.doc.resolve(end),bias)))}class Transaction extends Transform{constructor(state){super(state.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=state.selection,this.storedMarks=state.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(selection){if(selection.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=selection,this.curSelectionFor=this.steps.length,this.updated=-3&this.updated|1,this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(marks){return this.storedMarks=marks,this.updated|=2,this}ensureMarks(marks){return Mark.sameSet(this.storedMarks||this.selection.$from.marks(),marks)||this.setStoredMarks(marks),this}addStoredMark(mark){return this.ensureMarks(mark.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(mark){return this.ensureMarks(mark.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(step,doc){super.addStep(step,doc),this.updated=-3&this.updated,this.storedMarks=null}setTime(time){return this.time=time,this}replaceSelection(slice){return this.selection.replace(this,slice),this}replaceSelectionWith(node,inheritMarks=!0){let selection=this.selection;return inheritMarks&&(node=node.mark(this.storedMarks||(selection.empty?selection.$from.marks():selection.$from.marksAcross(selection.$to)||Mark.none))),selection.replaceWith(this,node),this}deleteSelection(){return this.selection.replace(this),this}insertText(text,from,to){let schema=this.doc.type.schema;if(null==from)return text?this.replaceSelectionWith(schema.text(text),!0):this.deleteSelection();{if(null==to&&(to=from),to=null==to?from:to,!text)return this.deleteRange(from,to);let marks=this.storedMarks;if(!marks){let $from=this.doc.resolve(from);marks=to==from?$from.marks():$from.marksAcross(this.doc.resolve(to))}return this.replaceRangeWith(from,to,schema.text(text,marks)),this.selection.empty||this.setSelection(Selection.near(this.selection.$to)),this}}setMeta(key,value){return this.meta["string"==typeof key?key:key.key]=value,this}getMeta(key){return this.meta["string"==typeof key?key:key.key]}get isGeneric(){for(let _ in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function bind(f,self){return self&&f?f.bind(self):f}class FieldDesc{constructor(name,desc,self){this.name=name,this.init=bind(desc.init,self),this.apply=bind(desc.apply,self)}}const baseFields=[new FieldDesc("doc",{init:config=>config.doc||config.schema.topNodeType.createAndFill(),apply:tr=>tr.doc}),new FieldDesc("selection",{init:(config,instance)=>config.selection||Selection.atStart(instance.doc),apply:tr=>tr.selection}),new FieldDesc("storedMarks",{init:config=>config.storedMarks||null,apply:(tr,_marks,_old,state)=>state.selection.$cursor?tr.storedMarks:null}),new FieldDesc("scrollToSelection",{init:()=>0,apply:(tr,prev)=>tr.scrolledIntoView?prev+1:prev})];class Configuration{constructor(schema,plugins){this.schema=schema,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=baseFields.slice(),plugins&&plugins.forEach((plugin=>{if(this.pluginsByKey[plugin.key])throw new RangeError("Adding different instances of a keyed plugin ("+plugin.key+")");this.plugins.push(plugin),this.pluginsByKey[plugin.key]=plugin,plugin.spec.state&&this.fields.push(new FieldDesc(plugin.key,plugin.spec.state,plugin))}))}}class EditorState{constructor(config){this.config=config}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(tr){return this.applyTransaction(tr).state}filterTransaction(tr,ignore=-1){for(let i=0;i<this.config.plugins.length;i++)if(i!=ignore){let plugin=this.config.plugins[i];if(plugin.spec.filterTransaction&&!plugin.spec.filterTransaction.call(plugin,tr,this))return!1}return!0}applyTransaction(rootTr){if(!this.filterTransaction(rootTr))return{state:this,transactions:[]};let trs=[rootTr],newState=this.applyInner(rootTr),seen=null;for(;;){let haveNew=!1;for(let i=0;i<this.config.plugins.length;i++){let plugin=this.config.plugins[i];if(plugin.spec.appendTransaction){let n=seen?seen[i].n:0,oldState=seen?seen[i].state:this,tr=n<trs.length&&plugin.spec.appendTransaction.call(plugin,n?trs.slice(n):trs,oldState,newState);if(tr&&newState.filterTransaction(tr,i)){if(tr.setMeta("appendedTransaction",rootTr),!seen){seen=[];for(let j=0;j<this.config.plugins.length;j++)seen.push(j<i?{state:newState,n:trs.length}:{state:this,n:0})}trs.push(tr),newState=newState.applyInner(tr),haveNew=!0}seen&&(seen[i]={state:newState,n:trs.length})}}if(!haveNew)return{state:newState,transactions:trs}}}applyInner(tr){if(!tr.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let newInstance=new EditorState(this.config),fields=this.config.fields;for(let i=0;i<fields.length;i++){let field=fields[i];newInstance[field.name]=field.apply(tr,this[field.name],this,newInstance)}return newInstance}get tr(){return new Transaction(this)}static create(config){let $config=new Configuration(config.doc?config.doc.type.schema:config.schema,config.plugins),instance=new EditorState($config);for(let i=0;i<$config.fields.length;i++)instance[$config.fields[i].name]=$config.fields[i].init(config,instance);return instance}reconfigure(config){let $config=new Configuration(this.schema,config.plugins),fields=$config.fields,instance=new EditorState($config);for(let i=0;i<fields.length;i++){let name=fields[i].name;instance[name]=this.hasOwnProperty(name)?this[name]:fields[i].init(config,instance)}return instance}toJSON(pluginFields){let result={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(result.storedMarks=this.storedMarks.map((m=>m.toJSON()))),pluginFields&&"object"==typeof pluginFields)for(let prop in pluginFields){if("doc"==prop||"selection"==prop)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let plugin=pluginFields[prop],state=plugin.spec.state;state&&state.toJSON&&(result[prop]=state.toJSON.call(plugin,this[plugin.key]))}return result}static fromJSON(config,json,pluginFields){if(!json)throw new RangeError("Invalid input for EditorState.fromJSON");if(!config.schema)throw new RangeError("Required config field 'schema' missing");let $config=new Configuration(config.schema,config.plugins),instance=new EditorState($config);return $config.fields.forEach((field=>{if("doc"==field.name)instance.doc=dist_Node.fromJSON(config.schema,json.doc);else if("selection"==field.name)instance.selection=Selection.fromJSON(instance.doc,json.selection);else if("storedMarks"==field.name)json.storedMarks&&(instance.storedMarks=json.storedMarks.map(config.schema.markFromJSON));else{if(pluginFields)for(let prop in pluginFields){let plugin=pluginFields[prop],state=plugin.spec.state;if(plugin.key==field.name&&state&&state.fromJSON&&Object.prototype.hasOwnProperty.call(json,prop))return void(instance[field.name]=state.fromJSON.call(plugin,config,json[prop],instance))}instance[field.name]=field.init(config,instance)}})),instance}}function bindProps(obj,self,target){for(let prop in obj){let val=obj[prop];val instanceof Function?val=val.bind(self):"handleDOMEvents"==prop&&(val=bindProps(val,self,{})),target[prop]=val}return target}class dist_Plugin{constructor(spec){this.spec=spec,this.props={},spec.props&&bindProps(spec.props,this,this.props),this.key=spec.key?spec.key.key:createKey("plugin")}getState(state){return state[this.key]}}const keys=Object.create(null);function createKey(name){return name in keys?name+"$"+ ++keys[name]:(keys[name]=0,name+"$")}class PluginKey{constructor(name="key"){this.key=createKey(name)}get(state){return state.config.pluginsByKey[this.key]}getState(state){return state[this.key]}}var rowTypeAttr="k-parent-node",colgroupAttr="k-colgroup-data",resizableAttr="k-resizable-node";var tslib_es6_assign=function(){return tslib_es6_assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},tslib_es6_assign.apply(this,arguments)};function __rest(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t}Object.create;function __spreadArray(to,from,pack){if(pack||2===arguments.length)for(var ar,i=0,l=from.length;i<l;i++)!ar&&i in from||(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))}Object.create;"function"==typeof SuppressedError&&SuppressedError;var changeStylesString=function(styleText,newStyle){var styleToChange=newStyle.style,regExp=newStyle.value,newValue=newStyle.newValue;if(!styleText)return{changed:!1,style:null};var styles=styleText.split(/\s*;\s*/).filter((function(s){return Boolean(s)})),filtered=styles.filter((function(s){var nameValue=s.split(/\s*:\s*/);return!(nameValue[0].toLowerCase()===styleToChange&&regExp.test(nameValue[1]))}));return newValue&&filtered.push(styleToChange+": "+newValue),{style:filtered.join("; ")+(filtered.length?";":""),changed:Boolean(newValue)||filtered.length!==styles.length}},canInsert=function(state,nodeType){for(var $from=state.selection.$from,d=$from.depth;d>=0;d--){var index=$from.index(d);if($from.node(d).canReplaceWith(index,index,nodeType))return!0}return!1},getTypeName=function(n){return n instanceof dist_Node?n.type.name:n.name},findNthParentNodeOfType=function(nodeType,depth){return void 0===depth&&(depth=1),function(selection){return function(predicate,depth){return void 0===depth&&(depth=1),function(selection){for(var $from=selection.$from,i=$from.depth;i>0;i--){var node=$from.node(i);if(predicate(node)&&0==(depth-=1))return{depth:i,node}}}}((function(node){return getTypeName(node)===getTypeName(nodeType)}),depth)(selection)}},filterEmptyAttrs=function(attrs){var result={};for(var attr in attrs)attr&&(attrs[attr]||0===attrs[attr])&&(result[attr]=attrs[attr]);return result},utils_insertNode=function(node,scrollIntoView){return function(state,dispatch){var selection=state.selection,tr=state.tr;selection instanceof dist_NodeSelection&&selection.node.type.name===node.type.name&&node.isLeaf&&!node.isText&&1===node.nodeSize?(tr.setNodeMarkup(selection.from,null,tslib_es6_assign(tslib_es6_assign({},filterEmptyAttrs(selection.node.attrs)),filterEmptyAttrs(node.attrs))),tr.setSelection(dist_NodeSelection.create(tr.doc,selection.from))):tr.replaceSelectionWith(node),scrollIntoView&&tr.scrollIntoView(),dispatch(tr)}},selectedLineTextOnly=function(state){var result="",hasLeafs=!1,selection=state.selection,doc=state.doc,$from=selection.$from,$to=selection.$to,from=selection.from,to=selection.to;return $from.sameParent($to)&&(doc.nodesBetween(from,to,(function(node){hasLeafs=hasLeafs||node.isLeaf&&!node.isText})),hasLeafs||(result=function(state){var sel=state.selection;if(sel instanceof dist_TextSelection||sel instanceof AllSelection){var fragment=sel.content().content;return fragment.textBetween(0,fragment.size)}return""}(state))),result},indentHtml=function(content){return content.replace(/<\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/gi,"</$1>\n").replace(/<(ul|ol)([^>]*)><li/gi,"<$1$2>\n<li").replace(/<br \/>/gi,"<br />\n").replace(/\n$/,"")},parseStyle=function(styleText){return(styleText||"").split(/\s*;\s*/).filter(Boolean).map((function(s){var _a,nameValue=s.split(/\s*:\s*/);return(_a={})[nameValue[0]]=nameValue[1],_a})).reduce((function(acc,val){return tslib_es6_assign(tslib_es6_assign({},acc),val)}),{})},setAttribute=function(node,attrName,value){var current=node.getAttribute(attrName);void 0!==value&&value!==current?"style"===attrName?(node.removeAttribute(attrName),function(element,styleString){var styles=parseStyle(styleString);for(var style in styles)style&&void 0!==element.style[style]&&(element.style[style]=styles[style])}(node,value)):node.setAttribute(attrName,value):void 0===value&&node.removeAttribute(attrName)},DOMSerializer_DOMSerializer=function(){function DOMSerializer(nodes,marks){this.nodes=nodes,this.marks=marks}return DOMSerializer.renderSpec=function(docum,structure,xmlNS){if(void 0===xmlNS&&(xmlNS=null),"string"==typeof structure)return{dom:docum.createTextNode(structure)};if(null!=structure.nodeType)return{dom:structure};if(structure.dom&&null!=structure.dom.nodeType)return structure;var contentDOM,tagName=structure[0],space=tagName.indexOf(" ");space>0&&(xmlNS=tagName.slice(0,space),tagName=tagName.slice(space+1));var dom=xmlNS?docum.createElementNS(xmlNS,tagName):docum.createElement(tagName),attrs=structure[1],start=1;if(attrs&&"object"==typeof attrs&&null==attrs.nodeType&&!Array.isArray(attrs))for(var name_1 in start=2,attrs)null!=attrs[name_1]&&((space=name_1.indexOf(" "))>0?dom.setAttributeNS(name_1.slice(0,space),name_1.slice(space+1),attrs[name_1]):setAttribute(dom,name_1,attrs[name_1]));for(var i=start;i<structure.length;i++){var child=structure[i];if(0===child){if(i<structure.length-1||i>start)throw new RangeError("Content hole must be the only child of its parent node");return{dom,contentDOM:dom}}var _a=DOMSerializer.renderSpec(docum,child,xmlNS),inner=_a.dom,innerContent=_a.contentDOM;if(dom.appendChild(inner),innerContent){if(contentDOM)throw new RangeError("Multiple content holes");contentDOM=innerContent}}return{dom,contentDOM}},DOMSerializer.fromSchema=function(schema){return schema.cached.domSerializer||(schema.cached.domSerializer=new DOMSerializer(this.nodesFromSchema(schema),this.marksFromSchema(schema)))},DOMSerializer.nodesFromSchema=function(schema){var result=DOMSerializer_gatherToDOM(schema.nodes);return result.text||(result.text=function(node){return node.text}),result},DOMSerializer.marksFromSchema=function(schema){return DOMSerializer_gatherToDOM(schema.marks)},DOMSerializer.prototype.serializeFragment=function(fragment,options,target){var _this=this;void 0===options&&(options={}),target||(target=DOMSerializer_doc(options).createDocumentFragment());var top=target,active=[];return fragment.forEach((function(node){if(active.length||node.marks.length){for(var keep=0,rendered=0;keep<active.length&&rendered<node.marks.length;){var next=node.marks[rendered];if(_this.marks[next.type.name]){if(!next.eq(active[keep][0])||!1===next.type.spec.spanning)break;keep++,rendered++}else rendered++}for(;keep<active.length;)top=active.pop()[1];for(;rendered<node.marks.length;){var add=node.marks[rendered++],markDOM=_this.serializeMark(add,node.isInline,options);markDOM&&(active.push([add,top]),top.appendChild(markDOM.dom),top=markDOM.contentDOM||markDOM.dom)}}top.appendChild(_this.serializeNodeInner(node,options))})),target},DOMSerializer.prototype.serializeNode=function(node,options){void 0===options&&(options={});for(var dom=this.serializeNodeInner(node,options),i=node.marks.length-1;i>=0;i--){var wrap=this.serializeMark(node.marks[i],node.isInline,options);wrap&&((wrap.contentDOM||wrap.dom).appendChild(dom),dom=wrap.dom)}return dom},DOMSerializer.prototype.serializeMark=function(mark,inline,options){void 0===options&&(options={});var toDOM=this.marks[mark.type.name];return toDOM&&DOMSerializer.renderSpec(DOMSerializer_doc(options),toDOM(mark,inline))},DOMSerializer.prototype.serializeNodeInner=function(node,options){var _a=DOMSerializer.renderSpec(DOMSerializer_doc(options),this.nodes[node.type.name](node)),dom=_a.dom,contentDOM=_a.contentDOM;if(contentDOM){if(node.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(node.content,options,contentDOM)}return dom},DOMSerializer}();function DOMSerializer_gatherToDOM(obj){var result={};for(var name_2 in obj)if(obj[name_2]){var toDOM=obj[name_2].spec.toDOM;toDOM&&(result[name_2]=toDOM)}return result}function DOMSerializer_doc(options){return options.document||window.document}var blockWrappers=["div","ol","ul","li","table","tbody","thead","tfoot","caption","td","th","p","tr","col","colgroup","article","main","nav","header","footer","aside","section"],removeRowType=function(table,nodeName){var wrapper=(table.ownerDocument||document).createElement(nodeName);Array.from(table.rows).filter((function(r){return r.getAttribute(rowTypeAttr)===nodeName})).forEach((function(row){row.removeAttribute(rowTypeAttr),wrapper.appendChild(row)})),wrapper.children.length&&table.appendChild(wrapper)},setRowType=function(children,nodeName){var tag=nodeName.toUpperCase();children.filter((function(c){return c.nodeName===tag})).forEach((function(rowsWrapper){Array.from(rowsWrapper.children).forEach((function(row){row.setAttribute(rowTypeAttr,nodeName),rowsWrapper.parentNode&&rowsWrapper.parentNode.insertBefore(row,rowsWrapper)})),rowsWrapper.remove()}))},trimWhitespace=function(html,trimAroundTags){void 0===trimAroundTags&&(trimAroundTags=blockWrappers);var tags=trimAroundTags.join("|");return html.replace(new RegExp("\\s*(<(?:"+tags+")(?:\\s[^>]*?)?>)","g"),"$1").replace(new RegExp("(<\\/(?:"+tags+")(?:\\s[^>]*?)?>)\\s*","g"),"$1")},reTag=/<[^>]+>/gm,reStyle=/\sstyle=/gm,replacer=function(match){return match.replace(reStyle," data-style=")},htmlToFragment=function(html){var container,template=document.createElement("template");return template.innerHTML=function(html){return html.replace(reTag,replacer)}(html),container=template.content,Array.from(container.querySelectorAll("[data-style]")).forEach((function(element){var styleString=element.getAttribute("data-style");element.removeAttribute("data-style"),function(styleString,element){styleString.split(";").filter((function(s){return""!==s})).forEach((function(s){var parts=s.split(":");element.style[parts[0].trim()]=parts[1].trim()}))}(styleString,element)})),template.content},fragmentToHtml=function(fragment){return Array.from(fragment.childNodes).reduce((function(acc,cur){return acc+(cur.outerHTML||cur.textContent||"")}),"")},pmDocToFragment=function(doc){var fragment=DOMSerializer_DOMSerializer.fromSchema(doc.type.schema).serializeFragment(doc.content);return function(fragment){Array.from(fragment.querySelectorAll("table")).forEach((function(table){removeRowType(table,"thead"),removeRowType(table,"tbody"),removeRowType(table,"tfoot");var emptyElement=Array.from(table.children).find((function(el){return 0===el.children.length}));emptyElement&&emptyElement.remove();var wrapper=table.parentNode instanceof HTMLDivElement?table.parentNode:null;if(wrapper&&wrapper.matches("div[table]")){table.style.marginLeft=wrapper.style.marginLeft,table.style.marginRight=wrapper.style.marginRight;var captionDiv_1=Array.from(wrapper.children).find((function(el){return el.matches("div[caption]")}));if(captionDiv_1&&"<img>"!==captionDiv_1.innerHTML){var caption_1=table.createCaption();for(captionDiv_1.id&&(caption_1.id=captionDiv_1.id),captionDiv_1.className&&(caption_1.className=captionDiv_1.className),Array.from(captionDiv_1.style).forEach((function(styleName){caption_1.style[styleName]=captionDiv_1.style[styleName]}));captionDiv_1.firstChild;)caption_1.appendChild(captionDiv_1.firstChild)}wrapper.style.width&&!table.style.width&&(table.style.width=wrapper.style.width),wrapper.parentNode.insertBefore(table,wrapper),wrapper.parentNode.removeChild(wrapper)}}))}(fragment),fragment},domToPmDoc=function(dom,schema,parseOptions){return DOMParser.fromSchema(schema).parse(dom,parseOptions)},source_parseContent=function(content,schema,parseOptions){var fragment,dom=htmlToFragment(content);return fragment=dom,Array.from(fragment.querySelectorAll("table")).forEach((function(table){var children=Array.from(table.children);children.some((function(e){return"THEAD"===e.nodeName||"TFOOT"===e.nodeName}))&&(setRowType(children,"thead"),setRowType(children,"tbody"),setRowType(children,"tfoot"));var colgroup=children.find((function(c){return"COLGROUP"===c.nodeName}));if(colgroup&&(table.setAttribute(colgroupAttr,colgroup.outerHTML),colgroup.remove()),table.caption||table.style.marginLeft||table.style.marginRight){var wrapper=document.createElement("div");if(wrapper.setAttribute("table",""),wrapper.style.display="table",wrapper.style.marginLeft=table.style.marginLeft,wrapper.style.marginRight=table.style.marginRight,table.caption){var captionDiv_2=document.createElement("div");for(captionDiv_2.setAttribute("caption",""),table.caption.id&&(captionDiv_2.id=table.caption.id),table.caption.className&&(captionDiv_2.className=table.caption.className),Array.from(table.caption.style).forEach((function(styleName){captionDiv_2.style[styleName]=table.caption.style[styleName]}));table.caption.firstChild;)captionDiv_2.appendChild(table.caption.firstChild);table.removeChild(table.caption),wrapper.appendChild(captionDiv_2)}table.parentNode.insertBefore(wrapper,table),wrapper.appendChild(table),/%/.test(table.style.width)&&(wrapper.style.width=table.style.width,table.style.width="")}})),domToPmDoc(dom,schema,parseOptions)},getHtml=function(state){var fragment=pmDocToFragment(state.doc);return fragmentToHtml(fragment)},setHtml=function(content,command,parseOptions){return void 0===command&&(command="setHTML"),void 0===parseOptions&&(parseOptions={preserveWhitespace:"full"}),function(state,dispatch){return dispatch(state.tr.setSelection(new AllSelection(state.doc)).replaceSelectionWith(source_parseContent(content,state.schema,parseOptions)).setMeta("commandName",command))}},markApplies=function(doc,ranges,type){for(var loop=function(i){var ref=ranges[i],$from=ref.$from,$to=ref.$to,can=0===$from.depth&&doc.type.allowsMarkType(type);if(doc.nodesBetween($from.pos,$to.pos,(function(node){if(can)return!1;can=node.inlineContent&&node.type.allowsMarkType(type)})),can)return{v:!0}},i=0;i<ranges.length;i++){var returned=loop(i);if(returned)return returned.v}return!1},toggleMark=function(markType,attrs,tr){return function(state,dispatch){var _a=state.selection,empty=_a.empty,$cursor=_a.$cursor,ranges=_a.ranges;if(empty&&!$cursor||!markApplies(state.doc,ranges,markType))return!1;if(dispatch)if($cursor)markType.isInSet(state.storedMarks||$cursor.marks())?dispatch(tr.removeStoredMark(markType)):dispatch(tr.addStoredMark(markType.create(attrs)));else{for(var has=!1,i=0;!has&&i<ranges.length;i++){var _b=ranges[i],$from=_b.$from,$to=_b.$to;has=state.doc.rangeHasMark($from.pos,$to.pos,markType)}for(i=0;i<ranges.length;i++){var _c=ranges[i];$from=_c.$from,$to=_c.$to;has?tr.removeMark($from.pos,$to.pos,markType):tr.addMark($from.pos,$to.pos,markType.create(attrs))}dispatch(tr.scrollIntoView())}return!0}},mark_removeMark=function(tr,from,to,mark){void 0===mark&&(mark=null);var matched=[],step=0;return tr.doc.nodesBetween(from,to,(function(node,pos){if(node.isInline){step++;var toRemove=null;if(mark instanceof MarkType){var found=mark.isInSet(node.marks);found&&(toRemove=[found])}else mark?mark.isInSet(node.marks)&&(toRemove=[mark]):toRemove=node.marks;if(toRemove&&toRemove.length)for(var end=Math.min(pos+node.nodeSize,to),i=0;i<toRemove.length;i++){for(var style=toRemove[i],found$1=void 0,j=0;j<matched.length;j++){var m=matched[j];m.step===step-1&&style.eq(m.style)&&(found$1=m)}found$1?(found$1.to=end,found$1.step=step):matched.push({style,from:Math.max(pos,from),to:end,step})}}})),matched.forEach((function(m){return tr.step(new RemoveMarkStep(m.from,m.to,m.style))})),tr},cleanMarks=function(tr,_a){var except=_a.except,doc=tr.doc,selection=tr.selection,schema=doc.type.schema,empty=selection.empty,ranges=selection.ranges,excludedMarkTypes=(except||[]).map((function(mt){return mt.name}));if(!empty){var marks_1=Object.keys(schema.marks).map((function(m){return schema.marks[m]})).filter((function(mt){return-1===excludedMarkTypes.indexOf(mt.name)}));ranges.forEach((function(_a){var $from=_a.$from,$to=_a.$to;marks_1.forEach((function(mark){return tr.removeMark($from.pos,$to.pos,mark)}))}))}},hasMark=function(state,options){var currMarks,marks=state.schema.marks,altMarks=(options.altMarks||[]).filter((function(m){return marks[m]})),altStyle=options.altStyle,_a=state.selection,from=_a.from,$from=_a.$from,to=_a.to,empty=_a.empty,type=marks[options.mark],doc=state.doc,result=!1;return empty?(currMarks=state.storedMarks||$from.marks(),result=type&&type.isInSet(currMarks)||altMarks.some((function(m){return marks[m].isInSet(currMarks)}))):result=type&&doc.rangeHasMark(from,to,type)||altMarks.some((function(m){return doc.rangeHasMark(from,to,marks[m])})),!result&&altStyle&&marks.style?selectionMarks(state,marks.style).some((function(mark){return null!==styleValue(mark,altStyle)})):Boolean(result)},styleValue=function(mark,style){for(var styles=(mark&&mark.attrs.style||"").split(/\s*;\s*/).filter((function(s){return Boolean(s)})),i=0;i<styles.length;i++){var nameValue=styles[i].split(/\s*:\s*/);if(nameValue[0].toLowerCase()===style.name&&style.value.test(nameValue[1]))return nameValue[1]}return null},selectionMarks=function(state,markType){var _a=state.selection,from=_a.from,$from=_a.$from,to=_a.to,empty=_a.empty,marks=[];return empty?marks.push(markType.isInSet(state.storedMarks||$from.marks())):state.doc.nodesBetween(from,to,(function(node){node.isInline&&marks.push(markType.isInSet(node.marks))})),marks},getMark=function(state,markType){var marks=selectionMarks(state,markType),filtered=marks.filter((function(m){return Boolean(m)}));return marks.length===filtered.length?marks[0]:void 0},changeStyleFromMark=function(marks,toChange){var styleMark=marks.find((function(m){return"style"===m.type.name})),elementStyle=styleMark&&styleMark.attrs.style;return changeStylesString(elementStyle,toChange)},changeStyleMark=function(tr,from,to,attrs,markType){var mark=markType.create({style:attrs.style}),removed=[],added=[],removing=null,adding=null;return tr.doc.nodesBetween(from,to,(function(node,pos,parent){if(node.isInline){var marks=node.marks;if(!mark.isInSet(marks)&&parent.type.allowsMarkType(mark.type)){var start=Math.max(pos,from),end=Math.min(pos+node.nodeSize,to),newStyle=changeStyleFromMark(marks,attrs);if(newStyle.changed||attrs.newValue){for(var style=newStyle.changed?{style:newStyle.style||null}:{style:[attrs.style]+": "+attrs.newValue+";"},currentMark=markType.isInSet(marks)?marks.find((function(m){return"style"===m.type.name})):null,newMarkAttrs_1=currentMark?tslib_es6_assign(tslib_es6_assign({},currentMark.attrs),style):style,newStyleMark=markType.create(newMarkAttrs_1),newSet=newStyleMark.addToSet(marks),i=0;i<marks.length;i++)marks[i].isInSet(newSet)||(removing&&removing.to===start&&removing.mark.eq(marks[i])?removing.to=end:(removing=new RemoveMarkStep(start,end,marks[i]),removed.push(removing)));var previousAdded=adding&&adding.to===start,sameAdding=previousAdded&&newStyleMark.attrs.style===adding.mark.attrs.style;previousAdded&&sameAdding?adding.to=end:Object.keys(newMarkAttrs_1).some((function(attrName){return null!==newMarkAttrs_1[attrName]}))&&(adding=new AddMarkStep(start,end,newStyleMark),added.push(adding))}}}})),removed.forEach((function(s){return tr.step(s)})),added.forEach((function(s){return tr.step(s)})),removed.length+added.length>0},getInlineStyles=function(state,style){var styleMark=state.schema.marks.style;return(styleMark?selectionMarks(state,styleMark):[]).map((function(mark){return styleValue(mark,style)})).filter((function(m){return null!==m}))},changeStyle=function(markType,attrs){return function(state,dispatch,tr){var _a=state.selection,empty=_a.empty,ranges=_a.ranges,$cursor=state.selection instanceof dist_TextSelection&&state.selection.$cursor;if(empty&&!$cursor||!markApplies(state.doc,ranges,markType))return!1;var object1,object2,keys1,keys2,result=!1;if(dispatch){var transaction=tr||state.tr;if($cursor){var currentMarks=state.storedMarks||$cursor.marks();if(markType.isInSet(currentMarks)){var newStyle=changeStyleFromMark(currentMarks,attrs),styleMark=currentMarks.find((function(m){return"style"===m.type.name})),newAttrs_1=tslib_es6_assign(tslib_es6_assign({},styleMark?styleMark.attrs:{}),{style:newStyle.style||null});if(object1=styleMark.attrs,object2=newAttrs_1,keys1=Object.keys(object1),keys2=Object.keys(object2),keys1.length===keys2.length&&keys1.every((function(k){return object1[k]===object2[k]})))return!1;dispatch(transaction.removeStoredMark(markType)),Object.keys(newAttrs_1).some((function(attrName){return null!==newAttrs_1[attrName]}))&&dispatch(transaction.addStoredMark(markType.create(newAttrs_1))),result=!0}}else{for(var i=0;i<ranges.length;i++){var _b=ranges[i],$from=_b.$from,$to=_b.$to;result=changeStyleMark(transaction,$from.pos,$to.pos,attrs,markType)||result}result&&(transaction.scrollIntoView(),dispatch(transaction))}}return result}},inline_style_toggleInlineFormat=function(options,tr,markAttrs){return function(state,dispatch){var marks=state.schema.marks,altStyle=options.altStyle,_a=options.altMarks,altMarks=void 0===_a?[]:_a,mark=options.mark,transaction=tr||state.tr,styleRemoved=!1,dispatched=!1,markDispatched=function(){return dispatched=!0};altStyle&&marks.style&&(styleRemoved=changeStyle(marks.style,{style:altStyle.name,value:altStyle.value})(state,markDispatched,transaction));var toRemove=__spreadArray([mark],altMarks).filter((function(m){return marks[m]})).map((function(m){return hasMark(state,{mark:m})&&marks[m]})).filter((function(m){return m}));return toRemove.length?function(marks,state,dispatch,tr){var _a=state.selection,$cursor=_a.$cursor,ranges=_a.ranges;if(tr=tr||state.tr,$cursor)marks.forEach((function(m){m.isInSet(state.storedMarks||$cursor.marks())&&dispatch(tr.removeStoredMark(m))}));else{for(var _loop_1=function(i){var _b=ranges[i],$from=_b.$from,$to=_b.$to;marks.forEach((function(m){mark_removeMark(tr,$from.pos,$to.pos,m)}))},i=0;i<ranges.length;i++)_loop_1(i);dispatch(tr.scrollIntoView())}}(toRemove,state,markDispatched,transaction):styleRemoved||toggleMark(marks[mark],markAttrs,transaction)(state,markDispatched),dispatched&&dispatch(transaction),dispatched}},applyInlineStyle=function(options,command){return function(state,dispatch){var markType=state.schema.marks.style,attrs={style:options.style,value:/^.+$/,newValue:options.value},tr=state.tr;command&&tr.setMeta("commandName",command),tr.setMeta("args",options);var _a=state.selection,empty=_a.empty,$cursor=_a.$cursor,ranges=_a.ranges;if(empty&&!$cursor||!markType||!markApplies(state.doc,ranges,markType))return!1;if($cursor){var marksFromSelection=state.storedMarks||$cursor.marks(),currentMark=markType.isInSet(marksFromSelection)?marksFromSelection.find((function(m){return"style"===m.type.name})):null,newStyles={style:null};if(currentMark&&currentMark.attrs.style){var resultStyles=changeStylesString(currentMark.attrs.style,attrs);resultStyles.changed&&resultStyles.style&&(newStyles.style=resultStyles.style)}else attrs.newValue&&(newStyles.style=[attrs.style]+": "+attrs.newValue+";");var newMarkAttrs_2=currentMark?tslib_es6_assign(tslib_es6_assign({},currentMark.attrs),newStyles):newStyles;return Object.keys(newMarkAttrs_2).some((function(attrName){return null!==newMarkAttrs_2[attrName]}))?dispatch(tr.addStoredMark(markType.create(newMarkAttrs_2))):dispatch(tr.removeStoredMark(markType)),!0}return changeStyle(markType,attrs)(state,dispatch,tr)}},removeLink=function(options,tr){return function(state,dispatch){var $cursor=state.selection.$cursor;if($cursor){var parentNode=$cursor.parent,cursorNodeIndex=$cursor.index(),toolMark_1=state.schema.marks[options.mark],mark=parentNode.child(cursorNodeIndex).marks.find((function(m){return m.type===toolMark_1})),childCount=parentNode.childCount,linkStart=$cursor.pos-$cursor.textOffset,linkSize=parentNode.child(cursorNodeIndex).nodeSize,index=void 0,nodeSize=void 0;for(index=cursorNodeIndex-1;index>=0&&mark.isInSet(parentNode.child(index).marks);)linkSize+=nodeSize=parentNode.child(index).nodeSize,linkStart-=nodeSize,index-=1;for(index=cursorNodeIndex+1;index<childCount&&mark.isInSet(parentNode.child(index).marks);)linkSize+=parentNode.child(index).nodeSize,index+=1;dispatch(mark_removeMark(tr||state.tr,linkStart,linkStart+linkSize,mark))}else inline_style_toggleInlineFormat(options,tr)(state,dispatch)}},applyLink=function(_a,commandName){var mark=_a.mark,attrs=_a.attrs;return void 0===commandName&&(commandName="link"),function(state,dispatch){var marks=state.schema.marks,tr=state.tr;commandName&&(tr.setMeta("commandName",commandName),tr.setMeta("args",attrs));var dispatched=!1,markDispatched=function(){return dispatched=!0};if(function(state,markType){var marks=selectionMarks(state,markType);return 1===marks.length&&marks[0]?marks[0]:null}(state,marks[mark]))!function(options,tr){return function(state,dispatch){var _a=state.selection,$cursor=_a.$cursor,from=_a.from,to=_a.to,markType=state.schema.marks[options.mark];if($cursor){var parentNode=$cursor.parent,cursorNodeIndex=$cursor.index(),mark=parentNode.child(cursorNodeIndex).marks.find((function(m){return m.type===markType})),childCount=parentNode.childCount,linkStart=$cursor.pos-$cursor.textOffset,linkSize=parentNode.child(cursorNodeIndex).nodeSize,index=void 0,nodeSize=void 0;for(index=cursorNodeIndex-1;index>=0&&mark.isInSet(parentNode.child(index).marks);)linkSize+=nodeSize=parentNode.child(index).nodeSize,linkStart-=nodeSize,index-=1;for(index=cursorNodeIndex+1;index<childCount&&mark.isInSet(parentNode.child(index).marks);)linkSize+=parentNode.child(index).nodeSize,index+=1;tr.removeMark(linkStart,linkStart+linkSize,markType),tr.addMark(linkStart,linkStart+linkSize,markType.create(options.attrs)),dispatch(tr)}else tr.doc.nodesBetween(from,to,(function(node,pos){node.isInline&&markType.isInSet(node.marks)&&(tr.removeMark(pos,pos+node.nodeSize,markType),tr.addMark(pos,pos+node.nodeSize,markType.create(options.attrs)),dispatch(tr))}))}}({mark,attrs},tr)(state,markDispatched);else{var nextState=state;hasMark(state,{mark})&&(removeLink({mark,attrs},tr)(state,markDispatched),nextState=EditorState.create({doc:tr.doc,selection:tr.selection})),dispatched?toggleMark(marks[mark],attrs,tr)(nextState,markDispatched):inline_style_toggleInlineFormat({mark},tr,attrs)(nextState,markDispatched)}return dispatched&&dispatch(tr),dispatched}},changeTextBlock=function(tr,node,nodeType,attrs){if(!nodeType.isTextblock)return!1;tr.selection.ranges.forEach((function(range){var mapFrom=tr.steps.length,from=range.$from.pos,to=range.$to.pos;tr.doc.nodesBetween(from,to,(function(currNode,pos){if(currNode.eq(node)&&currNode.isTextblock&&!currNode.hasMarkup(nodeType,attrs)&&function(stateDoc,pos,type){var $pos=stateDoc.resolve(pos),index=$pos.index();return $pos.parent.canReplaceWith(index,index+1,type)}(tr.doc,tr.mapping.slice(mapFrom).map(pos),nodeType)){tr.clearIncompatible(tr.mapping.slice(mapFrom).map(pos,1),nodeType);var mapping=tr.mapping.slice(mapFrom),startM=mapping.map(pos,1),endM=mapping.map(pos+currNode.nodeSize,1),slice=new dist_Slice(dist_Fragment.from(nodeType.create(attrs,null,currNode.marks)),0,0);return tr.step(new ReplaceAroundStep(startM,endM,startM+1,endM-1,slice,1,!0)),!1}}))}))},blockNodes=function(state,options){void 0===options&&(options={blocksInSelection:!1});var doc=state.doc,selection=state.selection,$from=selection.$from,ranges=selection.ranges,blocksInSelection=options.blocksInSelection,result=[],selNode=selection instanceof dist_NodeSelection?selection.node:void 0;return selNode?selNode.isBlock?(result.push(selNode),selNode.nodesBetween(0,selNode.content.size,(function(node){node.isBlock&&result.push(node)}))):!blocksInSelection&&$from.parent&&$from.parent.isBlock&&result.push($from.parent):ranges.forEach((function(range){var from=range.$from.pos,to=range.$to.pos;doc.nodesBetween(from,to,(function(node,pos,_parent,_index){node.isBlock&&(!blocksInSelection||pos>=from&&pos+node.content.size+2<=to)&&result.push(node)}))})),result},formatBlockElements=function(value,commandName){return function(state,dispatch){var blocks=blockNodes(state),nodes=state.schema.nodes,tr=state.tr;tr.setMeta("commandName",commandName),tr.setMeta("args",{value}),blocks.forEach((function(node){if(node.type.isTextblock)if("p"===value){var _a=node.attrs,level=_a.level,attrs=__rest(_a,["level"]);changeTextBlock(tr,node,nodes.paragraph,attrs)}else if(/^h[1-6]$/i.test(value)){level=parseInt(value.substr(1),10);changeTextBlock(tr,node,nodes.heading,tslib_es6_assign(tslib_es6_assign({},node.attrs),{level}))}else if("blockquote"===value){var _b=node.attrs;level=_b.level,attrs=__rest(_b,["level"]);changeTextBlock(tr,node,nodes.blockquote,attrs)}}));var result=tr.docChanged;return result&&dispatch(tr.scrollIntoView()),result}},getBlockFormats=function(state){var blocks=blockNodes(state),nodes=state.schema.nodes,result=[];return blocks.forEach((function(node){node.type===nodes.paragraph?result.push("p"):node.type===nodes.heading?result.push("h"+node.attrs.level):node.type===nodes.blockquote&&nodes.blockquote.isTextblock&&result.push("blockquote")})),result},addStyles=function(node,stylesToApply){var changedStyleResult,toChange,currentStyles=node.attrs.style;currentStyles&&stylesToApply.forEach((function(style){toChange={style:style.name,value:/^.+$/,newValue:style.value},changedStyleResult=changeStylesString(currentStyles,toChange),currentStyles=changedStyleResult.changed?changedStyleResult.style:currentStyles}));return currentStyles=currentStyles||stylesToApply.reduce((function(acc,curr){return(acc&&curr.value?acc+" ":"")+curr.value?curr.name+": "+curr.value+";":""}),""),Object.assign({},node.attrs,{style:currentStyles||null})},blockNode_hasNode=function(state,nodeType){var _a=state.selection,from=_a.from,to=_a.to,result=!1;return state.doc.nodesBetween(from,to,(function(node){return!(result=result||node.type===nodeType)})),result},alignBlocks=function(actions,commandName){return function(state,dispatch){var blocks=blockNodes(state),tr=state.tr;tr.setMeta("commandName",commandName),blocks.forEach((function(node){if(node.type.isTextblock){var action=actions.find((function(n){return n.node===node.type.name}));if(action){var newAttrs=addStyles(node,action.style);changeTextBlock(tr,node,node.type,newAttrs)}}}));var result=tr.docChanged;return result&&dispatch(tr.scrollIntoView()),result}},isAligned=function(state,actions){var blocks=blockNodes(state),result=!1;return blocks.forEach((function(node){if(!result&&node.type.isTextblock&&node.attrs.style){var action=actions.find((function(a){return a.node===node.type.name}));action&&(result=action.style.every((function(style){return!!style.value&&new RegExp(style.name+":\\s?"+style.value,"i").test(node.attrs.style)})))}})),result},cleanFormatting=function(options){return void 0===options&&(options={blocksInSelection:!0}),function(state,dispatch){var tr=state.tr,blocksInSelection=options.blocksInSelection,blockNodeType=options.blockNodeType,except=(options.exceptMarks||[state.schema.marks.link]).filter(Boolean);cleanMarks(tr,{except}),function(tr,options){void 0===options&&(options={blocksInSelection:!0});var doc=tr.doc,selection=tr.selection,blocksInSelection=options.blocksInSelection,blockNodeType=options.blockNodeType;blockNodes({doc,selection},{blocksInSelection}).filter((function(node){return node.isTextblock})).forEach((function(node){var _a=node.attrs||{},_b=_a.style,style=void 0===_b?"":_b,_c=_a.class,className=void 0===_c?"":_c,attrs=__rest(_a,["style","class"]),nodeType=blockNodeType||node.type;(style||className||nodeType!==node.type)&&changeTextBlock(tr,node,nodeType,attrs)}))}(tr,{blocksInSelection,blockNodeType});var result=tr.docChanged;return result&&dispatch&&dispatch(tr),result}};function wrapInList(listType,attrs=null){return function(state,dispatch){let{$from,$to}=state.selection,range=$from.blockRange($to),doJoin=!1,outerRange=range;if(!range)return!1;if(range.depth>=2&&$from.node(range.depth-1).type.compatibleContent(listType)&&0==range.startIndex){if(0==$from.index(range.depth-1))return!1;let $insert=state.doc.resolve(range.start-2);outerRange=new NodeRange($insert,$insert,range.depth),range.endIndex<range.parent.childCount&&(range=new NodeRange($from,state.doc.resolve($to.end(range.depth)),range.depth)),doJoin=!0}let wrap=function dist_findWrapping(range,nodeType,attrs=null,innerRange=range){let around=function findWrappingOutside(range,type){let{parent,startIndex,endIndex}=range,around=parent.contentMatchAt(startIndex).findWrapping(type);if(!around)return null;let outer=around.length?around[0]:type;return parent.canReplaceWith(startIndex,endIndex,outer)?around:null}(range,nodeType),inner=around&&function findWrappingInside(range,type){let{parent,startIndex,endIndex}=range,inner=parent.child(startIndex),inside=type.contentMatch.findWrapping(inner.type);if(!inside)return null;let innerMatch=(inside.length?inside[inside.length-1]:type).contentMatch;for(let i=startIndex;innerMatch&&i<endIndex;i++)innerMatch=innerMatch.matchType(parent.child(i).type);return innerMatch&&innerMatch.validEnd?inside:null}(innerRange,nodeType);return inner?around.map(withAttrs).concat({type:nodeType,attrs}).concat(inner.map(withAttrs)):null}(outerRange,listType,attrs,range);return!!wrap&&(dispatch&&dispatch(function doWrapInList(tr,range,wrappers,joinBefore,listType){let content=dist_Fragment.empty;for(let i=wrappers.length-1;i>=0;i--)content=dist_Fragment.from(wrappers[i].type.create(wrappers[i].attrs,content));tr.step(new ReplaceAroundStep(range.start-(joinBefore?2:0),range.end,range.start,range.end,new dist_Slice(content,0,0),wrappers.length,!0));let found=0;for(let i=0;i<wrappers.length;i++)wrappers[i].type==listType&&(found=i+1);let splitDepth=wrappers.length-found,splitPos=range.start+wrappers.length-(joinBefore?2:0),parent=range.parent;for(let i=range.startIndex,e=range.endIndex,first=!0;i<e;i++,first=!1)!first&&canSplit(tr.doc,splitPos,splitDepth)&&(tr.split(splitPos,splitDepth),splitPos+=2*splitDepth),splitPos+=parent.child(i).nodeSize;return tr}(state.tr,range,wrap,doJoin,listType).scrollIntoView()),!0)}}function dist_splitListItem(itemType,itemAttrs){return function(state,dispatch){let{$from,$to,node}=state.selection;if(node&&node.isBlock||$from.depth<2||!$from.sameParent($to))return!1;let grandParent=$from.node(-1);if(grandParent.type!=itemType)return!1;if(0==$from.parent.content.size&&$from.node(-1).childCount==$from.indexAfter(-1)){if(3==$from.depth||$from.node(-3).type!=itemType||$from.index(-2)!=$from.node(-2).childCount-1)return!1;if(dispatch){let wrap=dist_Fragment.empty,depthBefore=$from.index(-1)?1:$from.index(-2)?2:3;for(let d=$from.depth-depthBefore;d>=$from.depth-3;d--)wrap=dist_Fragment.from($from.node(d).copy(wrap));let depthAfter=$from.indexAfter(-1)<$from.node(-2).childCount?1:$from.indexAfter(-2)<$from.node(-3).childCount?2:3;wrap=wrap.append(dist_Fragment.from(itemType.createAndFill()));let start=$from.before($from.depth-(depthBefore-1)),tr=state.tr.replace(start,$from.after(-depthAfter),new dist_Slice(wrap,4-depthBefore,0)),sel=-1;tr.doc.nodesBetween(start,tr.doc.content.size,((node,pos)=>{if(sel>-1)return!1;node.isTextblock&&0==node.content.size&&(sel=pos+1)})),sel>-1&&tr.setSelection(Selection.near(tr.doc.resolve(sel))),dispatch(tr.scrollIntoView())}return!0}let nextType=$to.pos==$from.end()?grandParent.contentMatchAt(0).defaultType:null,tr=state.tr.delete($from.pos,$to.pos),types=nextType?[itemAttrs?{type:itemType,attrs:itemAttrs}:null,{type:nextType}]:void 0;return!!canSplit(tr.doc,$from.pos,2,types)&&(dispatch&&dispatch(tr.split($from.pos,2,types).scrollIntoView()),!0)}}function dist_liftListItem(itemType){return function(state,dispatch){let{$from,$to}=state.selection,range=$from.blockRange($to,(node=>node.childCount>0&&node.firstChild.type==itemType));return!!range&&(!dispatch||($from.node(range.depth-1).type==itemType?function liftToOuterList(state,dispatch,itemType,range){let tr=state.tr,end=range.end,endOfList=range.$to.end(range.depth);end<endOfList&&(tr.step(new ReplaceAroundStep(end-1,endOfList,end,endOfList,new dist_Slice(dist_Fragment.from(itemType.create(null,range.parent.copy())),1,0),1,!0)),range=new NodeRange(tr.doc.resolve(range.$from.pos),tr.doc.resolve(endOfList),range.depth));const target=dist_liftTarget(range);if(null==target)return!1;tr.lift(range,target);let after=tr.mapping.map(end,-1)-1;dist_canJoin(tr.doc,after)&&tr.join(after);return dispatch(tr.scrollIntoView()),!0}(state,dispatch,itemType,range):function liftOutOfList(state,dispatch,range){let tr=state.tr,list=range.parent;for(let pos=range.end,i=range.endIndex-1,e=range.startIndex;i>e;i--)pos-=list.child(i).nodeSize,tr.delete(pos-1,pos+1);let $start=tr.doc.resolve(range.start),item=$start.nodeAfter;if(tr.mapping.map(range.end)!=range.start+$start.nodeAfter.nodeSize)return!1;let atStart=0==range.startIndex,atEnd=range.endIndex==list.childCount,parent=$start.node(-1),indexBefore=$start.index(-1);if(!parent.canReplace(indexBefore+(atStart?0:1),indexBefore+1,item.content.append(atEnd?dist_Fragment.empty:dist_Fragment.from(list))))return!1;let start=$start.pos,end=start+item.nodeSize;return tr.step(new ReplaceAroundStep(start-(atStart?1:0),end+(atEnd?1:0),start+1,end-1,new dist_Slice((atStart?dist_Fragment.empty:dist_Fragment.from(list.copy(dist_Fragment.empty))).append(atEnd?dist_Fragment.empty:dist_Fragment.from(list.copy(dist_Fragment.empty))),atStart?0:1,atEnd?0:1),atStart?0:1)),dispatch(tr.scrollIntoView()),!0}(state,dispatch,range)))}}function dist_sinkListItem(itemType){return function(state,dispatch){let{$from,$to}=state.selection,range=$from.blockRange($to,(node=>node.childCount>0&&node.firstChild.type==itemType));if(!range)return!1;let startIndex=range.startIndex;if(0==startIndex)return!1;let parent=range.parent,nodeBefore=parent.child(startIndex-1);if(nodeBefore.type!=itemType)return!1;if(dispatch){let nestedBefore=nodeBefore.lastChild&&nodeBefore.lastChild.type==parent.type,inner=dist_Fragment.from(nestedBefore?itemType.create():null),slice=new dist_Slice(dist_Fragment.from(itemType.create(null,dist_Fragment.from(parent.type.create(null,inner)))),nestedBefore?3:1,0),before=range.start,after=range.end;dispatch(state.tr.step(new ReplaceAroundStep(before-(nestedBefore?3:1),after,before,after,slice,1,!0)).scrollIntoView())}return!0}}var listsTypes={orderedList:"ordered_list",bulletList:"bullet_list",listItem:"list_item"},indent_rules_indentRules=(tslib_es6_assign({},listsTypes),tslib_es6_assign({},listsTypes),{nodes:[{node:"paragraph",style:"margin-left",rtlStyle:"margin-right",step:30,unit:"px"},{node:"heading",style:"margin-left",rtlStyle:"margin-right",step:30,unit:"px"}],listsTypes:tslib_es6_assign({},listsTypes)}),indent_rules_outdentRules={nodes:[{node:"paragraph",style:"margin-left",rtlStyle:"margin-right",step:-30,unit:"px"},{node:"heading",style:"margin-left",rtlStyle:"margin-right",step:-30,unit:"px"}],listsTypes:tslib_es6_assign({},listsTypes)},indentBlocks=function(actions,command,dir){return function(state,dispatch){var blocks=blockNodes(state),tr=state.tr;tr.setMeta("commandName",command),blocks.forEach((function(node){if(node.type.isTextblock){var newAttrs=void 0,action=actions.find((function(a){return a.node===node.type.name}));if(action){var style="rtl"===dir?action.rtlStyle:action.style,newStyle={name:style,value:action.step>0?""+action.step+action.unit:""};if(node.attrs.style){var re=new RegExp(style+":\\s?(\\d+)"+action.unit,"i"),match=node.attrs.style.match(re);if(match){var newMargin=parseFloat(match[1])+action.step;newMargin=newMargin<=0?"":newMargin,newStyle.value=""+newMargin+(newMargin?action.unit:"")}}newAttrs=addStyles(node,[newStyle])}newAttrs&&changeTextBlock(tr,node,node.type,newAttrs)}}));var result=tr.docChanged;return result&&dispatch(tr.scrollIntoView()),result}},isIndented=function(state,rules,dir){var blocks=blockNodes(state),result=!1;return blocks.forEach((function(node){if(!result&&node.type.isTextblock&&node.attrs.style){var action=rules.find((function(a){return a.node===node.type.name}));if(action){var style="rtl"===dir?action.rtlStyle:action.style,reIndent=new RegExp(style+":\\s?\\d+"+action.unit,"i");result=reIndent.test(node.attrs.style)}}})),result},canIndentAsListItem=function(state,nodeType){return dist_sinkListItem(nodeType)(state)},canOutdentAsListItem=function(state,rules){var listItem=state.schema.nodes[rules.listsTypes.listItem],orderedList=state.schema.nodes[rules.listsTypes.orderedList],bulletList=state.schema.nodes[rules.listsTypes.bulletList],isNestedInOL=!!findNthParentNodeOfType(orderedList,2)(state.selection),isNestedInUL=!!findNthParentNodeOfType(bulletList,2)(state.selection);return(isNestedInOL||isNestedInUL)&&dist_liftListItem(listItem)(state)};const dist_deleteSelection=(state,dispatch)=>!state.selection.empty&&(dispatch&&dispatch(state.tr.deleteSelection().scrollIntoView()),!0);function atBlockStart(state,view){let{$cursor}=state.selection;return!$cursor||(view?!view.endOfTextblock("backward",state):$cursor.parentOffset>0)?null:$cursor}function textblockAt(node,side,only=!1){for(let scan=node;scan;scan="start"==side?scan.firstChild:scan.lastChild){if(scan.isTextblock)return!0;if(only&&1!=scan.childCount)return!1}return!1}function findCutBefore($pos){if(!$pos.parent.type.spec.isolating)for(let i=$pos.depth-1;i>=0;i--){if($pos.index(i)>0)return $pos.doc.resolve($pos.before(i+1));if($pos.node(i).type.spec.isolating)break}return null}function atBlockEnd(state,view){let{$cursor}=state.selection;return!$cursor||(view?!view.endOfTextblock("forward",state):$cursor.parentOffset<$cursor.parent.content.size)?null:$cursor}function findCutAfter($pos){if(!$pos.parent.type.spec.isolating)for(let i=$pos.depth-1;i>=0;i--){let parent=$pos.node(i);if($pos.index(i)+1<parent.childCount)return $pos.doc.resolve($pos.after(i+1));if(parent.type.spec.isolating)break}return null}function defaultBlockAt(match){for(let i=0;i<match.edgeCount;i++){let{type}=match.edge(i);if(type.isTextblock&&!type.hasRequiredAttrs())return type}return null}const dist_exitCode=(state,dispatch)=>{let{$head,$anchor}=state.selection;if(!$head.parent.type.spec.code||!$head.sameParent($anchor))return!1;let above=$head.node(-1),after=$head.indexAfter(-1),type=defaultBlockAt(above.contentMatchAt(after));if(!type||!above.canReplaceWith(after,after,type))return!1;if(dispatch){let pos=$head.after(),tr=state.tr.replaceWith(pos,pos,type.createAndFill());tr.setSelection(Selection.near(tr.doc.resolve(pos),1)),dispatch(tr.scrollIntoView())}return!0};const splitBlock=function splitBlockAs(splitNode){return(state,dispatch)=>{let{$from,$to}=state.selection;if(state.selection instanceof dist_NodeSelection&&state.selection.node.isBlock)return!(!$from.parentOffset||!canSplit(state.doc,$from.pos))&&(dispatch&&dispatch(state.tr.split($from.pos).scrollIntoView()),!0);if(!$from.parent.isBlock)return!1;if(dispatch){let atEnd=$to.parentOffset==$to.parent.content.size,tr=state.tr;(state.selection instanceof dist_TextSelection||state.selection instanceof AllSelection)&&tr.deleteSelection();let deflt=0==$from.depth?null:defaultBlockAt($from.node(-1).contentMatchAt($from.indexAfter(-1))),splitType=splitNode&&splitNode($to.parent,atEnd),types=splitType?[splitType]:atEnd&&deflt?[{type:deflt}]:void 0,can=canSplit(tr.doc,tr.mapping.map($from.pos),1,types);if(types||can||!canSplit(tr.doc,tr.mapping.map($from.pos),1,deflt?[{type:deflt}]:void 0)||(deflt&&(types=[{type:deflt}]),can=!0),can&&(tr.split(tr.mapping.map($from.pos),1,types),!atEnd&&!$from.parentOffset&&$from.parent.type!=deflt)){let first=tr.mapping.map($from.before()),$first=tr.doc.resolve(first);deflt&&$from.node(-1).canReplaceWith($first.index(),$first.index()+1,deflt)&&tr.setNodeMarkup(tr.mapping.map($from.before()),deflt)}dispatch(tr.scrollIntoView())}return!0}}(),selectAll=(state,dispatch)=>(dispatch&&dispatch(state.tr.setSelection(new AllSelection(state.doc))),!0);function deleteBarrier(state,$cut,dispatch){let conn,match,before=$cut.nodeBefore,after=$cut.nodeAfter;if(before.type.spec.isolating||after.type.spec.isolating)return!1;if(function joinMaybeClear(state,$pos,dispatch){let before=$pos.nodeBefore,after=$pos.nodeAfter,index=$pos.index();return!(!(before&&after&&before.type.compatibleContent(after.type))||(!before.content.size&&$pos.parent.canReplace(index-1,index)?(dispatch&&dispatch(state.tr.delete($pos.pos-before.nodeSize,$pos.pos).scrollIntoView()),0):!$pos.parent.canReplace(index,index+1)||!after.isTextblock&&!dist_canJoin(state.doc,$pos.pos)||(dispatch&&dispatch(state.tr.clearIncompatible($pos.pos,before.type,before.contentMatchAt(before.childCount)).join($pos.pos).scrollIntoView()),0)))}(state,$cut,dispatch))return!0;let canDelAfter=$cut.parent.canReplace($cut.index(),$cut.index()+1);if(canDelAfter&&(conn=(match=before.contentMatchAt(before.childCount)).findWrapping(after.type))&&match.matchType(conn[0]||after.type).validEnd){if(dispatch){let end=$cut.pos+after.nodeSize,wrap=dist_Fragment.empty;for(let i=conn.length-1;i>=0;i--)wrap=dist_Fragment.from(conn[i].create(null,wrap));wrap=dist_Fragment.from(before.copy(wrap));let tr=state.tr.step(new ReplaceAroundStep($cut.pos-1,end,$cut.pos,end,new dist_Slice(wrap,1,0),conn.length,!0)),joinAt=end+2*conn.length;dist_canJoin(tr.doc,joinAt)&&tr.join(joinAt),dispatch(tr.scrollIntoView())}return!0}let selAfter=Selection.findFrom($cut,1),range=selAfter&&selAfter.$from.blockRange(selAfter.$to),target=range&&dist_liftTarget(range);if(null!=target&&target>=$cut.depth)return dispatch&&dispatch(state.tr.lift(range,target).scrollIntoView()),!0;if(canDelAfter&&textblockAt(after,"start",!0)&&textblockAt(before,"end")){let at=before,wrap=[];for(;wrap.push(at),!at.isTextblock;)at=at.lastChild;let afterText=after,afterDepth=1;for(;!afterText.isTextblock;afterText=afterText.firstChild)afterDepth++;if(at.canReplace(at.childCount,at.childCount,afterText.content)){if(dispatch){let end=dist_Fragment.empty;for(let i=wrap.length-1;i>=0;i--)end=dist_Fragment.from(wrap[i].copy(end));dispatch(state.tr.step(new ReplaceAroundStep($cut.pos-wrap.length,$cut.pos+after.nodeSize,$cut.pos+afterDepth,$cut.pos+after.nodeSize-afterDepth,new dist_Slice(end,wrap.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function selectTextblockSide(side){return function(state,dispatch){let sel=state.selection,$pos=side<0?sel.$from:sel.$to,depth=$pos.depth;for(;$pos.node(depth).isInline;){if(!depth)return!1;depth--}return!!$pos.node(depth).isTextblock&&(dispatch&&dispatch(state.tr.setSelection(dist_TextSelection.create(state.doc,side<0?$pos.start(depth):$pos.end(depth)))),!0)}}const selectTextblockStart=selectTextblockSide(-1),selectTextblockEnd=selectTextblockSide(1);function autoJoin(command,isJoinable){let canJoin=Array.isArray(isJoinable)?node=>isJoinable.indexOf(node.type.name)>-1:isJoinable;return(state,dispatch,view)=>command(state,dispatch&&function wrapDispatchForJoin(dispatch,isJoinable){return tr=>{if(!tr.isGeneric)return dispatch(tr);let ranges=[];for(let i=0;i<tr.mapping.maps.length;i++){let map=tr.mapping.maps[i];for(let j=0;j<ranges.length;j++)ranges[j]=map.map(ranges[j]);map.forEach(((_s,_e,from,to)=>ranges.push(from,to)))}let joinable=[];for(let i=0;i<ranges.length;i+=2){let from=ranges[i],to=ranges[i+1],$from=tr.doc.resolve(from),depth=$from.sharedDepth(to),parent=$from.node(depth);for(let index=$from.indexAfter(depth),pos=$from.after(depth+1);pos<=to;++index){let after=parent.maybeChild(index);if(!after)break;if(index&&-1==joinable.indexOf(pos)){let before=parent.child(index-1);before.type==after.type&&isJoinable(before,after)&&joinable.push(pos)}pos+=after.nodeSize}}joinable.sort(((a,b)=>a-b));for(let i=joinable.length-1;i>=0;i--)dist_canJoin(tr.doc,joinable[i])&&tr.join(joinable[i]);dispatch(tr)}}(dispatch,canJoin),view)}function dist_chainCommands(...commands){return function(state,dispatch,view){for(let i=0;i<commands.length;i++)if(commands[i](state,dispatch,view))return!0;return!1}}let backspace=dist_chainCommands(dist_deleteSelection,((state,dispatch,view)=>{let $cursor=atBlockStart(state,view);if(!$cursor)return!1;let $cut=findCutBefore($cursor);if(!$cut){let range=$cursor.blockRange(),target=range&&dist_liftTarget(range);return null!=target&&(dispatch&&dispatch(state.tr.lift(range,target).scrollIntoView()),!0)}let before=$cut.nodeBefore;if(!before.type.spec.isolating&&deleteBarrier(state,$cut,dispatch))return!0;if(0==$cursor.parent.content.size&&(textblockAt(before,"end")||dist_NodeSelection.isSelectable(before))){let delStep=dist_replaceStep(state.doc,$cursor.before(),$cursor.after(),dist_Slice.empty);if(delStep&&delStep.slice.size<delStep.to-delStep.from){if(dispatch){let tr=state.tr.step(delStep);tr.setSelection(textblockAt(before,"end")?Selection.findFrom(tr.doc.resolve(tr.mapping.map($cut.pos,-1)),-1):dist_NodeSelection.create(tr.doc,$cut.pos-before.nodeSize)),dispatch(tr.scrollIntoView())}return!0}}return!(!before.isAtom||$cut.depth!=$cursor.depth-1)&&(dispatch&&dispatch(state.tr.delete($cut.pos-before.nodeSize,$cut.pos).scrollIntoView()),!0)}),((state,dispatch,view)=>{let{$head,empty}=state.selection,$cut=$head;if(!empty)return!1;if($head.parent.isTextblock){if(view?!view.endOfTextblock("backward",state):$head.parentOffset>0)return!1;$cut=findCutBefore($head)}let node=$cut&&$cut.nodeBefore;return!(!node||!dist_NodeSelection.isSelectable(node))&&(dispatch&&dispatch(state.tr.setSelection(dist_NodeSelection.create(state.doc,$cut.pos-node.nodeSize)).scrollIntoView()),!0)})),del=dist_chainCommands(dist_deleteSelection,((state,dispatch,view)=>{let $cursor=atBlockEnd(state,view);if(!$cursor)return!1;let $cut=findCutAfter($cursor);if(!$cut)return!1;let after=$cut.nodeAfter;if(deleteBarrier(state,$cut,dispatch))return!0;if(0==$cursor.parent.content.size&&(textblockAt(after,"start")||dist_NodeSelection.isSelectable(after))){let delStep=dist_replaceStep(state.doc,$cursor.before(),$cursor.after(),dist_Slice.empty);if(delStep&&delStep.slice.size<delStep.to-delStep.from){if(dispatch){let tr=state.tr.step(delStep);tr.setSelection(textblockAt(after,"start")?Selection.findFrom(tr.doc.resolve(tr.mapping.map($cut.pos)),1):dist_NodeSelection.create(tr.doc,tr.mapping.map($cut.pos))),dispatch(tr.scrollIntoView())}return!0}}return!(!after.isAtom||$cut.depth!=$cursor.depth-1)&&(dispatch&&dispatch(state.tr.delete($cut.pos,$cut.pos+after.nodeSize).scrollIntoView()),!0)}),((state,dispatch,view)=>{let{$head,empty}=state.selection,$cut=$head;if(!empty)return!1;if($head.parent.isTextblock){if(view?!view.endOfTextblock("forward",state):$head.parentOffset<$head.parent.content.size)return!1;$cut=findCutAfter($head)}let node=$cut&&$cut.nodeAfter;return!(!node||!dist_NodeSelection.isSelectable(node))&&(dispatch&&dispatch(state.tr.setSelection(dist_NodeSelection.create(state.doc,$cut.pos)).scrollIntoView()),!0)}));const pcBaseKeymap={Enter:dist_chainCommands(((state,dispatch)=>{let{$head,$anchor}=state.selection;return!(!$head.parent.type.spec.code||!$head.sameParent($anchor))&&(dispatch&&dispatch(state.tr.insertText("\n").scrollIntoView()),!0)}),((state,dispatch)=>{let sel=state.selection,{$from,$to}=sel;if(sel instanceof AllSelection||$from.parent.inlineContent||$to.parent.inlineContent)return!1;let type=defaultBlockAt($to.parent.contentMatchAt($to.indexAfter()));if(!type||!type.isTextblock)return!1;if(dispatch){let side=(!$from.parentOffset&&$to.index()<$to.parent.childCount?$from:$to).pos,tr=state.tr.insert(side,type.createAndFill());tr.setSelection(dist_TextSelection.create(tr.doc,side+1)),dispatch(tr.scrollIntoView())}return!0}),((state,dispatch)=>{let{$cursor}=state.selection;if(!$cursor||$cursor.parent.content.size)return!1;if($cursor.depth>1&&$cursor.after()!=$cursor.end(-1)){let before=$cursor.before();if(canSplit(state.doc,before))return dispatch&&dispatch(state.tr.split(before).scrollIntoView()),!0}let range=$cursor.blockRange(),target=range&&dist_liftTarget(range);return null!=target&&(dispatch&&dispatch(state.tr.lift(range,target).scrollIntoView()),!0)}),splitBlock),"Mod-Enter":dist_exitCode,Backspace:backspace,"Mod-Backspace":backspace,"Shift-Backspace":backspace,Delete:del,"Mod-Delete":del,"Mod-a":selectAll},macBaseKeymap={"Ctrl-h":pcBaseKeymap.Backspace,"Alt-Backspace":pcBaseKeymap["Mod-Backspace"],"Ctrl-d":pcBaseKeymap.Delete,"Ctrl-Alt-Backspace":pcBaseKeymap["Mod-Delete"],"Alt-Delete":pcBaseKeymap["Mod-Delete"],"Alt-d":pcBaseKeymap["Mod-Delete"],"Ctrl-a":selectTextblockStart,"Ctrl-e":selectTextblockEnd};for(let key in pcBaseKeymap)macBaseKeymap[key]=pcBaseKeymap[key];const baseKeymap=("undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!("undefined"==typeof os||!os.platform)&&"darwin"==os.platform())?macBaseKeymap:pcBaseKeymap;var getListLiftTarget=function(schema,resPos,options){for(var target=resPos.depth,bulletList=schema.nodes[options.bulletList],orderedList=schema.nodes[options.orderedList],listItem=schema.nodes[options.listItem],i=resPos.depth;i>0;i--){var node=resPos.node(i);if(node.type!==bulletList&&node.type!==orderedList||(target=i),node.type!==bulletList&&node.type!==orderedList&&node.type!==listItem)break}return target-1};function toggleListCommand(options){return function(state,dispatch,view){if(!view)return!1;var listNode=(state=view.state).schema.nodes[options.listType],_a=state.selection,$from=_a.$from,$to=_a.$to,parent=$from.node(-2),grandgrandParent=$from.node(-3),isRangeOfSingleType=function isRangeOfType(doc,$from,$to,nodeType){return 0===function getAncestorNodesBetween(doc,$from,$to){var nodes=Array(),maxDepth=function findAncestorPosition(doc,pos){var nestableBlocks=["blockquote","bulletList","orderedList"];if(1===pos.depth)return pos;var node=pos.node(pos.depth),newPos=pos;for(;pos.depth>=1;)(node=(pos=doc.resolve(pos.before(pos.depth))).node(pos.depth))&&-1!==nestableBlocks.indexOf(node.type.name)&&(newPos=pos);return newPos}(doc,$from).depth,current=doc.resolve($from.start(maxDepth));for(;current.pos<=$to.start($to.depth);){var depth=Math.min(current.depth,maxDepth),node=current.node(depth);if(node&&nodes.push(node),0===depth)break;var next=doc.resolve(current.after(depth));if(next.start(depth)>=doc.nodeSize-2)break;next.depth!==current.depth&&(next=doc.resolve(next.pos+2)),current=next.depth?doc.resolve(next.start(next.depth)):doc.resolve(next.end(next.depth))}return nodes}(doc,$from,$to).filter((function(node){return node.type!==nodeType})).length}(state.doc,$from,$to,listNode);return(parent&&parent.type===listNode||grandgrandParent&&grandgrandParent.type===listNode)&&isRangeOfSingleType?liftListItems(options)(state,dispatch):(isRangeOfSingleType||(liftListItems(options)(state,dispatch),state=view.state),function lists_wrapInList(nodeType,attrs){void 0===attrs&&(attrs={});return autoJoin(wrapInList(nodeType,attrs),(function(before,after){return before.type===after.type&&before.type===nodeType}))}(listNode,options.listAttrs)(state,dispatch))}}function lists_liftListItem(state,selection,tr,nodeType){var listItemNodeType=nodeType||state.schema.nodes.listItem,$from=selection.$from,$to=selection.$to,range=$from.blockRange($to,(function(node){return node.childCount&&node.firstChild.type===listItemNodeType}));if(!range||range.depth<2||$from.node(range.depth-1).type!==listItemNodeType)return tr;var end=range.end,endOfList=$to.end(range.depth);return end<endOfList&&(tr.step(new ReplaceAroundStep(end-1,endOfList,end,endOfList,new dist_Slice(dist_Fragment.from(listItemNodeType.create(void 0,range.parent.copy())),1,0),1,!0)),range=new NodeRange(tr.doc.resolve($from.pos),tr.doc.resolve(endOfList),range.depth)),tr.lift(range,dist_liftTarget(range)).scrollIntoView()}function liftListItems(options){return function(state,dispatch){var tr=state.tr,_a=state.selection,$from=_a.$from,$to=_a.$to;return tr.doc.nodesBetween($from.pos,$to.pos,(function(node,pos){if(node.isTextblock||"blockquote"===node.type.name||"div"===node.type.name){var sel=new dist_NodeSelection(tr.doc.resolve(tr.mapping.map(pos))),range=sel.$from.blockRange(sel.$to);if(!range||sel.$from.parent.type!==state.schema.nodes[options.listItem])return!1;var target=range&&dist_liftTarget(range);if(null==target)return!1;tr.lift(range,target)}})),dispatch&&dispatch(tr),!0}}var reListStyle=/list\-style\-type:\s?([\w-]+)/,listStyle=function(attrs){var styleAttr=attrs.style||"",execArray=reListStyle.exec(styleAttr);return execArray&&execArray[1]||""},toggleList=function(state,dispatch,view,options,command){var listType=options.listType,_a=options.listAttrs,listAttrs=void 0===_a?{style:null}:_a,selection=state.selection,fromNode=selection.$from.node(selection.$from.depth-2),endNode=selection.$to.node(selection.$to.depth-2);if(fromNode&&fromNode.type.name===listType&&listStyle(fromNode.attrs)===listStyle(listAttrs)&&endNode&&endNode.type.name===listType&&listStyle(endNode.attrs)===listStyle(listAttrs)){var nodes=view.state.schema.nodes,listNodes={bulletList:nodes[options.bulletList],orderedList:nodes[options.orderedList],listItem:nodes[options.listItem]},depth=function(pos,nodes){for(var depth,bulletList=nodes.bulletList,orderedList=nodes.orderedList,listItem=nodes.listItem,i=pos.depth-1;i>0;i--){var node=pos.node(i);if(node.type!==bulletList&&node.type!==orderedList||(depth=i),node.type!==bulletList&&node.type!==orderedList&&node.type!==listItem)break}return depth}(selection.$to,listNodes),tr=function liftFollowingList(state,from,to,rootListDepthNum,tr,listItem){listItem||(listItem=state.schema.nodes.listItem);var lifted=!1;return tr.doc.nodesBetween(from,to,(function(node,pos){if(!lifted&&node.type===listItem&&pos>from){lifted=!0;for(var listDepth=rootListDepthNum+3;listDepth>rootListDepthNum+2;){var start=tr.doc.resolve(tr.mapping.map(pos));listDepth=start.depth;var end=tr.doc.resolve(tr.mapping.map(pos+node.textContent.length)),sel=new dist_TextSelection(start,end);tr=lists_liftListItem(state,sel,tr,listItem)}}})),tr}(state,selection.$to.pos,selection.$to.end(depth),depth,view.state.tr,listNodes.listItem);return tr=function liftSelectionList(state,tr,options){var _a=state.selection,from=_a.from,to=_a.to,_b=state.schema.nodes,paragraph=_b.paragraph,heading=_b.heading,listCol=[];tr.doc.nodesBetween(from,to,(function(node,pos){node.type!==paragraph&&node.type!==heading||listCol.push({node,pos})}));for(var i=listCol.length-1;i>=0;i--){var block=listCol[i],start=tr.doc.resolve(tr.mapping.map(block.pos));if(start.depth>0){var end=void 0;end=block.node.textContent&&block.node.textContent.length>0?tr.doc.resolve(tr.mapping.map(block.pos+block.node.textContent.length)):tr.doc.resolve(tr.mapping.map(block.pos+1));var range=start.blockRange(end);range&&tr.lift(range,getListLiftTarget(state.schema,start,options))}}return tr}(state,tr,options),tr.setMeta("commandName",command),dispatch(tr),!0}return toggleListCommand(options)(state,dispatch,view)};var style=function(name,value){return{name,value}},alignLeftRules=[{node:"paragraph",style:[style("text-align","left")]},{node:"heading",style:[style("text-align","left")]},{node:"table_caption_external",style:[style("text-align","left")]}],alignRightRules=[{node:"paragraph",style:[style("text-align","right")]},{node:"heading",style:[style("text-align","right")]},{node:"table_caption_external",style:[style("text-align","right")]}],alignCenterRules=[{node:"paragraph",style:[style("text-align","center")]},{node:"heading",style:[style("text-align","center")]},{node:"table_caption_external",style:[style("text-align","center")]}],alignJustifyRules=[{node:"paragraph",style:[style("text-align","justify")]},{node:"heading",style:[style("text-align","justify")]},{node:"table_caption_external",style:[style("text-align","justify")]}],alignRemoveRules=[{node:"paragraph",style:[style("text-align","")]},{node:"heading",style:[style("text-align","")]},{node:"table_caption_external",style:[style("text-align","")]}];const domIndex=function(node){for(var index=0;;index++)if(!(node=node.previousSibling))return index},parentNode=function(node){let parent=node.assignedSlot||node.parentNode;return parent&&11==parent.nodeType?parent.host:parent};let reusedRange=null;const textRange=function(node,from,to){let range=reusedRange||(reusedRange=document.createRange());return range.setEnd(node,null==to?node.nodeValue.length:to),range.setStart(node,from||0),range},isEquivalentPosition=function(node,off,targetNode,targetOff){return targetNode&&(scanFor(node,off,targetNode,targetOff,-1)||scanFor(node,off,targetNode,targetOff,1))},atomElements=/^(img|br|input|textarea|hr)$/i;function scanFor(node,off,targetNode,targetOff,dir){for(;;){if(node==targetNode&&off==targetOff)return!0;if(off==(dir<0?0:nodeSize(node))){let parent=node.parentNode;if(!parent||1!=parent.nodeType||hasBlockDesc(node)||atomElements.test(node.nodeName)||"false"==node.contentEditable)return!1;off=domIndex(node)+(dir<0?0:1),node=parent}else{if(1!=node.nodeType)return!1;if("false"==(node=node.childNodes[off+(dir<0?-1:0)]).contentEditable)return!1;off=dir<0?nodeSize(node):0}}}function nodeSize(node){return 3==node.nodeType?node.nodeValue.length:node.childNodes.length}function hasBlockDesc(dom){let desc;for(let cur=dom;cur&&!(desc=cur.pmViewDesc);cur=cur.parentNode);return desc&&desc.node&&desc.node.isBlock&&(desc.dom==dom||desc.contentDOM==dom)}const selectionCollapsed=function(domSel){return domSel.focusNode&&isEquivalentPosition(domSel.focusNode,domSel.focusOffset,domSel.anchorNode,domSel.anchorOffset)};function keyEvent(keyCode,key){let event=document.createEvent("Event");return event.initEvent("keydown",!0,!0),event.keyCode=keyCode,event.key=event.code=key,event}const nav="undefined"!=typeof navigator?navigator:null,dist_doc="undefined"!=typeof document?document:null,agent=nav&&nav.userAgent||"",ie_edge=/Edge\/(\d+)/.exec(agent),ie_upto10=/MSIE \d/.exec(agent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(agent),ie=!!(ie_upto10||ie_11up||ie_edge),ie_version=ie_upto10?document.documentMode:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko=!ie&&/gecko\/(\d+)/i.test(agent);gecko&&(/Firefox\/(\d+)/.exec(agent)||[0,0])[1];const _chrome=!ie&&/Chrome\/(\d+)/.exec(agent),chrome=!!_chrome,chrome_version=_chrome?+_chrome[1]:0,safari=!ie&&!!nav&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(agent)||!!nav&&nav.maxTouchPoints>2),dist_mac=ios||!!nav&&/Mac/.test(nav.platform),windows=!!nav&&/Win/.test(nav.platform),android=/Android \d/.test(agent),webkit=!!dist_doc&&"webkitFontSmoothing"in dist_doc.documentElement.style,webkit_version=webkit?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function windowRect(doc){return{left:0,right:doc.documentElement.clientWidth,top:0,bottom:doc.documentElement.clientHeight}}function getSide(value,side){return"number"==typeof value?value:value[side]}function clientRect(node){let rect=node.getBoundingClientRect(),scaleX=rect.width/node.offsetWidth||1,scaleY=rect.height/node.offsetHeight||1;return{left:rect.left,right:rect.left+node.clientWidth*scaleX,top:rect.top,bottom:rect.top+node.clientHeight*scaleY}}function scrollRectIntoView(view,rect,startDOM){let scrollThreshold=view.someProp("scrollThreshold")||0,scrollMargin=view.someProp("scrollMargin")||5,doc=view.dom.ownerDocument;for(let parent=startDOM||view.dom;parent;parent=parentNode(parent)){if(1!=parent.nodeType)continue;let elt=parent,atTop=elt==doc.body,bounding=atTop?windowRect(doc):clientRect(elt),moveX=0,moveY=0;if(rect.top<bounding.top+getSide(scrollThreshold,"top")?moveY=-(bounding.top-rect.top+getSide(scrollMargin,"top")):rect.bottom>bounding.bottom-getSide(scrollThreshold,"bottom")&&(moveY=rect.bottom-rect.top>bounding.bottom-bounding.top?rect.top+getSide(scrollMargin,"top")-bounding.top:rect.bottom-bounding.bottom+getSide(scrollMargin,"bottom")),rect.left<bounding.left+getSide(scrollThreshold,"left")?moveX=-(bounding.left-rect.left+getSide(scrollMargin,"left")):rect.right>bounding.right-getSide(scrollThreshold,"right")&&(moveX=rect.right-bounding.right+getSide(scrollMargin,"right")),moveX||moveY)if(atTop)doc.defaultView.scrollBy(moveX,moveY);else{let startX=elt.scrollLeft,startY=elt.scrollTop;moveY&&(elt.scrollTop+=moveY),moveX&&(elt.scrollLeft+=moveX);let dX=elt.scrollLeft-startX,dY=elt.scrollTop-startY;rect={left:rect.left-dX,top:rect.top-dY,right:rect.right-dX,bottom:rect.bottom-dY}}if(atTop||/^(fixed|sticky)$/.test(getComputedStyle(parent).position))break}}function scrollStack(dom){let stack=[],doc=dom.ownerDocument;for(let cur=dom;cur&&(stack.push({dom:cur,top:cur.scrollTop,left:cur.scrollLeft}),dom!=doc);cur=parentNode(cur));return stack}function restoreScrollStack(stack,dTop){for(let i=0;i<stack.length;i++){let{dom,top,left}=stack[i];dom.scrollTop!=top+dTop&&(dom.scrollTop=top+dTop),dom.scrollLeft!=left&&(dom.scrollLeft=left)}}let preventScrollSupported=null;function findOffsetInNode(node,coords){let closest,coordsClosest,firstBelow,coordsBelow,dxClosest=2e8,offset=0,rowBot=coords.top,rowTop=coords.top;for(let child=node.firstChild,childIndex=0;child;child=child.nextSibling,childIndex++){let rects;if(1==child.nodeType)rects=child.getClientRects();else{if(3!=child.nodeType)continue;rects=textRange(child).getClientRects()}for(let i=0;i<rects.length;i++){let rect=rects[i];if(rect.top<=rowBot&&rect.bottom>=rowTop){rowBot=Math.max(rect.bottom,rowBot),rowTop=Math.min(rect.top,rowTop);let dx=rect.left>coords.left?rect.left-coords.left:rect.right<coords.left?coords.left-rect.right:0;if(dx<dxClosest){closest=child,dxClosest=dx,coordsClosest=dx&&3==closest.nodeType?{left:rect.right<coords.left?rect.right:rect.left,top:coords.top}:coords,1==child.nodeType&&dx&&(offset=childIndex+(coords.left>=(rect.left+rect.right)/2?1:0));continue}}else rect.top>coords.top&&!firstBelow&&rect.left<=coords.left&&rect.right>=coords.left&&(firstBelow=child,coordsBelow={left:Math.max(rect.left,Math.min(rect.right,coords.left)),top:rect.top});!closest&&(coords.left>=rect.right&&coords.top>=rect.top||coords.left>=rect.left&&coords.top>=rect.bottom)&&(offset=childIndex+1)}}return!closest&&firstBelow&&(closest=firstBelow,coordsClosest=coordsBelow,dxClosest=0),closest&&3==closest.nodeType?function findOffsetInText(node,coords){let len=node.nodeValue.length,range=document.createRange();for(let i=0;i<len;i++){range.setEnd(node,i+1),range.setStart(node,i);let rect=singleRect(range,1);if(rect.top!=rect.bottom&&inRect(coords,rect))return{node,offset:i+(coords.left>=(rect.left+rect.right)/2?1:0)}}return{node,offset:0}}(closest,coordsClosest):!closest||dxClosest&&1==closest.nodeType?{node,offset}:findOffsetInNode(closest,coordsClosest)}function inRect(coords,rect){return coords.left>=rect.left-1&&coords.left<=rect.right+1&&coords.top>=rect.top-1&&coords.top<=rect.bottom+1}function elementFromPoint(element,coords,box){let len=element.childNodes.length;if(len&&box.top<box.bottom)for(let startI=Math.max(0,Math.min(len-1,Math.floor(len*(coords.top-box.top)/(box.bottom-box.top))-2)),i=startI;;){let child=element.childNodes[i];if(1==child.nodeType){let rects=child.getClientRects();for(let j=0;j<rects.length;j++){let rect=rects[j];if(inRect(coords,rect))return elementFromPoint(child,coords,rect)}}if((i=(i+1)%len)==startI)break}return element}function posAtCoords(view,coords){let node,doc=view.dom.ownerDocument,offset=0,caret=function caretFromPoint(doc,x,y){if(doc.caretPositionFromPoint)try{let pos=doc.caretPositionFromPoint(x,y);if(pos)return{node:pos.offsetNode,offset:pos.offset}}catch(_){}if(doc.caretRangeFromPoint){let range=doc.caretRangeFromPoint(x,y);if(range)return{node:range.startContainer,offset:range.startOffset}}}(doc,coords.left,coords.top);caret&&({node,offset}=caret);let pos,elt=(view.root.elementFromPoint?view.root:doc).elementFromPoint(coords.left,coords.top);if(!elt||!view.dom.contains(1!=elt.nodeType?elt.parentNode:elt)){let box=view.dom.getBoundingClientRect();if(!inRect(coords,box))return null;if(elt=elementFromPoint(view.dom,coords,box),!elt)return null}if(safari)for(let p=elt;node&&p;p=parentNode(p))p.draggable&&(node=void 0);if(elt=function targetKludge(dom,coords){let parent=dom.parentNode;return parent&&/^li$/i.test(parent.nodeName)&&coords.left<dom.getBoundingClientRect().left?parent:dom}(elt,coords),node){if(gecko&&1==node.nodeType&&(offset=Math.min(offset,node.childNodes.length),offset<node.childNodes.length)){let box,next=node.childNodes[offset];"IMG"==next.nodeName&&(box=next.getBoundingClientRect()).right<=coords.left&&box.bottom>coords.top&&offset++}node==view.dom&&offset==node.childNodes.length-1&&1==node.lastChild.nodeType&&coords.top>node.lastChild.getBoundingClientRect().bottom?pos=view.state.doc.content.size:0!=offset&&1==node.nodeType&&"BR"==node.childNodes[offset-1].nodeName||(pos=function posFromCaret(view,node,offset,coords){let outsideBlock=-1;for(let cur=node,sawBlock=!1;cur!=view.dom;){let desc=view.docView.nearestDesc(cur,!0);if(!desc)return null;if(1==desc.dom.nodeType&&(desc.node.isBlock&&desc.parent&&!sawBlock||!desc.contentDOM)){let rect=desc.dom.getBoundingClientRect();if(desc.node.isBlock&&desc.parent&&!sawBlock&&(sawBlock=!0,rect.left>coords.left||rect.top>coords.top?outsideBlock=desc.posBefore:(rect.right<coords.left||rect.bottom<coords.top)&&(outsideBlock=desc.posAfter)),!desc.contentDOM&&outsideBlock<0&&!desc.node.isText)return(desc.node.isBlock?coords.top<(rect.top+rect.bottom)/2:coords.left<(rect.left+rect.right)/2)?desc.posBefore:desc.posAfter}cur=desc.dom.parentNode}return outsideBlock>-1?outsideBlock:view.docView.posFromDOM(node,offset,-1)}(view,node,offset,coords))}null==pos&&(pos=function posFromElement(view,elt,coords){let{node,offset}=findOffsetInNode(elt,coords),bias=-1;if(1==node.nodeType&&!node.firstChild){let rect=node.getBoundingClientRect();bias=rect.left!=rect.right&&coords.left>(rect.left+rect.right)/2?1:-1}return view.docView.posFromDOM(node,offset,bias)}(view,elt,coords));let desc=view.docView.nearestDesc(elt,!0);return{pos,inside:desc?desc.posAtStart-desc.border:-1}}function nonZero(rect){return rect.top<rect.bottom||rect.left<rect.right}function singleRect(target,bias){let rects=target.getClientRects();if(rects.length){let first=rects[bias<0?0:rects.length-1];if(nonZero(first))return first}return Array.prototype.find.call(rects,nonZero)||target.getBoundingClientRect()}const BIDI=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function coordsAtPos(view,pos,side){let{node,offset,atom}=view.docView.domFromPos(pos,side<0?-1:1),supportEmptyRange=webkit||gecko;if(3==node.nodeType){if(!supportEmptyRange||!BIDI.test(node.nodeValue)&&(side<0?offset:offset!=node.nodeValue.length)){let from=offset,to=offset,takeSide=side<0?1:-1;return side<0&&!offset?(to++,takeSide=-1):side>=0&&offset==node.nodeValue.length?(from--,takeSide=1):side<0?from--:to++,flattenV(singleRect(textRange(node,from,to),takeSide),takeSide<0)}{let rect=singleRect(textRange(node,offset,offset),side);if(gecko&&offset&&/\s/.test(node.nodeValue[offset-1])&&offset<node.nodeValue.length){let rectBefore=singleRect(textRange(node,offset-1,offset-1),-1);if(rectBefore.top==rect.top){let rectAfter=singleRect(textRange(node,offset,offset+1),-1);if(rectAfter.top!=rect.top)return flattenV(rectAfter,rectAfter.left<rectBefore.left)}}return rect}}if(!view.state.doc.resolve(pos-(atom||0)).parent.inlineContent){if(null==atom&&offset&&(side<0||offset==nodeSize(node))){let before=node.childNodes[offset-1];if(1==before.nodeType)return flattenH(before.getBoundingClientRect(),!1)}if(null==atom&&offset<nodeSize(node)){let after=node.childNodes[offset];if(1==after.nodeType)return flattenH(after.getBoundingClientRect(),!0)}return flattenH(node.getBoundingClientRect(),side>=0)}if(null==atom&&offset&&(side<0||offset==nodeSize(node))){let before=node.childNodes[offset-1],target=3==before.nodeType?textRange(before,nodeSize(before)-(supportEmptyRange?0:1)):1!=before.nodeType||"BR"==before.nodeName&&before.nextSibling?null:before;if(target)return flattenV(singleRect(target,1),!1)}if(null==atom&&offset<nodeSize(node)){let after=node.childNodes[offset];for(;after.pmViewDesc&&after.pmViewDesc.ignoreForCoords;)after=after.nextSibling;let target=after?3==after.nodeType?textRange(after,0,supportEmptyRange?0:1):1==after.nodeType?after:null:null;if(target)return flattenV(singleRect(target,-1),!0)}return flattenV(singleRect(3==node.nodeType?textRange(node):node,-side),side>=0)}function flattenV(rect,left){if(0==rect.width)return rect;let x=left?rect.left:rect.right;return{top:rect.top,bottom:rect.bottom,left:x,right:x}}function flattenH(rect,top){if(0==rect.height)return rect;let y=top?rect.top:rect.bottom;return{top:y,bottom:y,left:rect.left,right:rect.right}}function withFlushedState(view,state,f){let viewState=view.state,active=view.root.activeElement;viewState!=state&&view.updateState(state),active!=view.dom&&view.focus();try{return f()}finally{viewState!=state&&view.updateState(viewState),active!=view.dom&&active&&active.focus()}}const maybeRTL=/[\u0590-\u08ac]/;let cachedState=null,cachedDir=null,cachedResult=!1;function endOfTextblock(view,state,dir){return cachedState==state&&cachedDir==dir?cachedResult:(cachedState=state,cachedDir=dir,cachedResult="up"==dir||"down"==dir?function endOfTextblockVertical(view,state,dir){let sel=state.selection,$pos="up"==dir?sel.$from:sel.$to;return withFlushedState(view,state,(()=>{let{node:dom}=view.docView.domFromPos($pos.pos,"up"==dir?-1:1);for(;;){let nearest=view.docView.nearestDesc(dom,!0);if(!nearest)break;if(nearest.node.isBlock){dom=nearest.contentDOM||nearest.dom;break}dom=nearest.dom.parentNode}let coords=coordsAtPos(view,$pos.pos,1);for(let child=dom.firstChild;child;child=child.nextSibling){let boxes;if(1==child.nodeType)boxes=child.getClientRects();else{if(3!=child.nodeType)continue;boxes=textRange(child,0,child.nodeValue.length).getClientRects()}for(let i=0;i<boxes.length;i++){let box=boxes[i];if(box.bottom>box.top+1&&("up"==dir?coords.top-box.top>2*(box.bottom-coords.top):box.bottom-coords.bottom>2*(coords.bottom-box.top)))return!1}}return!0}))}(view,state,dir):function endOfTextblockHorizontal(view,state,dir){let{$head}=state.selection;if(!$head.parent.isTextblock)return!1;let offset=$head.parentOffset,atStart=!offset,atEnd=offset==$head.parent.content.size,sel=view.domSelection();return maybeRTL.test($head.parent.textContent)&&sel.modify?withFlushedState(view,state,(()=>{let{focusNode:oldNode,focusOffset:oldOff,anchorNode,anchorOffset}=view.domSelectionRange(),oldBidiLevel=sel.caretBidiLevel;sel.modify("move",dir,"character");let parentDOM=$head.depth?view.docView.domAfterPos($head.before()):view.dom,{focusNode:newNode,focusOffset:newOff}=view.domSelectionRange(),result=newNode&&!parentDOM.contains(1==newNode.nodeType?newNode:newNode.parentNode)||oldNode==newNode&&oldOff==newOff;try{sel.collapse(anchorNode,anchorOffset),oldNode&&(oldNode!=anchorNode||oldOff!=anchorOffset)&&sel.extend&&sel.extend(oldNode,oldOff)}catch(_){}return null!=oldBidiLevel&&(sel.caretBidiLevel=oldBidiLevel),result})):"left"==dir||"backward"==dir?atStart:atEnd}(view,state,dir))}class ViewDesc{constructor(parent,children,dom,contentDOM){this.parent=parent,this.children=children,this.dom=dom,this.contentDOM=contentDOM,this.dirty=0,dom.pmViewDesc=this}matchesWidget(widget){return!1}matchesMark(mark){return!1}matchesNode(node,outerDeco,innerDeco){return!1}matchesHack(nodeName){return!1}parseRule(){return null}stopEvent(event){return!1}get size(){let size=0;for(let i=0;i<this.children.length;i++)size+=this.children[i].size;return size}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let i=0;i<this.children.length;i++)this.children[i].destroy()}posBeforeChild(child){for(let i=0,pos=this.posAtStart;;i++){let cur=this.children[i];if(cur==child)return pos;pos+=cur.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(dom,offset,bias){if(this.contentDOM&&this.contentDOM.contains(1==dom.nodeType?dom:dom.parentNode)){if(bias<0){let domBefore,desc;if(dom==this.contentDOM)domBefore=dom.childNodes[offset-1];else{for(;dom.parentNode!=this.contentDOM;)dom=dom.parentNode;domBefore=dom.previousSibling}for(;domBefore&&(!(desc=domBefore.pmViewDesc)||desc.parent!=this);)domBefore=domBefore.previousSibling;return domBefore?this.posBeforeChild(desc)+desc.size:this.posAtStart}{let domAfter,desc;if(dom==this.contentDOM)domAfter=dom.childNodes[offset];else{for(;dom.parentNode!=this.contentDOM;)dom=dom.parentNode;domAfter=dom.nextSibling}for(;domAfter&&(!(desc=domAfter.pmViewDesc)||desc.parent!=this);)domAfter=domAfter.nextSibling;return domAfter?this.posBeforeChild(desc):this.posAtEnd}}let atEnd;if(dom==this.dom&&this.contentDOM)atEnd=offset>domIndex(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))atEnd=2&dom.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==offset)for(let search=dom;;search=search.parentNode){if(search==this.dom){atEnd=!1;break}if(search.previousSibling)break}if(null==atEnd&&offset==dom.childNodes.length)for(let search=dom;;search=search.parentNode){if(search==this.dom){atEnd=!0;break}if(search.nextSibling)break}}return(null==atEnd?bias>0:atEnd)?this.posAtEnd:this.posAtStart}nearestDesc(dom,onlyNodes=!1){for(let first=!0,cur=dom;cur;cur=cur.parentNode){let nodeDOM,desc=this.getDesc(cur);if(desc&&(!onlyNodes||desc.node)){if(!first||!(nodeDOM=desc.nodeDOM)||(1==nodeDOM.nodeType?nodeDOM.contains(1==dom.nodeType?dom:dom.parentNode):nodeDOM==dom))return desc;first=!1}}}getDesc(dom){let desc=dom.pmViewDesc;for(let cur=desc;cur;cur=cur.parent)if(cur==this)return desc}posFromDOM(dom,offset,bias){for(let scan=dom;scan;scan=scan.parentNode){let desc=this.getDesc(scan);if(desc)return desc.localPosFromDOM(dom,offset,bias)}return-1}descAt(pos){for(let i=0,offset=0;i<this.children.length;i++){let child=this.children[i],end=offset+child.size;if(offset==pos&&end!=offset){for(;!child.border&&child.children.length;)child=child.children[0];return child}if(pos<end)return child.descAt(pos-offset-child.border);offset=end}}domFromPos(pos,side){if(!this.contentDOM)return{node:this.dom,offset:0,atom:pos+1};let i=0,offset=0;for(let curPos=0;i<this.children.length;i++){let child=this.children[i],end=curPos+child.size;if(end>pos||child instanceof TrailingHackViewDesc){offset=pos-curPos;break}curPos=end}if(offset)return this.children[i].domFromPos(offset-this.children[i].border,side);for(let prev;i&&!(prev=this.children[i-1]).size&&prev instanceof WidgetViewDesc&&prev.side>=0;i--);if(side<=0){let prev,enter=!0;for(;prev=i?this.children[i-1]:null,prev&&prev.dom.parentNode!=this.contentDOM;i--,enter=!1);return prev&&side&&enter&&!prev.border&&!prev.domAtom?prev.domFromPos(prev.size,side):{node:this.contentDOM,offset:prev?domIndex(prev.dom)+1:0}}{let next,enter=!0;for(;next=i<this.children.length?this.children[i]:null,next&&next.dom.parentNode!=this.contentDOM;i++,enter=!1);return next&&enter&&!next.border&&!next.domAtom?next.domFromPos(0,side):{node:this.contentDOM,offset:next?domIndex(next.dom):this.contentDOM.childNodes.length}}}parseRange(from,to,base=0){if(0==this.children.length)return{node:this.contentDOM,from,to,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let fromOffset=-1,toOffset=-1;for(let offset=base,i=0;;i++){let child=this.children[i],end=offset+child.size;if(-1==fromOffset&&from<=end){let childBase=offset+child.border;if(from>=childBase&&to<=end-child.border&&child.node&&child.contentDOM&&this.contentDOM.contains(child.contentDOM))return child.parseRange(from,to,childBase);from=offset;for(let j=i;j>0;j--){let prev=this.children[j-1];if(prev.size&&prev.dom.parentNode==this.contentDOM&&!prev.emptyChildAt(1)){fromOffset=domIndex(prev.dom)+1;break}from-=prev.size}-1==fromOffset&&(fromOffset=0)}if(fromOffset>-1&&(end>to||i==this.children.length-1)){to=end;for(let j=i+1;j<this.children.length;j++){let next=this.children[j];if(next.size&&next.dom.parentNode==this.contentDOM&&!next.emptyChildAt(-1)){toOffset=domIndex(next.dom);break}to+=next.size}-1==toOffset&&(toOffset=this.contentDOM.childNodes.length);break}offset=end}return{node:this.contentDOM,from,to,fromOffset,toOffset}}emptyChildAt(side){if(this.border||!this.contentDOM||!this.children.length)return!1;let child=this.children[side<0?0:this.children.length-1];return 0==child.size||child.emptyChildAt(side)}domAfterPos(pos){let{node,offset}=this.domFromPos(pos,0);if(1!=node.nodeType||offset==node.childNodes.length)throw new RangeError("No node after pos "+pos);return node.childNodes[offset]}setSelection(anchor,head,root,force=!1){let from=Math.min(anchor,head),to=Math.max(anchor,head);for(let i=0,offset=0;i<this.children.length;i++){let child=this.children[i],end=offset+child.size;if(from>offset&&to<end)return child.setSelection(anchor-offset-child.border,head-offset-child.border,root,force);offset=end}let anchorDOM=this.domFromPos(anchor,anchor?-1:1),headDOM=head==anchor?anchorDOM:this.domFromPos(head,head?-1:1),domSel=root.getSelection(),brKludge=!1;if((gecko||safari)&&anchor==head){let{node,offset}=anchorDOM;if(3==node.nodeType){if(brKludge=!(!offset||"\n"!=node.nodeValue[offset-1]),brKludge&&offset==node.nodeValue.length)for(let after,scan=node;scan;scan=scan.parentNode){if(after=scan.nextSibling){"BR"==after.nodeName&&(anchorDOM=headDOM={node:after.parentNode,offset:domIndex(after)+1});break}let desc=scan.pmViewDesc;if(desc&&desc.node&&desc.node.isBlock)break}}else{let prev=node.childNodes[offset-1];brKludge=prev&&("BR"==prev.nodeName||"false"==prev.contentEditable)}}if(gecko&&domSel.focusNode&&domSel.focusNode!=headDOM.node&&1==domSel.focusNode.nodeType){let after=domSel.focusNode.childNodes[domSel.focusOffset];after&&"false"==after.contentEditable&&(force=!0)}if(!(force||brKludge&&safari)&&isEquivalentPosition(anchorDOM.node,anchorDOM.offset,domSel.anchorNode,domSel.anchorOffset)&&isEquivalentPosition(headDOM.node,headDOM.offset,domSel.focusNode,domSel.focusOffset))return;let domSelExtended=!1;if((domSel.extend||anchor==head)&&!brKludge){domSel.collapse(anchorDOM.node,anchorDOM.offset);try{anchor!=head&&domSel.extend(headDOM.node,headDOM.offset),domSelExtended=!0}catch(_){}}if(!domSelExtended){if(anchor>head){let tmp=anchorDOM;anchorDOM=headDOM,headDOM=tmp}let range=document.createRange();range.setEnd(headDOM.node,headDOM.offset),range.setStart(anchorDOM.node,anchorDOM.offset),domSel.removeAllRanges(),domSel.addRange(range)}}ignoreMutation(mutation){return!this.contentDOM&&"selection"!=mutation.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(from,to){for(let offset=0,i=0;i<this.children.length;i++){let child=this.children[i],end=offset+child.size;if(offset==end?from<=end&&to>=offset:from<end&&to>offset){let startInside=offset+child.border,endInside=end-child.border;if(from>=startInside&&to<=endInside)return this.dirty=from==offset||to==end?2:1,void(from!=startInside||to!=endInside||!child.contentLost&&child.dom.parentNode==this.contentDOM?child.markDirty(from-startInside,to-startInside):child.dirty=3);child.dirty=child.dom!=child.contentDOM||child.dom.parentNode!=this.contentDOM||child.children.length?3:2}offset=end}this.dirty=2}markParentsDirty(){let level=1;for(let node=this.parent;node;node=node.parent,level++){let dirty=1==level?2:1;node.dirty<dirty&&(node.dirty=dirty)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class WidgetViewDesc extends ViewDesc{constructor(parent,widget,view,pos){let self,dom=widget.type.toDOM;if("function"==typeof dom&&(dom=dom(view,(()=>self?self.parent?self.parent.posBeforeChild(self):void 0:pos))),!widget.type.spec.raw){if(1!=dom.nodeType){let wrap=document.createElement("span");wrap.appendChild(dom),dom=wrap}dom.contentEditable="false",dom.classList.add("ProseMirror-widget")}super(parent,[],dom,null),this.widget=widget,this.widget=widget,self=this}matchesWidget(widget){return 0==this.dirty&&widget.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(event){let stop=this.widget.spec.stopEvent;return!!stop&&stop(event)}ignoreMutation(mutation){return"selection"!=mutation.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class CompositionViewDesc extends ViewDesc{constructor(parent,dom,textDOM,text){super(parent,[],dom,null),this.textDOM=textDOM,this.text=text}get size(){return this.text.length}localPosFromDOM(dom,offset){return dom!=this.textDOM?this.posAtStart+(offset?this.size:0):this.posAtStart+offset}domFromPos(pos){return{node:this.textDOM,offset:pos}}ignoreMutation(mut){return"characterData"===mut.type&&mut.target.nodeValue==mut.oldValue}}class MarkViewDesc extends ViewDesc{constructor(parent,mark,dom,contentDOM){super(parent,[],dom,contentDOM),this.mark=mark}static create(parent,mark,inline,view){let custom=view.nodeViews[mark.type.name],spec=custom&&custom(mark,view,inline);return spec&&spec.dom||(spec=DOMSerializer.renderSpec(document,mark.type.spec.toDOM(mark,inline))),new MarkViewDesc(parent,mark,spec.dom,spec.contentDOM||spec.dom)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(mark){return 3!=this.dirty&&this.mark.eq(mark)}markDirty(from,to){if(super.markDirty(from,to),0!=this.dirty){let parent=this.parent;for(;!parent.node;)parent=parent.parent;parent.dirty<this.dirty&&(parent.dirty=this.dirty),this.dirty=0}}slice(from,to,view){let copy=MarkViewDesc.create(this.parent,this.mark,!0,view),nodes=this.children,size=this.size;to<size&&(nodes=replaceNodes(nodes,to,size,view)),from>0&&(nodes=replaceNodes(nodes,0,from,view));for(let i=0;i<nodes.length;i++)nodes[i].parent=copy;return copy.children=nodes,copy}}class NodeViewDesc extends ViewDesc{constructor(parent,node,outerDeco,innerDeco,dom,contentDOM,nodeDOM,view,pos){super(parent,[],dom,contentDOM),this.node=node,this.outerDeco=outerDeco,this.innerDeco=innerDeco,this.nodeDOM=nodeDOM}static create(parent,node,outerDeco,innerDeco,view,pos){let descObj,custom=view.nodeViews[node.type.name],spec=custom&&custom(node,view,(()=>descObj?descObj.parent?descObj.parent.posBeforeChild(descObj):void 0:pos),outerDeco,innerDeco),dom=spec&&spec.dom,contentDOM=spec&&spec.contentDOM;if(node.isText)if(dom){if(3!=dom.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else dom=document.createTextNode(node.text);else dom||({dom,contentDOM}=DOMSerializer.renderSpec(document,node.type.spec.toDOM(node)));contentDOM||node.isText||"BR"==dom.nodeName||(dom.hasAttribute("contenteditable")||(dom.contentEditable="false"),node.type.spec.draggable&&(dom.draggable=!0));let nodeDOM=dom;return dom=applyOuterDeco(dom,outerDeco,node),spec?descObj=new CustomNodeViewDesc(parent,node,outerDeco,innerDeco,dom,contentDOM||null,nodeDOM,spec,view,pos+1):node.isText?new TextViewDesc(parent,node,outerDeco,innerDeco,dom,nodeDOM,view):new NodeViewDesc(parent,node,outerDeco,innerDeco,dom,contentDOM||null,nodeDOM,view,pos+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let rule={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(rule.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let i=this.children.length-1;i>=0;i--){let child=this.children[i];if(this.dom.contains(child.dom.parentNode)){rule.contentElement=child.dom.parentNode;break}}rule.contentElement||(rule.getContent=()=>dist_Fragment.empty)}else rule.contentElement=this.contentDOM;else rule.getContent=()=>this.node.content;return rule}matchesNode(node,outerDeco,innerDeco){return 0==this.dirty&&node.eq(this.node)&&sameOuterDeco(outerDeco,this.outerDeco)&&innerDeco.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(view,pos){let inline=this.node.inlineContent,off=pos,composition=view.composing?this.localCompositionInfo(view,pos):null,localComposition=composition&&composition.pos>-1?composition:null,compositionInChild=composition&&composition.pos<0,updater=new ViewTreeUpdater(this,localComposition&&localComposition.node,view);!function iterDeco(parent,deco,onWidget,onNode){let locals=deco.locals(parent),offset=0;if(0==locals.length){for(let i=0;i<parent.childCount;i++){let child=parent.child(i);onNode(child,locals,deco.forChild(offset,child),i),offset+=child.nodeSize}return}let decoIndex=0,active=[],restNode=null;for(let parentIndex=0;;){let widget,widgets,child,index;for(;decoIndex<locals.length&&locals[decoIndex].to==offset;){let next=locals[decoIndex++];next.widget&&(widget?(widgets||(widgets=[widget])).push(next):widget=next)}if(widget)if(widgets){widgets.sort(compareSide);for(let i=0;i<widgets.length;i++)onWidget(widgets[i],parentIndex,!!restNode)}else onWidget(widget,parentIndex,!!restNode);if(restNode)index=-1,child=restNode,restNode=null;else{if(!(parentIndex<parent.childCount))break;index=parentIndex,child=parent.child(parentIndex++)}for(let i=0;i<active.length;i++)active[i].to<=offset&&active.splice(i--,1);for(;decoIndex<locals.length&&locals[decoIndex].from<=offset&&locals[decoIndex].to>offset;)active.push(locals[decoIndex++]);let end=offset+child.nodeSize;if(child.isText){let cutAt=end;decoIndex<locals.length&&locals[decoIndex].from<cutAt&&(cutAt=locals[decoIndex].from);for(let i=0;i<active.length;i++)active[i].to<cutAt&&(cutAt=active[i].to);cutAt<end&&(restNode=child.cut(cutAt-offset),child=child.cut(0,cutAt-offset),end=cutAt,index=-1)}onNode(child,child.isInline&&!child.isLeaf?active.filter((d=>!d.inline)):active.slice(),deco.forChild(offset,child),index),offset=end}}(this.node,this.innerDeco,((widget,i,insideNode)=>{widget.spec.marks?updater.syncToMarks(widget.spec.marks,inline,view):widget.type.side>=0&&!insideNode&&updater.syncToMarks(i==this.node.childCount?Mark.none:this.node.child(i).marks,inline,view),updater.placeWidget(widget,view,off)}),((child,outerDeco,innerDeco,i)=>{let compIndex;updater.syncToMarks(child.marks,inline,view),updater.findNodeMatch(child,outerDeco,innerDeco,i)||compositionInChild&&view.state.selection.from>off&&view.state.selection.to<off+child.nodeSize&&(compIndex=updater.findIndexWithChild(composition.node))>-1&&updater.updateNodeAt(child,outerDeco,innerDeco,compIndex,view)||updater.updateNextNode(child,outerDeco,innerDeco,view,i,off)||updater.addNode(child,outerDeco,innerDeco,view,off),off+=child.nodeSize})),updater.syncToMarks([],inline,view),this.node.isTextblock&&updater.addTextblockHacks(),updater.destroyRest(),(updater.changed||2==this.dirty)&&(localComposition&&this.protectLocalComposition(view,localComposition),renderDescs(this.contentDOM,this.children,view),ios&&function iosHacks(dom){if("UL"==dom.nodeName||"OL"==dom.nodeName){let oldCSS=dom.style.cssText;dom.style.cssText=oldCSS+"; list-style: square !important",window.getComputedStyle(dom).listStyle,dom.style.cssText=oldCSS}}(this.dom))}localCompositionInfo(view,pos){let{from,to}=view.state.selection;if(!(view.state.selection instanceof dist_TextSelection)||from<pos||to>pos+this.node.content.size)return null;let sel=view.domSelectionRange(),textNode=function nearbyTextNode(node,offset){for(;;){if(3==node.nodeType)return node;if(1==node.nodeType&&offset>0){if(node.childNodes.length>offset&&3==node.childNodes[offset].nodeType)return node.childNodes[offset];offset=nodeSize(node=node.childNodes[offset-1])}else{if(!(1==node.nodeType&&offset<node.childNodes.length))return null;node=node.childNodes[offset],offset=0}}}(sel.focusNode,sel.focusOffset);if(!textNode||!this.dom.contains(textNode.parentNode))return null;if(this.node.inlineContent){let text=textNode.nodeValue,textPos=function findTextInFragment(frag,text,from,to){for(let i=0,pos=0;i<frag.childCount&&pos<=to;){let child=frag.child(i++),childStart=pos;if(pos+=child.nodeSize,!child.isText)continue;let str=child.text;for(;i<frag.childCount;){let next=frag.child(i++);if(pos+=next.nodeSize,!next.isText)break;str+=next.text}if(pos>=from){let found=childStart<to?str.lastIndexOf(text,to-childStart-1):-1;if(found>=0&&found+text.length+childStart>=from)return childStart+found;if(from==to&&str.length>=to+text.length-childStart&&str.slice(to-childStart,to-childStart+text.length)==text)return to}}return-1}(this.node.content,text,from-pos,to-pos);return textPos<0?null:{node:textNode,pos:textPos,text}}return{node:textNode,pos:-1,text:""}}protectLocalComposition(view,{node,pos,text}){if(this.getDesc(node))return;let topNode=node;for(;topNode.parentNode!=this.contentDOM;topNode=topNode.parentNode){for(;topNode.previousSibling;)topNode.parentNode.removeChild(topNode.previousSibling);for(;topNode.nextSibling;)topNode.parentNode.removeChild(topNode.nextSibling);topNode.pmViewDesc&&(topNode.pmViewDesc=void 0)}let desc=new CompositionViewDesc(this,topNode,node,text);view.input.compositionNodes.push(desc),this.children=replaceNodes(this.children,pos,pos+text.length,view,desc)}update(node,outerDeco,innerDeco,view){return!(3==this.dirty||!node.sameMarkup(this.node))&&(this.updateInner(node,outerDeco,innerDeco,view),!0)}updateInner(node,outerDeco,innerDeco,view){this.updateOuterDeco(outerDeco),this.node=node,this.innerDeco=innerDeco,this.contentDOM&&this.updateChildren(view,this.posAtStart),this.dirty=0}updateOuterDeco(outerDeco){if(sameOuterDeco(outerDeco,this.outerDeco))return;let needsWrap=1!=this.nodeDOM.nodeType,oldDOM=this.dom;this.dom=patchOuterDeco(this.dom,this.nodeDOM,computeOuterDeco(this.outerDeco,this.node,needsWrap),computeOuterDeco(outerDeco,this.node,needsWrap)),this.dom!=oldDOM&&(oldDOM.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=outerDeco}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function docViewDesc(doc,outerDeco,innerDeco,dom,view){applyOuterDeco(dom,outerDeco,doc);let docView=new NodeViewDesc(void 0,doc,outerDeco,innerDeco,dom,dom,dom,view,0);return docView.contentDOM&&docView.updateChildren(view,0),docView}class TextViewDesc extends NodeViewDesc{constructor(parent,node,outerDeco,innerDeco,dom,nodeDOM,view){super(parent,node,outerDeco,innerDeco,dom,null,nodeDOM,view,0)}parseRule(){let skip=this.nodeDOM.parentNode;for(;skip&&skip!=this.dom&&!skip.pmIsDeco;)skip=skip.parentNode;return{skip:skip||!0}}update(node,outerDeco,innerDeco,view){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!node.sameMarkup(this.node))&&(this.updateOuterDeco(outerDeco),0==this.dirty&&node.text==this.node.text||node.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=node.text,view.trackWrites==this.nodeDOM&&(view.trackWrites=null)),this.node=node,this.dirty=0,!0)}inParent(){let parentDOM=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==parentDOM)return!0;return!1}domFromPos(pos){return{node:this.nodeDOM,offset:pos}}localPosFromDOM(dom,offset,bias){return dom==this.nodeDOM?this.posAtStart+Math.min(offset,this.node.text.length):super.localPosFromDOM(dom,offset,bias)}ignoreMutation(mutation){return"characterData"!=mutation.type&&"selection"!=mutation.type}slice(from,to,view){let node=this.node.cut(from,to),dom=document.createTextNode(node.text);return new TextViewDesc(this.parent,node,this.outerDeco,this.innerDeco,dom,dom,view)}markDirty(from,to){super.markDirty(from,to),this.dom==this.nodeDOM||0!=from&&to!=this.nodeDOM.nodeValue.length||(this.dirty=3)}get domAtom(){return!1}}class TrailingHackViewDesc extends ViewDesc{parseRule(){return{ignore:!0}}matchesHack(nodeName){return 0==this.dirty&&this.dom.nodeName==nodeName}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class CustomNodeViewDesc extends NodeViewDesc{constructor(parent,node,outerDeco,innerDeco,dom,contentDOM,nodeDOM,spec,view,pos){super(parent,node,outerDeco,innerDeco,dom,contentDOM,nodeDOM,view,pos),this.spec=spec}update(node,outerDeco,innerDeco,view){if(3==this.dirty)return!1;if(this.spec.update){let result=this.spec.update(node,outerDeco,innerDeco);return result&&this.updateInner(node,outerDeco,innerDeco,view),result}return!(!this.contentDOM&&!node.isLeaf)&&super.update(node,outerDeco,innerDeco,view)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(anchor,head,root,force){this.spec.setSelection?this.spec.setSelection(anchor,head,root):super.setSelection(anchor,head,root,force)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(event){return!!this.spec.stopEvent&&this.spec.stopEvent(event)}ignoreMutation(mutation){return this.spec.ignoreMutation?this.spec.ignoreMutation(mutation):super.ignoreMutation(mutation)}}function renderDescs(parentDOM,descs,view){let dom=parentDOM.firstChild,written=!1;for(let i=0;i<descs.length;i++){let desc=descs[i],childDOM=desc.dom;if(childDOM.parentNode==parentDOM){for(;childDOM!=dom;)dom=rm(dom),written=!0;dom=dom.nextSibling}else written=!0,parentDOM.insertBefore(childDOM,dom);if(desc instanceof MarkViewDesc){let pos=dom?dom.previousSibling:parentDOM.lastChild;renderDescs(desc.contentDOM,desc.children,view),dom=pos?pos.nextSibling:parentDOM.firstChild}}for(;dom;)dom=rm(dom),written=!0;written&&view.trackWrites==parentDOM&&(view.trackWrites=null)}const OuterDecoLevel=function(nodeName){nodeName&&(this.nodeName=nodeName)};OuterDecoLevel.prototype=Object.create(null);const noDeco=[new OuterDecoLevel];function computeOuterDeco(outerDeco,node,needsWrap){if(0==outerDeco.length)return noDeco;let top=needsWrap?noDeco[0]:new OuterDecoLevel,result=[top];for(let i=0;i<outerDeco.length;i++){let attrs=outerDeco[i].type.attrs;if(attrs){attrs.nodeName&&result.push(top=new OuterDecoLevel(attrs.nodeName));for(let name in attrs){let val=attrs[name];null!=val&&(needsWrap&&1==result.length&&result.push(top=new OuterDecoLevel(node.isInline?"span":"div")),"class"==name?top.class=(top.class?top.class+" ":"")+val:"style"==name?top.style=(top.style?top.style+";":"")+val:"nodeName"!=name&&(top[name]=val))}}}return result}function patchOuterDeco(outerDOM,nodeDOM,prevComputed,curComputed){if(prevComputed==noDeco&&curComputed==noDeco)return nodeDOM;let curDOM=nodeDOM;for(let i=0;i<curComputed.length;i++){let deco=curComputed[i],prev=prevComputed[i];if(i){let parent;prev&&prev.nodeName==deco.nodeName&&curDOM!=outerDOM&&(parent=curDOM.parentNode)&&parent.nodeName.toLowerCase()==deco.nodeName||(parent=document.createElement(deco.nodeName),parent.pmIsDeco=!0,parent.appendChild(curDOM),prev=noDeco[0]),curDOM=parent}patchAttributes(curDOM,prev||noDeco[0],deco)}return curDOM}function patchAttributes(dom,prev,cur){for(let name in prev)"class"==name||"style"==name||"nodeName"==name||name in cur||dom.removeAttribute(name);for(let name in cur)"class"!=name&&"style"!=name&&"nodeName"!=name&&cur[name]!=prev[name]&&dom.setAttribute(name,cur[name]);if(prev.class!=cur.class){let prevList=prev.class?prev.class.split(" ").filter(Boolean):[],curList=cur.class?cur.class.split(" ").filter(Boolean):[];for(let i=0;i<prevList.length;i++)-1==curList.indexOf(prevList[i])&&dom.classList.remove(prevList[i]);for(let i=0;i<curList.length;i++)-1==prevList.indexOf(curList[i])&&dom.classList.add(curList[i]);0==dom.classList.length&&dom.removeAttribute("class")}if(prev.style!=cur.style){if(prev.style){let m,prop=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;for(;m=prop.exec(prev.style);)dom.style.removeProperty(m[1])}cur.style&&(dom.style.cssText+=cur.style)}}function applyOuterDeco(dom,deco,node){return patchOuterDeco(dom,dom,noDeco,computeOuterDeco(deco,node,1!=dom.nodeType))}function sameOuterDeco(a,b){if(a.length!=b.length)return!1;for(let i=0;i<a.length;i++)if(!a[i].type.eq(b[i].type))return!1;return!0}function rm(dom){let next=dom.nextSibling;return dom.parentNode.removeChild(dom),next}class ViewTreeUpdater{constructor(top,lock,view){this.lock=lock,this.view=view,this.index=0,this.stack=[],this.changed=!1,this.top=top,this.preMatch=function preMatch(frag,parentDesc){let curDesc=parentDesc,descI=curDesc.children.length,fI=frag.childCount,matched=new Map,matches=[];outer:for(;fI>0;){let desc;for(;;)if(descI){let next=curDesc.children[descI-1];if(!(next instanceof MarkViewDesc)){desc=next,descI--;break}curDesc=next,descI=next.children.length}else{if(curDesc==parentDesc)break outer;descI=curDesc.parent.children.indexOf(curDesc),curDesc=curDesc.parent}let node=desc.node;if(node){if(node!=frag.child(fI-1))break;--fI,matched.set(desc,fI),matches.push(desc)}}return{index:fI,matched,matches:matches.reverse()}}(top.node.content,top)}destroyBetween(start,end){if(start!=end){for(let i=start;i<end;i++)this.top.children[i].destroy();this.top.children.splice(start,end-start),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(marks,inline,view){let keep=0,depth=this.stack.length>>1,maxKeep=Math.min(depth,marks.length);for(;keep<maxKeep&&(keep==depth-1?this.top:this.stack[keep+1<<1]).matchesMark(marks[keep])&&!1!==marks[keep].type.spec.spanning;)keep++;for(;keep<depth;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),depth--;for(;depth<marks.length;){this.stack.push(this.top,this.index+1);let found=-1;for(let i=this.index;i<Math.min(this.index+3,this.top.children.length);i++){let next=this.top.children[i];if(next.matchesMark(marks[depth])&&!this.isLocked(next.dom)){found=i;break}}if(found>-1)found>this.index&&(this.changed=!0,this.destroyBetween(this.index,found)),this.top=this.top.children[this.index];else{let markDesc=MarkViewDesc.create(this.top,marks[depth],inline,view);this.top.children.splice(this.index,0,markDesc),this.top=markDesc,this.changed=!0}this.index=0,depth++}}findNodeMatch(node,outerDeco,innerDeco,index){let targetDesc,found=-1;if(index>=this.preMatch.index&&(targetDesc=this.preMatch.matches[index-this.preMatch.index]).parent==this.top&&targetDesc.matchesNode(node,outerDeco,innerDeco))found=this.top.children.indexOf(targetDesc,this.index);else for(let i=this.index,e=Math.min(this.top.children.length,i+5);i<e;i++){let child=this.top.children[i];if(child.matchesNode(node,outerDeco,innerDeco)&&!this.preMatch.matched.has(child)){found=i;break}}return!(found<0)&&(this.destroyBetween(this.index,found),this.index++,!0)}updateNodeAt(node,outerDeco,innerDeco,index,view){let child=this.top.children[index];return 3==child.dirty&&child.dom==child.contentDOM&&(child.dirty=2),!!child.update(node,outerDeco,innerDeco,view)&&(this.destroyBetween(this.index,index),this.index++,!0)}findIndexWithChild(domNode){for(;;){let parent=domNode.parentNode;if(!parent)return-1;if(parent==this.top.contentDOM){let desc=domNode.pmViewDesc;if(desc)for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==desc)return i;return-1}domNode=parent}}updateNextNode(node,outerDeco,innerDeco,view,index,pos){for(let i=this.index;i<this.top.children.length;i++){let next=this.top.children[i];if(next instanceof NodeViewDesc){let preMatch=this.preMatch.matched.get(next);if(null!=preMatch&&preMatch!=index)return!1;let updated,nextDOM=next.dom,locked=this.isLocked(nextDOM)&&!(node.isText&&next.node&&next.node.isText&&next.nodeDOM.nodeValue==node.text&&3!=next.dirty&&sameOuterDeco(outerDeco,next.outerDeco));if(!locked&&next.update(node,outerDeco,innerDeco,view))return this.destroyBetween(this.index,i),next.dom!=nextDOM&&(this.changed=!0),this.index++,!0;if(!locked&&(updated=this.recreateWrapper(next,node,outerDeco,innerDeco,view,pos)))return this.top.children[this.index]=updated,updated.contentDOM&&(updated.dirty=2,updated.updateChildren(view,pos+1),updated.dirty=0),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(next,node,outerDeco,innerDeco,view,pos){if(next.dirty||node.isAtom||!next.children.length||!next.node.content.eq(node.content))return null;let wrapper=NodeViewDesc.create(this.top,node,outerDeco,innerDeco,view,pos);if(wrapper.contentDOM){wrapper.children=next.children,next.children=[];for(let ch of wrapper.children)ch.parent=wrapper}return next.destroy(),wrapper}addNode(node,outerDeco,innerDeco,view,pos){let desc=NodeViewDesc.create(this.top,node,outerDeco,innerDeco,view,pos);desc.contentDOM&&desc.updateChildren(view,pos+1),this.top.children.splice(this.index++,0,desc),this.changed=!0}placeWidget(widget,view,pos){let next=this.index<this.top.children.length?this.top.children[this.index]:null;if(!next||!next.matchesWidget(widget)||widget!=next.widget&&next.widget.type.toDOM.parentNode){let desc=new WidgetViewDesc(this.top,widget,view,pos);this.top.children.splice(this.index++,0,desc),this.changed=!0}else this.index++}addTextblockHacks(){let lastChild=this.top.children[this.index-1],parent=this.top;for(;lastChild instanceof MarkViewDesc;)parent=lastChild,lastChild=parent.children[parent.children.length-1];(!lastChild||!(lastChild instanceof TextViewDesc)||/\n$/.test(lastChild.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(lastChild.node.text))&&((safari||chrome)&&lastChild&&"false"==lastChild.dom.contentEditable&&this.addHackNode("IMG",parent),this.addHackNode("BR",this.top))}addHackNode(nodeName,parent){if(parent==this.top&&this.index<parent.children.length&&parent.children[this.index].matchesHack(nodeName))this.index++;else{let dom=document.createElement(nodeName);"IMG"==nodeName&&(dom.className="ProseMirror-separator",dom.alt=""),"BR"==nodeName&&(dom.className="ProseMirror-trailingBreak");let hack=new TrailingHackViewDesc(this.top,[],dom,null);parent!=this.top?parent.children.push(hack):parent.children.splice(this.index++,0,hack),this.changed=!0}}isLocked(node){return this.lock&&(node==this.lock||1==node.nodeType&&node.contains(this.lock.parentNode))}}function compareSide(a,b){return a.type.side-b.type.side}function replaceNodes(nodes,from,to,view,replacement){let result=[];for(let i=0,off=0;i<nodes.length;i++){let child=nodes[i],start=off,end=off+=child.size;start>=to||end<=from?result.push(child):(start<from&&result.push(child.slice(0,from-start,view)),replacement&&(result.push(replacement),replacement=void 0),end>to&&result.push(child.slice(to-start,child.size,view)))}return result}function selectionFromDOM(view,origin=null){let domSel=view.domSelectionRange(),doc=view.state.doc;if(!domSel.focusNode)return null;let nearestDesc=view.docView.nearestDesc(domSel.focusNode),inWidget=nearestDesc&&0==nearestDesc.size,head=view.docView.posFromDOM(domSel.focusNode,domSel.focusOffset,1);if(head<0)return null;let $anchor,selection,$head=doc.resolve(head);if(selectionCollapsed(domSel)){for($anchor=$head;nearestDesc&&!nearestDesc.node;)nearestDesc=nearestDesc.parent;let nearestDescNode=nearestDesc.node;if(nearestDesc&&nearestDescNode.isAtom&&dist_NodeSelection.isSelectable(nearestDescNode)&&nearestDesc.parent&&(!nearestDescNode.isInline||!function isOnEdge(node,offset,parent){for(let atStart=0==offset,atEnd=offset==nodeSize(node);atStart||atEnd;){if(node==parent)return!0;let index=domIndex(node);if(!(node=node.parentNode))return!1;atStart=atStart&&0==index,atEnd=atEnd&&index==nodeSize(node)}}(domSel.focusNode,domSel.focusOffset,nearestDesc.dom))){let pos=nearestDesc.posBefore;selection=new dist_NodeSelection(head==pos?$head:doc.resolve(pos))}}else{let anchor=view.docView.posFromDOM(domSel.anchorNode,domSel.anchorOffset,1);if(anchor<0)return null;$anchor=doc.resolve(anchor)}if(!selection){selection=selectionBetween(view,$anchor,$head,"pointer"==origin||view.state.selection.head<$head.pos&&!inWidget?1:-1)}return selection}function editorOwnsSelection(view){return view.editable?view.hasFocus():hasSelection(view)&&document.activeElement&&document.activeElement.contains(view.dom)}function selectionToDOM(view,force=!1){let sel=view.state.selection;if(syncNodeSelection(view,sel),editorOwnsSelection(view)){if(!force&&view.input.mouseDown&&view.input.mouseDown.allowDefault&&chrome){let domSel=view.domSelectionRange(),curSel=view.domObserver.currentSelection;if(domSel.anchorNode&&curSel.anchorNode&&isEquivalentPosition(domSel.anchorNode,domSel.anchorOffset,curSel.anchorNode,curSel.anchorOffset))return view.input.mouseDown.delayedSelectionSync=!0,void view.domObserver.setCurSelection()}if(view.domObserver.disconnectSelection(),view.cursorWrapper)!function selectCursorWrapper(view){let domSel=view.domSelection(),range=document.createRange(),node=view.cursorWrapper.dom,img="IMG"==node.nodeName;img?range.setEnd(node.parentNode,domIndex(node)+1):range.setEnd(node,0);range.collapse(!1),domSel.removeAllRanges(),domSel.addRange(range),!img&&!view.state.selection.visible&&ie&&ie_version<=11&&(node.disabled=!0,node.disabled=!1)}(view);else{let resetEditableFrom,resetEditableTo,{anchor,head}=sel;!brokenSelectBetweenUneditable||sel instanceof dist_TextSelection||(sel.$from.parent.inlineContent||(resetEditableFrom=temporarilyEditableNear(view,sel.from)),sel.empty||sel.$from.parent.inlineContent||(resetEditableTo=temporarilyEditableNear(view,sel.to))),view.docView.setSelection(anchor,head,view.root,force),brokenSelectBetweenUneditable&&(resetEditableFrom&&resetEditable(resetEditableFrom),resetEditableTo&&resetEditable(resetEditableTo)),sel.visible?view.dom.classList.remove("ProseMirror-hideselection"):(view.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function removeClassOnSelectionChange(view){let doc=view.dom.ownerDocument;doc.removeEventListener("selectionchange",view.input.hideSelectionGuard);let domSel=view.domSelectionRange(),node=domSel.anchorNode,offset=domSel.anchorOffset;doc.addEventListener("selectionchange",view.input.hideSelectionGuard=()=>{domSel.anchorNode==node&&domSel.anchorOffset==offset||(doc.removeEventListener("selectionchange",view.input.hideSelectionGuard),setTimeout((()=>{editorOwnsSelection(view)&&!view.state.selection.visible||view.dom.classList.remove("ProseMirror-hideselection")}),20))})}(view))}view.domObserver.setCurSelection(),view.domObserver.connectSelection()}}const brokenSelectBetweenUneditable=safari||chrome&&chrome_version<63;function temporarilyEditableNear(view,pos){let{node,offset}=view.docView.domFromPos(pos,0),after=offset<node.childNodes.length?node.childNodes[offset]:null,before=offset?node.childNodes[offset-1]:null;if(safari&&after&&"false"==after.contentEditable)return setEditable(after);if(!(after&&"false"!=after.contentEditable||before&&"false"!=before.contentEditable)){if(after)return setEditable(after);if(before)return setEditable(before)}}function setEditable(element){return element.contentEditable="true",safari&&element.draggable&&(element.draggable=!1,element.wasDraggable=!0),element}function resetEditable(element){element.contentEditable="false",element.wasDraggable&&(element.draggable=!0,element.wasDraggable=null)}function syncNodeSelection(view,sel){if(sel instanceof dist_NodeSelection){let desc=view.docView.descAt(sel.from);desc!=view.lastSelectedViewDesc&&(clearNodeSelection(view),desc&&desc.selectNode(),view.lastSelectedViewDesc=desc)}else clearNodeSelection(view)}function clearNodeSelection(view){view.lastSelectedViewDesc&&(view.lastSelectedViewDesc.parent&&view.lastSelectedViewDesc.deselectNode(),view.lastSelectedViewDesc=void 0)}function selectionBetween(view,$anchor,$head,bias){return view.someProp("createSelectionBetween",(f=>f(view,$anchor,$head)))||dist_TextSelection.between($anchor,$head,bias)}function hasFocusAndSelection(view){return!(view.editable&&!view.hasFocus())&&hasSelection(view)}function hasSelection(view){let sel=view.domSelectionRange();if(!sel.anchorNode)return!1;try{return view.dom.contains(3==sel.anchorNode.nodeType?sel.anchorNode.parentNode:sel.anchorNode)&&(view.editable||view.dom.contains(3==sel.focusNode.nodeType?sel.focusNode.parentNode:sel.focusNode))}catch(_){return!1}}function moveSelectionBlock(state,dir){let{$anchor,$head}=state.selection,$side=dir>0?$anchor.max($head):$anchor.min($head),$start=$side.parent.inlineContent?$side.depth?state.doc.resolve(dir>0?$side.after():$side.before()):null:$side;return $start&&Selection.findFrom($start,dir)}function apply(view,sel){return view.dispatch(view.state.tr.setSelection(sel).scrollIntoView()),!0}function selectHorizontally(view,dir,mods){let sel=view.state.selection;if(!(sel instanceof dist_TextSelection)){if(sel instanceof dist_NodeSelection&&sel.node.isInline)return apply(view,new dist_TextSelection(dir>0?sel.$to:sel.$from));{let next=moveSelectionBlock(view.state,dir);return!!next&&apply(view,next)}}if(!sel.empty||mods.indexOf("s")>-1)return!1;if(view.endOfTextblock(dir>0?"forward":"backward")){let next=moveSelectionBlock(view.state,dir);return!!(next&&next instanceof dist_NodeSelection)&&apply(view,next)}if(!(dist_mac&&mods.indexOf("m")>-1)){let desc,$head=sel.$head,node=$head.textOffset?null:dir<0?$head.nodeBefore:$head.nodeAfter;if(!node||node.isText)return!1;let nodePos=dir<0?$head.pos-node.nodeSize:$head.pos;return!!(node.isAtom||(desc=view.docView.descAt(nodePos))&&!desc.contentDOM)&&(dist_NodeSelection.isSelectable(node)?apply(view,new dist_NodeSelection(dir<0?view.state.doc.resolve($head.pos-node.nodeSize):$head)):!!webkit&&apply(view,new dist_TextSelection(view.state.doc.resolve(dir<0?nodePos:nodePos+node.nodeSize))))}}function nodeLen(node){return 3==node.nodeType?node.nodeValue.length:node.childNodes.length}function isIgnorable(dom,dir){if("false"==dom.contentEditable)return!0;let desc=dom.pmViewDesc;return desc&&0==desc.size&&(dir<0||dom.nextSibling||"BR"!=dom.nodeName)}function skipIgnoredNodes(view,dir){return dir<0?function skipIgnoredNodesBefore(view){let sel=view.domSelectionRange(),node=sel.focusNode,offset=sel.focusOffset;if(!node)return;let moveNode,moveOffset,force=!1;gecko&&1==node.nodeType&&offset<nodeLen(node)&&isIgnorable(node.childNodes[offset],-1)&&(force=!0);for(;;)if(offset>0){if(1!=node.nodeType)break;{let before=node.childNodes[offset-1];if(isIgnorable(before,-1))moveNode=node,moveOffset=--offset;else{if(3!=before.nodeType)break;node=before,offset=node.nodeValue.length}}}else{if(isBlockNode(node))break;{let prev=node.previousSibling;for(;prev&&isIgnorable(prev,-1);)moveNode=node.parentNode,moveOffset=domIndex(prev),prev=prev.previousSibling;if(prev)node=prev,offset=nodeLen(node);else{if(node=node.parentNode,node==view.dom)break;offset=0}}}force?setSelFocus(view,node,offset):moveNode&&setSelFocus(view,moveNode,moveOffset)}(view):function skipIgnoredNodesAfter(view){let sel=view.domSelectionRange(),node=sel.focusNode,offset=sel.focusOffset;if(!node)return;let moveNode,moveOffset,len=nodeLen(node);for(;;)if(offset<len){if(1!=node.nodeType)break;if(!isIgnorable(node.childNodes[offset],1))break;moveNode=node,moveOffset=++offset}else{if(isBlockNode(node))break;{let next=node.nextSibling;for(;next&&isIgnorable(next,1);)moveNode=next.parentNode,moveOffset=domIndex(next)+1,next=next.nextSibling;if(next)node=next,offset=0,len=nodeLen(node);else{if(node=node.parentNode,node==view.dom)break;offset=len=0}}}moveNode&&setSelFocus(view,moveNode,moveOffset)}(view)}function isBlockNode(dom){let desc=dom.pmViewDesc;return desc&&desc.node&&desc.node.isBlock}function setSelFocus(view,node,offset){if(3!=node.nodeType){let before,after;(after=function textNodeAfter(node,offset){for(;node&&offset==node.childNodes.length&&!hasBlockDesc(node);)offset=domIndex(node)+1,node=node.parentNode;for(;node&&offset<node.childNodes.length;){let next=node.childNodes[offset];if(3==next.nodeType)return next;if(1==next.nodeType&&"false"==next.contentEditable)break;node=next,offset=0}}(node,offset))?(node=after,offset=0):(before=function textNodeBefore(node,offset){for(;node&&!offset&&!hasBlockDesc(node);)offset=domIndex(node),node=node.parentNode;for(;node&&offset;){let next=node.childNodes[offset-1];if(3==next.nodeType)return next;if(1==next.nodeType&&"false"==next.contentEditable)break;offset=(node=next).childNodes.length}}(node,offset))&&(node=before,offset=before.nodeValue.length)}let sel=view.domSelection();if(selectionCollapsed(sel)){let range=document.createRange();range.setEnd(node,offset),range.setStart(node,offset),sel.removeAllRanges(),sel.addRange(range)}else sel.extend&&sel.extend(node,offset);view.domObserver.setCurSelection();let{state}=view;setTimeout((()=>{view.state==state&&selectionToDOM(view)}),50)}function findDirection(view,pos){let $pos=view.state.doc.resolve(pos);if(!chrome&&!windows&&$pos.parent.inlineContent){let coords=view.coordsAtPos(pos);if(pos>$pos.start()){let before=view.coordsAtPos(pos-1),mid=(before.top+before.bottom)/2;if(mid>coords.top&&mid<coords.bottom&&Math.abs(before.left-coords.left)>1)return before.left<coords.left?"ltr":"rtl"}if(pos<$pos.end()){let after=view.coordsAtPos(pos+1),mid=(after.top+after.bottom)/2;if(mid>coords.top&&mid<coords.bottom&&Math.abs(after.left-coords.left)>1)return after.left>coords.left?"ltr":"rtl"}}return"rtl"==getComputedStyle(view.dom).direction?"rtl":"ltr"}function selectVertically(view,dir,mods){let sel=view.state.selection;if(sel instanceof dist_TextSelection&&!sel.empty||mods.indexOf("s")>-1)return!1;if(dist_mac&&mods.indexOf("m")>-1)return!1;let{$from,$to}=sel;if(!$from.parent.inlineContent||view.endOfTextblock(dir<0?"up":"down")){let next=moveSelectionBlock(view.state,dir);if(next&&next instanceof dist_NodeSelection)return apply(view,next)}if(!$from.parent.inlineContent){let side=dir<0?$from:$to,beyond=sel instanceof AllSelection?Selection.near(side,dir):Selection.findFrom(side,dir);return!!beyond&&apply(view,beyond)}return!1}function stopNativeHorizontalDelete(view,dir){if(!(view.state.selection instanceof dist_TextSelection))return!0;let{$head,$anchor,empty}=view.state.selection;if(!$head.sameParent($anchor))return!0;if(!empty)return!1;if(view.endOfTextblock(dir>0?"forward":"backward"))return!0;let nextNode=!$head.textOffset&&(dir<0?$head.nodeBefore:$head.nodeAfter);if(nextNode&&!nextNode.isText){let tr=view.state.tr;return dir<0?tr.delete($head.pos-nextNode.nodeSize,$head.pos):tr.delete($head.pos,$head.pos+nextNode.nodeSize),view.dispatch(tr),!0}return!1}function switchEditable(view,node,state){view.domObserver.stop(),node.contentEditable=state,view.domObserver.start()}function captureKeyDown(view,event){let code=event.keyCode,mods=function getMods(event){let result="";return event.ctrlKey&&(result+="c"),event.metaKey&&(result+="m"),event.altKey&&(result+="a"),event.shiftKey&&(result+="s"),result}(event);if(8==code||dist_mac&&72==code&&"c"==mods)return stopNativeHorizontalDelete(view,-1)||skipIgnoredNodes(view,-1);if(46==code&&!event.shiftKey||dist_mac&&68==code&&"c"==mods)return stopNativeHorizontalDelete(view,1)||skipIgnoredNodes(view,1);if(13==code||27==code)return!0;if(37==code||dist_mac&&66==code&&"c"==mods){let dir=37==code?"ltr"==findDirection(view,view.state.selection.from)?-1:1:-1;return selectHorizontally(view,dir,mods)||skipIgnoredNodes(view,dir)}if(39==code||dist_mac&&70==code&&"c"==mods){let dir=39==code?"ltr"==findDirection(view,view.state.selection.from)?1:-1:1;return selectHorizontally(view,dir,mods)||skipIgnoredNodes(view,dir)}return 38==code||dist_mac&&80==code&&"c"==mods?selectVertically(view,-1,mods)||skipIgnoredNodes(view,-1):40==code||dist_mac&&78==code&&"c"==mods?function safariDownArrowBug(view){if(!safari||view.state.selection.$head.parentOffset>0)return!1;let{focusNode,focusOffset}=view.domSelectionRange();if(focusNode&&1==focusNode.nodeType&&0==focusOffset&&focusNode.firstChild&&"false"==focusNode.firstChild.contentEditable){let child=focusNode.firstChild;switchEditable(view,child,"true"),setTimeout((()=>switchEditable(view,child,"false")),20)}return!1}(view)||selectVertically(view,1,mods)||skipIgnoredNodes(view,1):mods==(dist_mac?"m":"c")&&(66==code||73==code||89==code||90==code)}function serializeForClipboard(view,slice){view.someProp("transformCopied",(f=>{slice=f(slice,view)}));let context=[],{content,openStart,openEnd}=slice;for(;openStart>1&&openEnd>1&&1==content.childCount&&1==content.firstChild.childCount;){openStart--,openEnd--;let node=content.firstChild;context.push(node.type.name,node.attrs!=node.type.defaultAttrs?node.attrs:null),content=node.content}let serializer=view.someProp("clipboardSerializer")||DOMSerializer.fromSchema(view.state.schema),doc=detachedDoc(),wrap=doc.createElement("div");wrap.appendChild(serializer.serializeFragment(content,{document:doc}));let needsWrap,firstChild=wrap.firstChild,wrappers=0;for(;firstChild&&1==firstChild.nodeType&&(needsWrap=wrapMap[firstChild.nodeName.toLowerCase()]);){for(let i=needsWrap.length-1;i>=0;i--){let wrapper=doc.createElement(needsWrap[i]);for(;wrap.firstChild;)wrapper.appendChild(wrap.firstChild);wrap.appendChild(wrapper),wrappers++}firstChild=wrap.firstChild}return firstChild&&1==firstChild.nodeType&&firstChild.setAttribute("data-pm-slice",`${openStart} ${openEnd}${wrappers?` -${wrappers}`:""} ${JSON.stringify(context)}`),{dom:wrap,text:view.someProp("clipboardTextSerializer",(f=>f(slice,view)))||slice.content.textBetween(0,slice.content.size,"\n\n")}}function parseFromClipboard(view,text,html,plainText,$context){let dom,slice,inCode=$context.parent.type.spec.code;if(!html&&!text)return null;let asText=text&&(plainText||inCode||!html);if(asText){if(view.someProp("transformPastedText",(f=>{text=f(text,inCode||plainText,view)})),inCode)return text?new dist_Slice(dist_Fragment.from(view.state.schema.text(text.replace(/\r\n?/g,"\n"))),0,0):dist_Slice.empty;let parsed=view.someProp("clipboardTextParser",(f=>f(text,$context,plainText,view)));if(parsed)slice=parsed;else{let marks=$context.marks(),{schema}=view.state,serializer=DOMSerializer.fromSchema(schema);dom=document.createElement("div"),text.split(/(?:\r\n?|\n)+/).forEach((block=>{let p=dom.appendChild(document.createElement("p"));block&&p.appendChild(serializer.serializeNode(schema.text(block,marks)))}))}}else view.someProp("transformPastedHTML",(f=>{html=f(html,view)})),dom=function readHTML(html){let metas=/^(\s*<meta [^>]*>)*/.exec(html);metas&&(html=html.slice(metas[0].length));let wrap,elt=detachedDoc().createElement("div"),firstTag=/<([a-z][^>\s]+)/i.exec(html);(wrap=firstTag&&wrapMap[firstTag[1].toLowerCase()])&&(html=wrap.map((n=>"<"+n+">")).join("")+html+wrap.map((n=>"</"+n+">")).reverse().join(""));if(elt.innerHTML=html,wrap)for(let i=0;i<wrap.length;i++)elt=elt.querySelector(wrap[i])||elt;return elt}(html),webkit&&function restoreReplacedSpaces(dom){let nodes=dom.querySelectorAll(chrome?"span:not([class]):not([style])":"span.Apple-converted-space");for(let i=0;i<nodes.length;i++){let node=nodes[i];1==node.childNodes.length&&" "==node.textContent&&node.parentNode&&node.parentNode.replaceChild(dom.ownerDocument.createTextNode(" "),node)}}(dom);let contextNode=dom&&dom.querySelector("[data-pm-slice]"),sliceData=contextNode&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(contextNode.getAttribute("data-pm-slice")||"");if(sliceData&&sliceData[3])for(let i=+sliceData[3];i>0;i--){let child=dom.firstChild;for(;child&&1!=child.nodeType;)child=child.nextSibling;if(!child)break;dom=child}if(!slice){let parser=view.someProp("clipboardParser")||view.someProp("domParser")||DOMParser.fromSchema(view.state.schema);slice=parser.parseSlice(dom,{preserveWhitespace:!(!asText&&!sliceData),context:$context,ruleFromNode:dom=>"BR"!=dom.nodeName||dom.nextSibling||!dom.parentNode||inlineParents.test(dom.parentNode.nodeName)?null:{ignore:!0}})}if(sliceData)slice=function addContext(slice,context){if(!slice.size)return slice;let array,schema=slice.content.firstChild.type.schema;try{array=JSON.parse(context)}catch(e){return slice}let{content,openStart,openEnd}=slice;for(let i=array.length-2;i>=0;i-=2){let type=schema.nodes[array[i]];if(!type||type.hasRequiredAttrs())break;content=dist_Fragment.from(type.create(array[i+1],content)),openStart++,openEnd++}return new dist_Slice(content,openStart,openEnd)}(closeSlice(slice,+sliceData[1],+sliceData[2]),sliceData[4]);else if(slice=dist_Slice.maxOpen(function normalizeSiblings(fragment,$context){if(fragment.childCount<2)return fragment;for(let d=$context.depth;d>=0;d--){let lastWrap,match=$context.node(d).contentMatchAt($context.index(d)),result=[];if(fragment.forEach((node=>{if(!result)return;let inLast,wrap=match.findWrapping(node.type);if(!wrap)return result=null;if(inLast=result.length&&lastWrap.length&&addToSibling(wrap,lastWrap,node,result[result.length-1],0))result[result.length-1]=inLast;else{result.length&&(result[result.length-1]=closeRight(result[result.length-1],lastWrap.length));let wrapped=withWrappers(node,wrap);result.push(wrapped),match=match.matchType(wrapped.type),lastWrap=wrap}})),result)return dist_Fragment.from(result)}return fragment}(slice.content,$context),!0),slice.openStart||slice.openEnd){let openStart=0,openEnd=0;for(let node=slice.content.firstChild;openStart<slice.openStart&&!node.type.spec.isolating;openStart++,node=node.firstChild);for(let node=slice.content.lastChild;openEnd<slice.openEnd&&!node.type.spec.isolating;openEnd++,node=node.lastChild);slice=closeSlice(slice,openStart,openEnd)}return view.someProp("transformPasted",(f=>{slice=f(slice,view)})),slice}const inlineParents=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function withWrappers(node,wrap,from=0){for(let i=wrap.length-1;i>=from;i--)node=wrap[i].create(null,dist_Fragment.from(node));return node}function addToSibling(wrap,lastWrap,node,sibling,depth){if(depth<wrap.length&&depth<lastWrap.length&&wrap[depth]==lastWrap[depth]){let inner=addToSibling(wrap,lastWrap,node,sibling.lastChild,depth+1);if(inner)return sibling.copy(sibling.content.replaceChild(sibling.childCount-1,inner));if(sibling.contentMatchAt(sibling.childCount).matchType(depth==wrap.length-1?node.type:wrap[depth+1]))return sibling.copy(sibling.content.append(dist_Fragment.from(withWrappers(node,wrap,depth+1))))}}function closeRight(node,depth){if(0==depth)return node;let fragment=node.content.replaceChild(node.childCount-1,closeRight(node.lastChild,depth-1)),fill=node.contentMatchAt(node.childCount).fillBefore(dist_Fragment.empty,!0);return node.copy(fragment.append(fill))}function closeRange(fragment,side,from,to,depth,openEnd){let node=side<0?fragment.firstChild:fragment.lastChild,inner=node.content;return fragment.childCount>1&&(openEnd=0),depth<to-1&&(inner=closeRange(inner,side,from,to,depth+1,openEnd)),depth>=from&&(inner=side<0?node.contentMatchAt(0).fillBefore(inner,openEnd<=depth).append(inner):inner.append(node.contentMatchAt(node.childCount).fillBefore(dist_Fragment.empty,!0))),fragment.replaceChild(side<0?0:fragment.childCount-1,node.copy(inner))}function closeSlice(slice,openStart,openEnd){return openStart<slice.openStart&&(slice=new dist_Slice(closeRange(slice.content,-1,openStart,slice.openStart,0,slice.openEnd),openStart,slice.openEnd)),openEnd<slice.openEnd&&(slice=new dist_Slice(closeRange(slice.content,1,openEnd,slice.openEnd,0,0),slice.openStart,openEnd)),slice}const wrapMap={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let _detachedDoc=null;function detachedDoc(){return _detachedDoc||(_detachedDoc=document.implementation.createHTMLDocument("title"))}const handlers={},editHandlers={},passiveHandlers={touchstart:!0,touchmove:!0};class InputState{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function setSelectionOrigin(view,origin){view.input.lastSelectionOrigin=origin,view.input.lastSelectionTime=Date.now()}function ensureListeners(view){view.someProp("handleDOMEvents",(currentHandlers=>{for(let type in currentHandlers)view.input.eventHandlers[type]||view.dom.addEventListener(type,view.input.eventHandlers[type]=event=>runCustomHandler(view,event))}))}function runCustomHandler(view,event){return view.someProp("handleDOMEvents",(handlers=>{let handler=handlers[event.type];return!!handler&&(handler(view,event)||event.defaultPrevented)}))}function eventBelongsToView(view,event){if(!event.bubbles)return!0;if(event.defaultPrevented)return!1;for(let node=event.target;node!=view.dom;node=node.parentNode)if(!node||11==node.nodeType||node.pmViewDesc&&node.pmViewDesc.stopEvent(event))return!1;return!0}function eventCoords(event){return{left:event.clientX,top:event.clientY}}function runHandlerOnContext(view,propName,pos,inside,event){if(-1==inside)return!1;let $pos=view.state.doc.resolve(inside);for(let i=$pos.depth+1;i>0;i--)if(view.someProp(propName,(f=>i>$pos.depth?f(view,pos,$pos.nodeAfter,$pos.before(i),event,!0):f(view,pos,$pos.node(i),$pos.before(i),event,!1))))return!0;return!1}function updateSelection(view,selection,origin){view.focused||view.focus();let tr=view.state.tr.setSelection(selection);"pointer"==origin&&tr.setMeta("pointer",!0),view.dispatch(tr)}function handleSingleClick(view,pos,inside,event,selectNode){return runHandlerOnContext(view,"handleClickOn",pos,inside,event)||view.someProp("handleClick",(f=>f(view,pos,event)))||(selectNode?function selectClickedNode(view,inside){if(-1==inside)return!1;let selectedNode,selectAt,sel=view.state.selection;sel instanceof dist_NodeSelection&&(selectedNode=sel.node);let $pos=view.state.doc.resolve(inside);for(let i=$pos.depth+1;i>0;i--){let node=i>$pos.depth?$pos.nodeAfter:$pos.node(i);if(dist_NodeSelection.isSelectable(node)){selectAt=selectedNode&&sel.$from.depth>0&&i>=sel.$from.depth&&$pos.before(sel.$from.depth+1)==sel.$from.pos?$pos.before(sel.$from.depth):$pos.before(i);break}}return null!=selectAt&&(updateSelection(view,dist_NodeSelection.create(view.state.doc,selectAt),"pointer"),!0)}(view,inside):function selectClickedLeaf(view,inside){if(-1==inside)return!1;let $pos=view.state.doc.resolve(inside),node=$pos.nodeAfter;return!!(node&&node.isAtom&&dist_NodeSelection.isSelectable(node))&&(updateSelection(view,new dist_NodeSelection($pos),"pointer"),!0)}(view,inside))}function handleDoubleClick(view,pos,inside,event){return runHandlerOnContext(view,"handleDoubleClickOn",pos,inside,event)||view.someProp("handleDoubleClick",(f=>f(view,pos,event)))}function handleTripleClick(view,pos,inside,event){return runHandlerOnContext(view,"handleTripleClickOn",pos,inside,event)||view.someProp("handleTripleClick",(f=>f(view,pos,event)))||function defaultTripleClick(view,inside,event){if(0!=event.button)return!1;let doc=view.state.doc;if(-1==inside)return!!doc.inlineContent&&(updateSelection(view,dist_TextSelection.create(doc,0,doc.content.size),"pointer"),!0);let $pos=doc.resolve(inside);for(let i=$pos.depth+1;i>0;i--){let node=i>$pos.depth?$pos.nodeAfter:$pos.node(i),nodePos=$pos.before(i);if(node.inlineContent)updateSelection(view,dist_TextSelection.create(doc,nodePos+1,nodePos+1+node.content.size),"pointer");else{if(!dist_NodeSelection.isSelectable(node))continue;updateSelection(view,dist_NodeSelection.create(doc,nodePos),"pointer")}return!0}}(view,inside,event)}function forceDOMFlush(view){return endComposition(view)}editHandlers.keydown=(view,_event)=>{let event=_event;if(view.input.shiftKey=16==event.keyCode||event.shiftKey,!inOrNearComposition(view,event)&&(view.input.lastKeyCode=event.keyCode,view.input.lastKeyCodeTime=Date.now(),!android||!chrome||13!=event.keyCode))if(229!=event.keyCode&&view.domObserver.forceFlush(),!ios||13!=event.keyCode||event.ctrlKey||event.altKey||event.metaKey)view.someProp("handleKeyDown",(f=>f(view,event)))||captureKeyDown(view,event)?event.preventDefault():setSelectionOrigin(view,"key");else{let now=Date.now();view.input.lastIOSEnter=now,view.input.lastIOSEnterFallbackTimeout=setTimeout((()=>{view.input.lastIOSEnter==now&&(view.someProp("handleKeyDown",(f=>f(view,keyEvent(13,"Enter")))),view.input.lastIOSEnter=0)}),200)}},editHandlers.keyup=(view,event)=>{16==event.keyCode&&(view.input.shiftKey=!1)},editHandlers.keypress=(view,_event)=>{let event=_event;if(inOrNearComposition(view,event)||!event.charCode||event.ctrlKey&&!event.altKey||dist_mac&&event.metaKey)return;if(view.someProp("handleKeyPress",(f=>f(view,event))))return void event.preventDefault();let sel=view.state.selection;if(!(sel instanceof dist_TextSelection&&sel.$from.sameParent(sel.$to))){let text=String.fromCharCode(event.charCode);/[\r\n]/.test(text)||view.someProp("handleTextInput",(f=>f(view,sel.$from.pos,sel.$to.pos,text)))||view.dispatch(view.state.tr.insertText(text).scrollIntoView()),event.preventDefault()}};const selectNodeModifier=dist_mac?"metaKey":"ctrlKey";handlers.mousedown=(view,_event)=>{let event=_event;view.input.shiftKey=event.shiftKey;let flushed=forceDOMFlush(view),now=Date.now(),type="singleClick";now-view.input.lastClick.time<500&&function isNear(event,click){let dx=click.x-event.clientX,dy=click.y-event.clientY;return dx*dx+dy*dy<100}(event,view.input.lastClick)&&!event[selectNodeModifier]&&("singleClick"==view.input.lastClick.type?type="doubleClick":"doubleClick"==view.input.lastClick.type&&(type="tripleClick")),view.input.lastClick={time:now,x:event.clientX,y:event.clientY,type};let pos=view.posAtCoords(eventCoords(event));pos&&("singleClick"==type?(view.input.mouseDown&&view.input.mouseDown.done(),view.input.mouseDown=new MouseDown(view,pos,event,!!flushed)):("doubleClick"==type?handleDoubleClick:handleTripleClick)(view,pos.pos,pos.inside,event)?event.preventDefault():setSelectionOrigin(view,"pointer"))};class MouseDown{constructor(view,pos,event,flushed){let targetNode,targetPos;if(this.view=view,this.pos=pos,this.event=event,this.flushed=flushed,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=view.state.doc,this.selectNode=!!event[selectNodeModifier],this.allowDefault=event.shiftKey,pos.inside>-1)targetNode=view.state.doc.nodeAt(pos.inside),targetPos=pos.inside;else{let $pos=view.state.doc.resolve(pos.pos);targetNode=$pos.parent,targetPos=$pos.depth?$pos.before():0}const target=flushed?null:event.target,targetDesc=target?view.docView.nearestDesc(target,!0):null;this.target=targetDesc?targetDesc.dom:null;let{selection}=view.state;(0==event.button&&targetNode.type.spec.draggable&&!1!==targetNode.type.spec.selectable||selection instanceof dist_NodeSelection&&selection.from<=targetPos&&selection.to>targetPos)&&(this.mightDrag={node:targetNode,pos:targetPos,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!gecko||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),view.root.addEventListener("mouseup",this.up=this.up.bind(this)),view.root.addEventListener("mousemove",this.move=this.move.bind(this)),setSelectionOrigin(view,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout((()=>selectionToDOM(this.view))),this.view.input.mouseDown=null}up(event){if(this.done(),!this.view.dom.contains(event.target))return;let pos=this.pos;this.view.state.doc!=this.startDoc&&(pos=this.view.posAtCoords(eventCoords(event))),this.updateAllowDefault(event),this.allowDefault||!pos?setSelectionOrigin(this.view,"pointer"):handleSingleClick(this.view,pos.pos,pos.inside,event,this.selectNode)?event.preventDefault():0==event.button&&(this.flushed||safari&&this.mightDrag&&!this.mightDrag.node.isAtom||chrome&&!this.view.state.selection.visible&&Math.min(Math.abs(pos.pos-this.view.state.selection.from),Math.abs(pos.pos-this.view.state.selection.to))<=2)?(updateSelection(this.view,Selection.near(this.view.state.doc.resolve(pos.pos)),"pointer"),event.preventDefault()):setSelectionOrigin(this.view,"pointer")}move(event){this.updateAllowDefault(event),setSelectionOrigin(this.view,"pointer"),0==event.buttons&&this.done()}updateAllowDefault(event){!this.allowDefault&&(Math.abs(this.event.x-event.clientX)>4||Math.abs(this.event.y-event.clientY)>4)&&(this.allowDefault=!0)}}function inOrNearComposition(view,event){return!!view.composing||!!(safari&&Math.abs(event.timeStamp-view.input.compositionEndedAt)<500)&&(view.input.compositionEndedAt=-2e8,!0)}handlers.touchstart=view=>{view.input.lastTouch=Date.now(),forceDOMFlush(view),setSelectionOrigin(view,"pointer")},handlers.touchmove=view=>{view.input.lastTouch=Date.now(),setSelectionOrigin(view,"pointer")},handlers.contextmenu=view=>forceDOMFlush(view);const timeoutComposition=android?5e3:-1;function scheduleComposeEnd(view,delay){clearTimeout(view.input.composingTimeout),delay>-1&&(view.input.composingTimeout=setTimeout((()=>endComposition(view)),delay))}function clearComposition(view){for(view.composing&&(view.input.composing=!1,view.input.compositionEndedAt=function timestampFromCustomEvent(){let event=document.createEvent("Event");return event.initEvent("event",!0,!0),event.timeStamp}());view.input.compositionNodes.length>0;)view.input.compositionNodes.pop().markParentsDirty()}function endComposition(view,forceUpdate=!1){if(!(android&&view.domObserver.flushingSoon>=0)){if(view.domObserver.forceFlush(),clearComposition(view),forceUpdate||view.docView&&view.docView.dirty){let sel=selectionFromDOM(view);return sel&&!sel.eq(view.state.selection)?view.dispatch(view.state.tr.setSelection(sel)):view.updateState(view.state),!0}return!1}}editHandlers.compositionstart=editHandlers.compositionupdate=view=>{if(!view.composing){view.domObserver.flush();let{state}=view,$pos=state.selection.$from;if(state.selection.empty&&(state.storedMarks||!$pos.textOffset&&$pos.parentOffset&&$pos.nodeBefore.marks.some((m=>!1===m.type.spec.inclusive))))view.markCursor=view.state.storedMarks||$pos.marks(),endComposition(view,!0),view.markCursor=null;else if(endComposition(view),gecko&&state.selection.empty&&$pos.parentOffset&&!$pos.textOffset&&$pos.nodeBefore.marks.length){let sel=view.domSelectionRange();for(let node=sel.focusNode,offset=sel.focusOffset;node&&1==node.nodeType&&0!=offset;){let before=offset<0?node.lastChild:node.childNodes[offset-1];if(!before)break;if(3==before.nodeType){view.domSelection().collapse(before,before.nodeValue.length);break}node=before,offset=-1}}view.input.composing=!0}scheduleComposeEnd(view,timeoutComposition)},editHandlers.compositionend=(view,event)=>{view.composing&&(view.input.composing=!1,view.input.compositionEndedAt=event.timeStamp,view.input.compositionPendingChanges=view.domObserver.pendingRecords().length?view.input.compositionID:0,view.input.compositionPendingChanges&&Promise.resolve().then((()=>view.domObserver.flush())),view.input.compositionID++,scheduleComposeEnd(view,20))};const brokenClipboardAPI=ie&&ie_version<15||ios&&webkit_version<604;function doPaste(view,text,html,preferPlain,event){let slice=parseFromClipboard(view,text,html,preferPlain,view.state.selection.$from);if(view.someProp("handlePaste",(f=>f(view,event,slice||dist_Slice.empty))))return!0;if(!slice)return!1;let singleNode=function sliceSingleNode(slice){return 0==slice.openStart&&0==slice.openEnd&&1==slice.content.childCount?slice.content.firstChild:null}(slice),tr=singleNode?view.state.tr.replaceSelectionWith(singleNode,preferPlain):view.state.tr.replaceSelection(slice);return view.dispatch(tr.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}handlers.copy=editHandlers.cut=(view,_event)=>{let event=_event,sel=view.state.selection,cut="cut"==event.type;if(sel.empty)return;let data=brokenClipboardAPI?null:event.clipboardData,slice=sel.content(),{dom,text}=serializeForClipboard(view,slice);data?(event.preventDefault(),data.clearData(),data.setData("text/html",dom.innerHTML),data.setData("text/plain",text)):function captureCopy(view,dom){if(!view.dom.parentNode)return;let wrap=view.dom.parentNode.appendChild(document.createElement("div"));wrap.appendChild(dom),wrap.style.cssText="position: fixed; left: -10000px; top: 10px";let sel=getSelection(),range=document.createRange();range.selectNodeContents(dom),view.dom.blur(),sel.removeAllRanges(),sel.addRange(range),setTimeout((()=>{wrap.parentNode&&wrap.parentNode.removeChild(wrap),view.focus()}),50)}(view,dom),cut&&view.dispatch(view.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},editHandlers.paste=(view,_event)=>{let event=_event;if(view.composing&&!android)return;let data=brokenClipboardAPI?null:event.clipboardData,plain=view.input.shiftKey&&45!=view.input.lastKeyCode;data&&doPaste(view,data.getData("text/plain"),data.getData("text/html"),plain,event)?event.preventDefault():function capturePaste(view,event){if(!view.dom.parentNode)return;let plainText=view.input.shiftKey||view.state.selection.$from.parent.type.spec.code,target=view.dom.parentNode.appendChild(document.createElement(plainText?"textarea":"div"));plainText||(target.contentEditable="true"),target.style.cssText="position: fixed; left: -10000px; top: 10px",target.focus();let plain=view.input.shiftKey&&45!=view.input.lastKeyCode;setTimeout((()=>{view.focus(),target.parentNode&&target.parentNode.removeChild(target),plainText?doPaste(view,target.value,null,plain,event):doPaste(view,target.textContent,target.innerHTML,plain,event)}),50)}(view,event)};class Dragging{constructor(slice,move){this.slice=slice,this.move=move}}const dragCopyModifier=dist_mac?"altKey":"ctrlKey";handlers.dragstart=(view,_event)=>{let event=_event,mouseDown=view.input.mouseDown;if(mouseDown&&mouseDown.done(),!event.dataTransfer)return;let sel=view.state.selection,pos=sel.empty?null:view.posAtCoords(eventCoords(event));if(pos&&pos.pos>=sel.from&&pos.pos<=(sel instanceof dist_NodeSelection?sel.to-1:sel.to));else if(mouseDown&&mouseDown.mightDrag)view.dispatch(view.state.tr.setSelection(dist_NodeSelection.create(view.state.doc,mouseDown.mightDrag.pos)));else if(event.target&&1==event.target.nodeType){let desc=view.docView.nearestDesc(event.target,!0);desc&&desc.node.type.spec.draggable&&desc!=view.docView&&view.dispatch(view.state.tr.setSelection(dist_NodeSelection.create(view.state.doc,desc.posBefore)))}let slice=view.state.selection.content(),{dom,text}=serializeForClipboard(view,slice);event.dataTransfer.clearData(),event.dataTransfer.setData(brokenClipboardAPI?"Text":"text/html",dom.innerHTML),event.dataTransfer.effectAllowed="copyMove",brokenClipboardAPI||event.dataTransfer.setData("text/plain",text),view.dragging=new Dragging(slice,!event[dragCopyModifier])},handlers.dragend=view=>{let dragging=view.dragging;window.setTimeout((()=>{view.dragging==dragging&&(view.dragging=null)}),50)},editHandlers.dragover=editHandlers.dragenter=(_,e)=>e.preventDefault(),editHandlers.drop=(view,_event)=>{let event=_event,dragging=view.dragging;if(view.dragging=null,!event.dataTransfer)return;let eventPos=view.posAtCoords(eventCoords(event));if(!eventPos)return;let $mouse=view.state.doc.resolve(eventPos.pos),slice=dragging&&dragging.slice;slice?view.someProp("transformPasted",(f=>{slice=f(slice,view)})):slice=parseFromClipboard(view,event.dataTransfer.getData(brokenClipboardAPI?"Text":"text/plain"),brokenClipboardAPI?null:event.dataTransfer.getData("text/html"),!1,$mouse);let move=!(!dragging||event[dragCopyModifier]);if(view.someProp("handleDrop",(f=>f(view,event,slice||dist_Slice.empty,move))))return void event.preventDefault();if(!slice)return;event.preventDefault();let insertPos=slice?dropPoint(view.state.doc,$mouse.pos,slice):$mouse.pos;null==insertPos&&(insertPos=$mouse.pos);let tr=view.state.tr;move&&tr.deleteSelection();let pos=tr.mapping.map(insertPos),isNode=0==slice.openStart&&0==slice.openEnd&&1==slice.content.childCount,beforeInsert=tr.doc;if(isNode?tr.replaceRangeWith(pos,pos,slice.content.firstChild):tr.replaceRange(pos,pos,slice),tr.doc.eq(beforeInsert))return;let $pos=tr.doc.resolve(pos);if(isNode&&dist_NodeSelection.isSelectable(slice.content.firstChild)&&$pos.nodeAfter&&$pos.nodeAfter.sameMarkup(slice.content.firstChild))tr.setSelection(new dist_NodeSelection($pos));else{let end=tr.mapping.map(insertPos);tr.mapping.maps[tr.mapping.maps.length-1].forEach(((_from,_to,_newFrom,newTo)=>end=newTo)),tr.setSelection(selectionBetween(view,$pos,tr.doc.resolve(end)))}view.focus(),view.dispatch(tr.setMeta("uiEvent","drop"))},handlers.focus=view=>{view.input.lastFocus=Date.now(),view.focused||(view.domObserver.stop(),view.dom.classList.add("ProseMirror-focused"),view.domObserver.start(),view.focused=!0,setTimeout((()=>{view.docView&&view.hasFocus()&&!view.domObserver.currentSelection.eq(view.domSelectionRange())&&selectionToDOM(view)}),20))},handlers.blur=(view,_event)=>{let event=_event;view.focused&&(view.domObserver.stop(),view.dom.classList.remove("ProseMirror-focused"),view.domObserver.start(),event.relatedTarget&&view.dom.contains(event.relatedTarget)&&view.domObserver.currentSelection.clear(),view.focused=!1)},handlers.beforeinput=(view,_event)=>{if(chrome&&android&&"deleteContentBackward"==_event.inputType){view.domObserver.flushSoon();let{domChangeCount}=view.input;setTimeout((()=>{if(view.input.domChangeCount!=domChangeCount)return;if(view.dom.blur(),view.focus(),view.someProp("handleKeyDown",(f=>f(view,keyEvent(8,"Backspace")))))return;let{$cursor}=view.state.selection;$cursor&&$cursor.pos>0&&view.dispatch(view.state.tr.delete($cursor.pos-1,$cursor.pos).scrollIntoView())}),50)}};for(let prop in editHandlers)handlers[prop]=editHandlers[prop];function compareObjs(a,b){if(a==b)return!0;for(let p in a)if(a[p]!==b[p])return!1;for(let p in b)if(!(p in a))return!1;return!0}class WidgetType{constructor(toDOM,spec){this.toDOM=toDOM,this.spec=spec||noSpec,this.side=this.spec.side||0}map(mapping,span,offset,oldOffset){let{pos,deleted}=mapping.mapResult(span.from+oldOffset,this.side<0?-1:1);return deleted?null:new Decoration(pos-offset,pos-offset,this)}valid(){return!0}eq(other){return this==other||other instanceof WidgetType&&(this.spec.key&&this.spec.key==other.spec.key||this.toDOM==other.toDOM&&compareObjs(this.spec,other.spec))}destroy(node){this.spec.destroy&&this.spec.destroy(node)}}class InlineType{constructor(attrs,spec){this.attrs=attrs,this.spec=spec||noSpec}map(mapping,span,offset,oldOffset){let from=mapping.map(span.from+oldOffset,this.spec.inclusiveStart?-1:1)-offset,to=mapping.map(span.to+oldOffset,this.spec.inclusiveEnd?1:-1)-offset;return from>=to?null:new Decoration(from,to,this)}valid(_,span){return span.from<span.to}eq(other){return this==other||other instanceof InlineType&&compareObjs(this.attrs,other.attrs)&&compareObjs(this.spec,other.spec)}static is(span){return span.type instanceof InlineType}destroy(){}}class dist_NodeType{constructor(attrs,spec){this.attrs=attrs,this.spec=spec||noSpec}map(mapping,span,offset,oldOffset){let from=mapping.mapResult(span.from+oldOffset,1);if(from.deleted)return null;let to=mapping.mapResult(span.to+oldOffset,-1);return to.deleted||to.pos<=from.pos?null:new Decoration(from.pos-offset,to.pos-offset,this)}valid(node,span){let child,{index,offset}=node.content.findIndex(span.from);return offset==span.from&&!(child=node.child(index)).isText&&offset+child.nodeSize==span.to}eq(other){return this==other||other instanceof dist_NodeType&&compareObjs(this.attrs,other.attrs)&&compareObjs(this.spec,other.spec)}destroy(){}}class Decoration{constructor(from,to,type){this.from=from,this.to=to,this.type=type}copy(from,to){return new Decoration(from,to,this.type)}eq(other,offset=0){return this.type.eq(other.type)&&this.from+offset==other.from&&this.to+offset==other.to}map(mapping,offset,oldOffset){return this.type.map(mapping,this,offset,oldOffset)}static widget(pos,toDOM,spec){return new Decoration(pos,pos,new WidgetType(toDOM,spec))}static inline(from,to,attrs,spec){return new Decoration(from,to,new InlineType(attrs,spec))}static node(from,to,attrs,spec){return new Decoration(from,to,new dist_NodeType(attrs,spec))}get spec(){return this.type.spec}get inline(){return this.type instanceof InlineType}get widget(){return this.type instanceof WidgetType}}const none=[],noSpec={};class DecorationSet{constructor(local,children){this.local=local.length?local:none,this.children=children.length?children:none}static create(doc,decorations){return decorations.length?buildTree(decorations,doc,0,noSpec):empty}find(start,end,predicate){let result=[];return this.findInner(null==start?0:start,null==end?1e9:end,result,0,predicate),result}findInner(start,end,result,offset,predicate){for(let i=0;i<this.local.length;i++){let span=this.local[i];span.from<=end&&span.to>=start&&(!predicate||predicate(span.spec))&&result.push(span.copy(span.from+offset,span.to+offset))}for(let i=0;i<this.children.length;i+=3)if(this.children[i]<end&&this.children[i+1]>start){let childOff=this.children[i]+1;this.children[i+2].findInner(start-childOff,end-childOff,result,offset+childOff,predicate)}}map(mapping,doc,options){return this==empty||0==mapping.maps.length?this:this.mapInner(mapping,doc,0,0,options||noSpec)}mapInner(mapping,node,offset,oldOffset,options){let newLocal;for(let i=0;i<this.local.length;i++){let mapped=this.local[i].map(mapping,offset,oldOffset);mapped&&mapped.type.valid(node,mapped)?(newLocal||(newLocal=[])).push(mapped):options.onRemove&&options.onRemove(this.local[i].spec)}return this.children.length?function mapChildren(oldChildren,newLocal,mapping,node,offset,oldOffset,options){let children=oldChildren.slice();for(let i=0,baseOffset=oldOffset;i<mapping.maps.length;i++){let moved=0;mapping.maps[i].forEach(((oldStart,oldEnd,newStart,newEnd)=>{let dSize=newEnd-newStart-(oldEnd-oldStart);for(let i=0;i<children.length;i+=3){let end=children[i+1];if(end<0||oldStart>end+baseOffset-moved)continue;let start=children[i]+baseOffset-moved;oldEnd>=start?children[i+1]=oldStart<=start?-2:-1:newStart>=offset&&dSize&&(children[i]+=dSize,children[i+1]+=dSize)}moved+=dSize})),baseOffset=mapping.maps[i].map(baseOffset,-1)}let mustRebuild=!1;for(let i=0;i<children.length;i+=3)if(children[i+1]<0){if(-2==children[i+1]){mustRebuild=!0,children[i+1]=-1;continue}let from=mapping.map(oldChildren[i]+oldOffset),fromLocal=from-offset;if(fromLocal<0||fromLocal>=node.content.size){mustRebuild=!0;continue}let toLocal=mapping.map(oldChildren[i+1]+oldOffset,-1)-offset,{index,offset:childOffset}=node.content.findIndex(fromLocal),childNode=node.maybeChild(index);if(childNode&&childOffset==fromLocal&&childOffset+childNode.nodeSize==toLocal){let mapped=children[i+2].mapInner(mapping,childNode,from+1,oldChildren[i]+oldOffset+1,options);mapped!=empty?(children[i]=fromLocal,children[i+1]=toLocal,children[i+2]=mapped):(children[i+1]=-2,mustRebuild=!0)}else mustRebuild=!0}if(mustRebuild){let decorations=function mapAndGatherRemainingDecorations(children,oldChildren,decorations,mapping,offset,oldOffset,options){function gather(set,oldOffset){for(let i=0;i<set.local.length;i++){let mapped=set.local[i].map(mapping,offset,oldOffset);mapped?decorations.push(mapped):options.onRemove&&options.onRemove(set.local[i].spec)}for(let i=0;i<set.children.length;i+=3)gather(set.children[i+2],set.children[i]+oldOffset+1)}for(let i=0;i<children.length;i+=3)-1==children[i+1]&&gather(children[i+2],oldChildren[i]+oldOffset+1);return decorations}(children,oldChildren,newLocal,mapping,offset,oldOffset,options),built=buildTree(decorations,node,0,options);newLocal=built.local;for(let i=0;i<children.length;i+=3)children[i+1]<0&&(children.splice(i,3),i-=3);for(let i=0,j=0;i<built.children.length;i+=3){let from=built.children[i];for(;j<children.length&&children[j]<from;)j+=3;children.splice(j,0,built.children[i],built.children[i+1],built.children[i+2])}}return new DecorationSet(newLocal.sort(byPos),children)}(this.children,newLocal||[],mapping,node,offset,oldOffset,options):newLocal?new DecorationSet(newLocal.sort(byPos),none):empty}add(doc,decorations){return decorations.length?this==empty?DecorationSet.create(doc,decorations):this.addInner(doc,decorations,0):this}addInner(doc,decorations,offset){let children,childIndex=0;doc.forEach(((childNode,childOffset)=>{let found,baseOffset=childOffset+offset;if(found=takeSpansForNode(decorations,childNode,baseOffset)){for(children||(children=this.children.slice());childIndex<children.length&&children[childIndex]<childOffset;)childIndex+=3;children[childIndex]==childOffset?children[childIndex+2]=children[childIndex+2].addInner(childNode,found,baseOffset+1):children.splice(childIndex,0,childOffset,childOffset+childNode.nodeSize,buildTree(found,childNode,baseOffset+1,noSpec)),childIndex+=3}}));let local=moveSpans(childIndex?withoutNulls(decorations):decorations,-offset);for(let i=0;i<local.length;i++)local[i].type.valid(doc,local[i])||local.splice(i--,1);return new DecorationSet(local.length?this.local.concat(local).sort(byPos):this.local,children||this.children)}remove(decorations){return 0==decorations.length||this==empty?this:this.removeInner(decorations,0)}removeInner(decorations,offset){let children=this.children,local=this.local;for(let i=0;i<children.length;i+=3){let found,from=children[i]+offset,to=children[i+1]+offset;for(let span,j=0;j<decorations.length;j++)(span=decorations[j])&&span.from>from&&span.to<to&&(decorations[j]=null,(found||(found=[])).push(span));if(!found)continue;children==this.children&&(children=this.children.slice());let removed=children[i+2].removeInner(found,from+1);removed!=empty?children[i+2]=removed:(children.splice(i,3),i-=3)}if(local.length)for(let span,i=0;i<decorations.length;i++)if(span=decorations[i])for(let j=0;j<local.length;j++)local[j].eq(span,offset)&&(local==this.local&&(local=this.local.slice()),local.splice(j--,1));return children==this.children&&local==this.local?this:local.length||children.length?new DecorationSet(local,children):empty}forChild(offset,node){if(this==empty)return this;if(node.isLeaf)return DecorationSet.empty;let child,local;for(let i=0;i<this.children.length;i+=3)if(this.children[i]>=offset){this.children[i]==offset&&(child=this.children[i+2]);break}let start=offset+1,end=start+node.content.size;for(let i=0;i<this.local.length;i++){let dec=this.local[i];if(dec.from<end&&dec.to>start&&dec.type instanceof InlineType){let from=Math.max(start,dec.from)-start,to=Math.min(end,dec.to)-start;from<to&&(local||(local=[])).push(dec.copy(from,to))}}if(local){let localSet=new DecorationSet(local.sort(byPos),none);return child?new DecorationGroup([localSet,child]):localSet}return child||empty}eq(other){if(this==other)return!0;if(!(other instanceof DecorationSet)||this.local.length!=other.local.length||this.children.length!=other.children.length)return!1;for(let i=0;i<this.local.length;i++)if(!this.local[i].eq(other.local[i]))return!1;for(let i=0;i<this.children.length;i+=3)if(this.children[i]!=other.children[i]||this.children[i+1]!=other.children[i+1]||!this.children[i+2].eq(other.children[i+2]))return!1;return!0}locals(node){return removeOverlap(this.localsInner(node))}localsInner(node){if(this==empty)return none;if(node.inlineContent||!this.local.some(InlineType.is))return this.local;let result=[];for(let i=0;i<this.local.length;i++)this.local[i].type instanceof InlineType||result.push(this.local[i]);return result}}DecorationSet.empty=new DecorationSet([],[]),DecorationSet.removeOverlap=removeOverlap;const empty=DecorationSet.empty;class DecorationGroup{constructor(members){this.members=members}map(mapping,doc){const mappedDecos=this.members.map((member=>member.map(mapping,doc,noSpec)));return DecorationGroup.from(mappedDecos)}forChild(offset,child){if(child.isLeaf)return DecorationSet.empty;let found=[];for(let i=0;i<this.members.length;i++){let result=this.members[i].forChild(offset,child);result!=empty&&(result instanceof DecorationGroup?found=found.concat(result.members):found.push(result))}return DecorationGroup.from(found)}eq(other){if(!(other instanceof DecorationGroup)||other.members.length!=this.members.length)return!1;for(let i=0;i<this.members.length;i++)if(!this.members[i].eq(other.members[i]))return!1;return!0}locals(node){let result,sorted=!0;for(let i=0;i<this.members.length;i++){let locals=this.members[i].localsInner(node);if(locals.length)if(result){sorted&&(result=result.slice(),sorted=!1);for(let j=0;j<locals.length;j++)result.push(locals[j])}else result=locals}return result?removeOverlap(sorted?result:result.sort(byPos)):none}static from(members){switch(members.length){case 0:return empty;case 1:return members[0];default:return new DecorationGroup(members.every((m=>m instanceof DecorationSet))?members:members.reduce(((r,m)=>r.concat(m instanceof DecorationSet?m:m.members)),[]))}}}function moveSpans(spans,offset){if(!offset||!spans.length)return spans;let result=[];for(let i=0;i<spans.length;i++){let span=spans[i];result.push(new Decoration(span.from+offset,span.to+offset,span.type))}return result}function takeSpansForNode(spans,node,offset){if(node.isLeaf)return null;let end=offset+node.nodeSize,found=null;for(let span,i=0;i<spans.length;i++)(span=spans[i])&&span.from>offset&&span.to<end&&((found||(found=[])).push(span),spans[i]=null);return found}function withoutNulls(array){let result=[];for(let i=0;i<array.length;i++)null!=array[i]&&result.push(array[i]);return result}function buildTree(spans,node,offset,options){let children=[],hasNulls=!1;node.forEach(((childNode,localStart)=>{let found=takeSpansForNode(spans,childNode,localStart+offset);if(found){hasNulls=!0;let subtree=buildTree(found,childNode,offset+localStart+1,options);subtree!=empty&&children.push(localStart,localStart+childNode.nodeSize,subtree)}}));let locals=moveSpans(hasNulls?withoutNulls(spans):spans,-offset).sort(byPos);for(let i=0;i<locals.length;i++)locals[i].type.valid(node,locals[i])||(options.onRemove&&options.onRemove(locals[i].spec),locals.splice(i--,1));return locals.length||children.length?new DecorationSet(locals,children):empty}function byPos(a,b){return a.from-b.from||a.to-b.to}function removeOverlap(spans){let working=spans;for(let i=0;i<working.length-1;i++){let span=working[i];if(span.from!=span.to)for(let j=i+1;j<working.length;j++){let next=working[j];if(next.from!=span.from){next.from<span.to&&(working==spans&&(working=spans.slice()),working[i]=span.copy(span.from,next.from),insertAhead(working,j,span.copy(next.from,span.to)));break}next.to!=span.to&&(working==spans&&(working=spans.slice()),working[j]=next.copy(next.from,span.to),insertAhead(working,j+1,next.copy(span.to,next.to)))}}return working}function insertAhead(array,i,deco){for(;i<array.length&&byPos(deco,array[i])>0;)i++;array.splice(i,0,deco)}function viewDecorations(view){let found=[];return view.someProp("decorations",(f=>{let result=f(view.state);result&&result!=empty&&found.push(result)})),view.cursorWrapper&&found.push(DecorationSet.create(view.state.doc,[view.cursorWrapper.deco])),DecorationGroup.from(found)}const observeOptions={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},useCharData=ie&&ie_version<=11;class SelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(sel){this.anchorNode=sel.anchorNode,this.anchorOffset=sel.anchorOffset,this.focusNode=sel.focusNode,this.focusOffset=sel.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(sel){return sel.anchorNode==this.anchorNode&&sel.anchorOffset==this.anchorOffset&&sel.focusNode==this.focusNode&&sel.focusOffset==this.focusOffset}}class DOMObserver{constructor(view,handleDOMChange){this.view=view,this.handleDOMChange=handleDOMChange,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new SelectionState,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver((mutations=>{for(let i=0;i<mutations.length;i++)this.queue.push(mutations[i]);ie&&ie_version<=11&&mutations.some((m=>"childList"==m.type&&m.removedNodes.length||"characterData"==m.type&&m.oldValue.length>m.target.nodeValue.length))?this.flushSoon():this.flush()})),useCharData&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((()=>{this.flushingSoon=-1,this.flush()}),20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,observeOptions)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let take=this.observer.takeRecords();if(take.length){for(let i=0;i<take.length;i++)this.queue.push(take[i]);window.setTimeout((()=>this.flush()),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout((()=>this.suppressingSelectionUpdates=!1),50)}onSelectionChange(){if(hasFocusAndSelection(this.view)){if(this.suppressingSelectionUpdates)return selectionToDOM(this.view);if(ie&&ie_version<=11&&!this.view.state.selection.empty){let sel=this.view.domSelectionRange();if(sel.focusNode&&isEquivalentPosition(sel.focusNode,sel.focusOffset,sel.anchorNode,sel.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(sel){if(!sel.focusNode)return!0;let container,ancestors=new Set;for(let scan=sel.focusNode;scan;scan=parentNode(scan))ancestors.add(scan);for(let scan=sel.anchorNode;scan;scan=parentNode(scan))if(ancestors.has(scan)){container=scan;break}let desc=container&&this.view.docView.nearestDesc(container);return desc&&desc.ignoreMutation({type:"selection",target:3==container.nodeType?container.parentNode:container})?(this.setCurSelection(),!0):void 0}pendingRecords(){if(this.observer)for(let mut of this.observer.takeRecords())this.queue.push(mut);return this.queue}flush(){let{view}=this;if(!view.docView||this.flushingSoon>-1)return;let mutations=this.pendingRecords();mutations.length&&(this.queue=[]);let sel=view.domSelectionRange(),newSel=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(sel)&&hasFocusAndSelection(view)&&!this.ignoreSelectionChange(sel),from=-1,to=-1,typeOver=!1,added=[];if(view.editable)for(let i=0;i<mutations.length;i++){let result=this.registerMutation(mutations[i],added);result&&(from=from<0?result.from:Math.min(result.from,from),to=to<0?result.to:Math.max(result.to,to),result.typeOver&&(typeOver=!0))}if(gecko&&added.length>1){let brs=added.filter((n=>"BR"==n.nodeName));if(2==brs.length){let a=brs[0],b=brs[1];a.parentNode&&a.parentNode.parentNode==b.parentNode?b.remove():a.remove()}}let readSel=null;from<0&&newSel&&view.input.lastFocus>Date.now()-200&&Math.max(view.input.lastTouch,view.input.lastClick.time)<Date.now()-300&&selectionCollapsed(sel)&&(readSel=selectionFromDOM(view))&&readSel.eq(Selection.near(view.state.doc.resolve(0),1))?(view.input.lastFocus=0,selectionToDOM(view),this.currentSelection.set(sel),view.scrollToSelection()):(from>-1||newSel)&&(from>-1&&(view.docView.markDirty(from,to),function checkCSS(view){if(cssChecked.has(view))return;if(cssChecked.set(view,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(view.dom).whiteSpace)){if(view.requiresGeckoHackNode=gecko,cssCheckWarned)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),cssCheckWarned=!0}}(view)),this.handleDOMChange(from,to,typeOver,added),view.docView&&view.docView.dirty?view.updateState(view.state):this.currentSelection.eq(sel)||selectionToDOM(view),this.currentSelection.set(sel))}registerMutation(mut,added){if(added.indexOf(mut.target)>-1)return null;let desc=this.view.docView.nearestDesc(mut.target);if("attributes"==mut.type&&(desc==this.view.docView||"contenteditable"==mut.attributeName||"style"==mut.attributeName&&!mut.oldValue&&!mut.target.getAttribute("style")))return null;if(!desc||desc.ignoreMutation(mut))return null;if("childList"==mut.type){for(let i=0;i<mut.addedNodes.length;i++)added.push(mut.addedNodes[i]);if(desc.contentDOM&&desc.contentDOM!=desc.dom&&!desc.contentDOM.contains(mut.target))return{from:desc.posBefore,to:desc.posAfter};let prev=mut.previousSibling,next=mut.nextSibling;if(ie&&ie_version<=11&&mut.addedNodes.length)for(let i=0;i<mut.addedNodes.length;i++){let{previousSibling,nextSibling}=mut.addedNodes[i];(!previousSibling||Array.prototype.indexOf.call(mut.addedNodes,previousSibling)<0)&&(prev=previousSibling),(!nextSibling||Array.prototype.indexOf.call(mut.addedNodes,nextSibling)<0)&&(next=nextSibling)}let fromOffset=prev&&prev.parentNode==mut.target?domIndex(prev)+1:0,from=desc.localPosFromDOM(mut.target,fromOffset,-1),toOffset=next&&next.parentNode==mut.target?domIndex(next):mut.target.childNodes.length;return{from,to:desc.localPosFromDOM(mut.target,toOffset,1)}}return"attributes"==mut.type?{from:desc.posAtStart-desc.border,to:desc.posAtEnd+desc.border}:{from:desc.posAtStart,to:desc.posAtEnd,typeOver:mut.target.nodeValue==mut.oldValue}}}let cssChecked=new WeakMap,cssCheckWarned=!1;function ruleFromNode(dom){let desc=dom.pmViewDesc;if(desc)return desc.parseRule();if("BR"==dom.nodeName&&dom.parentNode){if(safari&&/^(ul|ol)$/i.test(dom.parentNode.nodeName)){let skip=document.createElement("div");return skip.appendChild(document.createElement("li")),{skip}}if(dom.parentNode.lastChild==dom||safari&&/^(tr|table)$/i.test(dom.parentNode.nodeName))return{ignore:!0}}else if("IMG"==dom.nodeName&&dom.getAttribute("mark-placeholder"))return{ignore:!0};return null}const isInline=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function readDOMChange(view,from,to,typeOver,addedNodes){let compositionID=view.input.compositionPendingChanges||(view.composing?view.input.compositionID:0);if(view.input.compositionPendingChanges=0,from<0){let origin=view.input.lastSelectionTime>Date.now()-50?view.input.lastSelectionOrigin:null,newSel=selectionFromDOM(view,origin);if(newSel&&!view.state.selection.eq(newSel)){if(chrome&&android&&13===view.input.lastKeyCode&&Date.now()-100<view.input.lastKeyCodeTime&&view.someProp("handleKeyDown",(f=>f(view,keyEvent(13,"Enter")))))return;let tr=view.state.tr.setSelection(newSel);"pointer"==origin?tr.setMeta("pointer",!0):"key"==origin&&tr.scrollIntoView(),compositionID&&tr.setMeta("composition",compositionID),view.dispatch(tr)}return}let $before=view.state.doc.resolve(from),shared=$before.sharedDepth(to);from=$before.before(shared+1),to=view.state.doc.resolve(to).after(shared+1);let preferredPos,preferredSide,sel=view.state.selection,parse=function parseBetween(view,from_,to_){let find,{node:parent,fromOffset,toOffset,from,to}=view.docView.parseRange(from_,to_),domSel=view.domSelectionRange(),anchor=domSel.anchorNode;if(anchor&&view.dom.contains(1==anchor.nodeType?anchor:anchor.parentNode)&&(find=[{node:anchor,offset:domSel.anchorOffset}],selectionCollapsed(domSel)||find.push({node:domSel.focusNode,offset:domSel.focusOffset})),chrome&&8===view.input.lastKeyCode)for(let off=toOffset;off>fromOffset;off--){let node=parent.childNodes[off-1],desc=node.pmViewDesc;if("BR"==node.nodeName&&!desc){toOffset=off;break}if(!desc||desc.size)break}let startDoc=view.state.doc,parser=view.someProp("domParser")||DOMParser.fromSchema(view.state.schema),$from=startDoc.resolve(from),sel=null,doc=parser.parse(parent,{topNode:$from.parent,topMatch:$from.parent.contentMatchAt($from.index()),topOpen:!0,from:fromOffset,to:toOffset,preserveWhitespace:"pre"!=$from.parent.type.whitespace||"full",findPositions:find,ruleFromNode,context:$from});if(find&&null!=find[0].pos){let anchor=find[0].pos,head=find[1]&&find[1].pos;null==head&&(head=anchor),sel={anchor:anchor+from,head:head+from}}return{doc,sel,from,to}}(view,from,to),doc=view.state.doc,compare=doc.slice(parse.from,parse.to);8===view.input.lastKeyCode&&Date.now()-100<view.input.lastKeyCodeTime?(preferredPos=view.state.selection.to,preferredSide="end"):(preferredPos=view.state.selection.from,preferredSide="start"),view.input.lastKeyCode=null;let change=function findDiff(a,b,pos,preferredPos,preferredSide){let start=a.findDiffStart(b,pos);if(null==start)return null;let{a:endA,b:endB}=a.findDiffEnd(b,pos+a.size,pos+b.size);if("end"==preferredSide){preferredPos-=endA+Math.max(0,start-Math.min(endA,endB))-start}if(endA<start&&a.size<b.size){start-=preferredPos<=start&&preferredPos>=endA?start-preferredPos:0,endB=start+(endB-endA),endA=start}else if(endB<start){start-=preferredPos<=start&&preferredPos>=endB?start-preferredPos:0,endA=start+(endA-endB),endB=start}return{start,endA,endB}}(compare.content,parse.doc.content,parse.from,preferredPos,preferredSide);if((ios&&view.input.lastIOSEnter>Date.now()-225||android)&&addedNodes.some((n=>1==n.nodeType&&!isInline.test(n.nodeName)))&&(!change||change.endA>=change.endB)&&view.someProp("handleKeyDown",(f=>f(view,keyEvent(13,"Enter")))))return void(view.input.lastIOSEnter=0);if(!change){if(!(typeOver&&sel instanceof dist_TextSelection&&!sel.empty&&sel.$head.sameParent(sel.$anchor))||view.composing||parse.sel&&parse.sel.anchor!=parse.sel.head){if(parse.sel){let sel=resolveSelection(view,view.state.doc,parse.sel);if(sel&&!sel.eq(view.state.selection)){let tr=view.state.tr.setSelection(sel);compositionID&&tr.setMeta("composition",compositionID),view.dispatch(tr)}}return}change={start:sel.from,endA:sel.to,endB:sel.to}}if(chrome&&view.cursorWrapper&&parse.sel&&parse.sel.anchor==view.cursorWrapper.deco.from&&parse.sel.head==parse.sel.anchor){let size=change.endB-change.start;parse.sel={anchor:parse.sel.anchor+size,head:parse.sel.anchor+size}}view.input.domChangeCount++,view.state.selection.from<view.state.selection.to&&change.start==change.endB&&view.state.selection instanceof dist_TextSelection&&(change.start>view.state.selection.from&&change.start<=view.state.selection.from+2&&view.state.selection.from>=parse.from?change.start=view.state.selection.from:change.endA<view.state.selection.to&&change.endA>=view.state.selection.to-2&&view.state.selection.to<=parse.to&&(change.endB+=view.state.selection.to-change.endA,change.endA=view.state.selection.to)),ie&&ie_version<=11&&change.endB==change.start+1&&change.endA==change.start&&change.start>parse.from&&"  "==parse.doc.textBetween(change.start-parse.from-1,change.start-parse.from+1)&&(change.start--,change.endA--,change.endB--);let nextSel,$from=parse.doc.resolveNoCache(change.start-parse.from),$to=parse.doc.resolveNoCache(change.endB-parse.from),$fromA=doc.resolve(change.start),inlineChange=$from.sameParent($to)&&$from.parent.inlineContent&&$fromA.end()>=change.endA;if((ios&&view.input.lastIOSEnter>Date.now()-225&&(!inlineChange||addedNodes.some((n=>"DIV"==n.nodeName||"P"==n.nodeName)))||!inlineChange&&$from.pos<parse.doc.content.size&&!$from.sameParent($to)&&(nextSel=Selection.findFrom(parse.doc.resolve($from.pos+1),1,!0))&&nextSel.head==$to.pos)&&view.someProp("handleKeyDown",(f=>f(view,keyEvent(13,"Enter")))))return void(view.input.lastIOSEnter=0);if(view.state.selection.anchor>change.start&&function looksLikeJoin(old,start,end,$newStart,$newEnd){if(!$newStart.parent.isTextblock||end-start<=$newEnd.pos-$newStart.pos||skipClosingAndOpening($newStart,!0,!1)<$newEnd.pos)return!1;let $start=old.resolve(start);if($start.parentOffset<$start.parent.content.size||!$start.parent.isTextblock)return!1;let $next=old.resolve(skipClosingAndOpening($start,!0,!0));return!(!$next.parent.isTextblock||$next.pos>end||skipClosingAndOpening($next,!0,!1)<end)&&$newStart.parent.content.cut($newStart.parentOffset).eq($next.parent.content)}(doc,change.start,change.endA,$from,$to)&&view.someProp("handleKeyDown",(f=>f(view,keyEvent(8,"Backspace")))))return void(android&&chrome&&view.domObserver.suppressSelectionUpdates());chrome&&android&&change.endB==change.start&&(view.input.lastAndroidDelete=Date.now()),android&&!inlineChange&&$from.start()!=$to.start()&&0==$to.parentOffset&&$from.depth==$to.depth&&parse.sel&&parse.sel.anchor==parse.sel.head&&parse.sel.head==change.endA&&(change.endB-=2,$to=parse.doc.resolveNoCache(change.endB-parse.from),setTimeout((()=>{view.someProp("handleKeyDown",(function(f){return f(view,keyEvent(13,"Enter"))}))}),20));let tr,storedMarks,markChange,chFrom=change.start,chTo=change.endA;if(inlineChange)if($from.pos==$to.pos)ie&&ie_version<=11&&0==$from.parentOffset&&(view.domObserver.suppressSelectionUpdates(),setTimeout((()=>selectionToDOM(view)),20)),tr=view.state.tr.delete(chFrom,chTo),storedMarks=doc.resolve(change.start).marksAcross(doc.resolve(change.endA));else if(change.endA==change.endB&&(markChange=function isMarkChange(cur,prev){let type,mark,update,curMarks=cur.firstChild.marks,prevMarks=prev.firstChild.marks,added=curMarks,removed=prevMarks;for(let i=0;i<prevMarks.length;i++)added=prevMarks[i].removeFromSet(added);for(let i=0;i<curMarks.length;i++)removed=curMarks[i].removeFromSet(removed);if(1==added.length&&0==removed.length)mark=added[0],type="add",update=node=>node.mark(mark.addToSet(node.marks));else{if(0!=added.length||1!=removed.length)return null;mark=removed[0],type="remove",update=node=>node.mark(mark.removeFromSet(node.marks))}let updated=[];for(let i=0;i<prev.childCount;i++)updated.push(update(prev.child(i)));if(dist_Fragment.from(updated).eq(cur))return{mark,type}}($from.parent.content.cut($from.parentOffset,$to.parentOffset),$fromA.parent.content.cut($fromA.parentOffset,change.endA-$fromA.start()))))tr=view.state.tr,"add"==markChange.type?tr.addMark(chFrom,chTo,markChange.mark):tr.removeMark(chFrom,chTo,markChange.mark);else if($from.parent.child($from.index()).isText&&$from.index()==$to.index()-($to.textOffset?0:1)){let text=$from.parent.textBetween($from.parentOffset,$to.parentOffset);if(view.someProp("handleTextInput",(f=>f(view,chFrom,chTo,text))))return;tr=view.state.tr.insertText(text,chFrom,chTo)}if(tr||(tr=view.state.tr.replace(chFrom,chTo,parse.doc.slice(change.start-parse.from,change.endB-parse.from))),parse.sel){let sel=resolveSelection(view,tr.doc,parse.sel);sel&&!(chrome&&android&&view.composing&&sel.empty&&(change.start!=change.endB||view.input.lastAndroidDelete<Date.now()-100)&&(sel.head==chFrom||sel.head==tr.mapping.map(chTo)-1)||ie&&sel.empty&&sel.head==chFrom)&&tr.setSelection(sel)}storedMarks&&tr.ensureMarks(storedMarks),compositionID&&tr.setMeta("composition",compositionID),view.dispatch(tr.scrollIntoView())}function resolveSelection(view,doc,parsedSel){return Math.max(parsedSel.anchor,parsedSel.head)>doc.content.size?null:selectionBetween(view,doc.resolve(parsedSel.anchor),doc.resolve(parsedSel.head))}function skipClosingAndOpening($pos,fromEnd,mayOpen){let depth=$pos.depth,end=fromEnd?$pos.end():$pos.pos;for(;depth>0&&(fromEnd||$pos.indexAfter(depth)==$pos.node(depth).childCount);)depth--,end++,fromEnd=!1;if(mayOpen){let next=$pos.node(depth).maybeChild($pos.indexAfter(depth));for(;next&&!next.isLeaf;)next=next.firstChild,end++}return end}class EditorView{constructor(place,props){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new InputState,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=props,this.state=props.state,this.directPlugins=props.plugins||[],this.directPlugins.forEach(checkStateComponent),this.dispatch=this.dispatch.bind(this),this.dom=place&&place.mount||document.createElement("div"),place&&(place.appendChild?place.appendChild(this.dom):"function"==typeof place?place(this.dom):place.mount&&(this.mounted=!0)),this.editable=getEditable(this),updateCursorWrapper(this),this.nodeViews=buildNodeViews(this),this.docView=docViewDesc(this.state.doc,computeDocDeco(this),viewDecorations(this),this.dom,this),this.domObserver=new DOMObserver(this,((from,to,typeOver,added)=>readDOMChange(this,from,to,typeOver,added))),this.domObserver.start(),function initInput(view){for(let event in handlers){let handler=handlers[event];view.dom.addEventListener(event,view.input.eventHandlers[event]=event=>{!eventBelongsToView(view,event)||runCustomHandler(view,event)||!view.editable&&event.type in editHandlers||handler(view,event)},passiveHandlers[event]?{passive:!0}:void 0)}safari&&view.dom.addEventListener("input",(()=>null)),ensureListeners(view)}(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let prev=this._props;this._props={};for(let name in prev)this._props[name]=prev[name];this._props.state=this.state}return this._props}update(props){props.handleDOMEvents!=this._props.handleDOMEvents&&ensureListeners(this);let prevProps=this._props;this._props=props,props.plugins&&(props.plugins.forEach(checkStateComponent),this.directPlugins=props.plugins),this.updateStateInner(props.state,prevProps)}setProps(props){let updated={};for(let name in this._props)updated[name]=this._props[name];updated.state=this.state;for(let name in props)updated[name]=props[name];this.update(updated)}updateState(state){this.updateStateInner(state,this._props)}updateStateInner(state,prevProps){let prev=this.state,redraw=!1,updateSel=!1;state.storedMarks&&this.composing&&(clearComposition(this),updateSel=!0),this.state=state;let pluginsChanged=prev.plugins!=state.plugins||this._props.plugins!=prevProps.plugins;if(pluginsChanged||this._props.plugins!=prevProps.plugins||this._props.nodeViews!=prevProps.nodeViews){let nodeViews=buildNodeViews(this);(function changedNodeViews(a,b){let nA=0,nB=0;for(let prop in a){if(a[prop]!=b[prop])return!0;nA++}for(let _ in b)nB++;return nA!=nB})(nodeViews,this.nodeViews)&&(this.nodeViews=nodeViews,redraw=!0)}(pluginsChanged||prevProps.handleDOMEvents!=this._props.handleDOMEvents)&&ensureListeners(this),this.editable=getEditable(this),updateCursorWrapper(this);let innerDeco=viewDecorations(this),outerDeco=computeDocDeco(this),scroll=prev.plugins==state.plugins||prev.doc.eq(state.doc)?state.scrollToSelection>prev.scrollToSelection?"to selection":"preserve":"reset",updateDoc=redraw||!this.docView.matchesNode(state.doc,outerDeco,innerDeco);!updateDoc&&state.selection.eq(prev.selection)||(updateSel=!0);let oldScrollPos="preserve"==scroll&&updateSel&&null==this.dom.style.overflowAnchor&&function storeScrollPos(view){let refDOM,refTop,rect=view.dom.getBoundingClientRect(),startY=Math.max(0,rect.top);for(let x=(rect.left+rect.right)/2,y=startY+1;y<Math.min(innerHeight,rect.bottom);y+=5){let dom=view.root.elementFromPoint(x,y);if(!dom||dom==view.dom||!view.dom.contains(dom))continue;let localRect=dom.getBoundingClientRect();if(localRect.top>=startY-20){refDOM=dom,refTop=localRect.top;break}}return{refDOM,refTop,stack:scrollStack(view.dom)}}(this);if(updateSel){this.domObserver.stop();let forceSelUpdate=updateDoc&&(ie||chrome)&&!this.composing&&!prev.selection.empty&&!state.selection.empty&&function selectionContextChanged(sel1,sel2){let depth=Math.min(sel1.$anchor.sharedDepth(sel1.head),sel2.$anchor.sharedDepth(sel2.head));return sel1.$anchor.start(depth)!=sel2.$anchor.start(depth)}(prev.selection,state.selection);if(updateDoc){let chromeKludge=chrome?this.trackWrites=this.domSelectionRange().focusNode:null;!redraw&&this.docView.update(state.doc,outerDeco,innerDeco,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=docViewDesc(state.doc,outerDeco,innerDeco,this.dom,this)),chromeKludge&&!this.trackWrites&&(forceSelUpdate=!0)}forceSelUpdate||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&function anchorInRightPlace(view){let anchorDOM=view.docView.domFromPos(view.state.selection.anchor,0),domSel=view.domSelectionRange();return isEquivalentPosition(anchorDOM.node,anchorDOM.offset,domSel.anchorNode,domSel.anchorOffset)}(this))?selectionToDOM(this,forceSelUpdate):(syncNodeSelection(this,state.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(prev),"reset"==scroll?this.dom.scrollTop=0:"to selection"==scroll?this.scrollToSelection():oldScrollPos&&function resetScrollPos({refDOM,refTop,stack}){let newRefTop=refDOM?refDOM.getBoundingClientRect().top:0;restoreScrollStack(stack,0==newRefTop?0:newRefTop-refTop)}(oldScrollPos)}scrollToSelection(){let startDOM=this.domSelectionRange().focusNode;if(this.someProp("handleScrollToSelection",(f=>f(this))));else if(this.state.selection instanceof dist_NodeSelection){let target=this.docView.domAfterPos(this.state.selection.from);1==target.nodeType&&scrollRectIntoView(this,target.getBoundingClientRect(),startDOM)}else scrollRectIntoView(this,this.coordsAtPos(this.state.selection.head,1),startDOM)}destroyPluginViews(){let view;for(;view=this.pluginViews.pop();)view.destroy&&view.destroy()}updatePluginViews(prevState){if(prevState&&prevState.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let i=0;i<this.pluginViews.length;i++){let pluginView=this.pluginViews[i];pluginView.update&&pluginView.update(this,prevState)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let i=0;i<this.directPlugins.length;i++){let plugin=this.directPlugins[i];plugin.spec.view&&this.pluginViews.push(plugin.spec.view(this))}for(let i=0;i<this.state.plugins.length;i++){let plugin=this.state.plugins[i];plugin.spec.view&&this.pluginViews.push(plugin.spec.view(this))}}}someProp(propName,f){let value,prop=this._props&&this._props[propName];if(null!=prop&&(value=f?f(prop):prop))return value;for(let i=0;i<this.directPlugins.length;i++){let prop=this.directPlugins[i].props[propName];if(null!=prop&&(value=f?f(prop):prop))return value}let plugins=this.state.plugins;if(plugins)for(let i=0;i<plugins.length;i++){let prop=plugins[i].props[propName];if(null!=prop&&(value=f?f(prop):prop))return value}}hasFocus(){if(ie){let node=this.root.activeElement;if(node==this.dom)return!0;if(!node||!this.dom.contains(node))return!1;for(;node&&this.dom!=node&&this.dom.contains(node);){if("false"==node.contentEditable)return!1;node=node.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function focusPreventScroll(dom){if(dom.setActive)return dom.setActive();if(preventScrollSupported)return dom.focus(preventScrollSupported);let stored=scrollStack(dom);dom.focus(null==preventScrollSupported?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),preventScrollSupported||(preventScrollSupported=!1,restoreScrollStack(stored,0))}(this.dom),selectionToDOM(this),this.domObserver.start()}get root(){let cached=this._root;if(null==cached)for(let search=this.dom.parentNode;search;search=search.parentNode)if(9==search.nodeType||11==search.nodeType&&search.host)return search.getSelection||(Object.getPrototypeOf(search).getSelection=()=>search.ownerDocument.getSelection()),this._root=search;return cached||document}posAtCoords(coords){return posAtCoords(this,coords)}coordsAtPos(pos,side=1){return coordsAtPos(this,pos,side)}domAtPos(pos,side=0){return this.docView.domFromPos(pos,side)}nodeDOM(pos){let desc=this.docView.descAt(pos);return desc?desc.nodeDOM:null}posAtDOM(node,offset,bias=-1){let pos=this.docView.posFromDOM(node,offset,bias);if(null==pos)throw new RangeError("DOM position not inside the editor");return pos}endOfTextblock(dir,state){return endOfTextblock(this,state||this.state,dir)}pasteHTML(html,event){return doPaste(this,"",html,!1,event||new ClipboardEvent("paste"))}pasteText(text,event){return doPaste(this,text,null,!0,event||new ClipboardEvent("paste"))}destroy(){this.docView&&(!function destroyInput(view){view.domObserver.stop();for(let type in view.input.eventHandlers)view.dom.removeEventListener(type,view.input.eventHandlers[type]);clearTimeout(view.input.composingTimeout),clearTimeout(view.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],viewDecorations(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return null==this.docView}dispatchEvent(event){return function dispatchEvent(view,event){runCustomHandler(view,event)||!handlers[event.type]||!view.editable&&event.type in editHandlers||handlers[event.type](view,event)}(this,event)}dispatch(tr){let dispatchTransaction=this._props.dispatchTransaction;dispatchTransaction?dispatchTransaction.call(this,tr):this.updateState(this.state.apply(tr))}domSelectionRange(){return safari&&11===this.root.nodeType&&function deepActiveElement(doc){let elt=doc.activeElement;for(;elt&&elt.shadowRoot;)elt=elt.shadowRoot.activeElement;return elt}(this.dom.ownerDocument)==this.dom?function safariShadowSelectionRange(view){let found;function read(event){event.preventDefault(),event.stopImmediatePropagation(),found=event.getTargetRanges()[0]}view.dom.addEventListener("beforeinput",read,!0),document.execCommand("indent"),view.dom.removeEventListener("beforeinput",read,!0);let anchorNode=found.startContainer,anchorOffset=found.startOffset,focusNode=found.endContainer,focusOffset=found.endOffset,currentAnchor=view.domAtPos(view.state.selection.anchor);return isEquivalentPosition(currentAnchor.node,currentAnchor.offset,focusNode,focusOffset)&&([anchorNode,anchorOffset,focusNode,focusOffset]=[focusNode,focusOffset,anchorNode,anchorOffset]),{anchorNode,anchorOffset,focusNode,focusOffset}}(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function computeDocDeco(view){let attrs=Object.create(null);return attrs.class="ProseMirror",attrs.contenteditable=String(view.editable),view.someProp("attributes",(value=>{if("function"==typeof value&&(value=value(view.state)),value)for(let attr in value)"class"==attr?attrs.class+=" "+value[attr]:"style"==attr?attrs.style=(attrs.style?attrs.style+";":"")+value[attr]:attrs[attr]||"contenteditable"==attr||"nodeName"==attr||(attrs[attr]=String(value[attr]))})),attrs.translate||(attrs.translate="no"),[Decoration.node(0,view.state.doc.content.size,attrs)]}function updateCursorWrapper(view){if(view.markCursor){let dom=document.createElement("img");dom.className="ProseMirror-separator",dom.setAttribute("mark-placeholder","true"),dom.setAttribute("alt",""),view.cursorWrapper={dom,deco:Decoration.widget(view.state.selection.head,dom,{raw:!0,marks:view.markCursor})}}else view.cursorWrapper=null}function getEditable(view){return!view.someProp("editable",(value=>!1===value(view.state)))}function buildNodeViews(view){let result=Object.create(null);function add(obj){for(let prop in obj)Object.prototype.hasOwnProperty.call(result,prop)||(result[prop]=obj[prop])}return view.someProp("nodeViews",add),view.someProp("markViews",add),result}function checkStateComponent(plugin){if(plugin.spec.state||plugin.spec.filterTransaction||plugin.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}for(var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},w3c_keyname_mac="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),w3c_keyname_ie="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),i=0;i<10;i++)base[48+i]=base[96+i]=String(i);for(i=1;i<=24;i++)base[i+111]="F"+i;for(i=65;i<=90;i++)base[i]=String.fromCharCode(i+32),shift[i]=String.fromCharCode(i);for(var code in base)shift.hasOwnProperty(code)||(shift[code]=base[code]);const prosemirror_keymap_dist_mac="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function normalizeKeyName(name){let alt,ctrl,shift,meta,parts=name.split(/-(?!$)/),result=parts[parts.length-1];"Space"==result&&(result=" ");for(let i=0;i<parts.length-1;i++){let mod=parts[i];if(/^(cmd|meta|m)$/i.test(mod))meta=!0;else if(/^a(lt)?$/i.test(mod))alt=!0;else if(/^(c|ctrl|control)$/i.test(mod))ctrl=!0;else if(/^s(hift)?$/i.test(mod))shift=!0;else{if(!/^mod$/i.test(mod))throw new Error("Unrecognized modifier name: "+mod);prosemirror_keymap_dist_mac?meta=!0:ctrl=!0}}return alt&&(result="Alt-"+result),ctrl&&(result="Ctrl-"+result),meta&&(result="Meta-"+result),shift&&(result="Shift-"+result),result}function modifiers(name,event,shift=!0){return event.altKey&&(name="Alt-"+name),event.ctrlKey&&(name="Ctrl-"+name),event.metaKey&&(name="Meta-"+name),shift&&event.shiftKey&&(name="Shift-"+name),name}function keymap(bindings){return new dist_Plugin({props:{handleKeyDown:keydownHandler(bindings)}})}function keydownHandler(bindings){let map=function normalize(map){let copy=Object.create(null);for(let prop in map)copy[normalizeKeyName(prop)]=map[prop];return copy}(bindings);return function(view,event){let baseName,name=function keyName(event){var name=!(w3c_keyname_mac&&event.metaKey&&event.shiftKey&&!event.ctrlKey&&!event.altKey||w3c_keyname_ie&&event.shiftKey&&event.key&&1==event.key.length||"Unidentified"==event.key)&&event.key||(event.shiftKey?shift:base)[event.keyCode]||event.key||"Unidentified";return"Esc"==name&&(name="Escape"),"Del"==name&&(name="Delete"),"Left"==name&&(name="ArrowLeft"),"Up"==name&&(name="ArrowUp"),"Right"==name&&(name="ArrowRight"),"Down"==name&&(name="ArrowDown"),name}(event),direct=map[modifiers(name,event)];if(direct&&direct(view.state,view.dispatch,view))return!0;if(1==name.length&&" "!=name){if(event.shiftKey){let noShift=map[modifiers(name,event,!1)];if(noShift&&noShift(view.state,view.dispatch,view))return!0}if((event.shiftKey||event.altKey||event.metaKey||name.charCodeAt(0)>127)&&(baseName=base[event.keyCode])&&baseName!=name){let fromCode=map[modifiers(baseName,event)];if(fromCode&&fromCode(view.state,view.dispatch,view))return!0}}return!1}}var readFromCache,addToCache;if("undefined"!=typeof WeakMap){let cache=new WeakMap;readFromCache=key=>cache.get(key),addToCache=(key,value)=>(cache.set(key,value),value)}else{const cache=[],cacheSize=10;let cachePos=0;readFromCache=key=>{for(let i=0;i<cache.length;i+=2)if(cache[i]==key)return cache[i+1]},addToCache=(key,value)=>(cachePos==cacheSize&&(cachePos=0),cache[cachePos++]=key,cache[cachePos++]=value)}var TableMap=class{constructor(width,height,map,problems){this.width=width,this.height=height,this.map=map,this.problems=problems}findCell(pos){for(let i=0;i<this.map.length;i++){const curPos=this.map[i];if(curPos!=pos)continue;const left=i%this.width,top=i/this.width|0;let right=left+1,bottom=top+1;for(let j=1;right<this.width&&this.map[i+j]==curPos;j++)right++;for(let j=1;bottom<this.height&&this.map[i+this.width*j]==curPos;j++)bottom++;return{left,top,right,bottom}}throw new RangeError(`No cell with offset ${pos} found`)}colCount(pos){for(let i=0;i<this.map.length;i++)if(this.map[i]==pos)return i%this.width;throw new RangeError(`No cell with offset ${pos} found`)}nextCell(pos,axis,dir){const{left,right,top,bottom}=this.findCell(pos);return"horiz"==axis?(dir<0?0==left:right==this.width)?null:this.map[top*this.width+(dir<0?left-1:right)]:(dir<0?0==top:bottom==this.height)?null:this.map[left+this.width*(dir<0?top-1:bottom)]}rectBetween(a,b){const{left:leftA,right:rightA,top:topA,bottom:bottomA}=this.findCell(a),{left:leftB,right:rightB,top:topB,bottom:bottomB}=this.findCell(b);return{left:Math.min(leftA,leftB),top:Math.min(topA,topB),right:Math.max(rightA,rightB),bottom:Math.max(bottomA,bottomB)}}cellsInRect(rect){const result=[],seen={};for(let row=rect.top;row<rect.bottom;row++)for(let col=rect.left;col<rect.right;col++){const index=row*this.width+col,pos=this.map[index];seen[pos]||(seen[pos]=!0,col==rect.left&&col&&this.map[index-1]==pos||row==rect.top&&row&&this.map[index-this.width]==pos||result.push(pos))}return result}positionAt(row,col,table){for(let i=0,rowStart=0;;i++){const rowEnd=rowStart+table.child(i).nodeSize;if(i==row){let index=col+row*this.width;const rowEndIndex=(row+1)*this.width;for(;index<rowEndIndex&&this.map[index]<rowStart;)index++;return index==rowEndIndex?rowEnd-1:this.map[index]}rowStart=rowEnd}}static get(table){return readFromCache(table)||addToCache(table,function computeMap(table){if("table"!=table.type.spec.tableRole)throw new RangeError("Not a table node: "+table.type.name);const width=function findWidth(table){let width=-1,hasRowSpan=!1;for(let row=0;row<table.childCount;row++){const rowNode=table.child(row);let rowWidth=0;if(hasRowSpan)for(let j=0;j<row;j++){const prevRow=table.child(j);for(let i=0;i<prevRow.childCount;i++){const cell=prevRow.child(i);j+cell.attrs.rowspan>row&&(rowWidth+=cell.attrs.colspan)}}for(let i=0;i<rowNode.childCount;i++){const cell=rowNode.child(i);rowWidth+=cell.attrs.colspan,cell.attrs.rowspan>1&&(hasRowSpan=!0)}-1==width?width=rowWidth:width!=rowWidth&&(width=Math.max(width,rowWidth))}return width}(table),height=table.childCount,map=[];let mapPos=0,problems=null;const colWidths=[];for(let i=0,e=width*height;i<e;i++)map[i]=0;for(let row=0,pos=0;row<height;row++){const rowNode=table.child(row);pos++;for(let i=0;;i++){for(;mapPos<map.length&&0!=map[mapPos];)mapPos++;if(i==rowNode.childCount)break;const cellNode=rowNode.child(i),{colspan,rowspan,colwidth}=cellNode.attrs;for(let h=0;h<rowspan;h++){if(h+row>=height){(problems||(problems=[])).push({type:"overlong_rowspan",pos,n:rowspan-h});break}const start=mapPos+h*width;for(let w=0;w<colspan;w++){0==map[start+w]?map[start+w]=pos:(problems||(problems=[])).push({type:"collision",row,pos,n:colspan-w});const colW=colwidth&&colwidth[w];if(colW){const widthIndex=(start+w)%width*2,prev=colWidths[widthIndex];null==prev||prev!=colW&&1==colWidths[widthIndex+1]?(colWidths[widthIndex]=colW,colWidths[widthIndex+1]=1):prev==colW&&colWidths[widthIndex+1]++}}}mapPos+=colspan,pos+=cellNode.nodeSize}const expectedPos=(row+1)*width;let missing=0;for(;mapPos<expectedPos;)0==map[mapPos++]&&missing++;missing&&(problems||(problems=[])).push({type:"missing",row,n:missing}),pos++}const tableMap=new TableMap(width,height,map,problems);let badWidths=!1;for(let i=0;!badWidths&&i<colWidths.length;i+=2)null!=colWidths[i]&&colWidths[i+1]<height&&(badWidths=!0);badWidths&&function findBadColWidths(map,colWidths,table){map.problems||(map.problems=[]);const seen={};for(let i=0;i<map.map.length;i++){const pos=map.map[i];if(seen[pos])continue;seen[pos]=!0;const node=table.nodeAt(pos);if(!node)throw new RangeError(`No cell with offset ${pos} found`);let updated=null;const attrs=node.attrs;for(let j=0;j<attrs.colspan;j++){const colWidth=colWidths[2*((i+j)%map.width)];null==colWidth||attrs.colwidth&&attrs.colwidth[j]==colWidth||((updated||(updated=freshColWidth(attrs)))[j]=colWidth)}updated&&map.problems.unshift({type:"colwidth mismatch",pos,colwidth:updated})}}(tableMap,colWidths,table);return tableMap}(table))}};function freshColWidth(attrs){if(attrs.colwidth)return attrs.colwidth.slice();const result=[];for(let i=0;i<attrs.colspan;i++)result.push(0);return result}function getCellAttrs(dom,extraAttrs){if("string"==typeof dom)return{};const widthAttr=dom.getAttribute("data-colwidth"),widths=widthAttr&&/^\d+(,\d+)*$/.test(widthAttr)?widthAttr.split(",").map((s=>Number(s))):null,colspan=Number(dom.getAttribute("colspan")||1),result={colspan,rowspan:Number(dom.getAttribute("rowspan")||1),colwidth:widths&&widths.length==colspan?widths:null};for(const prop in extraAttrs){const getter=extraAttrs[prop].getFromDOM,value=getter&&getter(dom);null!=value&&(result[prop]=value)}return result}function setCellAttrs(node,extraAttrs){const attrs={};1!=node.attrs.colspan&&(attrs.colspan=node.attrs.colspan),1!=node.attrs.rowspan&&(attrs.rowspan=node.attrs.rowspan),node.attrs.colwidth&&(attrs["data-colwidth"]=node.attrs.colwidth.join(","));for(const prop in extraAttrs){const setter=extraAttrs[prop].setDOMAttr;setter&&setter(node.attrs[prop],attrs)}return attrs}function tableNodeTypes(schema){let result=schema.cached.tableNodeTypes;if(!result){result=schema.cached.tableNodeTypes={};for(const name in schema.nodes){const type=schema.nodes[name],role=type.spec.tableRole;role&&(result[role]=type)}}return result}var tableEditingKey=new PluginKey("selectingCells");function cellAround($pos){for(let d=$pos.depth-1;d>0;d--)if("row"==$pos.node(d).type.spec.tableRole)return $pos.node(0).resolve($pos.before(d+1));return null}function isInTable(state){const $head=state.selection.$head;for(let d=$head.depth;d>0;d--)if("row"==$head.node(d).type.spec.tableRole)return!0;return!1}function selectionCell(state){const sel=state.selection;if("$anchorCell"in sel&&sel.$anchorCell)return sel.$anchorCell.pos>sel.$headCell.pos?sel.$anchorCell:sel.$headCell;if("node"in sel&&sel.node&&"cell"==sel.node.type.spec.tableRole)return sel.$anchor;const $cell=cellAround(sel.$head)||function cellNear($pos){for(let after=$pos.nodeAfter,pos=$pos.pos;after;after=after.firstChild,pos++){const role=after.type.spec.tableRole;if("cell"==role||"header_cell"==role)return $pos.doc.resolve(pos)}for(let before=$pos.nodeBefore,pos=$pos.pos;before;before=before.lastChild,pos--){const role=before.type.spec.tableRole;if("cell"==role||"header_cell"==role)return $pos.doc.resolve(pos-before.nodeSize)}}(sel.$head);if($cell)return $cell;throw new RangeError(`No cell found around position ${sel.head}`)}function pointsAtCell($pos){return"row"==$pos.parent.type.spec.tableRole&&!!$pos.nodeAfter}function inSameTable($cellA,$cellB){return $cellA.depth==$cellB.depth&&$cellA.pos>=$cellB.start(-1)&&$cellA.pos<=$cellB.end(-1)}function nextCell($pos,axis,dir){const table=$pos.node(-1),map=TableMap.get(table),tableStart=$pos.start(-1),moved=map.nextCell($pos.pos-tableStart,axis,dir);return null==moved?null:$pos.node(0).resolve(tableStart+moved)}function removeColSpan(attrs,pos,n=1){const result={...attrs,colspan:attrs.colspan-n};return result.colwidth&&(result.colwidth=result.colwidth.slice(),result.colwidth.splice(pos,n),result.colwidth.some((w=>w>0))||(result.colwidth=null)),result}function addColSpan(attrs,pos,n=1){const result={...attrs,colspan:attrs.colspan+n};if(result.colwidth){result.colwidth=result.colwidth.slice();for(let i=0;i<n;i++)result.colwidth.splice(pos,0,0)}return result}var CellSelection=class extends Selection{constructor($anchorCell,$headCell=$anchorCell){const table=$anchorCell.node(-1),map=TableMap.get(table),tableStart=$anchorCell.start(-1),rect=map.rectBetween($anchorCell.pos-tableStart,$headCell.pos-tableStart),doc=$anchorCell.node(0),cells=map.cellsInRect(rect).filter((p=>p!=$headCell.pos-tableStart));cells.unshift($headCell.pos-tableStart);const ranges=cells.map((pos=>{const cell=table.nodeAt(pos);if(!cell)throw RangeError(`No cell with offset ${pos} found`);const from=tableStart+pos+1;return new SelectionRange(doc.resolve(from),doc.resolve(from+cell.content.size))}));super(ranges[0].$from,ranges[0].$to,ranges),this.$anchorCell=$anchorCell,this.$headCell=$headCell}map(doc,mapping){const $anchorCell=doc.resolve(mapping.map(this.$anchorCell.pos)),$headCell=doc.resolve(mapping.map(this.$headCell.pos));if(pointsAtCell($anchorCell)&&pointsAtCell($headCell)&&inSameTable($anchorCell,$headCell)){const tableChanged=this.$anchorCell.node(-1)!=$anchorCell.node(-1);return tableChanged&&this.isRowSelection()?CellSelection.rowSelection($anchorCell,$headCell):tableChanged&&this.isColSelection()?CellSelection.colSelection($anchorCell,$headCell):new CellSelection($anchorCell,$headCell)}return dist_TextSelection.between($anchorCell,$headCell)}content(){const table=this.$anchorCell.node(-1),map=TableMap.get(table),tableStart=this.$anchorCell.start(-1),rect=map.rectBetween(this.$anchorCell.pos-tableStart,this.$headCell.pos-tableStart),seen={},rows=[];for(let row=rect.top;row<rect.bottom;row++){const rowContent=[];for(let index=row*map.width+rect.left,col=rect.left;col<rect.right;col++,index++){const pos=map.map[index];if(seen[pos])continue;seen[pos]=!0;const cellRect=map.findCell(pos);let cell=table.nodeAt(pos);if(!cell)throw RangeError(`No cell with offset ${pos} found`);const extraLeft=rect.left-cellRect.left,extraRight=cellRect.right-rect.right;if(extraLeft>0||extraRight>0){let attrs=cell.attrs;if(extraLeft>0&&(attrs=removeColSpan(attrs,0,extraLeft)),extraRight>0&&(attrs=removeColSpan(attrs,attrs.colspan-extraRight,extraRight)),cellRect.left<rect.left){if(cell=cell.type.createAndFill(attrs),!cell)throw RangeError(`Could not create cell with attrs ${JSON.stringify(attrs)}`)}else cell=cell.type.create(attrs,cell.content)}if(cellRect.top<rect.top||cellRect.bottom>rect.bottom){const attrs={...cell.attrs,rowspan:Math.min(cellRect.bottom,rect.bottom)-Math.max(cellRect.top,rect.top)};cell=cellRect.top<rect.top?cell.type.createAndFill(attrs):cell.type.create(attrs,cell.content)}rowContent.push(cell)}rows.push(table.child(row).copy(dist_Fragment.from(rowContent)))}const fragment=this.isColSelection()&&this.isRowSelection()?table:rows;return new dist_Slice(dist_Fragment.from(fragment),1,1)}replace(tr,content=dist_Slice.empty){const mapFrom=tr.steps.length,ranges=this.ranges;for(let i=0;i<ranges.length;i++){const{$from,$to}=ranges[i],mapping=tr.mapping.slice(mapFrom);tr.replace(mapping.map($from.pos),mapping.map($to.pos),i?dist_Slice.empty:content)}const sel=Selection.findFrom(tr.doc.resolve(tr.mapping.slice(mapFrom).map(this.to)),-1);sel&&tr.setSelection(sel)}replaceWith(tr,node){this.replace(tr,new dist_Slice(dist_Fragment.from(node),0,0))}forEachCell(f){const table=this.$anchorCell.node(-1),map=TableMap.get(table),tableStart=this.$anchorCell.start(-1),cells=map.cellsInRect(map.rectBetween(this.$anchorCell.pos-tableStart,this.$headCell.pos-tableStart));for(let i=0;i<cells.length;i++)f(table.nodeAt(cells[i]),tableStart+cells[i])}isColSelection(){const anchorTop=this.$anchorCell.index(-1),headTop=this.$headCell.index(-1);if(Math.min(anchorTop,headTop)>0)return!1;const anchorBottom=anchorTop+this.$anchorCell.nodeAfter.attrs.rowspan,headBottom=headTop+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(anchorBottom,headBottom)==this.$headCell.node(-1).childCount}static colSelection($anchorCell,$headCell=$anchorCell){const table=$anchorCell.node(-1),map=TableMap.get(table),tableStart=$anchorCell.start(-1),anchorRect=map.findCell($anchorCell.pos-tableStart),headRect=map.findCell($headCell.pos-tableStart),doc=$anchorCell.node(0);return anchorRect.top<=headRect.top?(anchorRect.top>0&&($anchorCell=doc.resolve(tableStart+map.map[anchorRect.left])),headRect.bottom<map.height&&($headCell=doc.resolve(tableStart+map.map[map.width*(map.height-1)+headRect.right-1]))):(headRect.top>0&&($headCell=doc.resolve(tableStart+map.map[headRect.left])),anchorRect.bottom<map.height&&($anchorCell=doc.resolve(tableStart+map.map[map.width*(map.height-1)+anchorRect.right-1]))),new CellSelection($anchorCell,$headCell)}isRowSelection(){const table=this.$anchorCell.node(-1),map=TableMap.get(table),tableStart=this.$anchorCell.start(-1),anchorLeft=map.colCount(this.$anchorCell.pos-tableStart),headLeft=map.colCount(this.$headCell.pos-tableStart);if(Math.min(anchorLeft,headLeft)>0)return!1;const anchorRight=anchorLeft+this.$anchorCell.nodeAfter.attrs.colspan,headRight=headLeft+this.$headCell.nodeAfter.attrs.colspan;return Math.max(anchorRight,headRight)==map.width}eq(other){return other instanceof CellSelection&&other.$anchorCell.pos==this.$anchorCell.pos&&other.$headCell.pos==this.$headCell.pos}static rowSelection($anchorCell,$headCell=$anchorCell){const table=$anchorCell.node(-1),map=TableMap.get(table),tableStart=$anchorCell.start(-1),anchorRect=map.findCell($anchorCell.pos-tableStart),headRect=map.findCell($headCell.pos-tableStart),doc=$anchorCell.node(0);return anchorRect.left<=headRect.left?(anchorRect.left>0&&($anchorCell=doc.resolve(tableStart+map.map[anchorRect.top*map.width])),headRect.right<map.width&&($headCell=doc.resolve(tableStart+map.map[map.width*(headRect.top+1)-1]))):(headRect.left>0&&($headCell=doc.resolve(tableStart+map.map[headRect.top*map.width])),anchorRect.right<map.width&&($anchorCell=doc.resolve(tableStart+map.map[map.width*(anchorRect.top+1)-1]))),new CellSelection($anchorCell,$headCell)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(doc,json){return new CellSelection(doc.resolve(json.anchor),doc.resolve(json.head))}static create(doc,anchorCell,headCell=anchorCell){return new CellSelection(doc.resolve(anchorCell),doc.resolve(headCell))}getBookmark(){return new CellBookmark(this.$anchorCell.pos,this.$headCell.pos)}};CellSelection.prototype.visible=!1,Selection.jsonID("cell",CellSelection);var CellBookmark=class{constructor(anchor,head){this.anchor=anchor,this.head=head}map(mapping){return new CellBookmark(mapping.map(this.anchor),mapping.map(this.head))}resolve(doc){const $anchorCell=doc.resolve(this.anchor),$headCell=doc.resolve(this.head);return"row"==$anchorCell.parent.type.spec.tableRole&&"row"==$headCell.parent.type.spec.tableRole&&$anchorCell.index()<$anchorCell.parent.childCount&&$headCell.index()<$headCell.parent.childCount&&inSameTable($anchorCell,$headCell)?new CellSelection($anchorCell,$headCell):Selection.near($headCell,1)}};function drawCellSelection(state){if(!(state.selection instanceof CellSelection))return null;const cells=[];return state.selection.forEachCell(((node,pos)=>{cells.push(Decoration.node(pos,pos+node.nodeSize,{class:"selectedCell"}))})),DecorationSet.create(state.doc,cells)}var fixTablesKey=new PluginKey("fix-tables");function changedDescendants(old,cur,offset,f){const oldSize=old.childCount,curSize=cur.childCount;outer:for(let i=0,j=0;i<curSize;i++){const child=cur.child(i);for(let scan=j,e=Math.min(oldSize,i+3);scan<e;scan++)if(old.child(scan)==child){j=scan+1,offset+=child.nodeSize;continue outer}f(child,offset),j<oldSize&&old.child(j).sameMarkup(child)?changedDescendants(old.child(j),child,offset+1,f):child.nodesBetween(0,child.content.size,f,offset+1),offset+=child.nodeSize}}function fixTables(state,oldState){let tr;const check=(node,pos)=>{"table"==node.type.spec.tableRole&&(tr=function fixTable(state,table,tablePos,tr){const map=TableMap.get(table);if(!map.problems)return tr;tr||(tr=state.tr);const mustAdd=[];for(let i=0;i<map.height;i++)mustAdd.push(0);for(let i=0;i<map.problems.length;i++){const prob=map.problems[i];if("collision"==prob.type){const cell=table.nodeAt(prob.pos);if(!cell)continue;const attrs=cell.attrs;for(let j=0;j<attrs.rowspan;j++)mustAdd[prob.row+j]+=prob.n;tr.setNodeMarkup(tr.mapping.map(tablePos+1+prob.pos),null,removeColSpan(attrs,attrs.colspan-prob.n,prob.n))}else if("missing"==prob.type)mustAdd[prob.row]+=prob.n;else if("overlong_rowspan"==prob.type){const cell=table.nodeAt(prob.pos);if(!cell)continue;tr.setNodeMarkup(tr.mapping.map(tablePos+1+prob.pos),null,{...cell.attrs,rowspan:cell.attrs.rowspan-prob.n})}else if("colwidth mismatch"==prob.type){const cell=table.nodeAt(prob.pos);if(!cell)continue;tr.setNodeMarkup(tr.mapping.map(tablePos+1+prob.pos),null,{...cell.attrs,colwidth:prob.colwidth})}}let first,last;for(let i=0;i<mustAdd.length;i++)mustAdd[i]&&(null==first&&(first=i),last=i);for(let i=0,pos=tablePos+1;i<map.height;i++){const row=table.child(i),end=pos+row.nodeSize,add=mustAdd[i];if(add>0){let role="cell";row.firstChild&&(role=row.firstChild.type.spec.tableRole);const nodes=[];for(let j=0;j<add;j++){const node=tableNodeTypes(state.schema)[role].createAndFill();node&&nodes.push(node)}const side=0!=i&&first!=i-1||last!=i?end-1:pos+1;tr.insert(tr.mapping.map(side),nodes)}pos=end}return tr.setMeta(fixTablesKey,{fixTables:!0})}(state,node,pos,tr))};return oldState?oldState.doc!=state.doc&&changedDescendants(oldState.doc,state.doc,0,check):state.doc.descendants(check),tr}function pastedCells(slice){if(!slice.size)return null;let{content,openStart,openEnd}=slice;for(;1==content.childCount&&(openStart>0&&openEnd>0||"table"==content.child(0).type.spec.tableRole);)openStart--,openEnd--,content=content.child(0).content;const first=content.child(0),role=first.type.spec.tableRole,schema=first.type.schema,rows=[];if("row"==role)for(let i=0;i<content.childCount;i++){let cells=content.child(i).content;const left=i?0:Math.max(0,openStart-1),right=i<content.childCount-1?0:Math.max(0,openEnd-1);(left||right)&&(cells=fitSlice(tableNodeTypes(schema).row,new dist_Slice(cells,left,right)).content),rows.push(cells)}else{if("cell"!=role&&"header_cell"!=role)return null;rows.push(openStart||openEnd?fitSlice(tableNodeTypes(schema).row,new dist_Slice(content,openStart,openEnd)).content:content)}return function ensureRectangular(schema,rows){const widths=[];for(let i=0;i<rows.length;i++){const row=rows[i];for(let j=row.childCount-1;j>=0;j--){const{rowspan,colspan}=row.child(j).attrs;for(let r=i;r<i+rowspan;r++)widths[r]=(widths[r]||0)+colspan}}let width=0;for(let r=0;r<widths.length;r++)width=Math.max(width,widths[r]);for(let r=0;r<widths.length;r++)if(r>=rows.length&&rows.push(dist_Fragment.empty),widths[r]<width){const empty=tableNodeTypes(schema).cell.createAndFill(),cells=[];for(let i=widths[r];i<width;i++)cells.push(empty);rows[r]=rows[r].append(dist_Fragment.from(cells))}return{height:rows.length,width,rows}}(schema,rows)}function fitSlice(nodeType,slice){const node=nodeType.createAndFill();return new Transform(node).replace(0,node.content.size,slice).doc}function isolateHorizontal(tr,map,table,start,left,right,top,mapFrom){if(0==top||top==map.height)return!1;let found=!1;for(let col=left;col<right;col++){const index=top*map.width+col,pos=map.map[index];if(map.map[index-map.width]==pos){found=!0;const cell=table.nodeAt(pos),{top:cellTop,left:cellLeft}=map.findCell(pos);tr.setNodeMarkup(tr.mapping.slice(mapFrom).map(pos+start),null,{...cell.attrs,rowspan:top-cellTop}),tr.insert(tr.mapping.slice(mapFrom).map(map.positionAt(top,cellLeft,table)),cell.type.createAndFill({...cell.attrs,rowspan:cellTop+cell.attrs.rowspan-top})),col+=cell.attrs.colspan-1}}return found}function isolateVertical(tr,map,table,start,top,bottom,left,mapFrom){if(0==left||left==map.width)return!1;let found=!1;for(let row=top;row<bottom;row++){const index=row*map.width+left,pos=map.map[index];if(map.map[index-1]==pos){found=!0;const cell=table.nodeAt(pos),cellLeft=map.colCount(pos),updatePos=tr.mapping.slice(mapFrom).map(pos+start);tr.setNodeMarkup(updatePos,null,removeColSpan(cell.attrs,left-cellLeft,cell.attrs.colspan-(left-cellLeft))),tr.insert(updatePos+cell.nodeSize,cell.type.createAndFill(removeColSpan(cell.attrs,0,left-cellLeft))),row+=cell.attrs.rowspan-1}}return found}function insertCells(state,dispatch,tableStart,rect,cells){let table=tableStart?state.doc.nodeAt(tableStart-1):state.doc;if(!table)throw new Error("No table found");let map=TableMap.get(table);const{top,left}=rect,right=left+cells.width,bottom=top+cells.height,tr=state.tr;let mapFrom=0;function recomp(){if(table=tableStart?tr.doc.nodeAt(tableStart-1):tr.doc,!table)throw new Error("No table found");map=TableMap.get(table),mapFrom=tr.mapping.maps.length}(function growTable(tr,map,table,start,width,height,mapFrom){const types=tableNodeTypes(tr.doc.type.schema);let empty,emptyHead;if(width>map.width)for(let row=0,rowEnd=0;row<map.height;row++){const rowNode=table.child(row);rowEnd+=rowNode.nodeSize;const cells=[];let add;add=null==rowNode.lastChild||rowNode.lastChild.type==types.cell?empty||(empty=types.cell.createAndFill()):emptyHead||(emptyHead=types.header_cell.createAndFill());for(let i=map.width;i<width;i++)cells.push(add);tr.insert(tr.mapping.slice(mapFrom).map(rowEnd-1+start),cells)}if(height>map.height){const cells=[];for(let i=0,start2=(map.height-1)*map.width;i<Math.max(map.width,width);i++){const header=!(i>=map.width)&&table.nodeAt(map.map[start2+i]).type==types.header_cell;cells.push(header?emptyHead||(emptyHead=types.header_cell.createAndFill()):empty||(empty=types.cell.createAndFill()))}const emptyRow=types.row.create(null,dist_Fragment.from(cells)),rows=[];for(let i=map.height;i<height;i++)rows.push(emptyRow);tr.insert(tr.mapping.slice(mapFrom).map(start+table.nodeSize-2),rows)}return!(!empty&&!emptyHead)})(tr,map,table,tableStart,right,bottom,mapFrom)&&recomp(),isolateHorizontal(tr,map,table,tableStart,left,right,top,mapFrom)&&recomp(),isolateHorizontal(tr,map,table,tableStart,left,right,bottom,mapFrom)&&recomp(),isolateVertical(tr,map,table,tableStart,top,bottom,left,mapFrom)&&recomp(),isolateVertical(tr,map,table,tableStart,top,bottom,right,mapFrom)&&recomp();for(let row=top;row<bottom;row++){const from=map.positionAt(row,left,table),to=map.positionAt(row,right,table);tr.replace(tr.mapping.slice(mapFrom).map(from+tableStart),tr.mapping.slice(mapFrom).map(to+tableStart),new dist_Slice(cells.rows[row-top],0,0))}recomp(),tr.setSelection(new CellSelection(tr.doc.resolve(tableStart+map.positionAt(top,left,table)),tr.doc.resolve(tableStart+map.positionAt(bottom-1,right-1,table)))),dispatch(tr)}var handleKeyDown=keydownHandler({ArrowLeft:arrow("horiz",-1),ArrowRight:arrow("horiz",1),ArrowUp:arrow("vert",-1),ArrowDown:arrow("vert",1),"Shift-ArrowLeft":shiftArrow("horiz",-1),"Shift-ArrowRight":shiftArrow("horiz",1),"Shift-ArrowUp":shiftArrow("vert",-1),"Shift-ArrowDown":shiftArrow("vert",1),Backspace:deleteCellSelection,"Mod-Backspace":deleteCellSelection,Delete:deleteCellSelection,"Mod-Delete":deleteCellSelection});function maybeSetSelection(state,dispatch,selection){return!selection.eq(state.selection)&&(dispatch&&dispatch(state.tr.setSelection(selection).scrollIntoView()),!0)}function arrow(axis,dir){return(state,dispatch,view)=>{if(!view)return!1;const sel=state.selection;if(sel instanceof CellSelection)return maybeSetSelection(state,dispatch,Selection.near(sel.$headCell,dir));if("horiz"!=axis&&!sel.empty)return!1;const end=atEndOfCell(view,axis,dir);if(null==end)return!1;if("horiz"==axis)return maybeSetSelection(state,dispatch,Selection.near(state.doc.resolve(sel.head+dir),dir));{const $cell=state.doc.resolve(end),$next=nextCell($cell,axis,dir);let newSel;return newSel=$next?Selection.near($next,1):dir<0?Selection.near(state.doc.resolve($cell.before(-1)),-1):Selection.near(state.doc.resolve($cell.after(-1)),1),maybeSetSelection(state,dispatch,newSel)}}}function shiftArrow(axis,dir){return(state,dispatch,view)=>{if(!view)return!1;const sel=state.selection;let cellSel;if(sel instanceof CellSelection)cellSel=sel;else{const end=atEndOfCell(view,axis,dir);if(null==end)return!1;cellSel=new CellSelection(state.doc.resolve(end))}const $head=nextCell(cellSel.$headCell,axis,dir);return!!$head&&maybeSetSelection(state,dispatch,new CellSelection(cellSel.$anchorCell,$head))}}function deleteCellSelection(state,dispatch){const sel=state.selection;if(!(sel instanceof CellSelection))return!1;if(dispatch){const tr=state.tr,baseContent=tableNodeTypes(state.schema).cell.createAndFill().content;sel.forEachCell(((cell,pos)=>{cell.content.eq(baseContent)||tr.replace(tr.mapping.map(pos+1),tr.mapping.map(pos+cell.nodeSize-1),new dist_Slice(baseContent,0,0))})),tr.docChanged&&dispatch(tr)}return!0}function dist_handleTripleClick(view,pos){const $cell=cellAround(view.state.doc.resolve(pos));return!!$cell&&(view.dispatch(view.state.tr.setSelection(new CellSelection($cell))),!0)}function handlePaste(view,_,slice){if(!isInTable(view.state))return!1;let cells=pastedCells(slice);const sel=view.state.selection;if(sel instanceof CellSelection){cells||(cells={width:1,height:1,rows:[dist_Fragment.from(fitSlice(tableNodeTypes(view.state.schema).cell,slice))]});const table=sel.$anchorCell.node(-1),start=sel.$anchorCell.start(-1),rect=TableMap.get(table).rectBetween(sel.$anchorCell.pos-start,sel.$headCell.pos-start);return cells=function clipCells({width,height,rows},newWidth,newHeight){if(width!=newWidth){const added=[],newRows=[];for(let row=0;row<rows.length;row++){const frag=rows[row],cells=[];for(let col=added[row]||0,i=0;col<newWidth;i++){let cell=frag.child(i%frag.childCount);col+cell.attrs.colspan>newWidth&&(cell=cell.type.createChecked(removeColSpan(cell.attrs,cell.attrs.colspan,col+cell.attrs.colspan-newWidth),cell.content)),cells.push(cell),col+=cell.attrs.colspan;for(let j=1;j<cell.attrs.rowspan;j++)added[row+j]=(added[row+j]||0)+cell.attrs.colspan}newRows.push(dist_Fragment.from(cells))}rows=newRows,width=newWidth}if(height!=newHeight){const newRows=[];for(let row=0,i=0;row<newHeight;row++,i++){const cells=[],source=rows[i%height];for(let j=0;j<source.childCount;j++){let cell=source.child(j);row+cell.attrs.rowspan>newHeight&&(cell=cell.type.create({...cell.attrs,rowspan:Math.max(1,newHeight-cell.attrs.rowspan)},cell.content)),cells.push(cell)}newRows.push(dist_Fragment.from(cells))}rows=newRows,height=newHeight}return{width,height,rows}}(cells,rect.right-rect.left,rect.bottom-rect.top),insertCells(view.state,view.dispatch,start,rect,cells),!0}if(cells){const $cell=selectionCell(view.state),start=$cell.start(-1);return insertCells(view.state,view.dispatch,start,TableMap.get($cell.node(-1)).findCell($cell.pos-start),cells),!0}return!1}function handleMouseDown(view,startEvent){var _a;if(startEvent.ctrlKey||startEvent.metaKey)return;const startDOMCell=domInCell(view,startEvent.target);let $anchor;if(startEvent.shiftKey&&view.state.selection instanceof CellSelection)setCellSelection(view.state.selection.$anchorCell,startEvent),startEvent.preventDefault();else if(startEvent.shiftKey&&startDOMCell&&null!=($anchor=cellAround(view.state.selection.$anchor))&&(null==(_a=cellUnderMouse(view,startEvent))?void 0:_a.pos)!=$anchor.pos)setCellSelection($anchor,startEvent),startEvent.preventDefault();else if(!startDOMCell)return;function setCellSelection($anchor2,event){let $head=cellUnderMouse(view,event);const starting=null==tableEditingKey.getState(view.state);if(!$head||!inSameTable($anchor2,$head)){if(!starting)return;$head=$anchor2}const selection=new CellSelection($anchor2,$head);if(starting||!view.state.selection.eq(selection)){const tr=view.state.tr.setSelection(selection);starting&&tr.setMeta(tableEditingKey,$anchor2.pos),view.dispatch(tr)}}function stop(){view.root.removeEventListener("mouseup",stop),view.root.removeEventListener("dragstart",stop),view.root.removeEventListener("mousemove",move),null!=tableEditingKey.getState(view.state)&&view.dispatch(view.state.tr.setMeta(tableEditingKey,-1))}function move(_event){const event=_event,anchor=tableEditingKey.getState(view.state);let $anchor2;if(null!=anchor)$anchor2=view.state.doc.resolve(anchor);else if(domInCell(view,event.target)!=startDOMCell&&($anchor2=cellUnderMouse(view,startEvent),!$anchor2))return stop();$anchor2&&setCellSelection($anchor2,event)}view.root.addEventListener("mouseup",stop),view.root.addEventListener("dragstart",stop),view.root.addEventListener("mousemove",move)}function atEndOfCell(view,axis,dir){if(!(view.state.selection instanceof dist_TextSelection))return null;const{$head}=view.state.selection;for(let d=$head.depth-1;d>=0;d--){const parent=$head.node(d);if((dir<0?$head.index(d):$head.indexAfter(d))!=(dir<0?0:parent.childCount))return null;if("cell"==parent.type.spec.tableRole||"header_cell"==parent.type.spec.tableRole){const cellPos=$head.before(d),dirStr="vert"==axis?dir>0?"down":"up":dir>0?"right":"left";return view.endOfTextblock(dirStr)?cellPos:null}}return null}function domInCell(view,dom){for(;dom&&dom!=view.dom;dom=dom.parentNode)if("TD"==dom.nodeName||"TH"==dom.nodeName)return dom;return null}function cellUnderMouse(view,event){const mousePos=view.posAtCoords({left:event.clientX,top:event.clientY});return mousePos&&mousePos?cellAround(view.state.doc.resolve(mousePos.pos)):null}new PluginKey("tableColumnResizing");function selectedRect(state){const sel=state.selection,$pos=selectionCell(state),table=$pos.node(-1),tableStart=$pos.start(-1),map=TableMap.get(table);return{...sel instanceof CellSelection?map.rectBetween(sel.$anchorCell.pos-tableStart,sel.$headCell.pos-tableStart):map.findCell($pos.pos-tableStart),tableStart,map,table}}function addColumn(tr,{map,tableStart,table},col){let refColumn=col>0?-1:0;(function columnIsHeader(map,table,col){const headerCell=tableNodeTypes(table.type.schema).header_cell;for(let row=0;row<map.height;row++)if(table.nodeAt(map.map[col+row*map.width]).type!=headerCell)return!1;return!0})(map,table,col+refColumn)&&(refColumn=0==col||col==map.width?null:0);for(let row=0;row<map.height;row++){const index=row*map.width+col;if(col>0&&col<map.width&&map.map[index-1]==map.map[index]){const pos=map.map[index],cell=table.nodeAt(pos);tr.setNodeMarkup(tr.mapping.map(tableStart+pos),null,addColSpan(cell.attrs,col-map.colCount(pos))),row+=cell.attrs.rowspan-1}else{const type=null==refColumn?tableNodeTypes(table.type.schema).cell:table.nodeAt(map.map[index+refColumn]).type,pos=map.positionAt(row,col,table);tr.insert(tr.mapping.map(tableStart+pos),type.createAndFill())}}return tr}function removeColumn(tr,{map,table,tableStart},col){const mapStart=tr.mapping.maps.length;for(let row=0;row<map.height;){const index=row*map.width+col,pos=map.map[index],cell=table.nodeAt(pos),attrs=cell.attrs;if(col>0&&map.map[index-1]==pos||col<map.width-1&&map.map[index+1]==pos)tr.setNodeMarkup(tr.mapping.slice(mapStart).map(tableStart+pos),null,removeColSpan(attrs,col-map.colCount(pos)));else{const start=tr.mapping.slice(mapStart).map(tableStart+pos);tr.delete(start,start+cell.nodeSize)}row+=attrs.rowspan}}function addRow(tr,{map,tableStart,table},row){var _a;let rowPos=tableStart;for(let i=0;i<row;i++)rowPos+=table.child(i).nodeSize;const cells=[];let refRow=row>0?-1:0;(function rowIsHeader(map,table,row){var _a;const headerCell=tableNodeTypes(table.type.schema).header_cell;for(let col=0;col<map.width;col++)if((null==(_a=table.nodeAt(map.map[col+row*map.width]))?void 0:_a.type)!=headerCell)return!1;return!0})(map,table,row+refRow)&&(refRow=0==row||row==map.height?null:0);for(let col=0,index=map.width*row;col<map.width;col++,index++)if(row>0&&row<map.height&&map.map[index]==map.map[index-map.width]){const pos=map.map[index],attrs=table.nodeAt(pos).attrs;tr.setNodeMarkup(tableStart+pos,null,{...attrs,rowspan:attrs.rowspan+1}),col+=attrs.colspan-1}else{const type=null==refRow?tableNodeTypes(table.type.schema).cell:null==(_a=table.nodeAt(map.map[index+refRow*map.width]))?void 0:_a.type,node=null==type?void 0:type.createAndFill();node&&cells.push(node)}return tr.insert(rowPos,tableNodeTypes(table.type.schema).row.create(null,cells)),tr}function removeRow(tr,{map,table,tableStart},row){let rowPos=0;for(let i=0;i<row;i++)rowPos+=table.child(i).nodeSize;const nextRow=rowPos+table.child(row).nodeSize,mapFrom=tr.mapping.maps.length;tr.delete(rowPos+tableStart,nextRow+tableStart);for(let col=0,index=row*map.width;col<map.width;col++,index++){const pos=map.map[index];if(row>0&&pos==map.map[index-map.width]){const attrs=table.nodeAt(pos).attrs;tr.setNodeMarkup(tr.mapping.slice(mapFrom).map(pos+tableStart),null,{...attrs,rowspan:attrs.rowspan-1}),col+=attrs.colspan-1}else if(row<map.width&&pos==map.map[index+map.width]){const cell=table.nodeAt(pos),attrs=cell.attrs,copy=cell.type.create({...attrs,rowspan:cell.attrs.rowspan-1},cell.content),newPos=map.positionAt(row+1,col,table);tr.insert(tr.mapping.slice(mapFrom).map(tableStart+newPos),copy),col+=attrs.colspan-1}}}function deleteRow(state,dispatch){if(!isInTable(state))return!1;if(dispatch){const rect=selectedRect(state),tr=state.tr;if(0==rect.top&&rect.bottom==rect.map.height)return!1;for(let i=rect.bottom-1;removeRow(tr,rect,i),i!=rect.top;i--){const table=rect.tableStart?tr.doc.nodeAt(rect.tableStart-1):tr.doc;if(!table)throw RangeError("No table found");rect.table=table,rect.map=TableMap.get(rect.table)}dispatch(tr)}return!0}function isEmpty(cell){const c=cell.content;return 1==c.childCount&&c.child(0).isTextblock&&0==c.child(0).childCount}function mergeCells(state,dispatch){const sel=state.selection;if(!(sel instanceof CellSelection)||sel.$anchorCell.pos==sel.$headCell.pos)return!1;const rect=selectedRect(state),{map}=rect;if(function cellsOverlapRectangle({width,height,map},rect){let indexTop=rect.top*width+rect.left,indexLeft=indexTop,indexBottom=(rect.bottom-1)*width+rect.left,indexRight=indexTop+(rect.right-rect.left-1);for(let i=rect.top;i<rect.bottom;i++){if(rect.left>0&&map[indexLeft]==map[indexLeft-1]||rect.right<width&&map[indexRight]==map[indexRight+1])return!0;indexLeft+=width,indexRight+=width}for(let i=rect.left;i<rect.right;i++){if(rect.top>0&&map[indexTop]==map[indexTop-width]||rect.bottom<height&&map[indexBottom]==map[indexBottom+width])return!0;indexTop++,indexBottom++}return!1}(map,rect))return!1;if(dispatch){const tr=state.tr,seen={};let mergedPos,mergedCell,content=dist_Fragment.empty;for(let row=rect.top;row<rect.bottom;row++)for(let col=rect.left;col<rect.right;col++){const cellPos=map.map[row*map.width+col],cell=rect.table.nodeAt(cellPos);if(!seen[cellPos]&&cell)if(seen[cellPos]=!0,null==mergedPos)mergedPos=cellPos,mergedCell=cell;else{isEmpty(cell)||(content=content.append(cell.content));const mapped=tr.mapping.map(cellPos+rect.tableStart);tr.delete(mapped,mapped+cell.nodeSize)}}if(null==mergedPos||null==mergedCell)return!0;if(tr.setNodeMarkup(mergedPos+rect.tableStart,null,{...addColSpan(mergedCell.attrs,mergedCell.attrs.colspan,rect.right-rect.left-mergedCell.attrs.colspan),rowspan:rect.bottom-rect.top}),content.size){const end=mergedPos+1+mergedCell.content.size,start=isEmpty(mergedCell)?mergedPos+1:end;tr.replaceWith(start+rect.tableStart,end+rect.tableStart,content)}tr.setSelection(new CellSelection(tr.doc.resolve(mergedPos+rect.tableStart))),dispatch(tr)}return!0}function splitCell(state,dispatch){const nodeTypes=tableNodeTypes(state.schema);return function splitCellWithType(getCellType){return(state,dispatch)=>{var _a;const sel=state.selection;let cellNode,cellPos;if(sel instanceof CellSelection){if(sel.$anchorCell.pos!=sel.$headCell.pos)return!1;cellNode=sel.$anchorCell.nodeAfter,cellPos=sel.$anchorCell.pos}else{if(cellNode=function cellWrapping($pos){for(let d=$pos.depth;d>0;d--){const role=$pos.node(d).type.spec.tableRole;if("cell"===role||"header_cell"===role)return $pos.node(d)}return null}(sel.$from),!cellNode)return!1;cellPos=null==(_a=cellAround(sel.$from))?void 0:_a.pos}if(null==cellNode||null==cellPos)return!1;if(1==cellNode.attrs.colspan&&1==cellNode.attrs.rowspan)return!1;if(dispatch){let baseAttrs=cellNode.attrs;const attrs=[],colwidth=baseAttrs.colwidth;baseAttrs.rowspan>1&&(baseAttrs={...baseAttrs,rowspan:1}),baseAttrs.colspan>1&&(baseAttrs={...baseAttrs,colspan:1});const rect=selectedRect(state),tr=state.tr;for(let i=0;i<rect.right-rect.left;i++)attrs.push(colwidth?{...baseAttrs,colwidth:colwidth&&colwidth[i]?[colwidth[i]]:null}:baseAttrs);let lastCell;for(let row=rect.top;row<rect.bottom;row++){let pos=rect.map.positionAt(row,rect.left,rect.table);row==rect.top&&(pos+=cellNode.nodeSize);for(let col=rect.left,i=0;col<rect.right;col++,i++)col==rect.left&&row==rect.top||tr.insert(lastCell=tr.mapping.map(pos+rect.tableStart,1),getCellType({node:cellNode,row,col}).createAndFill(attrs[i]))}tr.setNodeMarkup(cellPos,getCellType({node:cellNode,row:rect.top,col:rect.left}),attrs[0]),sel instanceof CellSelection&&tr.setSelection(new CellSelection(tr.doc.resolve(sel.$anchorCell.pos),lastCell?tr.doc.resolve(lastCell):void 0)),dispatch(tr)}return!0}}((({node})=>nodeTypes[node.type.spec.tableRole]))(state,dispatch)}function isHeaderEnabledByType(type,rect,types){const cellPositions=rect.map.cellsInRect({left:0,top:0,right:"row"==type?rect.map.width:1,bottom:"column"==type?rect.map.height:1});for(let i=0;i<cellPositions.length;i++){const cell=rect.table.nodeAt(cellPositions[i]);if(cell&&cell.type!==types.header_cell)return!1}return!0}function toggleHeader(type,options){return(options=options||{useDeprecatedLogic:!1}).useDeprecatedLogic?function deprecated_toggleHeader(type){return function(state,dispatch){if(!isInTable(state))return!1;if(dispatch){const types=tableNodeTypes(state.schema),rect=selectedRect(state),tr=state.tr,cells=rect.map.cellsInRect("column"==type?{left:rect.left,top:0,right:rect.right,bottom:rect.map.height}:"row"==type?{left:0,top:rect.top,right:rect.map.width,bottom:rect.bottom}:rect),nodes=cells.map((pos=>rect.table.nodeAt(pos)));for(let i=0;i<cells.length;i++)nodes[i].type==types.header_cell&&tr.setNodeMarkup(rect.tableStart+cells[i],types.cell,nodes[i].attrs);if(0==tr.steps.length)for(let i=0;i<cells.length;i++)tr.setNodeMarkup(rect.tableStart+cells[i],types.header_cell,nodes[i].attrs);dispatch(tr)}return!0}}(type):function(state,dispatch){if(!isInTable(state))return!1;if(dispatch){const types=tableNodeTypes(state.schema),rect=selectedRect(state),tr=state.tr,isHeaderRowEnabled=isHeaderEnabledByType("row",rect,types),isHeaderColumnEnabled=isHeaderEnabledByType("column",rect,types),selectionStartsAt=("column"===type?isHeaderRowEnabled:"row"===type&&isHeaderColumnEnabled)?1:0,cellsRect="column"==type?{left:0,top:selectionStartsAt,right:1,bottom:rect.map.height}:"row"==type?{left:selectionStartsAt,top:0,right:rect.map.width,bottom:1}:rect,newType="column"==type?isHeaderColumnEnabled?types.cell:types.header_cell:"row"==type?isHeaderRowEnabled?types.cell:types.header_cell:types.cell;rect.map.cellsInRect(cellsRect).forEach((relativeCellPos=>{const cellPos=relativeCellPos+rect.tableStart,cell=tr.doc.nodeAt(cellPos);cell&&tr.setNodeMarkup(cellPos,newType,cell.attrs)})),dispatch(tr)}return!0}}toggleHeader("row",{useDeprecatedLogic:!0}),toggleHeader("column",{useDeprecatedLogic:!0}),toggleHeader("cell",{useDeprecatedLogic:!0});function goToNextCell(direction){return function(state,dispatch){if(!isInTable(state))return!1;const cell=function findNextCell($cell,dir){if(dir<0){const before=$cell.nodeBefore;if(before)return $cell.pos-before.nodeSize;for(let row=$cell.index(-1)-1,rowEnd=$cell.before();row>=0;row--){const rowNode=$cell.node(-1).child(row),lastChild=rowNode.lastChild;if(lastChild)return rowEnd-1-lastChild.nodeSize;rowEnd-=rowNode.nodeSize}}else{if($cell.index()<$cell.parent.childCount-1)return $cell.pos+$cell.nodeAfter.nodeSize;const table=$cell.node(-1);for(let row=$cell.indexAfter(-1),rowStart=$cell.after();row<table.childCount;row++){const rowNode=table.child(row);if(rowNode.childCount)return rowStart+1;rowStart+=rowNode.nodeSize}}return null}(selectionCell(state),direction);if(null==cell)return!1;if(dispatch){const $cell=state.doc.resolve(cell);dispatch(state.tr.setSelection(dist_TextSelection.between($cell,function moveCellForward($pos){return $pos.node(0).resolve($pos.pos+$pos.nodeAfter.nodeSize)}($cell))).scrollIntoView())}return!0}}function deleteTable(state,dispatch){const $pos=state.selection.$anchor;for(let d=$pos.depth;d>0;d--){if("table"==$pos.node(d).type.spec.tableRole)return dispatch&&dispatch(state.tr.delete($pos.before(d),$pos.after(d)).scrollIntoView()),!0}return!1}function tableEditing({allowTableNodeSelection=!1}={}){return new dist_Plugin({key:tableEditingKey,state:{init:()=>null,apply(tr,cur){const set=tr.getMeta(tableEditingKey);if(null!=set)return-1==set?null:set;if(null==cur||!tr.docChanged)return cur;const{deleted,pos}=tr.mapping.mapResult(cur);return deleted?null:pos}},props:{decorations:drawCellSelection,handleDOMEvents:{mousedown:handleMouseDown},createSelectionBetween:view=>null!=tableEditingKey.getState(view.state)?view.state.selection:null,handleTripleClick:dist_handleTripleClick,handleKeyDown,handlePaste},appendTransaction:(_,oldState,state)=>function normalizeSelection(state,tr,allowTableNodeSelection){const sel=(tr||state).selection,doc=(tr||state).doc;let normalize,role;if(sel instanceof dist_NodeSelection&&(role=sel.node.type.spec.tableRole)){if("cell"==role||"header_cell"==role)normalize=CellSelection.create(doc,sel.from);else if("row"==role){const $cell=doc.resolve(sel.from+1);normalize=CellSelection.rowSelection($cell,$cell)}else if(!allowTableNodeSelection){const map=TableMap.get(sel.node),start=sel.from+1,lastCell=start+map.map[map.width*map.height-1];normalize=CellSelection.create(doc,start+1,lastCell)}}else sel instanceof dist_TextSelection&&function isCellBoundarySelection({$from,$to}){if($from.pos==$to.pos||$from.pos<$from.pos-6)return!1;let afterFrom=$from.pos,beforeTo=$to.pos,depth=$from.depth;for(;depth>=0&&!($from.after(depth+1)<$from.end(depth));depth--,afterFrom++);for(let d=$to.depth;d>=0&&!($to.before(d+1)>$to.start(d));d--,beforeTo--);return afterFrom==beforeTo&&/row|table/.test($from.node(depth).type.spec.tableRole)}(sel)?normalize=dist_TextSelection.create(doc,sel.from):sel instanceof dist_TextSelection&&function isTextSelectionAcrossCells({$from,$to}){let fromCellBoundaryNode,toCellBoundaryNode;for(let i=$from.depth;i>0;i--){const node=$from.node(i);if("cell"===node.type.spec.tableRole||"header_cell"===node.type.spec.tableRole){fromCellBoundaryNode=node;break}}for(let i=$to.depth;i>0;i--){const node=$to.node(i);if("cell"===node.type.spec.tableRole||"header_cell"===node.type.spec.tableRole){toCellBoundaryNode=node;break}}return fromCellBoundaryNode!==toCellBoundaryNode&&0===$to.parentOffset}(sel)&&(normalize=dist_TextSelection.create(doc,sel.$from.start(),sel.$from.end()));return normalize&&(tr||(tr=state.tr)).setSelection(normalize),tr}(state,fixTables(state,oldState),allowTableNodeSelection)})}var blockquoteDOM=["blockquote",0],hrDOM=["hr"],preDOM=["pre",["code",0]],schema_olDOM=["ol",0],schema_ulDOM=["ul",0],schema_liDOM=["li",0],domAttributes=function(dom){for(var attr,result={},attributes=dom.attributes,i=0;i<attributes.length;i++)result[(attr=attributes[i]).name]=attr.value;return result},schema_defaultAttrs=function(attrs){var nodeAttrs={};return attrs.forEach((function(attr){nodeAttrs[attr]={default:null}})),nodeAttrs},commonAttributes=function(){return schema_defaultAttrs(["style","class","id"])},hasAttrs=function(attrs,exclude){for(var attr in attrs)if(attr&&null!==attrs[attr]&&attr!==exclude)return!0;return!1},pmAttributes=function(attrs,exclude){void 0===exclude&&(exclude=[]);var result={},_loop_1=function(attr){attr&&null!==attrs[attr]&&!exclude.find((function(e){return e===attr}))&&(result[attr]=attrs[attr])};for(var attr in attrs)_loop_1(attr);return result},tagMark=function(tag){var _a;return(_a={})[tag]={name:tag,inclusive:!0,parseDOM:[{tag}],toDOM:function(){return[tag,0]}},_a},marks=tslib_es6_assign(tslib_es6_assign(tslib_es6_assign(tslib_es6_assign(tslib_es6_assign(tslib_es6_assign(tslib_es6_assign(tslib_es6_assign(tslib_es6_assign(tslib_es6_assign({link:{attrs:tslib_es6_assign(tslib_es6_assign({},commonAttributes()),{href:{default:null},target:{default:null},title:{default:null}}),inclusive:!1,parseDOM:[{tag:"a",getAttrs:domAttributes}],toDOM:function(node){return["a",pmAttributes(node.attrs),0]}}},tagMark("strong")),tagMark("b")),tagMark("em")),tagMark("i")),tagMark("del")),tagMark("sub")),tagMark("sup")),tagMark("code")),{style:{attrs:tslib_es6_assign({},commonAttributes()),parseDOM:[{tag:"span",getAttrs:domAttributes}],toDOM:function(node){return hasAttrs(node.attrs)?["span",pmAttributes(node.attrs),0]:["span",0]}}}),tagMark("u")),cellAttribute=function(name){var _a;return(_a={})[name]={default:null,getFromDOM:function(cell){return cell.getAttribute(name)},setDOMAttr:function(value,attrs){attrs[name]=value}},_a},cellAttributes=tslib_es6_assign(tslib_es6_assign(tslib_es6_assign(tslib_es6_assign(tslib_es6_assign({},cellAttribute("style")),cellAttribute("class")),cellAttribute("id")),cellAttribute("headers")),cellAttribute("scope")),colgroupNodes={doc:{content:"colgroup*"},col:{attrs:schema_defaultAttrs(["id","class","style","span"]),parseDOM:[{getAttrs:domAttributes,tag:"col"}],toDOM:function(node){return["col",node.attrs]}},colgroup:{attrs:schema_defaultAttrs(["id","class","style","span"]),content:"col*",parseDOM:[{getAttrs:domAttributes,tag:"colgroup"}],toDOM:function(node){return["colgroup",node.attrs,0]}},text:{inline:!0,group:"inline"}},colgroupSchema=new Schema({nodes:colgroupNodes,marks:{}}),parseStrColgroup=function(colgroup){var doc=domToPmDoc(htmlToFragment(colgroup),colgroupSchema,{preserveWhitespace:!1});return pmDocToFragment(doc).firstChild},tNodes=function tableNodes(options){const extraAttrs=options.cellAttributes||{},cellAttrs={colspan:{default:1},rowspan:{default:1},colwidth:{default:null}};for(const prop in extraAttrs)cellAttrs[prop]={default:extraAttrs[prop].default};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:options.tableGroup,parseDOM:[{tag:"table"}],toDOM:()=>["table",["tbody",0]]},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM:()=>["tr",0]},table_cell:{content:options.cellContent,attrs:cellAttrs,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:dom=>getCellAttrs(dom,extraAttrs)}],toDOM:node=>["td",setCellAttrs(node,extraAttrs),0]},table_header:{content:options.cellContent,attrs:cellAttrs,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:dom=>getCellAttrs(dom,extraAttrs)}],toDOM:node=>["th",setCellAttrs(node,extraAttrs),0]}}}({tableGroup:"block",cellContent:"block+",cellAttributes});tNodes.table_row.attrs=tslib_es6_assign(tslib_es6_assign({},tNodes.table_row.attrs),schema_defaultAttrs([rowTypeAttr,"style","class","id"])),tNodes.table_row.toDOM=function(node){return["tr",pmAttributes(node.attrs),0]},tNodes.table_row.parseDOM=[{tag:"tr",getAttrs:domAttributes}],tNodes.table.attrs=tslib_es6_assign(tslib_es6_assign({},tNodes.table.attrs),schema_defaultAttrs(["style","class","id",colgroupAttr,resizableAttr])),tNodes.table.toDOM=function(node){var tableAttrs=hasAttrs(node.attrs)?pmAttributes(node.attrs,[colgroupAttr,resizableAttr]):{},colgroup=null;if(node.attrs[colgroupAttr]&&!function(node){for(var shouldSkip=!1,row=node.child(0),r=0;r<row.childCount;r++)if(row.child(r).attrs.colwidth){shouldSkip=!0;break}return shouldSkip}(node)){var colgroupEl=parseStrColgroup(node.attrs[colgroupAttr]);if(colgroupEl){var cols=Array.from(colgroupEl.children).map((function(c){return["col",domAttributes(c)]}));colgroup=["colgroup",domAttributes(colgroupEl)].concat(cols)}}return colgroup?["table",tableAttrs,colgroup,["tbody",0]]:["table",tableAttrs,["tbody",0]]},tNodes.table.parseDOM=[{tag:"table",getAttrs:function(node){var attrs=domAttributes(node),colgroup=Array.from(node.childNodes).find((function(c){return"COLGROUP"===c.nodeName}));return colgroup&&(attrs[colgroupAttr]=colgroup.outerHTML),attrs}}];var nodes=tslib_es6_assign({doc:{content:"block+"},paragraph:{content:"inline*",group:"block",attrs:tslib_es6_assign({},commonAttributes()),parseDOM:[{tag:"p",getAttrs:domAttributes}],toDOM:function(node){return hasAttrs(node.attrs)?["p",pmAttributes(node.attrs),0]:["p",0]}},table_wrapper:{content:"(table_caption_external | table)+",group:"block",defining:!0,attrs:{table:{default:null},style:{default:null}},parseDOM:[{tag:"div[table]",getAttrs:domAttributes}],toDOM:function(node){return hasAttrs(node.attrs)?["div",pmAttributes(node.attrs),0]:["div",0]}},table_caption_external:{content:"inline+",group:"block",attrs:tslib_es6_assign({caption:{default:null}},commonAttributes()),parseDOM:[{tag:"div[caption]",getAttrs:domAttributes}],toDOM:function(node){return hasAttrs(node.attrs)?["div",pmAttributes(node.attrs),0]:["div",0]}},div:{content:"block*",group:"block",attrs:tslib_es6_assign({},commonAttributes()),parseDOM:[{tag:"div",getAttrs:domAttributes}],toDOM:function(node){return hasAttrs(node.attrs)?["div",pmAttributes(node.attrs),0]:["div",0]}},blockquote:{attrs:tslib_es6_assign({},commonAttributes()),content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote",getAttrs:domAttributes}],toDOM:function(node){return hasAttrs(node.attrs)?["blockquote",pmAttributes(node.attrs),0]:blockquoteDOM}},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:function(){return hrDOM}},heading:{attrs:tslib_es6_assign(tslib_es6_assign({},commonAttributes()),{level:{default:1}}),content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",getAttrs:function(node){return tslib_es6_assign(tslib_es6_assign({},domAttributes(node)),{level:1})}},{tag:"h2",getAttrs:function(node){return tslib_es6_assign(tslib_es6_assign({},domAttributes(node)),{level:2})}},{tag:"h3",getAttrs:function(node){return tslib_es6_assign(tslib_es6_assign({},domAttributes(node)),{level:3})}},{tag:"h4",getAttrs:function(node){return tslib_es6_assign(tslib_es6_assign({},domAttributes(node)),{level:4})}},{tag:"h5",getAttrs:function(node){return tslib_es6_assign(tslib_es6_assign({},domAttributes(node)),{level:5})}},{tag:"h6",getAttrs:function(node){return tslib_es6_assign(tslib_es6_assign({},domAttributes(node)),{level:6})}}],toDOM:function(node){return hasAttrs(node.attrs,"level")?["h"+node.attrs.level,pmAttributes(node.attrs,["level"]),0]:["h"+node.attrs.level,0]}},code_block:{content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:function(){return preDOM}},text:{inline:!0,group:"inline"},image:{inline:!0,attrs:tslib_es6_assign({src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}},commonAttributes()),group:"inline",draggable:!0,parseDOM:[{tag:"img",getAttrs:domAttributes}],toDOM:function(node){return hasAttrs(node.attrs)?["img",pmAttributes(node.attrs)]:["img"]}},hard_break:{inline:!0,attrs:tslib_es6_assign({},commonAttributes()),group:"inline",selectable:!1,parseDOM:[{tag:"br",getAttrs:domAttributes}],toDOM:function(node){return hasAttrs(node.attrs)?["br",pmAttributes(node.attrs)]:["br"]}},ordered_list:{content:"list_item+",group:"block",attrs:tslib_es6_assign(tslib_es6_assign({},commonAttributes()),{type:{default:null},order:{default:1}}),parseDOM:[{tag:"ol",getAttrs:function(dom){return tslib_es6_assign(tslib_es6_assign({},domAttributes(dom)),{order:dom.hasAttribute("start")?parseInt(dom.getAttribute("start")||"1",10):1})}}],toDOM:function(node){return 1===node.attrs.order?hasAttrs(node.attrs,"order")?["ol",pmAttributes(node.attrs,["order"]),0]:schema_olDOM:["ol",tslib_es6_assign(tslib_es6_assign({},pmAttributes(node.attrs,["order"])),{start:node.attrs.order}),0]}},bullet_list:{content:"list_item+",group:"block",attrs:tslib_es6_assign({},commonAttributes()),parseDOM:[{tag:"ul",getAttrs:domAttributes}],toDOM:function(node){return hasAttrs(node.attrs)?["ul",pmAttributes(node.attrs),0]:schema_ulDOM}},list_item:{content:"(paragraph | heading) block*",attrs:tslib_es6_assign({},commonAttributes()),parseDOM:[{tag:"li",getAttrs:domAttributes}],toDOM:function(node){return hasAttrs(node.attrs)?["li",pmAttributes(node.attrs),0]:schema_liDOM},defining:!0}},tNodes),commands_bold={mark:"strong",altMarks:["b"],altStyle:{name:"font-weight",value:/^(bold(er)?|[5-9]\d{2,})$/}},commands_italic={mark:"em",altMarks:["i"],altStyle:{name:"font-style",value:/^italic$/i}},commands_underline={mark:"u",altStyle:{name:"text-decoration",value:/^underline$/i}},strikethrough={mark:"del",altStyle:{name:"text-decoration",value:/^line-through$/i}},subscript={mark:"sub"},superscript={mark:"sup"},commands_link={mark:"link"},msoListRegExp=("undefined"!=typeof navigator&&/Mac/.test(navigator.platform),/style=['"]?[^'"]*?mso-list:\s*[a-zA-Z]+(\d+)\s[a-zA-Z]+(\d+)\s(\w+)/gi),isPartOfListItem=function(element){return/^MsoListParagraph/.test(element.className)},innerText=function(node){var text=node.innerHTML;return text=(text=text.replace(/<!--(.|\s)*?-->/gi,"")).replace(/<\/?[^>]+?\/?>/gm,"")},createList=function(type,styleType){var list=document.createElement(type);return list.style.listStyleType=styleType,list},guessOrderedListStyle=function(symbol){var type=null;return/^\d/.test(symbol)||(type=(/^[a-z]/.test(symbol)?"lower-":"upper-")+(/^[ivxlcdm]/i.test(symbol)?"roman":"alpha")),type},mapListsCandidates=function(nodes,groups){var group=[];Array.from(nodes).forEach((function(node){if(node.nodeType===Node.ELEMENT_NODE){var element=node;element.getAttribute("datalist")?(group.push(node),groups.add(group)):isPartOfListItem(element)&&group.length?group.push(node):(group=[],"DIV"===element.nodeName?mapListsCandidates(element.children,groups):"TABLE"===element.nodeName&&Array.from(element.querySelectorAll("td,th")).forEach((function(cell){mapListsCandidates(cell.children,groups)})))}}))},listTypes=function(p){var symbol,html=p.innerHTML,trimStartText=function(t){return t.replace(/^(?:&nbsp;|[\u00a0\n\r\s])+/,"")};return html=html.replace(/<\/?\w+[^>]*>/g,"").replace(/&nbsp;/g," "),/^[\u2022\u00b7\u00a7\u00d8oØüvn][\u00a0 ]+/.test(html)?{tag:"ul",style:(symbol=trimStartText(innerText(p)),/^[\u2022\u00b7\u00FC\u00D8\u002dv-]/.test(symbol)?null:/^o/.test(symbol)?"circle":"square")}:/^\s*\w+[\.\)][\u00a0 ]{2,}/.test(html)?{tag:"ol",style:guessOrderedListStyle(trimStartText(innerText(p)))}:void 0},convertToLi=function(p){var content,name=p.nodeName.toLowerCase();p.firstChild&&p.firstChild.nodeType===Node.COMMENT_NODE&&p.removeChild(p.firstChild),1===p.childNodes.length?content=p.firstChild.nodeType===Node.TEXT_NODE?innerText(p):p.firstChild.innerHTML.replace(/^\w+[\.\)](&nbsp;)+ /,""):(p.removeChild(p.firstChild),3===p.firstChild.nodeType&&/^[ivxlcdm]+\.$/i.test(p.firstChild.nodeValue)&&p.removeChild(p.firstChild),/^(&nbsp;|\s)+$/i.test(p.firstChild.innerHTML)&&p.removeChild(p.firstChild),content="p"!==name?"<"+name+">"+p.innerHTML+"</"+name+">":p.innerHTML),p.parentNode.removeChild(p);var li=document.createElement("li");return li.appendChild(htmlToFragment(content)),li},convertMsLists=function(html){var container=htmlToFragment(function(html){return html.replace(msoListRegExp,(function(match,list,level){return'datalist="'+list+'" datalevel="'+level+'" '+match}))}(html)),groups=new Set;return mapListsCandidates(container.children,groups),groups.forEach((function(listsCandidates){return function(blockNodes){var li,rootMargin,rootIndex,lastRootLi,isLastRootLi,rootList,items,i,p,type,margin,list,listData,lastMargin=-1,levels={};for(i=0;i<blockNodes.length;i++){var listIndex=(listData={datalist:(p=blockNodes[i]).getAttribute("datalist"),datalevel:p.getAttribute("datalevel")}).datalist,listType=listTypes(p);if(type=listType&&listType.tag){if(margin=listData.datalevel||parseFloat(p.style.marginLeft||0),listData.datalevel||p.style.marginLeft){var levelType=type+listIndex;levels[margin]||(levels[margin]={}),(!rootMargin||rootMargin<0)&&(rootMargin=margin,rootIndex=listIndex,lastRootLi=(items=blockNodes.filter((function(e){return e.getAttribute("datalist")===String(rootIndex)})))[items.length-1],rootList=createList(type,listType&&listType.style),p.parentNode.insertBefore(rootList,p),lastMargin=margin,levels[margin][levelType]=rootList),isLastRootLi=lastRootLi===p,list=levels[margin][levelType],(margin>lastMargin||!list)&&(list=createList(type,listType&&listType.style),levels[margin][levelType]=list,li.appendChild(list)),li=convertToLi(p),list.appendChild(li),isLastRootLi?rootMargin=lastMargin=-1:lastMargin=margin}}else!li||isLastRootLi&&!isPartOfListItem(p)||(p.style.marginLeft&&(p.style.marginLeft=""),p.style.marginLeft&&(p.style.margin=""),li.appendChild(p))}}(listsCandidates)})),fragmentToHtml(container)},sanitize=function(html){return html=(html=(html=(html=(html=(html=(html=(html=(html=(html=html.replace(/^[\s\S]+?<!--StartFragment-->\s*([\s\S]*?)\s*<!--EndFragment-->[\s\S]+$/,"$1")).replace(/<\/?[ovw]:[^>]*?>/gi,"")).replace(/<\\?\??xml[^>]*>/gi,"")).replace(/<(?:link|meta) [^>]+?>/gi,"")).replace(/<style[^>]*?>\s*<\/style>/gi,"")).replace(/<\/?st1:.*?>/gi,"")).replace(/<a name="[a-zA-Z0-9_]+">/gim,"")).replace(/v:shapes?="[^"]+"/gi,"")).replace(/<!\[if !supportLists\]>/gi,"")).replace(/<!\[endif\]>/gi,"")},removeComments=function(html){return html.replace(/<!--[\s\S]+?-->/g,"")},removeTag=function(html,tagPattern){return html.replace(new RegExp("<\\/?("+tagPattern+")(?:\\s[^>]*?)?>","gi"),"")},removeAttribute=function(attr){attr.ownerElement&&attr.ownerElement.removeAttribute(attr.name)},sanitizeClassAttr=function(attr){/^Mso/.test(attr.value)&&removeAttribute(attr)},stylesSplit=/\s*;\s*/,styleValueSplit=/\s*:\s*/,sanitizeStyleAttr=function(attr){var name,value,styles=attr.value.split(stylesSplit).filter((function(st){return Boolean(st)})),supportedStyles=attr.ownerElement.style,result="";styles.forEach((function(style){var _a;_a=style.split(styleValueSplit),name=_a[0],value=_a[1],void 0!==supportedStyles[name]&&(result+=name+": "+value+"; ")})),(result=result.trim())?attr.value=result:removeAttribute(attr)},pasteCleanup=function(html,settings){var result=html;if(settings.convertMsLists&&(result=convertMsLists(result)),settings.stripTags&&(result=removeTag(result,settings.stripTags)),settings.attributes){var fragment=htmlToFragment(result);Array.from(fragment.querySelectorAll("*")).forEach((function(node){return function(node,attributes){if(node.nodeType===Node.ELEMENT_NODE){for(var i=node.attributes.length-1;i>=0;i--){var attr=node.attributes[i];attributes[attr.name]?attributes[attr.name](attr):attributes["*"]&&attributes["*"](attr)}"SPAN"===node.nodeName&&0===node.attributes.length&&function(node){var parentNode=node.parentNode;if(parentNode){for(;node.firstChild;)parentNode.insertBefore(node.firstChild,node);parentNode.removeChild(node)}}(node)}}(node,settings.attributes)})),result=fragmentToHtml(fragment)}return result};function convertHexToBase64(hex){for(var length=hex.length,data=new Array(length/2),i=0;i<length;i+=2)data[i]=String.fromCharCode(parseInt(hex.substring(i,i+2),16));return btoa(data.join(""))}var reHtmlImg=/<img\s[^>]*?src=(?:'|")file:\/[^'"]+(?:'|")[^>]*>/gi,reRtfImgHeader=/{\\pict[\s\S]+?\\bliptag-?\d+(\\blipupi-?\d+)?({\\\*\\blipuid\s?[\da-fA-F]+)?[\s}]*?/,reRtfImg=new RegExp("(?:("+reRtfImgHeader.source+"))([\\da-fA-F\\s]+)\\}","g"),reNonHex=/[^\da-fA-F]/g,reLocalFile=/file:\/[^'"]+\.(jpg|png|gif)/i,reExtension=/\\(png|jpeg)blip\\/,replaceImageSourcesFromRtf=function(html,clipboardData){var htmlImages=html.match(reHtmlImg);if(!htmlImages||-1===clipboardData.types.indexOf("text/rtf"))return html;var rtf=clipboardData.getData("text/rtf"),base64Sources=[],rtfImages=rtf.match(reRtfImg);if(!rtf||!rtfImages)return html;for(var _i=0,rtfImages_1=rtfImages;_i<rtfImages_1.length;_i++){var image=rtfImages_1[_i],extension=reExtension.exec(image);if(extension){var hex=image.replace(reRtfImgHeader,"").replace(reNonHex,"");base64Sources.push("data:image/"+extension[1]+";base64,"+convertHexToBase64(hex))}}return htmlImages.length!==base64Sources.length?html:html.replace(reHtmlImg,(function(img){var src=base64Sources.shift()||"";return img.replace(reLocalFile,src)}))},findAt=function(doc,searchOptions,start,end,exit){var exec,text,from,to,childText,nextSibling,result=[],nodes=[],matchCase=searchOptions.matchCase,matchWord=searchOptions.matchWord,useRegExp=searchOptions.useRegExp,searchText=searchOptions.text;if(useRegExp&&(/^\\$/.test(searchText)||/[^\\]\\$/.test(searchText))&&(searchText=searchText.substring(0,searchText.length-1)),!searchText)return result;var flags=matchCase?"g":"gi",regExp=useRegExp?new RegExp(searchText,flags):createRegExp(searchText,flags);return doc.nodesBetween(start,end,(function(node,pos,_parent){if(exit(result))return!1;node.inlineContent&&pos+node.content.size>=start&&(nodes.length=0,node.nodesBetween(0,node.content.size,(function(child,childPos,parent,i){if(exit(result))return!1;var posToDoc=1+pos+childPos;if(child.isText&&posToDoc+child.nodeSize>=start){if(childText=child.text||"",nextSibling=parent.childCount-1>=i+1&&parent.child(i+1),nodes.push(start<=posToDoc?{text:childText,start:posToDoc}:{text:childText.slice(start-posToDoc),start}),nextSibling&&nextSibling.isText)return;for(text=nodes.map((function(t){return t.text})).join(""),exec=regExp.exec(text);null!==exec&&(from=nodes[0].start+exec.index,to=from+exec[0].length,start<=from&&end>=to&&shouldMatchWord(exec,matchWord)&&result.push(dist_TextSelection.create(doc,from,to)),!exit(result));)exec=regExp.exec(text)}else nodes.length=0})))})),result},find=function(state,searchOptions){var backward=searchOptions.backward,matchCyclic=searchOptions.matchCyclic,options=__rest(searchOptions,["backward","matchCyclic"]),exit=backward?function(){return!1}:function(r){return r.length>0},doc=state.doc,selection=state.selection,result=[];return backward?!(result=findAt(doc,options,0,selection.from,exit)).length&&matchCyclic&&(result=findAt(doc,options,selection.from,doc.content.size,exit)):!(result=findAt(doc,options,selection.to,doc.content.size,exit)).length&&matchCyclic&&(result=findAt(doc,options,0,selection.to,exit)),result.length?result[result.length-1]:null},findAll=function(doc,searchOptions){return findAt(doc,searchOptions,0,doc.content.size,(function(){return!1}))},find_replace_replace=function(selection,text,transaction){var from=selection.from,to=selection.to;return transaction.insertText(text,from,to).setSelection(dist_TextSelection.create(transaction.doc,from,from+text.length)),transaction},replaceAll=function(state,replaceText,searchOptions){var result=findAll(state.doc,searchOptions);if(0===result.length)return null;for(var transaction=state.tr,i=result.length-1;i>=0;i--)transaction.insertText(replaceText,result[i].from,result[i].to);return transaction},notLetter=/^[\s0-9~`!@#$%\^&*\(\)_\-=+\\|\[\]{};:'"\?/.,<>]?$/,shouldMatchWord=function(exec,matchWord){if(matchWord){if(!0===matchWord){var text=exec.input,charBefore=text.charAt(exec.index-1),charAfter=text.charAt(exec.index+exec[0].length);return notLetter.test(charBefore)&&notLetter.test(charAfter)}return matchWord(exec)}return!0},createRegExp=function(inputString,flags){var escaped=inputString.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d").replace(/\s/g,"\\s");return new RegExp(escaped,flags)},spaces=/\s+/g,align=/text-align/,spacesFix=function(){return new dist_Plugin({key:new PluginKey("spaces-fix"),props:{decorations:function(state){var start,match,length,i,decorations=[],doc=state.doc;return doc.nodesBetween(0,doc.content.size,(function(node,position,parent){if(node.type.isText&&function(node){return align.test(node&&node.attrs&&node.attrs.style||"")}(parent))for(match=spaces.exec(node.text||"");null!==match;){if(start=position+match.index,length=match[0].length,match.index+length<match.input.length)for(i=0;i<=length-1;i+=2)decorations.push(Decoration.inline(start+i,start+i+1,{style:"white-space: normal"}));match=spaces.exec(node.text||"")}})),DecorationSet.create(doc,decorations)}}})},setAttributes=function(dom,attrs){for(var attrName in attrs)attrName&&setAttribute(dom,attrName,attrs[attrName])},CustomNodeView=function CustomNodeView(node,view,nodeName,isLeaf){void 0===isLeaf&&(isLeaf=!1),this.node=node,this.view=view,this.dom=document.createElement(nodeName),setAttributes(this.dom,node.attrs),this.contentDOM=isLeaf?void 0:this.dom},StyleView=function StyleView(mark,view,_inline){this.mark=mark,this.view=view,this.dom=document.createElement("span"),setAttributes(this.dom,mark.attrs),this.contentDOM=this.dom},cspFix=function(){return new dist_Plugin({key:new PluginKey("csp-fix"),props:{nodeViews:{paragraph:function(node,view){return new CustomNodeView(node,view,"p")},div:function(node,view){return new CustomNodeView(node,view,"div")},table_wrapper:function(node,view){return new CustomNodeView(node,view,"div")},table_caption_external:function(node,view){return new CustomNodeView(node,view,"div")},table:function(node,view){return new CustomNodeView(node,view,"table")},table_row:function(node,view){return new CustomNodeView(node,view,"tr")},table_cell:function(node,view){return new CustomNodeView(node,view,"td")},table_header:function(node,view){return new CustomNodeView(node,view,"th")},image:function(node,view){return new CustomNodeView(node,view,"img",!0)}},markViews:{style:function(mark,view,inline){return new StyleView(mark,view,inline)}}}})},textHighlightKey=new PluginKey("highlight");function textHighlight(key){return void 0===key&&(key=textHighlightKey),new dist_Plugin({key,state:{init:function(){return null},apply:function(tr){return tr.getMeta(this.spec.key)}},props:{decorations:function(state){var decorations=(this.spec.key.getState(state)||[]).map((function(d){return Decoration.inline(d.from,d.to,d.attrs)}));return DecorationSet.create(state.doc,decorations)}}})}var directions={southeast:{x:1,y:1},east:{x:1,y:0},south:{x:0,y:1},north:{x:0,y:-1},west:{x:-1,y:0},southwest:{x:-1,y:1},northwest:{x:-1,y:-1},northeast:{x:1,y:-1}},handles=Object.keys(directions),imageResizeKey=new PluginKey("image-resize"),setSize=function(domNode,sizeType,value){domNode.style[sizeType]=value+"px"},reSize=/[^\-]width:|[^\-]height:/,reAnyValue=/^.+$/,image_resize_ResizeState=function(){function ResizeState(activeHandle,dragging,rect,nodePosition){this.activeHandle=activeHandle,this.dragging=dragging,this.rect=rect,this.nodePosition=nodePosition}return ResizeState.prototype.apply=function(tr){var next=tr.getMeta(imageResizeKey);return next?new ResizeState(next.activeHandle,next.setDragging,next.rect,next.nodePosition):this},ResizeState}(),image_resize_handleMouseDown=function(view,event,options){var activeHandle=event.target.getAttribute("data-dir-image-resize");if(!activeHandle)return!1;var resizeState=imageResizeKey.getState(view.state);event.preventDefault();var transaction=view.state.tr;function move(e){!function(view,event,options){var state=imageResizeKey.getState(view.state),rect=state.rect,dragging=state.dragging,nodePosition=state.nodePosition,activeHandle=state.activeHandle;if(dragging&&rect){var img=view.nodeDOM(nodePosition),dir=directions[activeHandle],diffX=(event.clientX-dragging.startX)*dir.x,diffY=(event.clientY-dragging.startY)*dir.y,width=dir.x?diffX+img.width:rect.width,height=dir.y?diffY+img.height:rect.height;if(options.lockRatio&&dir.x&&dir.y){var ratio=Math.min(width/img.width,height/img.height),lockWidth=img.width*ratio,lockHeight=img.height*ratio;dragging.startX=event.clientX-(width-lockWidth)*dir.x,dragging.startY=event.clientY-(height-lockHeight)*dir.y,width=lockWidth,height=lockHeight}else dragging.startX=dir.x?event.clientX:dragging.startX,dragging.startY=dir.y?event.clientY:dragging.startY;setSize(img,"width",width),setSize(img,"height",height),rect.top=img.offsetTop,rect.left=img.offsetLeft,rect.width=img.offsetWidth,rect.height=img.offsetHeight;var handlesWrapper=img.nextElementSibling;handlesWrapper.style.width=rect.width+"px",handlesWrapper.style.height=rect.height+"px",handlesWrapper.style.top=rect.top+"px",handlesWrapper.style.left=rect.left+"px"}}(view,e,options)}return transaction.setMeta(imageResizeKey,{setDragging:{startX:event.clientX,startY:event.clientY},activeHandle,rect:resizeState.rect,nodePosition:resizeState.nodePosition}),transaction.setMeta("addToHistory",!1),view.dispatch(transaction),event.view.addEventListener("mouseup",(function finish(e){e.view.removeEventListener("mouseup",finish),e.view.removeEventListener("mousemove",move),function(view){var _a=imageResizeKey.getState(view.state),rect=_a.rect,dragging=_a.dragging,nodePosition=_a.nodePosition;if(dragging&&rect){var selection=view.state.selection;if(selection instanceof dist_NodeSelection){var currAttrs=selection.node.attrs,width=rect.width,height=rect.height,attrs=void 0;if(reSize.test(currAttrs.style||"")){var changedWidth=changeStylesString(currAttrs.style,{style:"width",value:reAnyValue,newValue:width+"px"}),style=changeStylesString(changedWidth.style||"",{style:"height",value:reAnyValue,newValue:height+"px"}).style;attrs=tslib_es6_assign(tslib_es6_assign({},currAttrs),{style})}else attrs=tslib_es6_assign(tslib_es6_assign({},currAttrs),{width,height});var newImage=selection.node.type.createAndFill(attrs);if(newImage){var tr=view.state.tr;tr.replaceWith(nodePosition,nodePosition+1,newImage),tr.setSelection(dist_NodeSelection.create(tr.doc,nodePosition)),tr.setMeta("commandName","image-resize"),tr.setMeta("args",attrs),tr.setMeta(imageResizeKey,{setDragging:null,activeHandle:null,rect,nodePosition}),view.dispatch(tr)}}}}(view)})),event.view.addEventListener("mousemove",move),!0},imageResizing=function(options){return void 0===options&&(options={node:"image",lockRatio:!0}),new dist_Plugin({key:imageResizeKey,view:function(viewObj){return{resize:function(){imageResizeKey.getState(viewObj.state).rect&&viewObj.dispatch(viewObj.state.tr.setMeta("resize",!0))},get window(){return viewObj.dom.ownerDocument&&viewObj.dom.ownerDocument.defaultView},attachResize:function(){var win=this.window;win&&(win.removeEventListener("resize",this.resize),win.addEventListener("resize",this.resize))},removeResize:function(){var win=this.window;win&&win.removeEventListener("resize",this.resize)},update:function(view,prevState){var state=view.state,selection=state.selection,nodeType=state.schema.nodes[options.node],pluginState=imageResizeKey.getState(state),prevRect=pluginState.rect;if(selection instanceof dist_NodeSelection&&nodeType===selection.node.type){var img=view.nodeDOM(selection.from),rect={top:img.offsetTop,left:img.offsetLeft,width:img.offsetWidth,height:img.offsetHeight};if(!prevState.selection.eq(selection)||prevRect&&(prevRect.width!==rect.width||prevRect.height!==rect.height||prevRect.top!==rect.top||prevRect.left!==rect.left)){var tr=state.tr;tr.setMeta(imageResizeKey,{rect,nodePosition:selection.from}),view.dispatch(tr),this.attachResize()}}else prevRect&&(pluginState.rect=null,pluginState.nodePosition=-1)},destroy:function(){this.removeResize()}}},state:{init:function(){return new image_resize_ResizeState("",null,null,-1)},apply:function(tr,prev){return prev.apply(tr)}},props:{handleDOMEvents:{mousedown:function(view,event){return image_resize_handleMouseDown(view,event,options)}},decorations:function(state){var selection=state.selection,nodeType=state.schema.nodes[options.node],rect=imageResizeKey.getState(state).rect;if(rect&&selection instanceof dist_NodeSelection&&nodeType===selection.node.type){var wrapper=document.createElement("div");wrapper.className="k-editor-resize-handles-wrapper",wrapper.style.width=rect.width+"px",wrapper.style.height=rect.height+"px",wrapper.style.top=rect.top+"px",wrapper.style.left=rect.left+"px";for(var i=0;i<handles.length;i++){var dom=document.createElement("div");dom.className="k-editor-resize-handle "+handles[i],dom.setAttribute("data-dir-image-resize",handles[i]),wrapper.appendChild(dom)}return DecorationSet.create(state.doc,[Decoration.widget(state.selection.from+1,wrapper)])}return DecorationSet.empty}}})},caretColorKey=new PluginKey("caret-color");function caretColor(){return new dist_Plugin({key:caretColorKey,props:{decorations:function(state){var doc=state.doc,selection=state.selection,storedMarks=state.storedMarks;if(!selection.empty||!storedMarks)return DecorationSet.empty;var color=styleValue((storedMarks||[]).find((function(m){return"style"===m.type.name})),{name:"color",value:/^.+$/});if(!color)return DecorationSet.empty;var parentNode=selection.$anchor.parent,decorations=[];return doc.descendants((function(node,pos){node.eq(parentNode)&&decorations.push(Decoration.node(pos,pos+node.nodeSize,{style:"caret-color: "+color}))})),DecorationSet.create(doc,decorations)}}})}var table_view_TableView=function(){function TableView(node,view){this.node=node,this.view=view,this.dom=document.createElement("div"),this.dom.className="k-editor-resize-wrap-element",this.table=this.dom.appendChild(document.createElement("table")),node.attrs[colgroupAttr]&&this.renderColgroup(node.attrs[colgroupAttr]);var tBody=this.table.appendChild(document.createElement("tbody"));this.setAttributes(this.table,node.attrs),this.resizeHandles=handles.map((function(dir){var handle=document.createElement("span");return handle.className="k-editor-resize-handle "+dir,handle.setAttribute("data-dir-table-resize",dir),handle})),this.contentDOM=tBody}return TableView.prototype.update=function(node){var _this=this;if(node.type!==this.node.type)return!1;var prev=this.node;return this.node=node,node.attrs[resizableAttr]?this.resizeHandles.forEach((function(handle){_this.dom.appendChild(handle)})):Array.from(this.dom.children).filter((function(e){return e.classList.contains("k-editor-resize-handle")})).forEach((function(e){return e.remove()})),this.setAttributes(this.table,node.attrs),prev.attrs[colgroupAttr]!==node.attrs[colgroupAttr]&&this.renderColgroup(node.attrs[colgroupAttr]),!0},TableView.prototype.ignoreMutation=function(record){return"attributes"===record.type&&(record.target===this.table||record.target.firstChild===this.table||this.colgroup&&this.colgroup.contains(record.target))},TableView.prototype.destroy=function(){this.node=void 0,this.view=void 0,this.table=void 0,this.colgroup=void 0,this.resizeHandles=void 0},TableView.prototype.renderColgroup=function(colgroupStr){this.table&&this.table.firstChild&&"COLGROUP"===this.table.firstChild.nodeName&&this.table.removeChild(this.table.firstChild),colgroupStr&&(this.colgroup=parseStrColgroup(colgroupStr),this.table.insertBefore(this.colgroup,this.table.firstChild))},TableView.prototype.setAttributes=function(table,attrs){var skip=[colgroupAttr,resizableAttr];for(var attrName in attrs)attrName&&-1===skip.indexOf(attrName)&&setAttribute(table,attrName,attrs[attrName]);/%$/.test(table.style.width)?(this.dom.style.width=table.style.width,table.style.width=""):this.dom.style.width=""},TableView}(),TableWrapperView=function(){function TableWrapperView(node,view){this.node=node,this.view=view,this.dom=document.createElement("div"),this.setAttributes(this.dom,node.attrs),this.contentDOM=this.dom}return TableWrapperView.prototype.update=function(node){return node.type===this.node.type&&(this.node=node,this.setAttributes(this.dom,node.attrs),!0)},TableWrapperView.prototype.ignoreMutation=function(record){return"attributes"===record.type&&"style"===record.attributeName},TableWrapperView.prototype.destroy=function(){this.node=void 0,this.view=void 0},TableWrapperView.prototype.setAttributes=function(dom,attrs){for(var attrName in attrs)attrName&&setAttribute(dom,attrName,attrs[attrName]);if(dom.setAttribute("table",""),/%/.test(dom.style.width)){var table=this.node&&this.node.lastChild,tableWidth=(table?parseStyle(table.attrs.style):{}).width||"";tableWidth&&!/%/.test(tableWidth)&&(dom.style.width="")}},TableWrapperView}(),utils_reAnyValue=/^.+$/;function setNodeStyle(nodeAttrs,styleType,value){var attrs;if(new RegExp("[^-]?"+styleType+":").test(nodeAttrs.style||"")){var style=changeStylesString(nodeAttrs.style||"",{style:styleType,value:utils_reAnyValue,newValue:value}).style;attrs=tslib_es6_assign(tslib_es6_assign({},nodeAttrs),{style})}else attrs=nodeAttrs.style?tslib_es6_assign(tslib_es6_assign({},nodeAttrs),{style:nodeAttrs.style.replace(/;$/,"")+"; "+styleType+": "+value+";"}):tslib_es6_assign(tslib_es6_assign({},nodeAttrs),{style:styleType+": "+value+";"});return attrs}var tableResizeKey=new PluginKey("table-resize"),tableColumnResizeKey=new PluginKey("table-column-resizing"),tableRowResizeKey=new PluginKey("table-row-resizing");function otherResizing(current,state){var activeResize=!1;return activeResize=(activeResize=(activeResize=activeResize||current!==tableResizeKey&&Boolean(tableResizeKey.get(state))&&tableResizeKey.getState(state).dragging)||current!==tableColumnResizeKey&&Boolean(tableColumnResizeKey.get(state))&&tableColumnResizeKey.getState(state).dragging)||current!==tableRowResizeKey&&Boolean(tableRowResizeKey.get(state))&&tableRowResizeKey.getState(state).dragging}function otherResizeHandle(current,state){var activeResize=!1;return activeResize=(activeResize=activeResize||current!==tableColumnResizeKey&&Boolean(tableColumnResizeKey.get(state))&&tableColumnResizeKey.getState(state).activeHandle>-1)||current!==tableRowResizeKey&&Boolean(tableRowResizeKey.get(state))&&tableRowResizeKey.getState(state).activeHandle>-1}function getTable(dom){return dom&&dom.firstChild&&"TABLE"===dom.firstChild.nodeName?dom.firstChild:dom}function utils_domCellAround(target){for(;target&&"TD"!==target.nodeName&&"TH"!==target.nodeName;)target=target.classList.contains("ProseMirror")?null:target.parentNode;return target}function cellIndexes(dataCell){for(var map=function tableSpansMap(table){var rows=Array.from(table&&table.rows||[]),colsCount=Array.from(rows&&rows[0]&&rows[0].cells||[]).map((function(c){return c.colSpan})).reduce((function(prev,cur){return prev+cur}),0),map=rows.map((function(){return new Array(colsCount)}));return rows.forEach((function(row,r){var curColSpan=0;Array.from(row.cells).forEach((function(c){for(var colSp=0;colSp<c.colSpan;colSp++){for(var rowSp=0;rowSp<c.rowSpan;rowSp++){var ind=map[r+rowSp].findIndex((function(val,curInd){return curInd>=curColSpan&&!val}));map[r+rowSp][ind]=c}curColSpan++}}))})),map}(dataCell.closest("table")),result=null,_loop_1=function(r){if(map[r].forEach((function(cell,c){dataCell===cell&&(result={rowIndex:r,cellIndex:c})})),result)return"break"},r=0;r<map.length;r++){if("break"===_loop_1(r))break}return result||{rowIndex:-1,cellIndex:-1}}function utils_parentNode(pos,predicate){for(var depth=pos.depth;depth>0;depth--){var node=pos.node(depth);if(predicate(node))return{node,depth}}return null}function utils_edgeCell(view,event,indexes){var found=view.posAtCoords({left:event.clientX,top:event.clientY});if(!found)return-1;var $pos=view.state.doc.resolve(found.pos),parentTable=utils_parentNode($pos,(function(n){return"table"===n.type.spec.tableRole}));if(null===parentTable)return-1;var tablePos=$pos.start(parentTable.depth),tableNode=parentTable.node,map=TableMap.get(tableNode);return tablePos+map.map[map.width*indexes.rowIndex+indexes.cellIndex]}function column_resize_columnResizing(){var plugin=new dist_Plugin({key:tableColumnResizeKey,state:{init:function(_,_state){return new column_resize_ResizeState(-1,null)},apply:function(tr,prev){return prev.apply(tr)}},props:{attributes:function(state){return otherResizeHandle(tableColumnResizeKey,state)?null:tableColumnResizeKey.getState(state).activeHandle>-1?{class:"resize-cursor"}:null},handleDOMEvents:{mousemove:function(view,event){return otherResizing(tableColumnResizeKey,view.state)||function column_resize_handleMouseMove(view,event,handleWidth){var pluginState=tableColumnResizeKey.getState(view.state);if(!pluginState.dragging){var target=utils_domCellAround(event.target),cell=-1;if(target){var indexes=cellIndexes(target),_a=target.getBoundingClientRect(),left=_a.left,right=_a.right;Math.abs(event.clientX-left)<=handleWidth&&indexes.cellIndex>0?(indexes.cellIndex-=target.colSpan,cell=utils_edgeCell(view,event,indexes)):right-event.clientX>0&&right-event.clientX<=handleWidth&&(cell=utils_edgeCell(view,event,indexes))}cell!==pluginState.activeHandle&&column_resize_updateHandle(view,cell)}}(view,event,5),!1},mouseleave:function(view){return function column_resize_handleMouseLeave(view){var pluginState=tableColumnResizeKey.getState(view.state);pluginState.activeHandle>-1&&!pluginState.dragging&&column_resize_updateHandle(view,-1)}(view),!1},mousedown:function(view,event){return function column_resize_handleMouseDown(view,event,cellMinWidth){var _a,pluginState=tableColumnResizeKey.getState(view.state);if(-1===pluginState.activeHandle||pluginState.dragging)return!1;for(var $cell=view.state.doc.resolve(pluginState.activeHandle),row=$cell.parent,cellIndex=$cell.index(),colSpan=0,i=0;i<=cellIndex;i++)colSpan+=row.child(i).attrs.colspan;var col,tableAttrs,tableNode=$cell.node($cell.depth-1),dom=view.domAtPos(pluginState.activeHandle),tableDom=dom.node.childNodes[dom.offset].closest("table");if(tableNode.attrs[colgroupAttr]){(col=(colgroup=tableDom.firstChild).children[colSpan-1]).style.width||(col.style.width=col.offsetWidth+"px")}else{var total=0;for(i=0;i<row.childCount;i++)total+=row.child(i).attrs.colspan;var colgroup=document.createElement("colgroup"),cols=new Array(total);for(i=0;i<total;i++)cols[i]=document.createElement("col"),colgroup.appendChild(cols[i]);tableDom.insertBefore(colgroup,tableDom.firstChild),(col=cols[cellIndex]).style.width=col.offsetWidth+"px",tableAttrs=tslib_es6_assign(tslib_es6_assign({},tableNode.attrs),((_a={})[colgroupAttr]="<colgroup>"+cols.reduce((function(acc,cur){return acc+cur.outerHTML}),"")+"</colgroup>",_a))}var width=parseFloat(col.style.width),tr=view.state.tr.setMeta(tableColumnResizeKey,{setDragging:{startX:event.clientX,startWidth:width}});if(!tableDom.style.width){var widths=Array.from(col.parentNode.children).map((function(c){return c.style.width}));if(widths.every(Boolean)){var sum=widths.reduce((function(acc,cur){return acc+parseFloat(cur)}),0);tableAttrs=setNodeStyle(tableAttrs||tableNode.attrs,"width",sum+"px")}}if(tableAttrs){var tablePos=$cell.posAtIndex(0,$cell.depth-1)-1;tr.setNodeMarkup(tablePos,null,tableAttrs)}function finish(ev){ev.view.removeEventListener("mouseup",finish),ev.view.removeEventListener("mousemove",move);var curPluginState=tableColumnResizeKey.getState(view.state);if(curPluginState.dragging){var transaction=view.state.tr;!function column_resize_updateColumnWidth(view,tr,cell,_width){var _a,$cell=view.state.doc.resolve(cell),tableNode=$cell.node(-1),start=$cell.start(-1),tablePos=$cell.posAtIndex(0,$cell.depth-1)-1,tableDom=view.nodeDOM(start).closest("table"),attrs=tableNode.attrs;if(tableNode&&attrs[colgroupAttr]){var colgroup=tableDom.firstChild;attrs=tslib_es6_assign(tslib_es6_assign({},attrs),((_a={})[colgroupAttr]=colgroup.outerHTML,_a))}var tableDomWidth=tableDom.style.width;tableDom&&tableDomWidth&&parseStyle(attrs.style).width!==tableDomWidth&&(attrs=setNodeStyle(attrs,"width",tableDomWidth));tr.setNodeMarkup(tablePos,null,attrs)}(view,transaction,curPluginState.activeHandle,column_resize_draggedWidth(curPluginState.dragging,ev,cellMinWidth)),view.dispatch(transaction.setMeta(tableColumnResizeKey,{setDragging:null}))}}function move(ev){if(!ev.which)return finish(ev);var curPluginState=tableColumnResizeKey.getState(view.state),dragged=column_resize_draggedWidth(curPluginState.dragging,ev,cellMinWidth);!function column_resize_displayColumnWidth(view,cell,width,_cellMinWidth){var $cell=view.state.doc.resolve(cell),table=$cell.node(-1),start=$cell.start(-1),col=TableMap.get(table).colCount($cell.pos-start)+$cell.nodeAfter.attrs.colspan-1,dom=view.domAtPos($cell.start(-1)).node;"TABLE"!==dom.nodeName&&(dom=dom.closest("table"));var tableDom=dom,colgroup=tableDom.firstChild,cols=Array.from(colgroup.children);if(cols[col].style.width=width+"px",tableDom.style.width){var widths=cols.map((function(c){return c.style.width}));if(widths.every(Boolean)){var sum=widths.reduce((function(acc,cur){return acc+parseFloat(cur)}),0);tableDom.style.width=sum+"px"}}}(view,curPluginState.activeHandle,dragged)}return view.dispatch(tr),event.view.addEventListener("mouseup",finish),event.view.addEventListener("mousemove",move),event.preventDefault(),!0}(view,event,25)}},decorations:function(state){if(!otherResizing(tableColumnResizeKey,state)){var pluginState=tableColumnResizeKey.getState(state);if(pluginState.activeHandle>-1)return function column_resize_handleDecorations(state,cell){for(var decorations=[],$cell=state.doc.resolve(cell),table=$cell.node(-1),map=TableMap.get(table),start=$cell.start(-1),cellsPositions=[],cellPos=cell-start,column=-1,i=0;i<map.height;i++)cellsPositions.push(map.map.slice(i*map.width,i*map.width+map.width)),-1===column&&(column=cellsPositions[i].lastIndexOf(cellPos));var cells=[];return cellsPositions.forEach((function(row){var c=row[column];row[column]!==row[column+1]&&cells.push(c)})),cells.forEach((function(cPos){var pos=start+cPos+table.nodeAt(cPos).nodeSize-1,dom=document.createElement("div");dom.className="column-resize-handle",decorations.push(Decoration.widget(pos,dom))})),DecorationSet.create(state.doc,decorations)}(state,pluginState.activeHandle)}return DecorationSet.empty},nodeViews:{table_wrapper:function(node,view){return new TableWrapperView(node,view)},table:function(node,view){return new table_view_TableView(node,view)}}}});return plugin}var column_resize_ResizeState=function(){function ResizeState(activeHandle,dragging){this.activeHandle=activeHandle,this.dragging=dragging}return ResizeState.prototype.apply=function(tr){var state=this,action=tr.getMeta(tableColumnResizeKey);if(action&&null!=action.setHandle)return new ResizeState(action.setHandle,null);if(action&&void 0!==action.setDragging)return new ResizeState(state.activeHandle,action.setDragging);if(state.activeHandle>-1&&tr.docChanged){var handle=tr.mapping.map(state.activeHandle,-1);(function column_resize_pointsAtCell($pos){return Boolean("row"===$pos.parent.type.spec.tableRole&&$pos.nodeAfter)})(tr.doc.resolve(handle))||(handle=-1),state=new ResizeState(handle,state.dragging)}return state},ResizeState}();function column_resize_draggedWidth(dragging,event,cellMinWidth){var offset=event.clientX-dragging.startX;return Math.max(cellMinWidth,dragging.startWidth+offset)}function column_resize_updateHandle(view,value){var tr=view.state.tr;tr.setMeta("addToHistory",!1),tr.setMeta(tableColumnResizeKey,{setHandle:value}),view.dispatch(tr)}var commonDir={southeast:!0,southwest:!0,northwest:!0,northeast:!0},horizontalDir=tslib_es6_assign({east:!0,west:!0},commonDir),verticalDir=tslib_es6_assign({south:!0,north:!0},commonDir),table_resize_ResizeState=function(){function ResizeState(activeHandle,dragging,nodePosition){this.activeHandle=activeHandle,this.dragging=dragging,this.nodePosition=nodePosition}return ResizeState.prototype.apply=function(tr){var next=tr.getMeta(tableResizeKey);return next?new ResizeState(next.activeHandle,next.setDragging,next.nodePosition):this},ResizeState}(),tableSize=function(table){var colsWidth=Array.from(table.firstChild.children).map((function(c){return c.offsetWidth})),rowsHeight=Array.from(table.rows).map((function(row){return row.offsetHeight})),width=colsWidth.reduce((function(acc,cur){return acc+cur}),0),height=rowsHeight.reduce((function(acc,cur){return acc+cur}),0),offsetHeight=table.offsetHeight;return{width,height,colsWidth,rowsHeight,offsetWidth:table.offsetWidth,offsetHeight}},table_resize_handleMouseUp=function(view){var _a=tableResizeKey.getState(view.state),dragging=_a.dragging,nodePosition=_a.nodePosition,activeHandle=_a.activeHandle;if(dragging){var node=view.state.doc.nodeAt(nodePosition),dom=getTable(view.nodeDOM(nodePosition)),rect=tableSize(dom);if(node){var width=rect.offsetWidth+"px",height=rect.offsetHeight+"px",tr=view.state.tr,attrs=node.attrs,parsedStyles=parseStyle(attrs.style);if(horizontalDir[activeHandle]&&dom.style.width&&parsedStyles.width!==width&&(attrs=setNodeStyle(attrs,"width",width)),verticalDir[activeHandle]&&dom.style.height&&parsedStyles.height!==height&&(attrs=setNodeStyle(attrs,"height",height)),attrs=function(view,tr,tablePos,attrs){var tableNode=view.state.doc.nodeAt(tablePos),tableDom=getTable(view.nodeDOM(tablePos)),calcStyle=(tableDom.ownerDocument&&tableDom.ownerDocument.defaultView||window).getComputedStyle,rows=Array.from(tableDom.rows);tableNode.forEach((function(row,offset,index){var rowHeight=parseStyle(row.attrs.style).height;rowHeight&&!/px$/.test(rowHeight)&&tr.setNodeMarkup(tablePos+offset+1,null,setNodeStyle(row.attrs,"height",calcStyle(rows[index]).height))}));var colgroup=tableDom.firstChild,cols=Array.from(colgroup&&colgroup.children||[]),widthChanged=!1;cols.forEach((function(col,i){col.style.width&&!/px$/.test(col.style.width)&&(col.style.width=calcStyle(cols[i]).width,widthChanged=!0)}));var tableAttrs=tslib_es6_assign({},attrs);return widthChanged&&(tableAttrs[colgroupAttr]=colgroup.outerHTML),tableAttrs}(view,tr,nodePosition,attrs),tr.setNodeMarkup(nodePosition,null,attrs),tr.setMeta("commandName","node-resize"),tr.setMeta("args",attrs),tr.setMeta(tableResizeKey,{setDragging:null,activeHandle:null,nodePosition}),!/%/.test(parseStyle(attrs.style).width||"")){var $pos=tr.doc.resolve(nodePosition),wrapper=utils_parentNode($pos,(function(n){return"table_wrapper"===n.type.name}));if(wrapper&&/%/.test(parseStyle(wrapper.node.attrs.style).width||"")){var wrapperAttrs=setNodeStyle(wrapper.node.attrs,"width",""),wrapperPos=$pos.start(wrapper.depth)-1;tr.setNodeMarkup(wrapperPos,null,wrapperAttrs)}}view.dispatch(tr)}}},table_resize_handleMouseDown=function(view,event){var activeHandle=event.target.getAttribute("data-dir-table-resize");if(!activeHandle)return!1;var resizeState=tableResizeKey.getState(view.state);event.preventDefault();var transaction=view.state.tr;transaction.setMeta(tableResizeKey,{setDragging:{startX:event.clientX,startY:event.clientY},activeHandle,nodePosition:resizeState.nodePosition}),transaction.setMeta("addToHistory",!1),function(view,tr,tablePos){var tableNode=view.state.doc.nodeAt(tablePos),tableDom=getTable(view.nodeDOM(tablePos)),_a=tableSize(tableDom),width=_a.width,height=_a.height,colsWidth=_a.colsWidth,rowsHeight=_a.rowsHeight,offsetWidth=_a.offsetWidth,offsetHeight=_a.offsetHeight,colgroup=tableDom.firstChild,cols=Array.from(colgroup&&colgroup.children||[]),widthChanged=!1;cols.forEach((function(col,i){col.style.width&&!/%$/.test(col.style.width)&&(col.style.width=100*colsWidth[i]/width+"%",widthChanged=!0)}));var heightChange=!1;tableNode.forEach((function(row,offset,index){var rowHeight=parseStyle(row.attrs.style).height;rowHeight&&!/%$/.test(rowHeight)&&(tr.setNodeMarkup(tablePos+offset+1,null,setNodeStyle(row.attrs,"height",100*rowsHeight[index]/height+"%")),heightChange=!0)}));var tableAttrs=tableNode.attrs;parseStyle(tableAttrs.style).width!==offsetWidth+"px"&&(tableAttrs=setNodeStyle(tableAttrs,"width",offsetWidth+"px")),widthChanged&&(tableAttrs[colgroupAttr]=colgroup.outerHTML),heightChange&&(tableAttrs=setNodeStyle(tableAttrs,"height",offsetHeight+"px")),(widthChanged||heightChange)&&tr.setNodeMarkup(tablePos,null,tableAttrs)}(view,transaction,resizeState.nodePosition),view.dispatch(transaction);var curWindow=event.view||window;function move(e){!function(view,event){var _a,state=tableResizeKey.getState(view.state),dragging=state.dragging,nodePosition=state.nodePosition,activeHandle=state.activeHandle;if(!(nodePosition<0)&&dragging){var tableDom=getTable(view.nodeDOM(nodePosition)),rect=tableDom.getBoundingClientRect(),dir=directions[activeHandle],diffX=(event.clientX-dragging.startX)*dir.x,diffY=(event.clientY-dragging.startY)*dir.y,compStyles=(tableDom.ownerDocument&&tableDom.ownerDocument.defaultView||window).getComputedStyle(tableDom),nodeWidth=/px/.test(compStyles.width)?parseFloat(compStyles.width):tableDom.offsetWidth,nodeHeight=/px/.test(compStyles.height)?parseFloat(compStyles.height):tableDom.offsetHeight,width=dir.x?diffX+nodeWidth:rect.width,height=dir.y?diffY+nodeHeight:rect.height;if(dragging.startX=dir.x?event.clientX:dragging.startX,dragging.startY=dir.y?event.clientY:dragging.startY,horizontalDir[activeHandle]&&(tableDom.style.width=width+"px"),verticalDir[activeHandle]&&(tableDom.style.height=height+"px"),/px/.test(tableDom.style.width)){var wrapper=null===(_a=tableDom.parentNode)||void 0===_a?void 0:_a.parentNode;wrapper instanceof HTMLDivElement&&wrapper.matches("div[table]")&&/%/.test(wrapper.style.width)&&(wrapper.style.width="")}}}(view,e)}return curWindow.addEventListener("mouseup",(function finish(_e){curWindow.removeEventListener("mouseup",finish),curWindow.removeEventListener("mousemove",move),table_resize_handleMouseUp(view)})),curWindow.addEventListener("mousemove",move),!0},TableRowView=function(){function TableRowView(){}return TableRowView.prototype.ignoreMutation=function(record){return"attributes"===record.type&&"style"===record.attributeName&&"TR"===record.target.nodeName},TableRowView}();function rowResizing(){var plugin=new dist_Plugin({key:tableRowResizeKey,state:{init:function(_,state){return this.spec.props.nodeViews[tableNodeTypes(state.schema).row.name]=function(_node,_view){return new TableRowView},new row_resize_ResizeState(-1,null)},apply:function(tr,prev){return prev.apply(tr)}},props:{attributes:function(state){return otherResizeHandle(tableRowResizeKey,state)?null:tableRowResizeKey.getState(state).activeHandle>-1?{class:"resize-cursor-vertical"}:null},handleDOMEvents:{mousemove:function(view,event){return otherResizing(tableRowResizeKey,view.state)||function row_resize_handleMouseMove(view,event,handleWidth){var pluginState=tableRowResizeKey.getState(view.state);if(!pluginState.dragging){var target=utils_domCellAround(event.target),cell=-1;if(target){var indexes=cellIndexes(target),_a=target.getBoundingClientRect(),top_1=_a.top,bottom=_a.bottom;Math.abs(event.clientY-top_1)<=handleWidth&&indexes.rowIndex>0?(indexes.rowIndex-=target.rowSpan,cell=utils_edgeCell(view,event,indexes)):bottom-event.clientY>0&&bottom-event.clientY<=handleWidth&&(cell=utils_edgeCell(view,event,indexes))}cell!==pluginState.activeHandle&&row_resize_updateHandle(view,cell)}}(view,event,5),!1},mouseleave:function(view){return function row_resize_handleMouseLeave(view){var pluginState=tableRowResizeKey.getState(view.state);pluginState.activeHandle>-1&&!pluginState.dragging&&row_resize_updateHandle(view,-1)}(view),!1},mousedown:function(view,event){return function row_resize_handleMouseDown(view,event){var pluginState=tableRowResizeKey.getState(view.state);if(-1===pluginState.activeHandle||pluginState.dragging)return!1;var doc=view.state.doc,$cell=doc.resolve(pluginState.activeHandle),row=$cell.parent,table=$cell.node(-1),rowHeightStr=parseStyle(row.attrs.style).height,tableHeight=parseStyle(table.attrs.style).height,rowHeight=rowHeightStr?parseFloat(rowHeightStr):0;if(!rowHeightStr){rowHeight=view.nodeDOM(pluginState.activeHandle).offsetHeight}function finish(ev){ev.view.removeEventListener("mouseup",finish),ev.view.removeEventListener("mousemove",move);var curPluginState=tableRowResizeKey.getState(view.state);if(curPluginState.dragging){var tr=view.state.tr.setMeta(tableRowResizeKey,{setDragging:null});!function updateRowHeight(view,tr,cellPos){var doc=view.state.doc,$cell=doc.resolve(cellPos),row=$cell.parent,rowPos=$cell.posAtIndex(0)-1,dom=view.nodeDOM(rowPos),win=dom.ownerDocument&&dom.ownerDocument.defaultView||window;dom.style.height=win.getComputedStyle(dom).height,tr.setNodeMarkup(rowPos,null,setNodeStyle(row.attrs,"height",dom.style.height));var table=dom&&dom.closest("table"),tableHeight=table&&table.style.height;if(tableHeight){var $pos=doc.resolve(rowPos),tablePos=$pos.start($pos.depth)-1;tr.setNodeMarkup(tablePos,null,setNodeStyle($pos.parent.attrs,"height",tableHeight))}}(view,tr,curPluginState.activeHandle),view.dispatch(tr)}}function move(ev){if(!ev.which)return finish(ev);var curPluginState=tableRowResizeKey.getState(view.state),dragged=function draggedHeight(dragging,event){var offset=event.clientY-dragging.startY;return dragging.startHeight.rowHeight+offset}(curPluginState.dragging,ev),offset=ev.clientY-curPluginState.dragging.startY;!function displayRowHeight(view,cellPos,height,offset,tableHeight){var cell=view.nodeDOM(cellPos),row=cell&&cell.parentNode;if(row){row.style.height=height+"px";var win=row.ownerDocument&&row.ownerDocument.defaultView||window;row.style.height=win.getComputedStyle(row).height;var table=row.closest("table"),newHeight=parseFloat(tableHeight)+offset+"px",current=table&&table.style.height;current&&current!==newHeight&&(table.style.height=parseFloat(tableHeight)+offset+"px",table.style.height=win.getComputedStyle(table).height)}}(view,curPluginState.activeHandle,dragged,offset,tableHeight)}return view.dispatch(view.state.tr.setMeta(tableRowResizeKey,{setDragging:{startY:event.clientY,startHeight:{rowHeight,tableHeight}}})),event.view.addEventListener("mouseup",finish),event.view.addEventListener("mousemove",move),event.preventDefault(),!0}(view,event)}},decorations:function(state){if(otherResizing(tableRowResizeKey,state))return DecorationSet.empty;var pluginState=tableRowResizeKey.getState(state);return pluginState.activeHandle>-1?function row_resize_handleDecorations(state,cell){var decorations=[];if("number"!=typeof cell)return DecorationSet.empty;for(var $cell=state.doc.resolve(cell),table=$cell.node(-1),map=TableMap.get(table),start=$cell.start(-1),cellsPositions=[],cellPos=cell-start,rowIndex=-1,i=0;i<map.height;i++)cellsPositions.push(map.map.slice(i*map.width,i*map.width+map.width)),-1!==cellsPositions[i].indexOf(cellPos)&&(rowIndex=i);var cells=[];return cellsPositions[rowIndex].forEach((function(c,i){cellsPositions[rowIndex+1]&&c===cellsPositions[rowIndex+1][i]||cells.push(c)})),cells.forEach((function(cPos){var cellNode=table.nodeAt(cPos),widgetPos=start+cPos+(cellNode?cellNode.nodeSize:0)-1,dom=document.createElement("div");dom.className="row-resize-handle",decorations.push(Decoration.widget(widgetPos,dom))})),DecorationSet.create(state.doc,decorations)}(state,pluginState.activeHandle):void 0},nodeViews:{}}});return plugin}var row_resize_ResizeState=function(){function ResizeState(activeHandle,dragging){this.activeHandle=activeHandle,this.dragging=dragging}return ResizeState.prototype.apply=function(tr){var state=this,action=tr.getMeta(tableRowResizeKey);if(action&&null!=action.setHandle)return new ResizeState(action.setHandle,null);if(action&&void 0!==action.setDragging)return new ResizeState(state.activeHandle,action.setDragging);if(state.activeHandle>-1){var handle=tr.mapping.map(state.activeHandle,-1);(function row_resize_pointsAtCell($pos){return"row"===$pos.parent.type.spec.tableRole&&$pos.nodeAfter})(tr.doc.resolve(handle))||(handle=null),state=new ResizeState(handle,state.dragging)}return state},ResizeState}();function row_resize_updateHandle(view,value){var tr=view.state.tr;tr.setMeta("addToHistory",!1),tr.setMeta(tableRowResizeKey,{setHandle:value}),view.dispatch(tr)}var table_resize_tableResizing=function(){return[(void 0===options&&(options={node:"table"}),new dist_Plugin({key:tableResizeKey,view:function(_viewObj){return{selectedNode:function(state,nodeType){var selection=state.selection;if(selection instanceof dist_NodeSelection&&nodeType===selection.node.type&&selection instanceof dist_NodeSelection)return{node:selection.node,pos:selection.from};var parent=utils_parentNode(selection.$from,(function(n){return n.type===nodeType})),node=parent&&parent.node;return node?{node,pos:selection.$from.start(parent.depth)-1}:null},update:function(view,prevState){var _a,_b,_c,_d,_f,state=view.state,nodeType=state.schema.nodes[options.node],selected=this.selectedNode(state,nodeType),prevSelected=this.selectedNode(prevState,nodeType);if((selected||!prevSelected||prevState.doc.eq(view.state.doc))&&(selected||prevSelected)){var tr=state.tr;if(tr.setMeta("addToHistory",!1),selected&&prevSelected&&selected.pos!==prevSelected.pos){tr.setMeta(tableResizeKey,{nodePosition:selected.pos});var prevNode=tr.doc.nodeAt(prevSelected.pos);prevNode&&prevNode.type.name===nodeType.name&&tr.setNodeMarkup(prevSelected.pos,nodeType,tslib_es6_assign(tslib_es6_assign({},prevSelected.node.attrs),((_a={})[resizableAttr]=!1,_a))),tr.setNodeMarkup(selected.pos,nodeType,tslib_es6_assign(tslib_es6_assign({},selected.node.attrs),((_b={})[resizableAttr]=!0,_b))),view.dispatch(tr)}else selected&&prevSelected&&selected.pos===prevSelected.pos&&!selected.node.attrs[resizableAttr]&&!state.selection.eq(prevState.selection)?(tr.setMeta(tableResizeKey,{nodePosition:selected.pos}),view.dispatch(tr.setNodeMarkup(selected.pos,nodeType,tslib_es6_assign(tslib_es6_assign({},selected.node.attrs),((_c={})[resizableAttr]=!0,_c))))):selected&&!prevSelected?(tr.setMeta(tableResizeKey,{nodePosition:selected.pos}),view.dispatch(tr.setNodeMarkup(selected.pos,nodeType,tslib_es6_assign(tslib_es6_assign({},selected.node.attrs),((_d={})[resizableAttr]=!0,_d))))):!selected&&prevSelected&&(tr.setMeta(tableResizeKey,{nodePosition:-1}),view.dispatch(tr.setNodeMarkup(prevSelected.pos,nodeType,tslib_es6_assign(tslib_es6_assign({},prevSelected.node.attrs),((_f={})[resizableAttr]=!1,_f)))))}}}},state:{init:function(){return new table_resize_ResizeState("",null,-1)},apply:function(tr,prev){return prev.apply(tr)}},props:{handleDOMEvents:{mousedown:function(view,event){return table_resize_handleMouseDown(view,event)}}}})),column_resize_columnResizing(),rowResizing()];var options};function dropCursor(options={}){return new dist_Plugin({view:editorView=>new DropCursorView(editorView,options)})}class DropCursorView{constructor(editorView,options){var _a;this.editorView=editorView,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=null!==(_a=options.width)&&void 0!==_a?_a:1,this.color=!1===options.color?void 0:options.color||"black",this.class=options.class,this.handlers=["dragover","dragend","drop","dragleave"].map((name=>{let handler=e=>{this[name](e)};return editorView.dom.addEventListener(name,handler),{name,handler}}))}destroy(){this.handlers.forEach((({name,handler})=>this.editorView.dom.removeEventListener(name,handler)))}update(editorView,prevState){null!=this.cursorPos&&prevState.doc!=editorView.state.doc&&(this.cursorPos>editorView.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(pos){pos!=this.cursorPos&&(this.cursorPos=pos,null==pos?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let rect,$pos=this.editorView.state.doc.resolve(this.cursorPos),isBlock=!$pos.parent.inlineContent;if(isBlock){let before=$pos.nodeBefore,after=$pos.nodeAfter;if(before||after){let node=this.editorView.nodeDOM(this.cursorPos-(before?before.nodeSize:0));if(node){let nodeRect=node.getBoundingClientRect(),top=before?nodeRect.bottom:nodeRect.top;before&&after&&(top=(top+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),rect={left:nodeRect.left,right:nodeRect.right,top:top-this.width/2,bottom:top+this.width/2}}}}if(!rect){let coords=this.editorView.coordsAtPos(this.cursorPos);rect={left:coords.left-this.width/2,right:coords.left+this.width/2,top:coords.top,bottom:coords.bottom}}let parentLeft,parentTop,parent=this.editorView.dom.offsetParent;if(this.element||(this.element=parent.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",isBlock),this.element.classList.toggle("prosemirror-dropcursor-inline",!isBlock),!parent||parent==document.body&&"static"==getComputedStyle(parent).position)parentLeft=-pageXOffset,parentTop=-pageYOffset;else{let rect=parent.getBoundingClientRect();parentLeft=rect.left-parent.scrollLeft,parentTop=rect.top-parent.scrollTop}this.element.style.left=rect.left-parentLeft+"px",this.element.style.top=rect.top-parentTop+"px",this.element.style.width=rect.right-rect.left+"px",this.element.style.height=rect.bottom-rect.top+"px"}scheduleRemoval(timeout){clearTimeout(this.timeout),this.timeout=setTimeout((()=>this.setCursor(null)),timeout)}dragover(event){if(!this.editorView.editable)return;let pos=this.editorView.posAtCoords({left:event.clientX,top:event.clientY}),node=pos&&pos.inside>=0&&this.editorView.state.doc.nodeAt(pos.inside),disableDropCursor=node&&node.type.spec.disableDropCursor,disabled="function"==typeof disableDropCursor?disableDropCursor(this.editorView,pos,event):disableDropCursor;if(pos&&!disabled){let target=pos.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let point=dropPoint(this.editorView.state.doc,target,this.editorView.dragging.slice);null!=point&&(target=point)}this.setCursor(target),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(event){event.target!=this.editorView.dom&&this.editorView.dom.contains(event.relatedTarget)||this.setCursor(null)}}class GapCursor extends Selection{constructor($pos){super($pos,$pos)}map(doc,mapping){let $pos=doc.resolve(mapping.map(this.head));return GapCursor.valid($pos)?new GapCursor($pos):Selection.near($pos)}content(){return dist_Slice.empty}eq(other){return other instanceof GapCursor&&other.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(doc,json){if("number"!=typeof json.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new GapCursor(doc.resolve(json.pos))}getBookmark(){return new GapBookmark(this.anchor)}static valid($pos){let parent=$pos.parent;if(parent.isTextblock||!function closedBefore($pos){for(let d=$pos.depth;d>=0;d--){let index=$pos.index(d),parent=$pos.node(d);if(0!=index)for(let before=parent.child(index-1);;before=before.lastChild){if(0==before.childCount&&!before.inlineContent||before.isAtom||before.type.spec.isolating)return!0;if(before.inlineContent)return!1}else if(parent.type.spec.isolating)return!0}return!0}($pos)||!function closedAfter($pos){for(let d=$pos.depth;d>=0;d--){let index=$pos.indexAfter(d),parent=$pos.node(d);if(index!=parent.childCount)for(let after=parent.child(index);;after=after.firstChild){if(0==after.childCount&&!after.inlineContent||after.isAtom||after.type.spec.isolating)return!0;if(after.inlineContent)return!1}else if(parent.type.spec.isolating)return!0}return!0}($pos))return!1;let override=parent.type.spec.allowGapCursor;if(null!=override)return override;let deflt=parent.contentMatchAt($pos.index()).defaultType;return deflt&&deflt.isTextblock}static findGapCursorFrom($pos,dir,mustMove=!1){search:for(;;){if(!mustMove&&GapCursor.valid($pos))return $pos;let pos=$pos.pos,next=null;for(let d=$pos.depth;;d--){let parent=$pos.node(d);if(dir>0?$pos.indexAfter(d)<parent.childCount:$pos.index(d)>0){next=parent.child(dir>0?$pos.indexAfter(d):$pos.index(d)-1);break}if(0==d)return null;pos+=dir;let $cur=$pos.doc.resolve(pos);if(GapCursor.valid($cur))return $cur}for(;;){let inside=dir>0?next.firstChild:next.lastChild;if(!inside){if(next.isAtom&&!next.isText&&!dist_NodeSelection.isSelectable(next)){$pos=$pos.doc.resolve(pos+next.nodeSize*dir),mustMove=!1;continue search}break}next=inside,pos+=dir;let $cur=$pos.doc.resolve(pos);if(GapCursor.valid($cur))return $cur}return null}}}GapCursor.prototype.visible=!1,GapCursor.findFrom=GapCursor.findGapCursorFrom,Selection.jsonID("gapcursor",GapCursor);class GapBookmark{constructor(pos){this.pos=pos}map(mapping){return new GapBookmark(mapping.map(this.pos))}resolve(doc){let $pos=doc.resolve(this.pos);return GapCursor.valid($pos)?new GapCursor($pos):Selection.near($pos)}}function gapCursor(){return new dist_Plugin({props:{decorations:drawGapCursor,createSelectionBetween:(_view,$anchor,$head)=>$anchor.pos==$head.pos&&GapCursor.valid($head)?new GapCursor($head):null,handleClick,handleKeyDown:dist_handleKeyDown,handleDOMEvents:{beforeinput}}})}const dist_handleKeyDown=keydownHandler({ArrowLeft:dist_arrow("horiz",-1),ArrowRight:dist_arrow("horiz",1),ArrowUp:dist_arrow("vert",-1),ArrowDown:dist_arrow("vert",1)});function dist_arrow(axis,dir){const dirStr="vert"==axis?dir>0?"down":"up":dir>0?"right":"left";return function(state,dispatch,view){let sel=state.selection,$start=dir>0?sel.$to:sel.$from,mustMove=sel.empty;if(sel instanceof dist_TextSelection){if(!view.endOfTextblock(dirStr)||0==$start.depth)return!1;mustMove=!1,$start=state.doc.resolve(dir>0?$start.after():$start.before())}let $found=GapCursor.findGapCursorFrom($start,dir,mustMove);return!!$found&&(dispatch&&dispatch(state.tr.setSelection(new GapCursor($found))),!0)}}function handleClick(view,pos,event){if(!view||!view.editable)return!1;let $pos=view.state.doc.resolve(pos);if(!GapCursor.valid($pos))return!1;let clickPos=view.posAtCoords({left:event.clientX,top:event.clientY});return!(clickPos&&clickPos.inside>-1&&dist_NodeSelection.isSelectable(view.state.doc.nodeAt(clickPos.inside)))&&(view.dispatch(view.state.tr.setSelection(new GapCursor($pos))),!0)}function beforeinput(view,event){if("insertCompositionText"!=event.inputType||!(view.state.selection instanceof GapCursor))return!1;let{$from}=view.state.selection,insert=$from.parent.contentMatchAt($from.index()).findWrapping(view.state.schema.nodes.text);if(!insert)return!1;let frag=dist_Fragment.empty;for(let i=insert.length-1;i>=0;i--)frag=dist_Fragment.from(insert[i].createAndFill(null,frag));let tr=view.state.tr.replace($from.pos,$from.pos,new dist_Slice(frag,0,0));return tr.setSelection(dist_TextSelection.near(tr.doc.resolve($from.pos+1))),view.dispatch(tr),!1}function drawGapCursor(state){if(!(state.selection instanceof GapCursor))return null;let node=document.createElement("div");return node.className="ProseMirror-gapcursor",DecorationSet.create(state.doc,[Decoration.widget(state.selection.head,node,{key:"gapcursor"})])}var RopeSequence=function RopeSequence(){};RopeSequence.prototype.append=function append(other){return other.length?(other=RopeSequence.from(other),!this.length&&other||other.length<200&&this.leafAppend(other)||this.length<200&&other.leafPrepend(this)||this.appendInner(other)):this},RopeSequence.prototype.prepend=function prepend(other){return other.length?RopeSequence.from(other).append(this):this},RopeSequence.prototype.appendInner=function appendInner(other){return new Append(this,other)},RopeSequence.prototype.slice=function slice(from,to){return void 0===from&&(from=0),void 0===to&&(to=this.length),from>=to?RopeSequence.empty:this.sliceInner(Math.max(0,from),Math.min(this.length,to))},RopeSequence.prototype.get=function get(i){if(!(i<0||i>=this.length))return this.getInner(i)},RopeSequence.prototype.forEach=function forEach(f,from,to){void 0===from&&(from=0),void 0===to&&(to=this.length),from<=to?this.forEachInner(f,from,to,0):this.forEachInvertedInner(f,from,to,0)},RopeSequence.prototype.map=function map(f,from,to){void 0===from&&(from=0),void 0===to&&(to=this.length);var result=[];return this.forEach((function(elt,i){return result.push(f(elt,i))}),from,to),result},RopeSequence.from=function from(values){return values instanceof RopeSequence?values:values&&values.length?new Leaf(values):RopeSequence.empty};var Leaf=function(RopeSequence){function Leaf(values){RopeSequence.call(this),this.values=values}RopeSequence&&(Leaf.__proto__=RopeSequence),Leaf.prototype=Object.create(RopeSequence&&RopeSequence.prototype),Leaf.prototype.constructor=Leaf;var prototypeAccessors={length:{configurable:!0},depth:{configurable:!0}};return Leaf.prototype.flatten=function flatten(){return this.values},Leaf.prototype.sliceInner=function sliceInner(from,to){return 0==from&&to==this.length?this:new Leaf(this.values.slice(from,to))},Leaf.prototype.getInner=function getInner(i){return this.values[i]},Leaf.prototype.forEachInner=function forEachInner(f,from,to,start){for(var i=from;i<to;i++)if(!1===f(this.values[i],start+i))return!1},Leaf.prototype.forEachInvertedInner=function forEachInvertedInner(f,from,to,start){for(var i=from-1;i>=to;i--)if(!1===f(this.values[i],start+i))return!1},Leaf.prototype.leafAppend=function leafAppend(other){if(this.length+other.length<=200)return new Leaf(this.values.concat(other.flatten()))},Leaf.prototype.leafPrepend=function leafPrepend(other){if(this.length+other.length<=200)return new Leaf(other.flatten().concat(this.values))},prototypeAccessors.length.get=function(){return this.values.length},prototypeAccessors.depth.get=function(){return 0},Object.defineProperties(Leaf.prototype,prototypeAccessors),Leaf}(RopeSequence);RopeSequence.empty=new Leaf([]);var Append=function(RopeSequence){function Append(left,right){RopeSequence.call(this),this.left=left,this.right=right,this.length=left.length+right.length,this.depth=Math.max(left.depth,right.depth)+1}return RopeSequence&&(Append.__proto__=RopeSequence),Append.prototype=Object.create(RopeSequence&&RopeSequence.prototype),Append.prototype.constructor=Append,Append.prototype.flatten=function flatten(){return this.left.flatten().concat(this.right.flatten())},Append.prototype.getInner=function getInner(i){return i<this.left.length?this.left.get(i):this.right.get(i-this.left.length)},Append.prototype.forEachInner=function forEachInner(f,from,to,start){var leftLen=this.left.length;return!(from<leftLen&&!1===this.left.forEachInner(f,from,Math.min(to,leftLen),start))&&(!(to>leftLen&&!1===this.right.forEachInner(f,Math.max(from-leftLen,0),Math.min(this.length,to)-leftLen,start+leftLen))&&void 0)},Append.prototype.forEachInvertedInner=function forEachInvertedInner(f,from,to,start){var leftLen=this.left.length;return!(from>leftLen&&!1===this.right.forEachInvertedInner(f,from-leftLen,Math.max(to,leftLen)-leftLen,start+leftLen))&&(!(to<leftLen&&!1===this.left.forEachInvertedInner(f,Math.min(from,leftLen),to,start))&&void 0)},Append.prototype.sliceInner=function sliceInner(from,to){if(0==from&&to==this.length)return this;var leftLen=this.left.length;return to<=leftLen?this.left.slice(from,to):from>=leftLen?this.right.slice(from-leftLen,to-leftLen):this.left.slice(from,leftLen).append(this.right.slice(0,to-leftLen))},Append.prototype.leafAppend=function leafAppend(other){var inner=this.right.leafAppend(other);if(inner)return new Append(this.left,inner)},Append.prototype.leafPrepend=function leafPrepend(other){var inner=this.left.leafPrepend(other);if(inner)return new Append(inner,this.right)},Append.prototype.appendInner=function appendInner(other){return this.left.depth>=Math.max(this.right.depth,other.depth)+1?new Append(this.left,new Append(this.right,other)):new Append(this,other)},Append}(RopeSequence);const rope_sequence_dist=RopeSequence;class Branch{constructor(items,eventCount){this.items=items,this.eventCount=eventCount}popEvent(state,preserveItems){if(0==this.eventCount)return null;let remap,mapFrom,end=this.items.length;for(;;end--){if(this.items.get(end-1).selection){--end;break}}preserveItems&&(remap=this.remapping(end,this.items.length),mapFrom=remap.maps.length);let selection,remaining,transform=state.tr,addAfter=[],addBefore=[];return this.items.forEach(((item,i)=>{if(!item.step)return remap||(remap=this.remapping(end,i+1),mapFrom=remap.maps.length),mapFrom--,void addBefore.push(item);if(remap){addBefore.push(new Item(item.map));let map,step=item.step.map(remap.slice(mapFrom));step&&transform.maybeStep(step).doc&&(map=transform.mapping.maps[transform.mapping.maps.length-1],addAfter.push(new Item(map,void 0,void 0,addAfter.length+addBefore.length))),mapFrom--,map&&remap.appendMap(map,mapFrom)}else transform.maybeStep(item.step);return item.selection?(selection=remap?item.selection.map(remap.slice(mapFrom)):item.selection,remaining=new Branch(this.items.slice(0,end).append(addBefore.reverse().concat(addAfter)),this.eventCount-1),!1):void 0}),this.items.length,0),{remaining,transform,selection}}addTransform(transform,selection,histOptions,preserveItems){let newItems=[],eventCount=this.eventCount,oldItems=this.items,lastItem=!preserveItems&&oldItems.length?oldItems.get(oldItems.length-1):null;for(let i=0;i<transform.steps.length;i++){let merged,step=transform.steps[i].invert(transform.docs[i]),item=new Item(transform.mapping.maps[i],step,selection);(merged=lastItem&&lastItem.merge(item))&&(item=merged,i?newItems.pop():oldItems=oldItems.slice(0,oldItems.length-1)),newItems.push(item),selection&&(eventCount++,selection=void 0),preserveItems||(lastItem=item)}let overflow=eventCount-histOptions.depth;return overflow>DEPTH_OVERFLOW&&(oldItems=function cutOffEvents(items,n){let cutPoint;return items.forEach(((item,i)=>{if(item.selection&&0==n--)return cutPoint=i,!1})),items.slice(cutPoint)}(oldItems,overflow),eventCount-=overflow),new Branch(oldItems.append(newItems),eventCount)}remapping(from,to){let maps=new Mapping;return this.items.forEach(((item,i)=>{let mirrorPos=null!=item.mirrorOffset&&i-item.mirrorOffset>=from?maps.maps.length-item.mirrorOffset:void 0;maps.appendMap(item.map,mirrorPos)}),from,to),maps}addMaps(array){return 0==this.eventCount?this:new Branch(this.items.append(array.map((map=>new Item(map)))),this.eventCount)}rebased(rebasedTransform,rebasedCount){if(!this.eventCount)return this;let rebasedItems=[],start=Math.max(0,this.items.length-rebasedCount),mapping=rebasedTransform.mapping,newUntil=rebasedTransform.steps.length,eventCount=this.eventCount;this.items.forEach((item=>{item.selection&&eventCount--}),start);let iRebased=rebasedCount;this.items.forEach((item=>{let pos=mapping.getMirror(--iRebased);if(null==pos)return;newUntil=Math.min(newUntil,pos);let map=mapping.maps[pos];if(item.step){let step=rebasedTransform.steps[pos].invert(rebasedTransform.docs[pos]),selection=item.selection&&item.selection.map(mapping.slice(iRebased+1,pos));selection&&eventCount++,rebasedItems.push(new Item(map,step,selection))}else rebasedItems.push(new Item(map))}),start);let newMaps=[];for(let i=rebasedCount;i<newUntil;i++)newMaps.push(new Item(mapping.maps[i]));let items=this.items.slice(0,start).append(newMaps).append(rebasedItems),branch=new Branch(items,eventCount);return branch.emptyItemCount()>500&&(branch=branch.compress(this.items.length-rebasedItems.length)),branch}emptyItemCount(){let count=0;return this.items.forEach((item=>{item.step||count++})),count}compress(upto=this.items.length){let remap=this.remapping(0,upto),mapFrom=remap.maps.length,items=[],events=0;return this.items.forEach(((item,i)=>{if(i>=upto)items.push(item),item.selection&&events++;else if(item.step){let step=item.step.map(remap.slice(mapFrom)),map=step&&step.getMap();if(mapFrom--,map&&remap.appendMap(map,mapFrom),step){let selection=item.selection&&item.selection.map(remap.slice(mapFrom));selection&&events++;let merged,newItem=new Item(map.invert(),step,selection),last=items.length-1;(merged=items.length&&items[last].merge(newItem))?items[last]=merged:items.push(newItem)}}else item.map&&mapFrom--}),this.items.length,0),new Branch(rope_sequence_dist.from(items.reverse()),events)}}Branch.empty=new Branch(rope_sequence_dist.empty,0);class Item{constructor(map,step,selection,mirrorOffset){this.map=map,this.step=step,this.selection=selection,this.mirrorOffset=mirrorOffset}merge(other){if(this.step&&other.step&&!other.selection){let step=other.step.merge(this.step);if(step)return new Item(step.getMap().invert(),step,this.selection)}}}class HistoryState{constructor(done,undone,prevRanges,prevTime,prevComposition){this.done=done,this.undone=undone,this.prevRanges=prevRanges,this.prevTime=prevTime,this.prevComposition=prevComposition}}const DEPTH_OVERFLOW=20;function rangesFor(map){let result=[];return map.forEach(((_from,_to,from,to)=>result.push(from,to))),result}function mapRanges(ranges,mapping){if(!ranges)return null;let result=[];for(let i=0;i<ranges.length;i+=2){let from=mapping.map(ranges[i],1),to=mapping.map(ranges[i+1],-1);from<=to&&result.push(from,to)}return result}function histTransaction(history,state,dispatch,redo){let preserveItems=mustPreserveItems(state),histOptions=historyKey.get(state).spec.config,pop=(redo?history.undone:history.done).popEvent(state,preserveItems);if(!pop)return;let selection=pop.selection.resolve(pop.transform.doc),added=(redo?history.done:history.undone).addTransform(pop.transform,state.selection.getBookmark(),histOptions,preserveItems),newHist=new HistoryState(redo?added:pop.remaining,redo?pop.remaining:added,null,0,-1);dispatch(pop.transform.setSelection(selection).setMeta(historyKey,{redo,historyState:newHist}).scrollIntoView())}let cachedPreserveItems=!1,cachedPreserveItemsPlugins=null;function mustPreserveItems(state){let plugins=state.plugins;if(cachedPreserveItemsPlugins!=plugins){cachedPreserveItems=!1,cachedPreserveItemsPlugins=plugins;for(let i=0;i<plugins.length;i++)if(plugins[i].spec.historyPreserveItems){cachedPreserveItems=!0;break}}return cachedPreserveItems}const historyKey=new PluginKey("history"),closeHistoryKey=new PluginKey("closeHistory");function dist_history(config={}){return config={depth:config.depth||100,newGroupDelay:config.newGroupDelay||500},new dist_Plugin({key:historyKey,state:{init:()=>new HistoryState(Branch.empty,Branch.empty,null,0,-1),apply:(tr,hist,state)=>function applyTransaction(history,state,tr,options){let rebased,historyTr=tr.getMeta(historyKey);if(historyTr)return historyTr.historyState;tr.getMeta(closeHistoryKey)&&(history=new HistoryState(history.done,history.undone,null,0,-1));let appended=tr.getMeta("appendedTransaction");if(0==tr.steps.length)return history;if(appended&&appended.getMeta(historyKey))return appended.getMeta(historyKey).redo?new HistoryState(history.done.addTransform(tr,void 0,options,mustPreserveItems(state)),history.undone,rangesFor(tr.mapping.maps[tr.steps.length-1]),history.prevTime,history.prevComposition):new HistoryState(history.done,history.undone.addTransform(tr,void 0,options,mustPreserveItems(state)),null,history.prevTime,history.prevComposition);if(!1===tr.getMeta("addToHistory")||appended&&!1===appended.getMeta("addToHistory"))return(rebased=tr.getMeta("rebased"))?new HistoryState(history.done.rebased(tr,rebased),history.undone.rebased(tr,rebased),mapRanges(history.prevRanges,tr.mapping),history.prevTime,history.prevComposition):new HistoryState(history.done.addMaps(tr.mapping.maps),history.undone.addMaps(tr.mapping.maps),mapRanges(history.prevRanges,tr.mapping),history.prevTime,history.prevComposition);{let composition=tr.getMeta("composition"),newGroup=0==history.prevTime||!appended&&history.prevComposition!=composition&&(history.prevTime<(tr.time||0)-options.newGroupDelay||!function isAdjacentTo(transform,prevRanges){if(!prevRanges)return!1;if(!transform.docChanged)return!0;let adjacent=!1;return transform.mapping.maps[0].forEach(((start,end)=>{for(let i=0;i<prevRanges.length;i+=2)start<=prevRanges[i+1]&&end>=prevRanges[i]&&(adjacent=!0)})),adjacent}(tr,history.prevRanges)),prevRanges=appended?mapRanges(history.prevRanges,tr.mapping):rangesFor(tr.mapping.maps[tr.steps.length-1]);return new HistoryState(history.done.addTransform(tr,newGroup?state.selection.getBookmark():void 0,options,mustPreserveItems(state)),Branch.empty,prevRanges,tr.time,null==composition?history.prevComposition:composition)}}(hist,state,tr,config)},config,props:{handleDOMEvents:{beforeinput(view,e){let inputType=e.inputType,command="historyUndo"==inputType?dist_undo:"historyRedo"==inputType?dist_redo:null;return!!command&&(e.preventDefault(),command(view.state,view.dispatch))}}}})}const dist_undo=(state,dispatch)=>{let hist=historyKey.getState(state);return!(!hist||0==hist.done.eventCount)&&(dispatch&&histTransaction(hist,state,dispatch,!1),!0)},dist_redo=(state,dispatch)=>{let hist=historyKey.getState(state);return!(!hist||0==hist.undone.eventCount)&&(dispatch&&histTransaction(hist,state,dispatch,!0),!0)};class InputRule{constructor(match,handler){this.match=match,this.match=match,this.handler="string"==typeof handler?function stringHandler(string){return function(state,match,start,end){let insert=string;if(match[1]){let offset=match[0].lastIndexOf(match[1]);insert+=match[0].slice(offset+match[1].length);let cutOff=(start+=offset)-end;cutOff>0&&(insert=match[0].slice(offset-cutOff,offset)+insert,start=end)}return state.tr.insertText(insert,start,end)}}(handler):handler}}const dist_undoInputRule=(state,dispatch)=>{let plugins=state.plugins;for(let i=0;i<plugins.length;i++){let undoable,plugin=plugins[i];if(plugin.spec.isInputRules&&(undoable=plugin.getState(state))){if(dispatch){let tr=state.tr,toUndo=undoable.transform;for(let j=toUndo.steps.length-1;j>=0;j--)tr.step(toUndo.steps[j].invert(toUndo.docs[j]));if(undoable.text){let marks=tr.doc.resolve(undoable.from).marks();tr.replaceWith(undoable.from,undoable.to,state.schema.text(undoable.text,marks))}else tr.delete(undoable.from,undoable.to);dispatch(tr)}return!0}}return!1};new InputRule(/--$/,"—"),new InputRule(/\.\.\.$/,"…"),new InputRule(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"“"),new InputRule(/"$/,"”"),new InputRule(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"‘"),new InputRule(/'$/,"’");var createTable=function(nodes,rows,columns){for(var cells,table=nodes.table,table_row=nodes.table_row,table_cell=nodes.table_cell,tableRows=[],r=0;r<rows+1;r++){cells=[];for(var c=0;c<columns+1;c++)cells.push(table_cell.createAndFill());tableRows.push(table_row.createAndFill(void 0,cells))}return table.createAndFill(void 0,tableRows)},reTable=/^table$/,reRow=/^table_row$/,reCell=/^table_cell|table_header$/,closest=function(selection,name){for(var pos=selection.$head,i=pos.depth;i>0;i--){var node=pos.node(i);if(name.test(node.type.name))return{pos:pos.before(i),node}}return null},table_addRowBefore=function(state,dispatch){var cmdDispatch=dispatch&&function(tr){var _a,row=closest(tr.selection,reRow),table=closest(tr.selection,reTable);if(row&&table&&row.node.attrs[rowTypeAttr]){for(var index=0,i=0;i<table.node.nodeSize;i++)if(table.node.child(i).eq(row.node)){index=i;break}var next=table.node.child(index-1),from=row.pos-next.nodeSize;tr.setNodeMarkup(from,void 0,((_a={})[rowTypeAttr]=row.node.attrs[rowTypeAttr],_a))}return dispatch(tr)};return function addRowBefore(state,dispatch){if(!isInTable(state))return!1;if(dispatch){const rect=selectedRect(state);dispatch(addRow(state.tr,rect,rect.top))}return!0}(state,cmdDispatch)},table_addRowAfter=function(state,dispatch){return function addRowAfter(state,dispatch){if(!isInTable(state))return!1;if(dispatch){const rect=selectedRect(state);dispatch(addRow(state.tr,rect,rect.bottom))}return!0}(state,dispatch&&function(tr){var _a,row=closest(tr.selection,reRow);if(row&&row.node.attrs[rowTypeAttr]){var from=row.pos+row.node.nodeSize;tr.setNodeMarkup(from,void 0,((_a={})[rowTypeAttr]=row.node.attrs[rowTypeAttr],_a))}return dispatch(tr)})},columnIndex=function(table,selection){if(!table)return-1;var map=TableMap.get(table.node),tableCell=closest(selection,reCell),idx=map.map.indexOf(tableCell.pos-table.pos-1),colIndex=-1;return-1!==idx&&(colIndex=idx%map.width),colIndex},addCol=function(tr,table,to){var _a,colIndex=columnIndex(table,tr.selection),colgroup=parseStrColgroup(table.node.attrs[colgroupAttr]);colgroup.insertBefore(colgroup.ownerDocument.createElement("col"),colgroup.children[colIndex+to]),tr.setNodeMarkup(table.pos,null,tslib_es6_assign(tslib_es6_assign({},table.node.attrs),((_a={})[colgroupAttr]=colgroup.outerHTML,_a)))},table_addColumnBefore=function(state,dispatch){return function addColumnBefore(state,dispatch){if(!isInTable(state))return!1;if(dispatch){const rect=selectedRect(state);dispatch(addColumn(state.tr,rect,rect.left))}return!0}(state,dispatch&&function(tr){var table=closest(tr.selection,reTable);return table.node.attrs[colgroupAttr]?(addCol(tr,table,-1),dispatch(tr)):dispatch(tr)})},table_addColumnAfter=function(state,dispatch){return function addColumnAfter(state,dispatch){if(!isInTable(state))return!1;if(dispatch){const rect=selectedRect(state);dispatch(addColumn(state.tr,rect,rect.right))}return!0}(state,dispatch&&function(tr){var table=closest(tr.selection,reTable);return table.node.attrs[colgroupAttr]?(addCol(tr,table,1),dispatch(tr)):dispatch(tr)})},table_deleteColumn=function(state,dispatch){var parentTable=closest(state.selection,reTable),colgroup=parentTable&&parentTable.node.attrs[colgroupAttr],colIndex=columnIndex(parentTable,state.selection),cmdDispatch=dispatch&&function(tr){if(!colgroup)return dispatch(tr);var table=tr.doc.nodeAt(parentTable.pos);return function(tr,table,colIndex){var _a,colgroup=parseStrColgroup(table.node.attrs[colgroupAttr]);colgroup.removeChild(colgroup.children[colIndex]),tr.setNodeMarkup(table.pos,null,tslib_es6_assign(tslib_es6_assign({},table.node.attrs),((_a={})[colgroupAttr]=colgroup.outerHTML,_a)))}(tr,{node:table,pos:parentTable.pos},colIndex),dispatch(tr)};return function deleteColumn(state,dispatch){if(!isInTable(state))return!1;if(dispatch){const rect=selectedRect(state),tr=state.tr;if(0==rect.left&&rect.right==rect.map.width)return!1;for(let i=rect.right-1;removeColumn(tr,rect,i),i!=rect.left;i--){const table=rect.tableStart?tr.doc.nodeAt(rect.tableStart-1):tr.doc;if(!table)throw RangeError("No table found");rect.table=table,rect.map=TableMap.get(table)}dispatch(tr)}return!0}(state,cmdDispatch)}},"./node_modules/@progress/kendo-react-buttons/dist/es/ListButton/SplitButton.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{f:()=>SplitButton});var extendStatics,react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),Button=__webpack_require__("./node_modules/@progress/kendo-react-buttons/dist/es/Button.js"),guid=__webpack_require__("./node_modules/@progress/kendo-react-common/dist/es/guid.js"),keys=__webpack_require__("./node_modules/@progress/kendo-react-common/dist/es/keys.js"),getActiveElement=__webpack_require__("./node_modules/@progress/kendo-react-common/dist/es/getActiveElement.js"),classNames=__webpack_require__("./node_modules/@progress/kendo-react-common/dist/es/classNames.js"),theme=__webpack_require__("./node_modules/@progress/kendo-react-common/dist/es/theme.js"),utils=__webpack_require__("./node_modules/@progress/kendo-react-common/dist/es/icons/utils.js"),dispatchEvent=__webpack_require__("./node_modules/@progress/kendo-react-common/dist/es/events/dispatchEvent.js"),ButtonItem=__webpack_require__("./node_modules/@progress/kendo-react-buttons/dist/es/ListButton/ButtonItem.js"),__extends=(extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)},function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),SplitButtonItem=function(_super){function SplitButtonItem(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(SplitButtonItem,_super),SplitButtonItem.prototype.render=function(){return null},SplitButtonItem.propTypes={text:prop_types.string,icon:prop_types.string,iconClass:prop_types.string,imageUrl:prop_types.string,disabled:prop_types.bool,render:prop_types.any},SplitButtonItem}(react.Component),navigation=__webpack_require__("./node_modules/@progress/kendo-react-buttons/dist/es/ListButton/utils/navigation.js"),Popup=__webpack_require__("./node_modules/@progress/kendo-react-popup/dist/es/Popup.js"),popup=__webpack_require__("./node_modules/@progress/kendo-react-buttons/dist/es/ListButton/utils/popup.js"),validate_package=__webpack_require__("./node_modules/@progress/kendo-react-common/dist/es/validate-package.js"),package_metadata=__webpack_require__("./node_modules/@progress/kendo-react-buttons/dist/es/package-metadata.js"),index_es=__webpack_require__("./node_modules/@progress/kendo-svg-icons/dist/index.es.js"),SplitButton_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),SplitButton=function(_super){function SplitButton(props){var _this=_super.call(this,props)||this;return _this.state={focused:!1,focusedIndex:-1,opened:!1},_this.wrapper=null,_this.mainButton=null,_this.list=null,_this.guid=(0,guid.O)(),_this.skipFocus=!1,_this.buttonsData=[],_this.onKeyDown=function(event){var focusedIndex=_this.state.focusedIndex;if(event.altKey)_this.opened||event.keyCode!==keys.D.down?_this.opened&&event.keyCode===keys.D.up&&(_this.setState({focusedIndex:-1}),_this.setOpen(!1)):(_this.dispatchPopupEvent(event,!0),_this.setState({focusedIndex:0}),_this.setOpen(!0));else{var newState=void 0;if(event.keyCode===keys.D.enter||event.keyCode===keys.D.space){if(event.preventDefault(),_this.dispatchClickEvent(event,focusedIndex),focusedIndex>=0){newState={focusedIndex:_this.opened?-1:0};var notOpened=!_this.opened;_this.setOpen(notOpened),notOpened&&_this.dispatchPopupEvent(event,notOpened)}}else if(_this.opened&&event.keyCode===keys.D.esc)return _this.setState({focusedIndex:-1}),void _this.setOpen(!1);if(_this.opened){var newFocused=(0,navigation.o)(focusedIndex,event.keyCode,event.altKey,_this.buttonsData.length);newFocused!==focusedIndex&&((newState=newState||{}).focusedIndex=newFocused);var arrowKey=event.keyCode===keys.D.up||event.keyCode===keys.D.down||event.keyCode===keys.D.left||event.keyCode===keys.D.right;event.altKey||!arrowKey&&event.keyCode!==keys.D.home&&event.keyCode!==keys.D.end||event.preventDefault()}newState&&_this.setState(newState)}},_this.switchFocus=function(focusFn){_this.skipFocus=!0,focusFn(),window.setTimeout((function(){return _this.skipFocus=!1}),0)},_this.onFocus=function(event){_this.skipFocus||((0,dispatchEvent.P)(_this.props.onFocus,event,_this,void 0),_this.setState({focused:!0}))},_this.setOpen=function(value){_this.openedDuringOnChange=value,_this.setState({opened:value})},_this.onItemClick=function(event,clickedItemIndex){_this.opened&&(_this.setState({focusedIndex:0}),_this.setOpen(!1)),_this.dispatchClickEvent(event,clickedItemIndex)},_this.onBlur=function(event){_this.skipFocus||(_this.setState({focused:!1,focusedIndex:-1}),_this.setOpen(!1),(0,dispatchEvent.P)(_this.props.onBlur,event,_this,void 0))},_this.onPopupClose=function(){_this.state.focused&&_this.switchFocus((function(){_this.element&&(_this.element.removeAttribute("tabindex"),_this.element.focus({preventScroll:!0}))})),_this.dispatchPopupEvent({},!1)},_this.listRef=function(list){_this.list=list,list&&_this.state.focused&&_this.switchFocus((function(){list.focus({preventScroll:!0}),_this.element&&(_this.element.tabIndex=-1)}))},_this.onSplitPartClick=function(event){if(_this.buttonsData.length){var toOpen=!_this.opened;toOpen&&_this.dispatchPopupEvent(event,toOpen),_this.setState({focusedIndex:toOpen?0:-1,focused:!0}),_this.setOpen(toOpen)}},_this.onDownSplitPart=function(event){event.preventDefault();var activeElement=(0,getActiveElement.b)(document);_this.element&&activeElement!==_this.element&&activeElement!==_this.list&&_this.element.focus()},_this.onItemDown=function(event){(0,getActiveElement.b)(document)===_this.list&&event.preventDefault()},_this.dispatchPopupEvent=function(dispatchedEvent,open){(0,dispatchEvent.P)(open?_this.props.onOpen:_this.props.onClose,dispatchedEvent,_this,void 0),_this.openedDuringOnChange=void 0},(0,validate_package.$)(package_metadata.Q),_this}return SplitButton_extends(SplitButton,_super),Object.defineProperty(SplitButton.prototype,"opened",{get:function(){return void 0!==this.openedDuringOnChange?this.openedDuringOnChange:void 0===this.props.opened?this.state.opened:this.props.opened},enumerable:!1,configurable:!0}),SplitButton.prototype.render=function(){var _this=this;this.buttonsData=this.props.items||react.Children.toArray(this.props.children).filter((function(child){return child&&child.type===SplitButtonItem})).map((function(child){return child.props}));var rtl=this.isRtl(),dir=rtl?"rtl":void 0,_a=this.props,id=_a.id,style=_a.style,tabIndex=_a.tabIndex,disabled=_a.disabled;return react.createElement("div",{id,style,className:(0,classNames.x)("k-split-button","k-button-group",{"k-focus":this.state.focused},"k-rounded-".concat(theme.O.roundedMap[this.props.rounded||"medium"]),this.props.className),onKeyDown:this.onKeyDown,onFocus:this.onFocus,onBlur:this.onBlur,dir,ref:function(el){return _this.wrapper=el}},react.createElement(Button.$,{ref:function(el){return _this.mainButton=el&&el.element},type:"button",size:this.props.size,rounded:this.props.rounded,fillMode:this.props.fillMode,themeColor:this.props.themeColor,onClick:function(event){return _this.onItemClick(event,-1)},disabled:disabled||void 0,tabIndex,accessKey:this.props.accessKey,className:this.props.buttonClass,icon:this.props.icon,svgIcon:this.props.svgIcon,iconClass:this.props.iconClass,imageUrl:this.props.imageUrl,dir,"aria-disabled":disabled,"aria-haspopup":!0,"aria-expanded":this.opened||void 0,"aria-label":this.props.ariaLabel,"aria-controls":this.opened?this.guid:void 0,id:"button-"+this.guid,title:this.props.title},this.props.text),react.createElement(Button.$,{type:"button",size:this.props.size,rounded:this.props.rounded,fillMode:this.props.fillMode,themeColor:this.props.themeColor,icon:"caret-alt-down",svgIcon:index_es.caretAltDownIcon,className:"k-split-button-arrow",disabled:disabled||void 0,tabIndex:-1,onClick:this.onSplitPartClick,onMouseDown:this.onDownSplitPart,onPointerDown:this.onDownSplitPart,dir,"aria-label":"menu toggling button"}),this.renderPopup(rtl))},SplitButton.prototype.componentDidMount=function(){(void 0===this.props.dir&&this.isRtl()||this.opened)&&this.forceUpdate()},Object.defineProperty(SplitButton.prototype,"element",{get:function(){return this.mainButton},enumerable:!1,configurable:!0}),SplitButton.prototype.dispatchClickEvent=function(dispatchedEvent,clickedItemIndex){this.isItemDisabled(clickedItemIndex)||(-1===clickedItemIndex?(0,dispatchEvent.P)(this.props.onButtonClick,dispatchedEvent,this,void 0):(0,dispatchEvent.P)(this.props.onItemClick,dispatchedEvent,this,{item:this.buttonsData[clickedItemIndex],itemIndex:clickedItemIndex}))},SplitButton.prototype.renderPopup=function(rtl){var _a,_b=this.props.popupSettings,popupSettings=void 0===_b?{}:_b,focusedIndex=this.state.focusedIndex;return react.createElement(Popup.z,{anchor:this.wrapper,show:this.opened,animate:popupSettings.animate,popupClass:(0,classNames.x)("k-menu-popup",popupSettings.popupClass),anchorAlign:popupSettings.anchorAlign||(0,popup.H)(rtl),popupAlign:popupSettings.popupAlign||(0,popup.i)(rtl),style:rtl?{direction:"rtl"}:void 0,onClose:this.onPopupClose},react.createElement("ul",{role:"menu",id:this.guid,"aria-labelledby":"button-"+this.guid,tabIndex:-1,ref:this.listRef,"aria-activedescendant":focusedIndex>=0?"".concat(this.guid,"-").concat(focusedIndex):void 0,className:(0,classNames.x)("k-group k-menu-group k-reset",(_a={},_a["k-menu-group-".concat(theme.O.sizeMap[this.props.size]||this.props.size)]=this.props.size,_a))},this.renderChildItems()))},SplitButton.prototype.renderChildItems=function(){var _this=this,_a=this.props,item=_a.item,itemRender=_a.itemRender,textField=_a.textField;return this.buttonsData.length>0?this.buttonsData.map((function(dataItem,index){return react.createElement(ButtonItem.C,{className:"k-menu-item",dataItem,textField,focused:_this.state.focusedIndex===index,onClick:_this.onItemClick,onDown:_this.onItemDown,render:itemRender,item,key:index,index,id:"".concat(_this.guid,"-").concat(index)})})):null},SplitButton.prototype.isItemDisabled=function(index){return this.buttonsData[index]?this.buttonsData[index].disabled:this.props.disabled},SplitButton.prototype.isRtl=function(){return void 0!==this.props.dir?"rtl"===this.props.dir:!!this.wrapper&&"rtl"===getComputedStyle(this.wrapper).direction},SplitButton.propTypes={accessKey:prop_types.string,ariaLabel:prop_types.string,title:prop_types.string,onButtonClick:prop_types.func,onFocus:prop_types.func,onBlur:prop_types.func,onItemClick:prop_types.func,onOpen:prop_types.func,onClose:prop_types.func,text:prop_types.string,items:prop_types.arrayOf(prop_types.any),textField:prop_types.string,tabIndex:prop_types.number,disabled:prop_types.bool,icon:prop_types.string,svgIcon:utils.jf,iconClass:prop_types.string,imageUrl:prop_types.string,popupSettings:prop_types.object,itemRender:prop_types.any,item:prop_types.func,className:prop_types.string,buttonClass:prop_types.string,dir:prop_types.string},SplitButton.defaultProps={size:"medium",rounded:"medium",fillMode:"solid",themeColor:"base"},SplitButton}(react.Component)},"./node_modules/@progress/kendo-react-editor/dist/es/Editor.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{K:()=>Editor});var EditorUtils,react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),ToolbarSeparator=__webpack_require__("./node_modules/@progress/kendo-react-buttons/dist/es/toolbar/tools/ToolbarSeparator.js"),ButtonGroup=__webpack_require__("./node_modules/@progress/kendo-react-buttons/dist/es/ButtonGroup.js"),Toolbar=__webpack_require__("./node_modules/@progress/kendo-react-buttons/dist/es/toolbar/Toolbar.js"),util=__webpack_require__("./node_modules/@progress/kendo-react-buttons/dist/es/util.js"),classNames=__webpack_require__("./node_modules/@progress/kendo-react-common/dist/es/classNames.js"),main=__webpack_require__("./node_modules/@progress/kendo-editor-common/dist/es/main.js"),defaultStyle='\nhtml, body {\n    margin: 0;\n    height: 100%;\n    padding: 0;\n}\n\nhtml {\n  min-height: 100%;\n}\n\nbody {\n  box-sizing: border-box;\n  position: relative;\n  word-wrap: break-word;\n  padding: 8px;\n}\n\nbody > .k-content {\n  outline: 0;\n  height: 100%;\n  white-space: pre-wrap;\n}\n\n.k-content > p {\n  margin: 0 0 1em;\n}\n\n.k-content table {\n  white-space: pre-wrap;\n}\n\n.k-content .k-text-selected, .k-content::selection {\n  color: HighlightText;\n  background-color: Highlight;\n}\n\n.k-content .k-text-highlighted {\n  background-color: #bbdefb;\n}\n\n.k-content .ProseMirror-selectednode {\n  outline: 2px solid #8cf;\n}\n\n.ProseMirror-hideselection *::selection { background: transparent; }\n.ProseMirror-hideselection *::-moz-selection { background: transparent; }\n.ProseMirror-hideselection { caret-color: transparent; }\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.k-editor-resize-handles-wrapper {\n  position: absolute;\n  visibility: hidden;\n}\n\n.k-editor-resize-handle {\n  position: absolute;\n  visibility: visible;\n  background-color: #fff;\n  border: 1px solid #000;\n  z-index: 100;\n  width: 5px;\n  height: 5px;\n}\n\n.k-editor-resize-handle.northwest {\n  top: 0;\n  left: 0;\n  transform: translate(-50%, -50%);\n  cursor: nw-resize;\n}\n\n.k-editor-resize-handle.north {\n  top: 0;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  cursor: n-resize;\n}\n\n.k-editor-resize-handle.northeast {\n  top: 0;\n  right: 0;\n  transform: translate(50%, -50%);\n  cursor: ne-resize;\n}\n\n.k-editor-resize-handle.southwest {\n  left: 0;\n  bottom: 0;\n  transform: translate(-50%, 50%);\n  cursor: sw-resize;\n}\n\n.k-editor-resize-handle.south {\n  bottom: 0;\n  left: 50%;\n  transform: translate(-50%, 50%);\n  cursor: s-resize;\n}\n\n.k-editor-resize-handle.southeast {\n  right: 0;\n  bottom: 0;\n  transform: translate(50%, 50%);\n  cursor: se-resize;\n}\n\n.k-editor-resize-handle.west {\n  top: 50%;\n  left: 0;\n  transform: translate(-50%, -50%);\n  cursor: w-resize;\n}\n\n.k-editor-resize-handle.east {\n  top: 50%;\n  right: 0;\n  transform: translate(50%, -50%);\n  cursor: e-resize;\n}\n\n.k-editor-resize-wrap-element {\n  display: inline-block;\n  position: relative;\n}\n\n.ProseMirror .row-resize-handle {\n  position: absolute;\n  right: 0; left: 0; bottom: 0;\n  transform: translate(0, 50%);\n  height: 4px;\n  z-index: 20;\n  background-color: #adf;\n  pointer-events: none;\n}\n\n.ProseMirror .column-resize-handle {\n  position: absolute;\n  right: -2px; top: 0; bottom: 0;\n  width: 4px;\n  z-index: 20;\n  background-color: #adf;\n  pointer-events: none;\n}\n\n.ProseMirror.resize-cursor {\n  cursor: ew-resize;\n  cursor: col-resize;\n}\n\n.ProseMirror.resize-cursor-vertical {\n  cursor: sn-resize;\n  cursor: row-resize;\n}\n\n.k-editor-resize-wrap-element table td p,\n.k-editor-resize-wrap-element table th p {\n  margin: 0 auto;\n}\n',tablesStyles='\n  .ProseMirror .tableWrapper {\n    overflow-x: auto;\n    margin: 1em 0;\n  }\n\n  .ProseMirror table {\n    margin: 0;\n    border-collapse: collapse;\n    table-layout: fixed;\n    width: 100%;\n    overflow: hidden;\n  }\n\n  .ProseMirror td, .ProseMirror th {\n    min-width: 1em;\n    border: 1px solid #ddd;\n    padding: 3px 5px;\n    vertical-align: top;\n    box-sizing: border-box;\n    position: relative;\n  }\n\n  .ProseMirror th {\n    font-weight: bold;\n    text-align: left;\n  }\n\n  /* Give selected cells a blue overlay */\n  .ProseMirror .selectedCell:after {\n    z-index: 2;\n    position: absolute;\n    content: "";\n    left: 0; right: 0; top: 0; bottom: 0;\n    background: rgba(200, 200, 255, 0.4);\n    pointer-events: none;\n  }\n',toolsSettings=__webpack_require__("./node_modules/@progress/kendo-react-editor/dist/es/config/toolsSettings.js"),dialogs_main=__webpack_require__("./node_modules/@progress/kendo-react-editor/dist/es/dialogs/main.js"),__assign=function(){return __assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign.apply(this,arguments)},bold=toolsSettings.w.bold,underline=toolsSettings.w.underline,italic=toolsSettings.w.italic,mac="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),props_key=__webpack_require__("./node_modules/@progress/kendo-react-editor/dist/es/utils/props-key.js"),utils_assign=function(){return utils_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},utils_assign.apply(this,arguments)};!function(EditorUtils){EditorUtils.alignBlocks=function alignBlocks(view,actions,command){return Boolean((0,main._gP)(actions,command)(view.state,view.dispatch))},EditorUtils.applyInlineStyle=function applyInlineStyle(view,options,command){return(0,main.fqb)(options,command)(view.state,view.dispatch)},EditorUtils.applyLink=function applyLink(view,options,command){return(0,main.jUY)(options,command)(view.state,view.dispatch)},EditorUtils.canIndentList=function canIndentList(state,nodeType){return(0,main.yOP)(state,nodeType)},EditorUtils.canInsert=function canInsert(state,nodeType){return(0,main.cz2)(state,nodeType)},EditorUtils.canOutdentList=function canOutdentList(state,listsTypes){return(0,main.V0W)(state,{listsTypes,nodes:[]})},EditorUtils.convertMsLists=function convertMsLists(html){return(0,main.j1R)(html)},EditorUtils.createDocument=function createDocument(schema,html,parseOptions){return(0,main.FsP)((0,main.maF)(html),schema,void 0!==parseOptions?parseOptions:{preserveWhitespace:"full"})},EditorUtils.createTable=function createTable(tableTypes,rows,columns){return(0,main.ZRK)(tableTypes,rows,columns)},EditorUtils.formatBlockElements=function formatBlockElements(view,value,commandName){return(0,main.EY$)(value,commandName)(view.state,view.dispatch)},EditorUtils.getBlockFormats=function getBlockFormats(state){return(0,main.am5)(state)},EditorUtils.getHtml=function getHtml(state){return(0,main.uNC)(state)},EditorUtils.getInlineStyles=function getInlineStyles(state,style){return(0,main.i8$)(state,style)},EditorUtils.getMark=function getMark(state,markType){return(0,main.ut7)(state,markType)},EditorUtils.hasMark=function hasMark(state,options){return(0,main.mP6)(state,options)},EditorUtils.hasNode=function hasNode(state,nodeType){return(0,main.j4p)(state,nodeType)},EditorUtils.indentBlocks=function indentBlocks(view,actions,command,dir){return Boolean((0,main.vNW)(actions,command,dir)(view.state,view.dispatch))},EditorUtils.indentHtml=function indentHtml(content){return(0,main.mPn)(content)},EditorUtils.insertNode=function insertNode(view,node,scrollIntoView){(0,main.onD)(node,scrollIntoView)(view.state,view.dispatch)},EditorUtils.isAligned=function isAligned(state,actions){return(0,main.Zxn)(state,actions)},EditorUtils.isIndented=function isIndented(state,actions,dir){return(0,main.w0G)(state,actions,dir)},EditorUtils.removeComments=function removeComments(html){return(0,main.N5k)(html)},EditorUtils.removeTag=function removeTag(html,tag){return(0,main.b4D)(html,tag)},EditorUtils.pasteCleanup=function pasteCleanup(html,settings){return(0,main.asB)(html,settings)},EditorUtils.sanitizeClassAttr=function sanitizeClassAttr(attr){(0,main.VM3)(attr)},EditorUtils.sanitizeStyleAttr=function sanitizeStyleAttr(attr){(0,main.YLm)(attr)},EditorUtils.removeAttribute=function removeAttribute(attr){(0,main.DeF)(attr)},EditorUtils.sanitize=function sanitize(html){return(0,main.ajW)(html)},EditorUtils.replaceImageSourcesFromRtf=function replaceImageSourcesFromRtf(html,clipboardData){return(0,main.qPM)(html,clipboardData)},EditorUtils.textHighlight=function textHighlight(key){return(0,main.qzw)(key)},EditorUtils.imageResizing=function imageResizing(options){return(0,main.Tf5)(options)},EditorUtils.tableResizing=function tableResizing(){return(0,main.O8q)()},EditorUtils.setHtml=function setHtml(view,html,command,parseOptions){var trimmed=(0,main.maF)(html);(0,main.gE9)(trimmed,command,parseOptions)(view.state,view.dispatch)},EditorUtils.toggleInlineFormat=function toggleInlineFormat(view,options,transaction,markAttrs){return(0,main.L4q)(options,transaction,markAttrs)(view.state,view.dispatch)},EditorUtils.toggleList=function toggleList(view,types,command){return(0,main.vvv)(view.state,view.dispatch,view,types,command)},EditorUtils.getShortcuts=function getShortcuts(settings){return function(settings){var insertBr=(0,main.st8)(main.I$r,(function(state,dispatch){var hardBreak=settings&&settings.types&&settings.types.hardBreak||"hard_break",br=state.schema.nodes[hardBreak];return dispatch&&dispatch(state.tr.replaceSelectionWith(br.create()).scrollIntoView()),!0})),listItem=settings&&settings.types&&settings.types.listItem||"list_item",toolsSettings=settings&&settings.toolsSettings||{};return __assign(__assign(__assign(__assign({"Mod-b":function(state,dispatch){return(0,main.L4q)(toolsSettings.bold||bold)(state,dispatch)},"Mod-i":function(state,dispatch){return(0,main.L4q)(toolsSettings.italic||italic)(state,dispatch)},"Mod-u":function(state,dispatch){return(0,main.L4q)(toolsSettings.underline||underline)(state,dispatch)},"Mod-z":main.tNi,"Shift-Mod-z":main.ZSj},__assign({},mac?{}:{"Mod-y":main.ZSj})),{Backspace:main.dvq,"Mod-Enter":insertBr,"Shift-Enter":insertBr}),__assign({},mac?{"Ctrl-Enter":insertBr}:{})),{Enter:function(state,dispatch){return(0,main.wnP)(state.schema.nodes[listItem])(state,dispatch)},Tab:(0,main.D8)(1),"Shift-Tab":(0,main.D8)(-1)})}(settings)},EditorUtils.propsKey=props_key.F,EditorUtils.imageResizeKey=main.HLg,EditorUtils.marks=utils_assign({},main.Z8F),EditorUtils.nodes=utils_assign({},main.a98)}(EditorUtils||(EditorUtils={}));var extendStatics,setValue=function(view,value){var transaction=value.tr||view.state.tr.setSelection(new main.i55(view.state.doc)).replaceSelectionWith(value.doc||EditorUtils.createDocument(view.state.schema,value.html||"")).setMeta("commandName","setHTML");view.updateState(view.state.apply(transaction))},firefox="undefined"!=typeof window&&/Firefox/.test(window.navigator.userAgent),packageMetadata={name:"@progress/kendo-react-editor",productName:"KendoReact",productCodes:["KENDOUIREACT","KENDOUICOMPLETE"],publishDate:1695801887,version:"",licensingDocsUrl:"https://www.telerik.com/kendo-react-ui/my-license/?utm_medium=product&utm_source=kendoreact&utm_campaign=kendo-ui-react-purchase-license-keys-warning"},validate_package=__webpack_require__("./node_modules/@progress/kendo-react-common/dist/es/validate-package.js"),WatermarkOverlay=__webpack_require__("./node_modules/@progress/kendo-react-common/dist/es/watermark/WatermarkOverlay.js"),messages=__webpack_require__("./node_modules/@progress/kendo-react-editor/dist/es/messages/index.js"),intlUtils=__webpack_require__("./node_modules/@progress/kendo-react-intl/dist/es/intlUtils.js"),__extends=(extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)},function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),Editor_assign=function(){return Editor_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},Editor_assign.apply(this,arguments)},__spreadArray=function(to,from,pack){if(pack||2===arguments.length)for(var ar,i=0,l=from.length;i<l;i++)!ar&&i in from||(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},Editor_link=toolsSettings.w.link,Editor_bold=toolsSettings.w.bold,Editor_italic=toolsSettings.w.italic,Editor_underline=toolsSettings.w.underline,Editor=function(_super){function Editor(props){var _this=_super.call(this,props)||this;return _this.state={view:void 0,linkDialog:!1},_this._element=null,_this._contentElement=null,_this.iframe=null,_this.trOnChange=null,_this.htmlOnChange=null,_this.showLicenseWatermark=!1,_this.focus=function(){_this.view&&_this.view.focus()},_this.renderDialog=function(Component,settings,stateFlag){return _this.state[stateFlag]&&react.createElement(Component,{view:_this.view,settings,dir:_this.props.dir,onClose:function(){var _a;return _this.setState(((_a={})[stateFlag]=!1,_a))}})},_this.renderTool=function(Tool,index){var tool=react.createElement(Tool,{view:_this.view,dir:_this.props.dir,key:index});return tool.type===ToolbarSeparator.l?react.createElement(Tool,{key:index}):tool},_this.updateTools=function(view,_prevViewState){_this.setState({view})},_this.filterTransaction=function(transaction,state){var event={target:_this,transaction,state};return!1!==(_this.props.onExecute&&_this.props.onExecute.call(void 0,event))},_this.onPasteHtml=function(html){if(_this.props.onPasteHtml&&_this.pasteEvent){var event_1={target:_this,pastedHtml:html,nativeEvent:_this.pasteEvent},newHtml=_this.props.onPasteHtml.call(void 0,event_1);if(_this.pasteEvent=void 0,"string"==typeof newHtml)return newHtml}return html},_this.dispatchTransaction=function(transaction){var docChanged=transaction.docChanged;if(_this.props.onChange&&docChanged){_this.trOnChange=transaction;var doc_1=transaction.doc,schema_1=transaction.doc.type.schema,target_1=_this,event_2={target:target_1,value:doc_1,get html(){return target_1.htmlOnChange=EditorUtils.getHtml({doc:doc_1,schema:schema_1}),target_1.htmlOnChange},transaction,schema:schema_1};_this.props.onChange.call(void 0,event_2)}!_this.view||void 0!==_this.props.value&&docChanged||_this.view.updateState(_this.view.state.apply(transaction))},_this.onFocus=function(_view,nativeEvent){if(_this.props.onFocus){var event_3={target:_this,nativeEvent};_this.props.onFocus.call(void 0,event_3)}return!1},_this.onBlur=function(_view,nativeEvent){if(_this.props.onBlur){var event_4={target:_this,nativeEvent};_this.props.onBlur.call(void 0,event_4)}return!1},_this.onPaste=function(_view,nativeEvent){return _this.props.onPasteHtml&&(_this.pasteEvent=nativeEvent),!1},(0,validate_package.$)(packageMetadata),_this.showLicenseWatermark=(0,validate_package.E)(packageMetadata),_this}return __extends(Editor,_super),Object.defineProperty(Editor.prototype,"value",{get:function(){return null!==this.trOnChange?this.trOnChange.doc:void 0!==this.props.value?this.props.value:this.view?this.view.state.doc:this.props.defaultContent||""},enumerable:!1,configurable:!0}),Object.defineProperty(Editor.prototype,"element",{get:function(){return this._element},enumerable:!1,configurable:!0}),Object.defineProperty(Editor.prototype,"contentElement",{get:function(){return this._contentElement},enumerable:!1,configurable:!0}),Object.defineProperty(Editor.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Editor.prototype.componentDidMount=function(){this.iframe&&firefox||this.initialize()},Editor.prototype.componentDidUpdate=function(prevProps){var value=this.props.value,view=this.view;void 0!==value&&view&&(!function(view,value,prevValue,trOnChange,htmlOnChange){"string"==typeof value?trOnChange&&value===htmlOnChange?setValue(view,{tr:trOnChange}):value!==prevValue&&setValue(view,{html:value}):trOnChange&&value.eq(trOnChange.doc)?setValue(view,{tr:trOnChange}):view.state.doc.eq(value)||setValue(view,{doc:value})}(view,value,prevProps.value,this.trOnChange,this.htmlOnChange),this.trOnChange=null,this.htmlOnChange=null)},Editor.prototype.componentWillUnmount=function(){this.view&&this.view.destroy(),this._view=void 0;var iframeWindow=this.iframe&&this.iframe.contentWindow;if(iframeWindow){this._contentElement&&this._contentElement.parentNode&&this._contentElement.parentNode.removeChild(this._contentElement);for(var head=iframeWindow.document.head;head&&head.firstChild;)head.removeChild(head.firstChild)}},Editor.prototype.render=function(){var _this=this,_a=this.props,_b=_a.tools,tools=void 0===_b?[]:_b,_c=_a.defaultEditMode,defaultEditMode=void 0===_c?"iframe":_c,_d=_a.preserveWhitespace,preserveWhitespace=void 0===_d?"full":_d,style=_a.style,className=_a.className,localization=(0,intlUtils.GB)(this);this.view&&(props_key.F.getState(this.view.state).preserveWhitespace=preserveWhitespace);var contentStyle=this.props.contentStyle;void 0===contentStyle&&void 0===(style||{}).height&&(contentStyle={height:"300px"});var buttons=tools.map((function(item,index){return Array.isArray(item)?react.createElement(ButtonGroup.e,{key:index},item.map(_this.renderTool,index)):_this.renderTool(item,index)}));return react.createElement("div",{ref:function(e){return _this._element=e},className:(0,classNames.x)("k-editor",className,{"k-editor-resizable":this.props.resizable}),dir:this.props.dir,style},buttons.length>0&&react.createElement(Toolbar.M,{className:"k-editor-toolbar",keyboardNavigation:this.props.keyboardNavigation},buttons),"iframe"===defaultEditMode?react.createElement("div",{className:"k-editor-content"},react.createElement("iframe",{onLoad:firefox?function(){_this.initialize()}:void 0,ref:function(e){return _this.iframe=e},frameBorder:"0",title:localization.toLanguageString(messages.H.iframeTitle,messages.D[messages.H.iframeTitle]),style:contentStyle,className:"k-iframe"})):react.createElement("div",{style:contentStyle,className:"k-editor-content"},react.createElement("div",{ref:function(e){return _this._contentElement=e},suppressContentEditableWarning:!0,role:"textbox","aria-labelledby":this.props.ariaLabelledBy,"aria-describedby":this.props.ariaDescribedBy,"aria-label":this.props.ariaLabel})),this.renderDialog(dialogs_main.H.InsertLinkDialog,Editor_link,"linkDialog"),this.showLicenseWatermark&&react.createElement(WatermarkOverlay.R,null))},Editor.prototype.initialize=function(){var _this=this,iframeWindow=this.iframe&&this.iframe.contentWindow;if(iframeWindow){var iframeDocument_1=iframeWindow.document;[defaultStyle,tablesStyles,"rtl"===this.props.dir?"body { direction: rtl }":void 0].forEach((function(styles){if(styles){var style=iframeDocument_1.createElement("style");style.appendChild(iframeDocument_1.createTextNode(styles)),iframeDocument_1.head.appendChild(style)}}));var meta=iframeDocument_1.createElement("meta");meta.setAttribute("charset","utf-8"),iframeDocument_1.head.appendChild(meta),this._contentElement=iframeDocument_1.createElement("div"),iframeDocument_1.body.appendChild(this._contentElement),this._contentElement.classList.add("k-content")}var dom=this._contentElement;if(dom){var _a=this.props.preserveWhitespace,preserveWhitespace=void 0===_a?"full":_a,plugins=[new main.k_1({view:function(){return{update:_this.updateTools}},key:new main.hsM("toolbar-tools-update-plugin")}),new main.k_1({filterTransaction:this.filterTransaction,key:new main.hsM("onExecute-event-plugin")}),new main.k_1({key:props_key.F,state:{init:function(){return{preserveWhitespace}},apply:function(_,val){return val}}}),(0,main.h8Q)(),(0,main.FDz)(),(0,main.b6A)(),(0,main.Aah)(),(0,main.zfS)(),(0,main.LFN)(),(0,main.KqN)()],shortcuts=Editor_assign(Editor_assign({},EditorUtils.getShortcuts({types:{listItem:"list_item",hardBreak:"hard_break"},toolsSettings:{bold:Editor_bold,italic:Editor_italic,underline:Editor_underline}})),{"Mod-k":function(){var linkDialog=_this.state.linkDialog,editorView=_this.view;if(editorView){var editorState=editorView.state,collapsed=editorState.selection.empty,linkMark=(0,main.ut7)(editorState,editorState.schema.marks[Editor_link.mark]);linkDialog||collapsed&&!linkMark||_this.setState({linkDialog:!0})}return!linkDialog},"Alt-F10":function(){var _a,toolbar=null===(_a=_this.element)||void 0===_a?void 0:_a.querySelector(".k-toolbar");if(toolbar){var button=toolbar.querySelector(util.F.join(","));if(button)return button.focus(),!0}return!1}}),_b=this.props,_c=_b.defaultContent,defaultContent=void 0===_c?"":_c,value=_b.value,onMount=_b.onMount,doc=value&&"string"!=typeof value?value:EditorUtils.createDocument(new main.Sjr({nodes:main.a98,marks:main.Z8F}),value||defaultContent,{preserveWhitespace}),viewProps={state:main.$t2.create({plugins:__spreadArray(__spreadArray([],plugins,!0),[(0,main.w4p)(shortcuts),(0,main.w4p)(main.RVE)],!1),doc}),transformPastedHTML:this.onPasteHtml,dispatchTransaction:this.dispatchTransaction,handleDOMEvents:{focus:this.onFocus,blur:this.onBlur,paste:this.onPaste},handleDrop:function(_view,_event,slice,_moved){var hasCaption=!1;return slice.content.nodesBetween(0,slice.content.size,(function(node){hasCaption=hasCaption||"table_caption_external"===node.type.name})),hasCaption}},mountEvent={plugins,shortcuts,target:this,viewProps,dom},view=this._view=onMount&&onMount.call(void 0,mountEvent)||new main.Lzz({mount:dom},viewProps);this.setState({view})}},Editor.propTypes={defaultContent:prop_types.string,value:prop_types.oneOfType([prop_types.object,prop_types.string]),defaultEditMode:prop_types.oneOf(["iframe","div"]),contentStyle:prop_types.object,dir:prop_types.string,className:prop_types.string,ariaDescribedBy:prop_types.string,ariaLabelledBy:prop_types.string,ariaLabel:prop_types.string,style:prop_types.object,tools:prop_types.arrayOf(prop_types.any),keyboardNavigation:prop_types.bool,resizable:prop_types.bool,preserveWhitespace:prop_types.oneOf([!0,!1,"full"]),onMount:prop_types.func,onFocus:prop_types.func,onBlur:prop_types.func,onChange:prop_types.func,onPasteHtml:prop_types.func,onExecute:prop_types.func},Editor}(react.Component);(0,intlUtils.AK)(Editor)},"./node_modules/@progress/kendo-react-editor/dist/es/config/toolsSettings.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>listsTypes,w:()=>EditorToolsSettings});var EditorToolsSettings,_messages__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@progress/kendo-react-editor/dist/es/messages/index.js"),_progress_kendo_svg_icons__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@progress/kendo-svg-icons/dist/index.es.js"),_progress_kendo_editor_common__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@progress/kendo-editor-common/dist/es/main.js"),__assign=function(){return __assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign.apply(this,arguments)},__spreadArray=function(to,from,pack){if(pack||2===arguments.length)for(var ar,i=0,l=from.length;i<l;i++)!ar&&i in from||(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},listsTypes=__assign({},_progress_kendo_editor_common__WEBPACK_IMPORTED_MODULE_0__.iLv.listsTypes);!function(EditorToolsSettings){var buttonCommonProps={type:"button"};EditorToolsSettings.bold=__assign(__assign({},_progress_kendo_editor_common__WEBPACK_IMPORTED_MODULE_0__.CrB),{props:__assign({icon:"bold",svgIcon:_progress_kendo_svg_icons__WEBPACK_IMPORTED_MODULE_1__.boldIcon},buttonCommonProps),messages:{title:_messages__WEBPACK_IMPORTED_MODULE_2__.H.bold},commandName:"Bold"}),EditorToolsSettings.italic=__assign(__assign({},_progress_kendo_editor_common__WEBPACK_IMPORTED_MODULE_0__.TNI),{props:__assign({icon:"italic",svgIcon:_progress_kendo_svg_icons__WEBPACK_IMPORTED_MODULE_1__.italicIcon},buttonCommonProps),messages:{title:_messages__WEBPACK_IMPORTED_MODULE_2__.H.italic},commandName:"Italic"}),EditorToolsSettings.underline=__assign(__assign({},_progress_kendo_editor_common__WEBPACK_IMPORTED_MODULE_0__.V1U),{props:__assign({icon:"underline",svgIcon:_progress_kendo_svg_icons__WEBPACK_IMPORTED_MODULE_1__.underlineIcon},buttonCommonProps),messages:{title:_messages__WEBPACK_IMPORTED_MODULE_2__.H.underline},commandName:"Underline"}),EditorToolsSettings.strikethrough=__assign(__assign({},_progress_kendo_editor_common__WEBPACK_IMPORTED_MODULE_0__.ofj),{props:__assign({icon:"strikethrough",svgIcon:_progress_kendo_svg_icons__WEBPACK_IMPORTED_MODULE_1__.strikethroughIcon},buttonCommonProps),messages:{title:_messages__WEBPACK_IMPORTED_MODULE_2__.H.strikethrough},commandName:"Strikethrough"}),EditorToolsSettings.subscript=__assign(__assign({},_progress_kendo_editor_common__WEBPACK_IMPORTED_MODULE_0__.iH5),{props:__assign({icon:"subscript",svgIcon:_progress_kendo_svg_icons__WEBPACK_IMPORTED_MODULE_1__.subscriptIcon},buttonCommonProps),messages:{title:_messages__WEBPACK_IMPORTED_MODULE_2__.H.subscript},commandName:"Subscript"}),EditorToolsSettings.superscript=__assign(__assign({},_progress_kendo_editor_common__WEBPACK_IMPORTED_MODULE_0__.Lmf),{props:__assign({icon:"supscript",svgIcon:_progress_kendo_svg_icons__WEBPACK_IMPORTED_MODULE_1__.supscriptIcon},buttonCommonProps),messages:{title:_messages__WEBPACK_IMPORTED_MODULE_2__.H.superscript},commandName:"Superscript"}),EditorToolsSettings.link=__assign(__assign({},_progress_kendo_editor_common__WEBPACK_IMPORTED_MODULE_0__.nfo),{props:__assign({icon:"link",svgIcon:_progress_kendo_svg_icons__WEBPACK_IMPORTED_MODULE_1__.linkIcon},buttonCommonProps),messages:{insertHyperlink:_messages__WEBPACK_IMPORTED_MODULE_2__.H.insertHyperlink,insertHyperlinkDialogTitle:_messages__WEBPACK_IMPORTED_MODULE_2__.H.insertHyperlinkDialogTitle,insertHyperlinkAddress:_messages__WEBPACK_IMPORTED_MODULE_2__.H.insertHyperlinkAddress,insertHyperlinkTitle:_messages__WEBPACK_IMPORTED_MODULE_2__.H.insertHyperlinkTitle,insertHyperlinkNewWindow:_messages__WEBPACK_IMPORTED_MODULE_2__.H.insertHyperlinkNewWindow,insertHyperlinkCancel:_messages__WEBPACK_IMPORTED_MODULE_2__.H.insertHyperlinkCancel,insertHyperlinkInsert:_messages__WEBPACK_IMPORTED_MODULE_2__.H.insertHyperlinkInsert},commandName:"Link"}),EditorToolsSettings.insertFile=__assign(__assign({},_progress_kendo_editor_common__WEBPACK_IMPORTED_MODULE_0__.nfo),{props:__assign({icon:"file-add",svgIcon:_progress_kendo_svg_icons__WEBPACK_IMPORTED_MODULE_1__.fileAddIcon},buttonCommonProps),messages:{insertHyperlink:_messages__WEBPACK_IMPORTED_MODULE_2__.H.insertFile,insertHyperlinkDialogTitle:_messages__WEBPACK_IMPORTED_MODULE_2__.H.insertFileDialogTitle,insertHyperlinkAddress:_messages__WEBPACK_IMPORTED_MODULE_2__.H.insertFileAddress,insertHyperlinkTitle:_messages__WEBPACK_IMPORTED_MODULE_2__.H.insertFileTitle,insertHyperlinkNewWindow:"",insertHyperlinkCancel:_messages__WEBPACK_IMPORTED_MODULE_2__.H.insertFileCancel,insertHyperlinkInsert:_messages__WEBPACK_IMPORTED_MODULE_2__.H.insertFileInsert},commandName:"InsertFile",linkTarget:!1}),EditorToolsSettings.insertTable={props:__assign({icon:"table-add",svgIcon:_progress_kendo_svg_icons__WEBPACK_IMPORTED_MODULE_1__.tableAddIcon},buttonCommonProps),messages:{createTable:_messages__WEBPACK_IMPORTED_MODULE_2__.H.createTable,createTableHint:_messages__WEBPACK_IMPORTED_MODULE_2__.H.createTableHint},commandName:"InsertTable"},EditorToolsSettings.addRowBefore={props:__assign({icon:"table-row-insert-above",svgIcon:_progress_kendo_svg_icons__WEBPACK_IMPORTED_MODULE_1__.tableRowInsertAboveIcon},buttonCommonProps),messages:{title:_messages__WEBPACK_IMPORTED_MODULE_2__.H.addRowBefore},commandName:"AddRowBefore"},EditorToolsSettings.addRowAfter={props:__assign({icon:"table-row-insert-below",svgIcon:_progress_kendo_svg_icons__WEBPACK_IMPORTED_MODULE_1__.tableRowInsertBelowIcon},buttonCommonProps),messages:{title:_messages__WEBPACK_IMPORTED_MODULE_2__.H.addRowAfter},commandName:"AddRowAfter"},EditorToolsSettings.addColumnBefore={props:__assign({icon:"table-column-insert-left",svgIcon:_progress_kendo_svg_icons__WEBPACK_IMPORTED_MODULE_1__.tableColumnInsertLeftIcon},buttonCommonProps),messages:{title:_messages__WEBPACK_IMPORTED_MODULE_2__.H.addColumnBefore},commandName:"AddColumnBefore"},EditorToolsSettings.addColumnAfter={props:__assign({icon:"table-column-insert-right",svgIcon:_progress_kendo_svg_icons__WEBPACK_IMPORTED_MODULE_1__.tableColumnInsertRightIcon},buttonCommonProps),messages:{title:_messages__WEBPACK_IMPORTED_MODULE_2__.H.addColumnAfter},commandName:"AddColumnAfter"},EditorToolsSettings.deleteRow={props:__assign({icon:"table-row-delete",svgIcon:_progress_kendo_svg_icons__WEBPACK_IMPORTED_MODULE_1__.tableRowDeleteIcon},buttonCommonProps),messages:{title:_messages__WEBPACK_IMPORTED_MODULE_2__.H.deleteRow},commandName:"DeleteRow"},EditorToolsSettings.deleteColumn={props:__assign({icon:"table-column-delete",svgIcon:_progress_kendo_svg_icons__WEBPACK_IMPORTED_MODULE_1__.tableColumnDeleteIcon},buttonCommonProps),messages:{title:_messages__WEBPACK_IMPORTED_MODULE_2__.H.deleteColumn},commandName:"DeleteColumn"},EditorToolsSettings.deleteTable={props:__assign({icon:"table-delete",svgIcon:_progress_kendo_svg_icons__WEBPACK_IMPORTED_MODULE_1__.tableDeleteIcon},buttonCommonProps),messages:{title:_messages__WEBPACK_IMPORTED_MODULE_2__.H.deleteTable},commandName:"DeleteTable"},EditorToolsSettings.mergeCells={props:__assign({icon:"cells-merge",svgIcon:_progress_kendo_svg_icons__WEBPACK_IMPORTED_MODULE_1__.cellsMergeIcon},buttonCommonProps),messages:{title:_messages__WEBPACK_IMPORTED_MODULE_2__.H.mergeCells},commandName:"MergeCells"},EditorToolsSettings.splitCell={props:__assign({icon:"cell-split-horizontally",svgIcon:_progress_kendo_svg_icons__WEBPACK_IMPORTED_MODULE_1__.cellSplitHorizontallyIcon},buttonCommonProps),messages:{title:_messages__WEBPACK_IMPORTED_MODULE_2__.H.splitCell},commandName:"SplitCell"},EditorToolsSettings.print={props:__assign({icon:"print",svgIcon:_progress_kendo_svg_icons__WEBPACK_IMPORTED_MODULE_1__.printIcon},buttonCommonProps),messages:{title:_messages__WEBPACK_IMPORTED_MODULE_2__.H.print}},EditorToolsSettings.selectAll={props:__assign({icon:"select-all",svgIcon:_progress_kendo_svg_icons__WEBPACK_IMPORTED_MODULE_1__.selectAllIcon},buttonCommonProps),messages:{title:_messages__WEBPACK_IMPORTED_MODULE_2__.H.selectAll}},EditorToolsSettings.pdf={props:__assign({icon:"file-pdf",svgIcon:_progress_kendo_svg_icons__WEBPACK_IMPORTED_MODULE_1__.filePdfIcon},buttonCommonProps),messages:{title:_messages__WEBPACK_IMPORTED_MODULE_2__.H.pdf}},EditorToolsSettings.savePdfOptions={fileName:"editor.pdf",paperSize:"A4",margin:"1cm"},EditorToolsSettings.cleanFormatting={props:__assign({icon:"clear-css",svgIcon:_progress_kendo_svg_icons__WEBPACK_IMPORTED_MODULE_1__.clearCssIcon},buttonCommonProps),messages:{title:_messages__WEBPACK_IMPORTED_MODULE_2__.H.cleanFormatting},commandName:"CleanFormatting"},EditorToolsSettings.image={node:"image",props:__assign({icon:"image",svgIcon:_progress_kendo_svg_icons__WEBPACK_IMPORTED_MODULE_1__.imageIcon},buttonCommonProps),messages:{insertImage:_messages__WEBPACK_IMPORTED_MODULE_2__.H.insertImage,insertImageDialogTitle:_messages__WEBPACK_IMPORTED_MODULE_2__.H.insertImageDialogTitle,insertImageAddress:_messages__WEBPACK_IMPORTED_MODULE_2__.H.insertImageAddress,insertImageTitle:_messages__WEBPACK_IMPORTED_MODULE_2__.H.insertImageTitle,insertImageAltText:_messages__WEBPACK_IMPORTED_MODULE_2__.H.insertImageAltText,insertImageWidth:_messages__WEBPACK_IMPORTED_MODULE_2__.H.insertImageWidth,insertImageHeight:_messages__WEBPACK_IMPORTED_MODULE_2__.H.insertImageHeight,insertImageCancel:_messages__WEBPACK_IMPORTED_MODULE_2__.H.insertImageCancel,insertImageInsert:_messages__WEBPACK_IMPORTED_MODULE_2__.H.insertImageInsert},commandName:"InsertImage"},EditorToolsSettings.viewHtml={props:__assign({icon:"code",svgIcon:_progress_kendo_svg_icons__WEBPACK_IMPORTED_MODULE_1__.codeIcon},buttonCommonProps),messages:{viewHtml:_messages__WEBPACK_IMPORTED_MODULE_2__.H.viewHtml,viewHtmlDialogTitle:_messages__WEBPACK_IMPORTED_MODULE_2__.H.viewHtmlDialogTitle,viewHtmlCancel:_messages__WEBPACK_IMPORTED_MODULE_2__.H.viewHtmlCancel,viewHtmlUpdate:_messages__WEBPACK_IMPORTED_MODULE_2__.H.viewHtmlUpdate},commandName:"SetContent"},EditorToolsSettings.findAndReplace={props:__assign({icon:"find",svgIcon:_progress_kendo_svg_icons__WEBPACK_IMPORTED_MODULE_1__.binocularsIcon},buttonCommonProps),messages:{findReplaceToolTitle:_messages__WEBPACK_IMPORTED_MODULE_2__.H.findReplaceToolTitle,findReplaceDialogTitle:_messages__WEBPACK_IMPORTED_MODULE_2__.H.findReplaceDialogTitle,findReplaceTabFind:_messages__WEBPACK_IMPORTED_MODULE_2__.H.findReplaceTabFind,findReplaceTabReplace:_messages__WEBPACK_IMPORTED_MODULE_2__.H.findReplaceTabReplace,findReplaceFindWhat:_messages__WEBPACK_IMPORTED_MODULE_2__.H.findReplaceFindWhat,findReplaceReplaceWith:_messages__WEBPACK_IMPORTED_MODULE_2__.H.findReplaceReplaceWith,findReplaceReplace:_messages__WEBPACK_IMPORTED_MODULE_2__.H.findReplaceReplace,findReplaceReplaceAll:_messages__WEBPACK_IMPORTED_MODULE_2__.H.findReplaceReplaceAll,findReplaceMatchCase:_messages__WEBPACK_IMPORTED_MODULE_2__.H.findReplaceMatchCase,findReplaceMatchWord:_messages__WEBPACK_IMPORTED_MODULE_2__.H.findReplaceMatchWord,findReplaceMatchCyclic:_messages__WEBPACK_IMPORTED_MODULE_2__.H.findReplaceMatchCyclic,findReplaceUseRegExp:_messages__WEBPACK_IMPORTED_MODULE_2__.H.findReplaceUseRegExp,findReplacePrevMatch:_messages__WEBPACK_IMPORTED_MODULE_2__.H.findReplacePrevMatch,findReplaceNextMatch:_messages__WEBPACK_IMPORTED_MODULE_2__.H.findReplaceNextMatch,findReplaceMatches:_messages__WEBPACK_IMPORTED_MODULE_2__.H.findReplaceMatches}},EditorToolsSettings.unlink=__assign(__assign({},_progress_kendo_editor_common__WEBPACK_IMPORTED_MODULE_0__.nfo),{props:__assign({icon:"unlink",svgIcon:_progress_kendo_svg_icons__WEBPACK_IMPORTED_MODULE_1__.unlinkIcon},buttonCommonProps),messages:{title:_messages__WEBPACK_IMPORTED_MODULE_2__.H.unlink},commandName:"Unlink"}),EditorToolsSettings.undo={props:__assign({icon:"undo",svgIcon:_progress_kendo_svg_icons__WEBPACK_IMPORTED_MODULE_1__.undoIcon},buttonCommonProps),messages:{title:_messages__WEBPACK_IMPORTED_MODULE_2__.H.undo},commandName:"Undo"},EditorToolsSettings.redo={props:__assign({icon:"redo",svgIcon:_progress_kendo_svg_icons__WEBPACK_IMPORTED_MODULE_1__.redoIcon},buttonCommonProps),messages:{title:_messages__WEBPACK_IMPORTED_MODULE_2__.H.redo},commandName:"Redo"},EditorToolsSettings.fontSize={style:"font-size",defaultItem:{text:_messages__WEBPACK_IMPORTED_MODULE_2__.D[_messages__WEBPACK_IMPORTED_MODULE_2__.H.fontSize],value:"",localizationKey:_messages__WEBPACK_IMPORTED_MODULE_2__.H.fontSize},items:[{text:"1 (8pt)",value:"xx-small"},{text:"2 (10pt)",value:"x-small"},{text:"3 (12pt)",value:"small"},{text:"4 (14pt)",value:"medium"},{text:"5 (18pt)",value:"large"},{text:"6 (24pt)",value:"x-large"},{text:"7 (36pt)",value:"xx-large"}],commandName:"FontSize"},EditorToolsSettings.fontName={style:"font-family",defaultItem:{text:_messages__WEBPACK_IMPORTED_MODULE_2__.D[_messages__WEBPACK_IMPORTED_MODULE_2__.H.fontName],value:"",localizationKey:_messages__WEBPACK_IMPORTED_MODULE_2__.H.fontName},items:[{text:"Arial",value:"Arial, Helvetica, sans-serif",style:{fontFamily:"Arial, Helvetica, sans-serif"}},{text:"Courier New",value:"'Courier New', Courier, monospace",style:{fontFamily:"'Courier New', Courier, monospace"}},{text:"Georgia",value:"Georgia, serif",style:{fontFamily:"Georgia, serif"}},{text:"Impact",value:"Impact, Charcoal, sans-serif",style:{fontFamily:"Impact, Charcoal, sans-serif"}},{text:"Lucida Console",value:"'Lucida Console', Monaco, monospace",style:{fontFamily:"'Lucida Console', Monaco, monospace"}},{text:"Tahoma",value:"Tahoma, Geneva, sans-serif",style:{fontFamily:"Tahoma, Geneva, sans-serif"}},{text:"Times New Roman",value:"'Times New Roman', Times,serif",style:{fontFamily:"'Times New Roman', Times,serif"}},{text:"Trebuchet MS",value:"'Trebuchet MS', Helvetica, sans-serif",style:{fontFamily:"'Trebuchet MS', Helvetica, sans-serif"}},{text:"Verdana",value:"Verdana, Geneva, sans-serif",style:{fontFamily:"Verdana, Geneva, sans-serif"}}],commandName:"FontName"},EditorToolsSettings.formatBlock={defaultItem:{text:_messages__WEBPACK_IMPORTED_MODULE_2__.D[_messages__WEBPACK_IMPORTED_MODULE_2__.H.format],value:"",localizationKey:_messages__WEBPACK_IMPORTED_MODULE_2__.H.format},items:[{text:"Paragraph",value:"p",style:{display:"block",marginLeft:0}},{text:"Heading 1",value:"h1",style:{display:"block",fontSize:"2em",marginLeft:0,fontWeight:"bold"}},{text:"Heading 2",value:"h2",style:{display:"block",fontSize:"1.5em",marginLeft:0,fontWeight:"bold"}},{text:"Heading 3",value:"h3",style:{display:"block",fontSize:"1.17em",marginLeft:0,fontWeight:"bold"}},{text:"Heading 4",value:"h4",style:{display:"block",fontSize:"1em",marginLeft:0,fontWeight:"bold"}},{text:"Heading 5",value:"h5",style:{display:"block",fontSize:"0.83em",marginLeft:0,fontWeight:"bold"}},{text:"Heading 6",value:"h6",style:{display:"block",fontSize:"0.67em",marginLeft:0,fontWeight:"bold"}}],commandName:"FormatBlock"},EditorToolsSettings.foreColor={style:"color",colorPickerProps:{icon:"foreground-color",svgIcon:_progress_kendo_svg_icons__WEBPACK_IMPORTED_MODULE_1__.foregroundColorIcon,view:"palette",title:_messages__WEBPACK_IMPORTED_MODULE_2__.H.foregroundColor,ariaLabel:_messages__WEBPACK_IMPORTED_MODULE_2__.H.foreColorLabel},commandName:"ForeColor"},EditorToolsSettings.backColor={style:"background-color",colorPickerProps:{icon:"droplet",svgIcon:_progress_kendo_svg_icons__WEBPACK_IMPORTED_MODULE_1__.dropletIcon,view:"palette",title:_messages__WEBPACK_IMPORTED_MODULE_2__.H.backgroundColor,ariaLabel:_messages__WEBPACK_IMPORTED_MODULE_2__.H.backColorLabel},commandName:"BackColor"},EditorToolsSettings.alignLeft={actions:__spreadArray([],_progress_kendo_editor_common__WEBPACK_IMPORTED_MODULE_0__.IwV,!0),props:__assign({icon:"align-left",svgIcon:_progress_kendo_svg_icons__WEBPACK_IMPORTED_MODULE_1__.alignLeftIcon},buttonCommonProps),messages:{title:_messages__WEBPACK_IMPORTED_MODULE_2__.H.alignLeft},commandName:"AlignLeft"},EditorToolsSettings.alignRight={actions:__spreadArray([],_progress_kendo_editor_common__WEBPACK_IMPORTED_MODULE_0__.Xq8,!0),props:__assign({icon:"align-right",svgIcon:_progress_kendo_svg_icons__WEBPACK_IMPORTED_MODULE_1__.alignRightIcon},buttonCommonProps),messages:{title:_messages__WEBPACK_IMPORTED_MODULE_2__.H.alignRight},commandName:"AlignRight"},EditorToolsSettings.alignCenter={actions:__spreadArray([],_progress_kendo_editor_common__WEBPACK_IMPORTED_MODULE_0__.G9V,!0),props:__assign({icon:"align-center",svgIcon:_progress_kendo_svg_icons__WEBPACK_IMPORTED_MODULE_1__.alignCenterIcon},buttonCommonProps),messages:{title:_messages__WEBPACK_IMPORTED_MODULE_2__.H.alignCenter},commandName:"AlignCenter"},EditorToolsSettings.alignJustify={actions:__spreadArray([],_progress_kendo_editor_common__WEBPACK_IMPORTED_MODULE_0__.btE,!0),props:__assign({icon:"align-justify",svgIcon:_progress_kendo_svg_icons__WEBPACK_IMPORTED_MODULE_1__.alignJustifyIcon},buttonCommonProps),messages:{title:_messages__WEBPACK_IMPORTED_MODULE_2__.H.alignJustify},commandName:"AlignJustify"},EditorToolsSettings.alignRemove={actions:__spreadArray([],_progress_kendo_editor_common__WEBPACK_IMPORTED_MODULE_0__.BY2,!0),props:__assign({icon:"align-remove",svgIcon:_progress_kendo_svg_icons__WEBPACK_IMPORTED_MODULE_1__.alignRemoveIcon},buttonCommonProps),messages:{},commandName:"AlignRemove"},EditorToolsSettings.indent={actions:_progress_kendo_editor_common__WEBPACK_IMPORTED_MODULE_0__.iLv.nodes,listsTypes,props:__assign({icon:"indent",svgIcon:_progress_kendo_svg_icons__WEBPACK_IMPORTED_MODULE_1__.indentIcon},buttonCommonProps),messages:{title:_messages__WEBPACK_IMPORTED_MODULE_2__.H.indent},commandName:"Indent"},EditorToolsSettings.outdent={actions:_progress_kendo_editor_common__WEBPACK_IMPORTED_MODULE_0__.nni.nodes,listsTypes,props:__assign({icon:"outdent",svgIcon:_progress_kendo_svg_icons__WEBPACK_IMPORTED_MODULE_1__.outdentIcon},buttonCommonProps),messages:{title:_messages__WEBPACK_IMPORTED_MODULE_2__.H.outdent},commandName:"Outdent"},EditorToolsSettings.orderedList={listType:listsTypes.orderedList,props:__assign({icon:"list-ordered",svgIcon:_progress_kendo_svg_icons__WEBPACK_IMPORTED_MODULE_1__.listOrderedIcon},buttonCommonProps),messages:{title:_messages__WEBPACK_IMPORTED_MODULE_2__.H.orderedList},commandName:"OrderedList",types:__assign({},listsTypes)},EditorToolsSettings.bulletList={listType:listsTypes.bulletList,props:__assign({icon:"list-unordered",svgIcon:_progress_kendo_svg_icons__WEBPACK_IMPORTED_MODULE_1__.listUnorderedIcon},buttonCommonProps),messages:{title:_messages__WEBPACK_IMPORTED_MODULE_2__.H.bulletList},commandName:"UnorderedList",types:__assign({},listsTypes)}}(EditorToolsSettings||(EditorToolsSettings={}))},"./node_modules/@progress/kendo-react-editor/dist/es/dialogs/FindReplace.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>FindAndReplaceDialog});var extendStatics,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_progress_kendo_react_buttons__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@progress/kendo-react-buttons/dist/es/Button.js"),_progress_kendo_react_dialogs__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./node_modules/@progress/kendo-react-dialogs/dist/es/Window.js"),_progress_kendo_react_layout__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./node_modules/@progress/kendo-react-layout/dist/es/tabstrip/TabStrip.js"),_progress_kendo_react_layout__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./node_modules/@progress/kendo-react-layout/dist/es/tabstrip/TabStripTab.js"),_progress_kendo_react_intl__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@progress/kendo-react-intl/dist/es/intlUtils.js"),_messages__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@progress/kendo-react-editor/dist/es/messages/index.js"),_config_toolsSettings__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@progress/kendo-react-editor/dist/es/config/toolsSettings.js"),_tools_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@progress/kendo-react-editor/dist/es/tools/utils.js"),_progress_kendo_editor_common__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@progress/kendo-editor-common/dist/es/main.js"),_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@progress/kendo-react-common/dist/es/icons/IconWrap.js"),_progress_kendo_react_inputs__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@progress/kendo-react-inputs/dist/es/checkbox/Checkbox.js"),_progress_kendo_react_inputs__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/@progress/kendo-react-inputs/dist/es/input/Input.js"),_progress_kendo_react_form__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@progress/kendo-react-form/dist/es/Form.js"),_progress_kendo_react_form__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@progress/kendo-react-form/dist/es/FormElement.js"),_progress_kendo_react_form__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@progress/kendo-react-form/dist/es/FieldWrapper.js"),_progress_kendo_svg_icons__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@progress/kendo-svg-icons/dist/index.es.js"),__extends=(extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)},function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__assign=function(){return __assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign.apply(this,arguments)},settings=_config_toolsSettings__WEBPACK_IMPORTED_MODULE_2__.w.findAndReplace,FindAndReplaceDialog=function(_super){function FindAndReplaceDialog(props){var _this=_super.call(this,props)||this;return _this.onTabSelect=function(event){_this.setState({selectedTab:event.selected})},_this.onClose=function(){var view=_this.props.view,state=view.state,transaction=state.tr.setSelection(_progress_kendo_editor_common__WEBPACK_IMPORTED_MODULE_1__.U3g.create(state.doc,state.selection.from,state.selection.to));view.updateState(state.apply(transaction)),view.focus(),_this.props.onClose.call(void 0)},_this.matchesMessage=function(locMessage){var matches=_this.state.matches,nextMatch=_this.state.nextMatch,cur=0,all=0;if(matches&&nextMatch){var current=matches.findIndex((function(s){return s.eq(nextMatch)}));cur=-1===current?matches.length:current+1,all=matches.length}return(0,_tools_utils__WEBPACK_IMPORTED_MODULE_3__.JT)(locMessage,cur,all)},_this.onFindNext=function(){_this.onFind()},_this.onFindPrev=function(){_this.onFind(!0)},_this.onFind=function(backward){void 0===backward&&(backward=!1);var view=_this.props.view,_a=_this.state,text=_a.searchText,matchCase=_a.matchCase,matchCyclic=_a.matchCyclic,searchOptions={text,matchWord:_a.matchWord,matchCase,useRegExp:_a.useRegExp,backward,matchCyclic},selectionResult=(0,_progress_kendo_editor_common__WEBPACK_IMPORTED_MODULE_1__.I6j)(view.state,searchOptions);if(selectionResult){var transaction=view.state.tr.setSelection(selectionResult);transaction.scrollIntoView(),view.updateState(view.state.apply(transaction)),_this.setState({nextMatch:selectionResult})}},_this.onReplace=function(){var view=_this.props.view,selection=view.state.selection,replaceText=_this.state.replaceText;if(!selection.empty){var start=selection.from,end=start+replaceText.length,transaction=(0,_progress_kendo_editor_common__WEBPACK_IMPORTED_MODULE_1__.HCR)(selection,replaceText,view.state.tr);transaction.setSelection(_progress_kendo_editor_common__WEBPACK_IMPORTED_MODULE_1__.U3g.create(transaction.doc,start,end)),transaction.scrollIntoView(),view.dispatch(transaction),_this.setNextState({})}},_this.onReplaceAll=function(){var view=_this.props.view,_a=_this.state,searchText=_a.searchText,replaceText=_a.replaceText,matchCase=_a.matchCase,searchOptions={text:searchText,matchWord:_a.matchWord,matchCase,useRegExp:_a.useRegExp},tr=(0,_progress_kendo_editor_common__WEBPACK_IMPORTED_MODULE_1__.yhl)(view.state,replaceText,searchOptions);tr&&view.dispatch(tr),_this.setNextState({})},_this.onKeyDown=function(event){13===event.keyCode?_this.onFindNext():27===event.keyCode&&_this.onClose()},_this.onMatchCaseChecked=function(e){return _this.setNextState({matchCase:e.value})},_this.onMatchWordChecked=function(e){return _this.setNextState({matchWord:e.value})},_this.onMatchCyclicChecked=function(e){return _this.setNextState({matchCyclic:e.value})},_this.onUseRegExpChecked=function(e){return _this.setNextState({useRegExp:e.value})},_this.onSearchChange=function(e){return _this.setNextState({searchText:e.target.value})},_this.onReplaceChange=function(e){return _this.setNextState({replaceText:e.target.value})},_this.setNextState=function(next){var nextState=__assign(__assign(__assign({},_this.state),next),{matches:void 0,nextMatch:void 0}),view=_this.props.view;if(nextState.searchText){var text=nextState.searchText,matchWord=nextState.matchWord,matchCase=nextState.matchCase,useRegExp=nextState.useRegExp,matchCyclic=nextState.matchCyclic,searchOptions={text,matchWord,matchCase,useRegExp},selection_1=view.state.selection,matches=(0,_progress_kendo_editor_common__WEBPACK_IMPORTED_MODULE_1__.JWU)(view.state.doc,searchOptions),nextMatch=!_this.state.searchText&&matches[0]||matches.find((function(match){return match.from>=selection_1.from}))||matchCyclic&&matches[0]||void 0;_this.setState(__assign(__assign({},nextState),{matches,nextMatch}))}else _this.setState(nextState)},_this.state={selectedTab:0,searchText:(0,_progress_kendo_editor_common__WEBPACK_IMPORTED_MODULE_1__.PY2)(props.view.state),replaceText:"",matchCase:!1,matchWord:!1,matchCyclic:!1,useRegExp:!1},_this}return __extends(FindAndReplaceDialog,_super),Object.defineProperty(FindAndReplaceDialog.prototype,"settings",{get:function(){return this.props.settings||settings},enumerable:!1,configurable:!0}),FindAndReplaceDialog.prototype.componentDidUpdate=function(_,prevState){var view=this.props.view,_a=this.state,_b=_a.matches,matches=void 0===_b?[]:_b,nextMatch=_a.nextMatch;if(prevState.nextMatch!==nextMatch){var state=view.state,tr=state.tr,highlights_1=[];matches.forEach((function(m){highlights_1.push({from:m.from,to:m.to,attrs:{class:nextMatch&&m.eq(nextMatch)?"k-text-selected":"k-text-highlighted"}})})),tr.setMeta(_progress_kendo_editor_common__WEBPACK_IMPORTED_MODULE_1__.FAO,highlights_1),tr.setSelection(nextMatch||_progress_kendo_editor_common__WEBPACK_IMPORTED_MODULE_1__.U3g.create(state.doc,state.selection.from)),view.dispatch(tr)}},FindAndReplaceDialog.prototype.render=function(){var _this=this,localization=(0,_progress_kendo_react_intl__WEBPACK_IMPORTED_MODULE_4__.GB)(this),_a=this.settings.messages,findReplaceDialogTitle=_a.findReplaceDialogTitle,findReplaceTabFind=_a.findReplaceTabFind,findReplaceTabReplace=_a.findReplaceTabReplace,findReplaceFindWhat=_a.findReplaceFindWhat,findReplaceReplaceWith=_a.findReplaceReplaceWith,findReplaceReplace=_a.findReplaceReplace,findReplaceReplaceAll=_a.findReplaceReplaceAll,findReplaceMatchCase=_a.findReplaceMatchCase,findReplaceMatchWord=_a.findReplaceMatchWord,findReplaceMatchCyclic=_a.findReplaceMatchCyclic,findReplaceUseRegExp=_a.findReplaceUseRegExp,findReplacePrevMatch=_a.findReplacePrevMatch,findReplaceNextMatch=_a.findReplaceNextMatch,findReplaceMatches=_a.findReplaceMatches,_b=this.state,matchCase=_b.matchCase,matchWord=_b.matchWord,matchCyclic=_b.matchCyclic,useRegExp=_b.useRegExp,searchText=_b.searchText,replaceText=_b.replaceText,nextMatch=_b.nextMatch,checkboxes=react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"k-search-options"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_progress_kendo_react_inputs__WEBPACK_IMPORTED_MODULE_5__.S,{id:"match-case",checked:matchCase,onChange:this.onMatchCaseChecked}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("label",{htmlFor:"match-case",className:"k-checkbox-label"},localization.toLanguageString(findReplaceMatchCase,_messages__WEBPACK_IMPORTED_MODULE_6__.D[findReplaceMatchCase]))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_progress_kendo_react_inputs__WEBPACK_IMPORTED_MODULE_5__.S,{id:"match-whole",checked:matchWord,onChange:this.onMatchWordChecked}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("label",{htmlFor:"match-whole",className:"k-checkbox-label"},localization.toLanguageString(findReplaceMatchWord,_messages__WEBPACK_IMPORTED_MODULE_6__.D[findReplaceMatchWord]))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_progress_kendo_react_inputs__WEBPACK_IMPORTED_MODULE_5__.S,{id:"match-cyclic",checked:matchCyclic,onChange:this.onMatchCyclicChecked}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("label",{htmlFor:"match-cyclic",className:"k-checkbox-label"},localization.toLanguageString(findReplaceMatchCyclic,_messages__WEBPACK_IMPORTED_MODULE_6__.D[findReplaceMatchCyclic]))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_progress_kendo_react_inputs__WEBPACK_IMPORTED_MODULE_5__.S,{id:"regular-expression",checked:useRegExp,onChange:this.onUseRegExpChecked}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("label",{htmlFor:"regular-expression",className:"k-checkbox-label"},localization.toLanguageString(findReplaceUseRegExp,_messages__WEBPACK_IMPORTED_MODULE_6__.D[findReplaceUseRegExp])))),navigation=react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"k-matches-container"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_progress_kendo_react_buttons__WEBPACK_IMPORTED_MODULE_7__.$,{fillMode:"flat",themeColor:"primary",onClick:this.onFindPrev},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_8__.Q,{name:"chevron-left",icon:_progress_kendo_svg_icons__WEBPACK_IMPORTED_MODULE_9__.chevronLeftIcon}),localization.toLanguageString(findReplacePrevMatch,_messages__WEBPACK_IMPORTED_MODULE_6__.D[findReplacePrevMatch])),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,this.matchesMessage(localization.toLanguageString(findReplaceMatches,_messages__WEBPACK_IMPORTED_MODULE_6__.D[findReplaceMatches]))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_progress_kendo_react_buttons__WEBPACK_IMPORTED_MODULE_7__.$,{fillMode:"flat",themeColor:"primary",onClick:this.onFindNext},localization.toLanguageString(findReplaceNextMatch,_messages__WEBPACK_IMPORTED_MODULE_6__.D[findReplaceNextMatch]),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_8__.Q,{name:"chevron-right",icon:_progress_kendo_svg_icons__WEBPACK_IMPORTED_MODULE_9__.chevronRightIcon}))),findWhat=react__WEBPACK_IMPORTED_MODULE_0__.createElement(_progress_kendo_react_form__WEBPACK_IMPORTED_MODULE_10__.l,{render:function(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_progress_kendo_react_form__WEBPACK_IMPORTED_MODULE_11__.Z,{horizontal:!0},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_progress_kendo_react_form__WEBPACK_IMPORTED_MODULE_12__.c,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("label",{htmlFor:"findWhat",className:"k-form-label"},localization.toLanguageString(findReplaceFindWhat,_messages__WEBPACK_IMPORTED_MODULE_6__.D[findReplaceFindWhat])),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"k-form-field-wrap"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_progress_kendo_react_inputs__WEBPACK_IMPORTED_MODULE_13__.pd,{id:"findWhat",type:"text",value:searchText,onChange:_this.onSearchChange,onFocus:_this.onSearchChange,onKeyDown:_this.onKeyDown,autoFocus:!0}))))}}),replaceWith=react__WEBPACK_IMPORTED_MODULE_0__.createElement(_progress_kendo_react_form__WEBPACK_IMPORTED_MODULE_10__.l,{render:function(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_progress_kendo_react_form__WEBPACK_IMPORTED_MODULE_11__.Z,{horizontal:!0},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_progress_kendo_react_form__WEBPACK_IMPORTED_MODULE_12__.c,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("label",{htmlFor:"replaceWith",className:"k-form-label"},localization.toLanguageString(findReplaceReplaceWith,_messages__WEBPACK_IMPORTED_MODULE_6__.D[findReplaceReplaceWith])),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"k-form-field-wrap"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_progress_kendo_react_inputs__WEBPACK_IMPORTED_MODULE_13__.pd,{id:"replaceWith",type:"text",value:replaceText,onChange:_this.onReplaceChange}))))}});return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_progress_kendo_react_dialogs__WEBPACK_IMPORTED_MODULE_14__.p,{title:localization.toLanguageString(findReplaceDialogTitle,_messages__WEBPACK_IMPORTED_MODULE_6__.D[findReplaceDialogTitle]),onClose:this.onClose,style:{width:"auto",height:"auto",userSelect:"none"},resizable:!1,minimizeButton:function(){return null},maximizeButton:function(){return null}},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_progress_kendo_react_layout__WEBPACK_IMPORTED_MODULE_15__.q,{selected:this.state.selectedTab,className:"k-editor-find-replace",onSelect:this.onTabSelect,animation:!1},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_progress_kendo_react_layout__WEBPACK_IMPORTED_MODULE_16__.T,{title:localization.toLanguageString(findReplaceTabFind,_messages__WEBPACK_IMPORTED_MODULE_6__.D[findReplaceTabFind])},findWhat,checkboxes,navigation),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_progress_kendo_react_layout__WEBPACK_IMPORTED_MODULE_16__.T,{title:localization.toLanguageString(findReplaceTabReplace,_messages__WEBPACK_IMPORTED_MODULE_6__.D[findReplaceTabReplace])},findWhat,replaceWith,react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"k-actions k-hstack k-justify-content-end"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_progress_kendo_react_buttons__WEBPACK_IMPORTED_MODULE_7__.$,{disabled:!Boolean(nextMatch),onClick:this.onReplace},localization.toLanguageString(findReplaceReplace,_messages__WEBPACK_IMPORTED_MODULE_6__.D[findReplaceReplace])),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_progress_kendo_react_buttons__WEBPACK_IMPORTED_MODULE_7__.$,{disabled:!Boolean(nextMatch),onClick:this.onReplaceAll},localization.toLanguageString(findReplaceReplaceAll,_messages__WEBPACK_IMPORTED_MODULE_6__.D[findReplaceReplaceAll]))),checkboxes,navigation)))},FindAndReplaceDialog}(react__WEBPACK_IMPORTED_MODULE_0__.Component);(0,_progress_kendo_react_intl__WEBPACK_IMPORTED_MODULE_4__.AK)(FindAndReplaceDialog)},"./node_modules/@progress/kendo-react-editor/dist/es/dialogs/main.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>EditorDialogs});var extendStatics,react=__webpack_require__("./node_modules/react/index.js"),react_namespaceObject=__webpack_require__.t(react,2),Window=__webpack_require__("./node_modules/@progress/kendo-react-dialogs/dist/es/Window.js"),WindowActionsBar=__webpack_require__("./node_modules/@progress/kendo-react-dialogs/dist/es/WindowActionsBar.js"),Button=__webpack_require__("./node_modules/@progress/kendo-react-buttons/dist/es/Button.js"),Input=__webpack_require__("./node_modules/@progress/kendo-react-inputs/dist/es/input/Input.js"),Checkbox=__webpack_require__("./node_modules/@progress/kendo-react-inputs/dist/es/checkbox/Checkbox.js"),Form=__webpack_require__("./node_modules/@progress/kendo-react-form/dist/es/Form.js"),FormElement=__webpack_require__("./node_modules/@progress/kendo-react-form/dist/es/FormElement.js"),FieldWrapper=__webpack_require__("./node_modules/@progress/kendo-react-form/dist/es/FieldWrapper.js"),main=__webpack_require__("./node_modules/@progress/kendo-editor-common/dist/es/main.js"),intlUtils=__webpack_require__("./node_modules/@progress/kendo-react-intl/dist/es/intlUtils.js"),messages=__webpack_require__("./node_modules/@progress/kendo-react-editor/dist/es/messages/index.js"),__extends=(extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)},function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__spreadArray=function(to,from,pack){if(pack||2===arguments.length)for(var ar,i=0,l=from.length;i<l;i++)!ar&&i in from||(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},insertLink_InsertLinkDialog=function(_super){function InsertLinkDialog(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.href=null,_this.title=null,_this.target=null,_this.onClose=function(){_this.props.view.focus(),_this.props.onClose()},_this.onInsert=function(){var view=_this.props.view,mark=_this.props.settings.mark,attrs={href:_this.href?_this.href.value:void 0,title:_this.title?_this.title.value:void 0,target:_this.target&&_this.target.element&&_this.target.element.checked?"_blank":void 0};(0,main.jUY)({mark,attrs},_this.props.settings.commandName)(view.state,view.dispatch),_this.onClose()},_this}return __extends(InsertLinkDialog,_super),InsertLinkDialog.prototype.render=function(){var _this=this,_a=this.props,view=_a.view,settings=_a.settings,dir=_a.dir,render=_a.render,localization=(0,intlUtils.GB)(this),_b=settings.messages,insertHyperlinkDialogTitle=_b.insertHyperlinkDialogTitle,insertHyperlinkAddress=_b.insertHyperlinkAddress,insertHyperlinkTitle=_b.insertHyperlinkTitle,insertHyperlinkNewWindow=_b.insertHyperlinkNewWindow,insertHyperlinkCancel=_b.insertHyperlinkCancel,insertHyperlinkInsert=_b.insertHyperlinkInsert,linkMark=!!view&&(0,main.ut7)(view.state,view.state.schema.marks[settings.mark]),content=react.createElement(Form.l,{render:function(){return react.createElement(FormElement.Z,{horizontal:!0},react.createElement(FieldWrapper.c,null,react.createElement("label",{htmlFor:"k-editor-link-url",className:"k-form-label"},localization.toLanguageString(insertHyperlinkAddress,messages.D[insertHyperlinkAddress])),react.createElement("div",{className:"k-form-field-wrap"},react.createElement(Input.pd,{type:"text",id:"k-editor-link-url",ref:function(e){return _this.href=e},defaultValue:linkMark&&linkMark.attrs.href||void 0,autoFocus:!0}))),react.createElement(FieldWrapper.c,null,react.createElement("label",{htmlFor:"k-editor-link-text",className:"k-form-label"},localization.toLanguageString(insertHyperlinkTitle,messages.D[insertHyperlinkTitle])),react.createElement("div",{className:"k-form-field-wrap"},react.createElement(Input.pd,{type:"text",id:"k-editor-link-text",ref:function(e){return _this.title=e},defaultValue:linkMark&&linkMark.attrs.title||void 0}))),!1!==settings.linkTarget&&react.createElement(FieldWrapper.c,null,react.createElement("label",{htmlFor:"k-editor-link-target",className:"k-checkbox-label"},react.createElement(Checkbox.S,{id:"k-editor-link-target",ref:function(e){return _this.target=e},defaultChecked:linkMark&&!!linkMark.attrs.target||void 0}),localization.toLanguageString(insertHyperlinkNewWindow,messages.D[insertHyperlinkNewWindow]))))}}),actionButtons=[react.createElement(Button.$,{onClick:this.onClose,dir,key:"cancel"},localization.toLanguageString(insertHyperlinkCancel,messages.D[insertHyperlinkCancel])),react.createElement(Button.$,{onClick:this.onInsert,themeColor:"primary",dir,key:"insert"},localization.toLanguageString(insertHyperlinkInsert,messages.D[insertHyperlinkInsert]))],dialog=react.createElement(Window.p,{initialWidth:450,initialHeight:250,className:"k-editor-window",title:localization.toLanguageString(insertHyperlinkDialogTitle,messages.D[insertHyperlinkDialogTitle]),onClose:this.onClose,style:"rtl"===dir?{textAlign:"right"}:void 0,modal:!0,minimizeButton:function(){return null},maximizeButton:function(){return null},resizable:!1},content,react.createElement.apply(react_namespaceObject,__spreadArray([WindowActionsBar.l,null],actionButtons,!1)));return render?render(dialog,{content,actionButtons}):dialog},InsertLinkDialog}(react.Component);(0,intlUtils.AK)(insertLink_InsertLinkDialog);var insertImage_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),insertImage_spreadArray=function(to,from,pack){if(pack||2===arguments.length)for(var ar,i=0,l=from.length;i<l;i++)!ar&&i in from||(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},insertImage_InsertImageDialog=function(_super){function InsertImageDialog(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.src=null,_this.altText=null,_this.title=null,_this.width=null,_this.height=null,_this.onClose=function(){_this.props.view.focus(),_this.props.onClose()},_this.onInsert=function(){var _a=_this.props,view=_a.view,settings=_a.settings,nodeType=view.state.schema.nodes[settings.node],data={src:_this.src?_this.src.value:null,title:_this.title?_this.title.value:null,alt:_this.altText?_this.altText.value:null,width:_this.width?_this.width.value:null,height:_this.height?_this.height.value:null},attrs=Object.keys(data).filter((function(key){return null!==data[key]&&""!==data[key]})).reduce((function(acc,curr){var _a;return Object.assign(acc,((_a={})[curr]=data[curr],_a))}),{}),newImage=nodeType.createAndFill(attrs);newImage&&(0,main.onD)(newImage,!0)(view.state,(function(tr){return view.dispatch(tr.setMeta("commandName",settings.commandName).setMeta("args",attrs))}));_this.onClose()},_this}return insertImage_extends(InsertImageDialog,_super),InsertImageDialog.prototype.render=function(){var _this=this,_a=this.props,view=_a.view,settings=_a.settings,dir=_a.dir,render=_a.render,_b=settings.messages,insertImageDialogTitle=_b.insertImageDialogTitle,insertImageAddress=_b.insertImageAddress,insertImageTitle=_b.insertImageTitle,insertImageAltText=_b.insertImageAltText,insertImageWidth=_b.insertImageWidth,insertImageHeight=_b.insertImageHeight,insertImageCancel=_b.insertImageCancel,insertImageInsert=_b.insertImageInsert,localization=(0,intlUtils.GB)(this),state=view&&view.state,attrs={};state&&state.selection instanceof main.nhb&&state.selection.node.type===state.schema.nodes[settings.node]&&(attrs=state.selection.node.attrs);var content=react.createElement(Form.l,{render:function(){return react.createElement(FormElement.Z,{horizontal:!0},react.createElement(FieldWrapper.c,null,react.createElement("label",{htmlFor:"k-editor-image-url",className:"k-form-label"},localization.toLanguageString(insertImageAddress,messages.D[insertImageAddress])),react.createElement("div",{className:"k-form-field-wrap"},react.createElement(Input.pd,{type:"text",id:"k-editor-image-url",defaultValue:attrs.src,ref:function(e){return _this.src=e},autoFocus:!0}))),react.createElement(FieldWrapper.c,null,react.createElement("label",{htmlFor:"k-editor-image-url",className:"k-form-label"},localization.toLanguageString(insertImageAltText,messages.D[insertImageAltText])),react.createElement("div",{className:"k-form-field-wrap"},react.createElement(Input.pd,{type:"text",id:"k-editor-image-alt",defaultValue:attrs.alt,ref:function(e){return _this.altText=e}}))),react.createElement(FieldWrapper.c,null,react.createElement("label",{htmlFor:"k-editor-image-title",className:"k-form-label"},localization.toLanguageString(insertImageTitle,messages.D[insertImageTitle])),react.createElement("div",{className:"k-form-field-wrap"},react.createElement(Input.pd,{type:"text",id:"k-editor-image-title",defaultValue:attrs.title,ref:function(e){return _this.title=e}}))),react.createElement(FieldWrapper.c,null,react.createElement("label",{htmlFor:"k-editor-image-width",className:"k-form-label"},localization.toLanguageString(insertImageWidth,messages.D[insertImageWidth])),react.createElement("div",{className:"k-form-field-wrap"},react.createElement(Input.pd,{type:"text",id:"k-editor-image-width",defaultValue:attrs.width,ref:function(e){return _this.width=e}}))),react.createElement(FieldWrapper.c,null,react.createElement("label",{htmlFor:"k-editor-image-height",className:"k-form-label"},localization.toLanguageString(insertImageHeight,messages.D[insertImageHeight])),react.createElement("div",{className:"k-form-field-wrap"},react.createElement(Input.pd,{id:"k-editor-image-height",defaultValue:attrs.height,ref:function(e){return _this.height=e}}))))}}),actionButtons=[react.createElement(Button.$,{onClick:this.onClose,dir,key:"cancel"},localization.toLanguageString(insertImageCancel,messages.D[insertImageCancel])),react.createElement(Button.$,{onClick:this.onInsert,themeColor:"primary",dir,key:"insert"},localization.toLanguageString(insertImageInsert,messages.D[insertImageInsert]))],dialog=react.createElement(Window.p,{initialWidth:500,initialHeight:350,className:"k-editor-window",title:localization.toLanguageString(insertImageDialogTitle,messages.D[insertImageDialogTitle]),onClose:this.onClose,key:"dialog",style:"rtl"===dir?{textAlign:"right"}:void 0,modal:!0,minimizeButton:function(){return null},maximizeButton:function(){return null},resizable:!1},content,react.createElement.apply(react_namespaceObject,insertImage_spreadArray([WindowActionsBar.l,null],actionButtons,!1)));return render?render(dialog,{content,actionButtons}):dialog},InsertImageDialog}(react.Component);(0,intlUtils.AK)(insertImage_InsertImageDialog);var props_key=__webpack_require__("./node_modules/@progress/kendo-react-editor/dist/es/utils/props-key.js"),TextArea=__webpack_require__("./node_modules/@progress/kendo-react-inputs/dist/es/textarea/TextArea.js"),viewHtml_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),viewHtml_spreadArray=function(to,from,pack){if(pack||2===arguments.length)for(var ar,i=0,l=from.length;i<l;i++)!ar&&i in from||(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},viewHtml_ViewHtmlDialog=function(_super){function ViewHtmlDialog(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.htmlArea=null,_this.textAreaRef=function(area){_this.htmlArea=area;var htmlArea=area&&area.element.current;htmlArea&&(htmlArea.style.resize="none")},_this.onUpdate=function(){var _a=_this.props,view=_a.view,settings=_a.settings,html=(0,main.maF)(_this.htmlArea&&_this.htmlArea.value||""),preserveWhitespace=props_key.F.getState(view.state).preserveWhitespace;(0,main.gE9)(html,settings.commandName,{preserveWhitespace})(view.state,view.dispatch),_this.onClose()},_this.onClose=function(){_this.props.view.focus(),_this.props.onClose()},_this}return viewHtml_extends(ViewHtmlDialog,_super),ViewHtmlDialog.prototype.render=function(){var _a=this.props,view=_a.view,settings=_a.settings,dir=_a.dir,render=_a.render,localization=(0,intlUtils.GB)(this),_b=settings.messages,viewHtmlDialogTitle=_b.viewHtmlDialogTitle,viewHtmlCancel=_b.viewHtmlCancel,viewHtmlUpdate=_b.viewHtmlUpdate,content=react.createElement(TextArea.f,{className:"k-editor-textarea",defaultValue:(0,main.mPn)((0,main.uNC)(view.state)),autoFocus:!0,autoSize:!1,ref:this.textAreaRef}),actionButtons=[react.createElement(Button.$,{onClick:this.onClose,dir,key:"cancel"},localization.toLanguageString(viewHtmlCancel,messages.D[viewHtmlCancel])),react.createElement(Button.$,{onClick:this.onUpdate,themeColor:"primary",dir,key:"update"},localization.toLanguageString(viewHtmlUpdate,messages.D[viewHtmlUpdate]))],dialog=react.createElement(Window.p,{className:"k-editor-window",title:localization.toLanguageString(viewHtmlDialogTitle,messages.D[viewHtmlDialogTitle]),onClose:this.onClose,key:"dialog",style:"rtl"===dir?{textAlign:"right"}:void 0,modal:!0,minimizeButton:function(){return null},maximizeButton:function(){return null},resizable:!0,initialHeight:400,initialWidth:500},content,react.createElement.apply(react_namespaceObject,viewHtml_spreadArray([WindowActionsBar.l,null],actionButtons,!1)));return render?render(dialog,{content,actionButtons}):dialog},ViewHtmlDialog}(react.Component);(0,intlUtils.AK)(viewHtml_ViewHtmlDialog);var EditorDialogs,FindReplace=__webpack_require__("./node_modules/@progress/kendo-react-editor/dist/es/dialogs/FindReplace.js"),main_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();!function(EditorDialogs){var InsertLinkDialog=function(_super){function InsertLinkDialog(){return null!==_super&&_super.apply(this,arguments)||this}return main_extends(InsertLinkDialog,_super),InsertLinkDialog}(insertLink_InsertLinkDialog);EditorDialogs.InsertLinkDialog=InsertLinkDialog;var InsertImageDialog=function(_super){function InsertImageDialog(){return null!==_super&&_super.apply(this,arguments)||this}return main_extends(InsertImageDialog,_super),InsertImageDialog}(insertImage_InsertImageDialog);EditorDialogs.InsertImageDialog=InsertImageDialog;var ViewHtmlDialog=function(_super){function ViewHtmlDialog(){return null!==_super&&_super.apply(this,arguments)||this}return main_extends(ViewHtmlDialog,_super),ViewHtmlDialog}(viewHtml_ViewHtmlDialog);EditorDialogs.ViewHtmlDialog=ViewHtmlDialog;var FindAndReplaceDialog=function(_super){function FindAndReplaceDialog(){return null!==_super&&_super.apply(this,arguments)||this}return main_extends(FindAndReplaceDialog,_super),FindAndReplaceDialog}(FindReplace.H);EditorDialogs.FindAndReplaceDialog=FindAndReplaceDialog}(EditorDialogs||(EditorDialogs={}))},"./node_modules/@progress/kendo-react-editor/dist/es/messages/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var _a;__webpack_require__.d(__webpack_exports__,{D:()=>messages,H:()=>keys});var pdf="editor.pdf",messages=((_a={})["editor.bold"]="Bold",_a["editor.italic"]="Italic",_a["editor.underline"]="Underline",_a["editor.strikethrough"]="Strikethrough",_a["editor.subscript"]="Subscript",_a["editor.superscript"]="Superscript",_a["editor.unlink"]="Remove hyperlink",_a["editor.undo"]="Undo",_a["editor.redo"]="Redo",_a["editor.fontSize"]="Font Size",_a["editor.fontName"]="Font Name",_a["editor.format"]="Format",_a["editor.alignLeft"]="Align text left",_a["editor.alignRight"]="Align text right",_a["editor.alignCenter"]="Center text",_a["editor.alignJustify"]="Justify",_a["editor.indent"]="Indent",_a["editor.outdent"]="Outdent",_a["editor.orderedList"]="Insert ordered list",_a["editor.bulletList"]="Insert unordered list",_a["editor.print"]="Print",_a["editor.selectAll"]="Select All",_a["editor.cleanFormatting"]="Clean formatting",_a[pdf]="Export as PDF",_a["editor.foregroundColor"]="Color",_a["editor.backgroundColor"]="Background color",_a["editor.createTable"]="Create a table",_a["editor.insertTableHint"]="Create a {0} x {1} table",_a["editor.addRowBefore"]="Add row above",_a["editor.addRowAfter"]="Add row below",_a["editor.addColumnBefore"]="Add column on the left",_a["editor.addColumnAfter"]="Add column on the right",_a["editor.deleteRow"]="Delete row",_a["editor.deleteColumn"]="Delete column",_a["editor.deleteTable"]="Delete table",_a["editor.mergeCells"]="Merge cells",_a["editor.splitCell"]="Split cell",_a["editor.hyperlink"]="Insert hyperlink",_a["editor.hyperlink-dialog-title"]="Insert hyperlink",_a["editor.hyperlink-dialog-content-address"]="Web address",_a["editor.hyperlink-dialog-content-title"]="Title",_a["editor.hyperlink-dialog-content-newwindow"]="Open link in new window",_a["editor.hyperlink-dialog-cancel"]="Cancel",_a["editor.hyperlink-dialog-insert"]="Insert",_a["editor.insertFile"]="Insert file",_a["editor.insertfile-dialog-title"]="Insert file",_a["editor.insertfile-dialog-content-address"]="Web address",_a["editor.insertfile-dialog-content-title"]="Title",_a["editor.insertfile-dialog-cancel"]="Cancel",_a["editor.insertfile-dialog-insert"]="Insert",_a["editor.image"]="Insert image",_a["editor.image-dialog-title"]="Insert image",_a["editor.image-address"]="Web address",_a["editor.image-title"]="Title",_a["editor.image-altText"]="Alternate text",_a["editor.image-width"]="Width (px)",_a["editor.image-height"]="Height (px)",_a["editor.image-cancel"]="Cancel",_a["editor.image-insert"]="Insert",_a["editor.viewHtml"]="View HTML",_a["editor.viewHtml-dialog-title"]="View HTML",_a["editor.viewHtml-cancel"]="Cancel",_a["editor.viewHtml-update"]="Update",_a["editor.findReplace-tool-title"]="Find and Replace",_a["editor.findReplace-dialog-title"]="Find and Replace",_a["editor.findReplace-tab-find"]="Find",_a["editor.findReplace-tab-replace"]="Replace",_a["editor.findReplace-findWhat"]="Find What:",_a["editor.findReplace-replaceWith"]="Replace With",_a["editor.findReplace-replace"]="Replace",_a["editor.findReplace-replaceAll"]="Replace All",_a["editor.findReplace-matchCase"]="Match Case",_a["editor.findReplace-matchWord"]="Match whole word only",_a["editor.findReplace-matchCyclic"]="Match cyclic (Wrap around)",_a["editor.findReplace-useRegExp"]="Regular Expression",_a["editor.findReplace-prevMatch"]="Prev",_a["editor.findReplace-nextMatch"]="Next",_a["editor.findReplace-matches"]="{0} of {1} matches",_a["editor.iframeTitle"]="Editable area. Press Alt + F10 for toolbar.",_a["editorTools.foreColorLabel"]="Fore Color",_a["editorTools.backColorLabel"]="Back Color",_a["editor.cellProperties"]="Cell properties",_a["editor.cellPropertiesLeftTop"]="Left Top",_a["editor.cellPropertiesCenterTop"]="Center Top",_a["editor.cellPropertiesRightTop"]="Right Top",_a["editor.cellPropertiesLeftMiddle"]="Left Middle",_a["editor.cellPropertiesCenterMiddle"]="Center Middle",_a["editor.cellPropertiesRightMiddle"]="Right Middle",_a["editor.cellPropertiesLeftBottom"]="Left Bottom",_a["editor.cellPropertiesCenterBottom"]="Center Bottom",_a["editor.cellPropertiesRightBottom"]="Right Bottom",_a["editor.cellPropertiesNoAlignment"]="No Alignment",_a["editor.cellPropertiesWrap"]="Wrap",_a["editor.cellPropertiesFitToCell"]="Fit to cell",_a["editor.cellPropertiesApplyToAllCells"]="Apply to all cells",_a["editor.cellPropertiesWidth"]="Width",_a["editor.cellPropertiesApplyToColumn"]="apply to column",_a["editor.cellPropertiesHeight"]="Height",_a["editor.cellPropertiesApplyToRow"]="apply to row",_a["editor.cellPropertiesAlignment"]="Alignment",_a["editor.cellPropertiesTextControl"]="Text control",_a["editor.cellPropertiesCellPadding"]="Cell padding",_a["editor.cellPropertiesBackground"]="Background",_a["editor.cellPropertiesBorderWidth"]="Border width",_a["editor.cellPropertiesBorderColor"]="Border color",_a["editor.cellPropertiesBorderStyle"]="Border style",_a["editor.cellPropertiesId"]="ID",_a["editor.cellPropertiesCssClass"]="CSS class",_a["editor.cellPropertiesSave"]="Save",_a["editor.cellPropertiesCancel"]="Cancel",_a["editor.tableProperties"]="Table properties",_a["editor.tablePropertiesAlignLeft"]="Align Left",_a["editor.tablePropertiesAlignCenter"]="Align Center",_a["editor.tablePropertiesAlignRight"]="Align Right",_a["editor.tablePropertiesNoAlignment"]="No Alignment",_a["editor.tablePropertiesLeft"]="Left",_a["editor.tablePropertiesCenter"]="Center",_a["editor.tablePropertiesRight"]="Right",_a["editor.tablePropertiesTop"]="Top",_a["editor.tablePropertiesBottom"]="Bottom",_a["editor.tablePropertiesNone"]="None",_a["editor.tablePropertiesUsingScopeAttribute"]="Using 'scope' attribute",_a["editor.tablePropertiesUsingIdAttributes"]="Using 'id' attributes",_a["editor.tablePropertiesRows"]="Rows",_a["editor.tablePropertiesColumns"]="Columns",_a["editor.tablePropertiesWidth"]="Width",_a["editor.tablePropertiesHeight"]="Height",_a["editor.tablePropertiesPosition"]="Position",_a["editor.tablePropertiesAlignment"]="Alignment",_a["editor.tablePropertiesCellSpacing"]="Cell spacing",_a["editor.tablePropertiesCellPadding"]="Cell padding",_a["editor.tablePropertiesTableBackground"]="Table background",_a["editor.tablePropertiesBorderWidth"]="Border width",_a["editor.tablePropertiesBorderColor"]="Border color",_a["editor.tablePropertiesBorderStyle"]="Border style",_a["editor.tablePropertiesCollapseBorders"]="Collapse borders",_a["editor.tablePropertiesID"]="ID",_a["editor.tablePropertiesCssClass"]="CSS class",_a["editor.tablePropertiesAccessibility"]="Accessibility",_a["editor.tablePropertiesCaption"]="Caption",_a["editor.tablePropertiesCaptionPosition"]="Position",_a["editor.tablePropertiesCaptionAlignment"]="Alignment",_a["editor.tablePropertiesHeaderRows"]="Header rows",_a["editor.tablePropertiesHeaderCols"]="Header cols",_a["editor.tablePropertiesAssociateHeaders"]="Associate headers",_a["editor.tablePropertiesGeneral"]="General",_a["editor.tablePropertiesAdvanced"]="Advanced",_a["editor.tablePropertiesSave"]="Save",_a["editor.tablePropertiesCancel"]="Cancel",_a["editor.borderStyleNone"]="None",_a["editor.borderStyleSolid"]="Solid",_a["editor.borderStyleDotted"]="Dotted",_a["editor.borderStyleDashed"]="Dashed",_a["editor.borderStyleDouble"]="Double",_a["editor.borderStyleGroove"]="Groove",_a["editor.borderStyleRidge"]="Ridge",_a["editor.borderStyleInset"]="Inset",_a["editor.borderStyleOutset"]="Outset",_a["editor.borderStyleInitial"]="Initial",_a["editor.borderStyleInherit"]="Inherit",_a["editor.borderStyleHidden"]="Hidden",_a["editor.sizeAuto"]="Auto",_a),keys={bold:"editor.bold",italic:"editor.italic",underline:"editor.underline",strikethrough:"editor.strikethrough",subscript:"editor.subscript",superscript:"editor.superscript",unlink:"editor.unlink",undo:"editor.undo",redo:"editor.redo",fontSize:"editor.fontSize",fontName:"editor.fontName",format:"editor.format",alignLeft:"editor.alignLeft",alignRight:"editor.alignRight",alignCenter:"editor.alignCenter",alignJustify:"editor.alignJustify",indent:"editor.indent",outdent:"editor.outdent",orderedList:"editor.orderedList",bulletList:"editor.bulletList",print:"editor.print",selectAll:"editor.selectAll",cleanFormatting:"editor.cleanFormatting",pdf,foregroundColor:"editor.foregroundColor",backgroundColor:"editor.backgroundColor",createTable:"editor.createTable",createTableHint:"editor.insertTableHint",addRowBefore:"editor.addRowBefore",addRowAfter:"editor.addRowAfter",addColumnBefore:"editor.addColumnBefore",addColumnAfter:"editor.addColumnAfter",deleteRow:"editor.deleteRow",deleteColumn:"editor.deleteColumn",deleteTable:"editor.deleteTable",mergeCells:"editor.mergeCells",splitCell:"editor.splitCell",insertHyperlink:"editor.hyperlink",insertHyperlinkDialogTitle:"editor.hyperlink-dialog-title",insertHyperlinkAddress:"editor.hyperlink-dialog-content-address",insertHyperlinkTitle:"editor.hyperlink-dialog-content-title",insertHyperlinkNewWindow:"editor.hyperlink-dialog-content-newwindow",insertHyperlinkCancel:"editor.hyperlink-dialog-cancel",insertHyperlinkInsert:"editor.hyperlink-dialog-insert",insertFile:"editor.insertFile",insertFileDialogTitle:"editor.insertfile-dialog-title",insertFileAddress:"editor.insertfile-dialog-content-address",insertFileTitle:"editor.insertfile-dialog-content-title",insertFileCancel:"editor.insertfile-dialog-cancel",insertFileInsert:"editor.insertfile-dialog-insert",insertImage:"editor.image",insertImageDialogTitle:"editor.image-dialog-title",insertImageAddress:"editor.image-address",insertImageTitle:"editor.image-title",insertImageAltText:"editor.image-altText",insertImageWidth:"editor.image-width",insertImageHeight:"editor.image-height",insertImageCancel:"editor.image-cancel",insertImageInsert:"editor.image-insert",viewHtml:"editor.viewHtml",viewHtmlDialogTitle:"editor.viewHtml-dialog-title",viewHtmlCancel:"editor.viewHtml-cancel",viewHtmlUpdate:"editor.viewHtml-update",findReplaceToolTitle:"editor.findReplace-tool-title",findReplaceDialogTitle:"editor.findReplace-dialog-title",findReplaceTabFind:"editor.findReplace-tab-find",findReplaceTabReplace:"editor.findReplace-tab-replace",findReplaceFindWhat:"editor.findReplace-findWhat",findReplaceReplaceWith:"editor.findReplace-replaceWith",findReplaceReplace:"editor.findReplace-replace",findReplaceReplaceAll:"editor.findReplace-replaceAll",findReplaceMatchCase:"editor.findReplace-matchCase",findReplaceMatchWord:"editor.findReplace-matchWord",findReplaceMatchCyclic:"editor.findReplace-matchCyclic",findReplaceUseRegExp:"editor.findReplace-useRegExp",findReplacePrevMatch:"editor.findReplace-prevMatch",findReplaceNextMatch:"editor.findReplace-nextMatch",findReplaceMatches:"editor.findReplace-matches",iframeTitle:"editor.iframeTitle",foreColorLabel:"editorTools.foreColorLabel",backColorLabel:"editorTools.backColorLabel",cellProperties:"editor.cellProperties",cellPropertiesLeftTop:"editor.cellPropertiesLeftTop",cellPropertiesCenterTop:"editor.cellPropertiesCenterTop",cellPropertiesRightTop:"editor.cellPropertiesRightTop",cellPropertiesLeftMiddle:"editor.cellPropertiesLeftMiddle",cellPropertiesCenterMiddle:"editor.cellPropertiesCenterMiddle",cellPropertiesRightMiddle:"editor.cellPropertiesRightMiddle",cellPropertiesLeftBottom:"editor.cellPropertiesLeftBottom",cellPropertiesCenterBottom:"editor.cellPropertiesCenterBottom",cellPropertiesRightBottom:"editor.cellPropertiesRightBottom",cellPropertiesNoAlignment:"editor.cellPropertiesNoAlignment",cellPropertiesWrap:"editor.cellPropertiesWrap",cellPropertiesFitToCell:"editor.cellPropertiesFitToCell",cellPropertiesApplyToAllCells:"editor.cellPropertiesApplyToAllCells",cellPropertiesWidth:"editor.cellPropertiesWidth",cellPropertiesApplyToColumn:"editor.cellPropertiesApplyToColumn",cellPropertiesHeight:"editor.cellPropertiesHeight",cellPropertiesApplyToRow:"editor.cellPropertiesApplyToRow",cellPropertiesAlignment:"editor.cellPropertiesAlignment",cellPropertiesTextControl:"editor.cellPropertiesTextControl",cellPropertiesCellPadding:"editor.cellPropertiesCellPadding",cellPropertiesBackground:"editor.cellPropertiesBackground",cellPropertiesBorderWidth:"editor.cellPropertiesBorderWidth",cellPropertiesBorderColor:"editor.cellPropertiesBorderColor",cellPropertiesBorderStyle:"editor.cellPropertiesBorderStyle",cellPropertiesId:"editor.cellPropertiesId",cellPropertiesCssClass:"editor.cellPropertiesCssClass",cellPropertiesSave:"editor.cellPropertiesSave",cellPropertiesCancel:"editor.cellPropertiesCancel",tableProperties:"editor.tableProperties",tablePropertiesAlignLeft:"editor.tablePropertiesAlignLeft",tablePropertiesAlignCenter:"editor.tablePropertiesAlignCenter",tablePropertiesAlignRight:"editor.tablePropertiesAlignRight",tablePropertiesNoAlignment:"editor.tablePropertiesNoAlignment",tablePropertiesLeft:"editor.tablePropertiesLeft",tablePropertiesCenter:"editor.tablePropertiesCenter",tablePropertiesRight:"editor.tablePropertiesRight",tablePropertiesTop:"editor.tablePropertiesTop",tablePropertiesBottom:"editor.tablePropertiesBottom",tablePropertiesNone:"editor.tablePropertiesNone",tablePropertiesUsingScopeAttribute:"editor.tablePropertiesUsingScopeAttribute",tablePropertiesUsingIdAttributes:"editor.tablePropertiesUsingIdAttributes",tablePropertiesRows:"editor.tablePropertiesRows",tablePropertiesColumns:"editor.tablePropertiesColumns",tablePropertiesWidth:"editor.tablePropertiesWidth",tablePropertiesHeight:"editor.tablePropertiesHeight",tablePropertiesPosition:"editor.tablePropertiesPosition",tablePropertiesAlignment:"editor.tablePropertiesAlignment",tablePropertiesCellSpacing:"editor.tablePropertiesCellSpacing",tablePropertiesCellPadding:"editor.tablePropertiesCellPadding",tablePropertiesTableBackground:"editor.tablePropertiesTableBackground",tablePropertiesBorderWidth:"editor.tablePropertiesBorderWidth",tablePropertiesBorderColor:"editor.tablePropertiesBorderColor",tablePropertiesBorderStyle:"editor.tablePropertiesBorderStyle",tablePropertiesCollapseBorders:"editor.tablePropertiesCollapseBorders",tablePropertiesId:"editor.tablePropertiesID",tablePropertiesCssClass:"editor.tablePropertiesCssClass",tablePropertiesAccessibility:"editor.tablePropertiesAccessibility",tablePropertiesCaption:"editor.tablePropertiesCaption",tablePropertiesCaptionPosition:"editor.tablePropertiesCaptionPosition",tablePropertiesCaptionAlignment:"editor.tablePropertiesCaptionAlignment",tablePropertiesHeaderRows:"editor.tablePropertiesHeaderRows",tablePropertiesHeaderCols:"editor.tablePropertiesHeaderCols",tablePropertiesAssociateHeaders:"editor.tablePropertiesAssociateHeaders",tablePropertiesGeneral:"editor.tablePropertiesGeneral",tablePropertiesAdvanced:"editor.tablePropertiesAdvanced",tablePropertiesSave:"editor.tablePropertiesSave",tablePropertiesCancel:"editor.tablePropertiesCancel",borderStyleNone:"editor.borderStyleNone",borderStyleSolid:"editor.borderStyleSolid",borderStyleDotted:"editor.borderStyleDotted",borderStyleDashed:"editor.borderStyleDashed",borderStyleDouble:"editor.borderStyleDouble",borderStyleGroove:"editor.borderStyleGroove",borderStyleRidge:"editor.borderStyleRidge",borderStyleInset:"editor.borderStyleInset",borderStyleOutset:"editor.borderStyleOutset",borderStyleInitial:"editor.borderStyleInitial",borderStyleInherit:"editor.borderStyleInherit",borderStyleHidden:"editor.borderStyleHidden",sizeAuto:"editor.sizeAuto"}},"./node_modules/@progress/kendo-react-editor/dist/es/tools/main.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{t:()=>EditorTools});var extendStatics,react=__webpack_require__("./node_modules/react/index.js"),react_namespaceObject=__webpack_require__.t(react,2),toolsSettings=__webpack_require__("./node_modules/@progress/kendo-react-editor/dist/es/config/toolsSettings.js"),Button=__webpack_require__("./node_modules/@progress/kendo-react-buttons/dist/es/Button.js"),utils=__webpack_require__("./node_modules/@progress/kendo-react-editor/dist/es/tools/utils.js"),intlUtils=__webpack_require__("./node_modules/@progress/kendo-react-intl/dist/es/intlUtils.js"),messages=__webpack_require__("./node_modules/@progress/kendo-react-editor/dist/es/messages/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),Popup=__webpack_require__("./node_modules/@progress/kendo-react-popup/dist/es/Popup.js"),__extends=(extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)},function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});const popupGrid=function(_super){function PopupGrid(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.state={row:-1,col:-1},_this}return __extends(PopupGrid,_super),PopupGrid.prototype.renderCell=function(index,selRow,selCol){var _this=this,row=Math.floor(index/this.props.columns),col=index%this.props.columns,selected=col<=selCol&&row<=selRow;return react.createElement("span",{className:"k-ct-cell k-disabled"+(selected?" ".concat("k-selected"):""),onMouseEnter:function(){return _this.setState({row,col})},onClick:function(){return _this.props.onCellClick.call(void 0,row,col)},key:index})},PopupGrid.prototype.render=function(){var _this=this,cells=[],total=this.props.columns*this.props.rows,_a=this.state,row=_a.row,col=_a.col,onDown=this.props.onDown,message=this.props.createTableMessage;col>-1&&(message=(0,utils.JT)(this.props.createTableHintMessage,row+1,col+1));for(var i=0;i<total;i++)cells.push(this.renderCell(i,row,col));return[react.createElement("div",{onMouseLeave:function(){return _this.setState({row:-1,col:-1})},key:"cells",style:{borderColor:"inherit"},onPointerDown:onDown,onMouseDown:onDown},cells),react.createElement("div",{className:"k-status",key:"status",onPointerDown:onDown,onMouseDown:onDown},message)]},PopupGrid}(react.Component);var InsertTablePopupNS,popup_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();!function(InsertTablePopupNS){var InsertTablePopup=function(_super){function InsertTablePopup(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.pointerdown=!1,_this.onWindowDown=function(event){var anchor=_this.props.anchor;(!anchor||anchor!==event.target&&anchor.firstElementChild!==event.target)&&(_this.props.show&&!_this.pointerdown&&_this.props.onClose(),_this.pointerdown=!1)},_this.onPointerDown=function(){return _this.pointerdown=!0},_this}return popup_extends(InsertTablePopup,_super),InsertTablePopup.prototype.componentDidUpdate=function(prevProps){prevProps.show&&this.props.show&&this.props.onClose()},InsertTablePopup.prototype.componentDidMount=function(){window.addEventListener("mousedown",this.onWindowDown),window.addEventListener("pointerdown",this.onWindowDown)},InsertTablePopup.prototype.componentWillUnmount=function(){window.removeEventListener("mousedown",this.onWindowDown),window.removeEventListener("pointerdown",this.onWindowDown)},InsertTablePopup.prototype.render=function(){var _a=this.props,show=_a.show,anchor=_a.anchor,dir=_a.dir,_b=_a.rows,rows=void 0===_b?InsertTablePopup.defaultProps.rows:_b,_c=_a.columns,columns=void 0===_c?InsertTablePopup.defaultProps.columns:_c,horizontal="rtl"===dir?"right":"left";return react.createElement(Popup.z,{anchor,anchorAlign:{horizontal,vertical:"bottom"},popupAlign:{horizontal,vertical:"top"},popupClass:"k-ct-popup k-group k-reset k-state-border-up",show,style:"rtl"===dir?{direction:"rtl"}:void 0},react.createElement(popupGrid,{rows,columns,createTableMessage:this.props.createTableMessage,createTableHintMessage:this.props.createTableHintMessage,onCellClick:this.props.onTableInsert,onDown:this.onPointerDown}))},InsertTablePopup.propTypes={show:prop_types.bool.isRequired,createTableMessage:prop_types.string.isRequired,createTableHintMessage:prop_types.string.isRequired,onClose:prop_types.func.isRequired,onTableInsert:prop_types.func.isRequired,anchor:prop_types.any,rows:prop_types.number,columns:prop_types.number,dir:prop_types.string},InsertTablePopup.defaultProps={rows:6,columns:8},InsertTablePopup}(react.Component);InsertTablePopupNS.InsertTablePopup=InsertTablePopup}(InsertTablePopupNS||(InsertTablePopupNS={}));var InsertTableToolNS,main=__webpack_require__("./node_modules/@progress/kendo-editor-common/dist/es/main.js"),classNames=__webpack_require__("./node_modules/@progress/kendo-react-common/dist/es/classNames.js"),tool_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign=function(){return __assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign.apply(this,arguments)},__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};!function(InsertTableToolNS){InsertTableToolNS.createInsertTableTool=function(settings){var Tool=function(_super){function InsertTableTool(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.state={openedPopup:!1},_this.button=null,_this.togglePopup=function(){_this.setState({openedPopup:!_this.state.openedPopup})},_this.closePopup=function(){_this.state.openedPopup&&_this.togglePopup()},_this.onTableInsert=function(row,col){var view=_this.props.view;if(view){var _a=view.state.schema.nodes,table=_a.table,table_row=_a.table_row,table_cell=_a.table_cell,newTable=(0,main.ZRK)({table,table_row,table_cell},row,col);newTable&&(0,main.onD)(newTable,!0)(view.state,view.dispatch),view.focus(),_this.closePopup()}},_this}return tool_extends(InsertTableTool,_super),InsertTableTool.prototype.render=function(){var _this=this,_a=this.props,view=_a.view,render=_a.render,props=__rest(_a,["view","render"]),state=view&&view.state,localization=(0,intlUtils.GB)(this),_b=settings.messages,createTableMsgKey=_b.createTable,createTableHint=_b.createTableHint,createTableMsg=localization.toLanguageString(createTableMsgKey,messages.D[createTableMsgKey]),createTableHintMsg=localization.toLanguageString(createTableHint,messages.D[createTableHint]),disabled=Boolean(!state||!(0,main.cz2)(state,state.schema.nodes.table)||(0,utils.Bo)(state.selection.$from,(function(node){return"table_caption_external"===node.type.name}))),rendering=[react.createElement(Button.$,__assign({onClick:disabled?void 0:this.togglePopup,"aria-disabled":!!disabled||void 0,ref:function(e){return _this.button=e&&e.element},key:"InsertTable"},utils.Rn,{title:createTableMsg},settings.props,props,{className:(0,classNames.x)(props.className,settings.props.className,{"k-disabled":disabled})})),view&&!disabled&&react.createElement(InsertTablePopupNS.InsertTablePopup,{key:"insertTablePopup",createTableMessage:createTableMsg,createTableHintMessage:createTableHintMsg,dir:props.dir,anchor:this.button,show:this.state.openedPopup,onClose:this.closePopup,onTableInsert:this.onTableInsert})||null];return render?render.call(void 0,rendering,{view}):rendering},InsertTableTool}(react.Component);return(0,intlUtils.AK)(Tool),Tool}}(InsertTableToolNS||(InsertTableToolNS={}));var FontStyleToolNS,align_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),align_assign=function(){return align_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},align_assign.apply(this,arguments)},align_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t},alignRemove=toolsSettings.w.alignRemove,DropDownList=__webpack_require__("./node_modules/@progress/kendo-react-dropdowns/dist/es/DropDownList/DropDownList.js"),fontStyle_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),fontStyle_assign=function(){return fontStyle_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},fontStyle_assign.apply(this,arguments)},fontStyle_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};!function(FontStyleToolNS){FontStyleToolNS.createStyleDropDownList=function(settings){var Tool=function(_super){function DropDownListTool(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.onChange=function(event){var item=event.target.value,view=_this.props.view,style=settings.style;if(view){(0,main.fqb)({style,value:item.value},settings.commandName)(view.state,view.dispatch);var syntheticEvent=event.syntheticEvent;syntheticEvent&&"click"===syntheticEvent.type&&view.focus()}},_this}return fontStyle_extends(DropDownListTool,_super),DropDownListTool.prototype.render=function(){var style=settings.style,_a=this.props,view=_a.view,render=_a.render,data=_a.data,defaultItemProps=_a.defaultItem,ddlProps=fontStyle_rest(_a,["view","render","data","defaultItem"]),items=data||settings.items,defaultItem=defaultItemProps||settings.defaultItem,styles=view?(0,main.i8$)(view.state,{name:style,value:/^.+$/}):[],localization=(0,intlUtils.GB)(this);defaultItem&&defaultItem.localizationKey&&((defaultItem=fontStyle_assign({},defaultItem)).text=defaultItem.localizationKey?localization.toLanguageString(defaultItem.localizationKey,messages.D[defaultItem.localizationKey]):defaultItem.text);var value=1===new Set(styles).size?styles[0]:null,dropdown=react.createElement(DropDownList.O8,fontStyle_assign({value:value?items.find((function(i){return i.value===value})):value,data:items,defaultItem,itemRender:utils.uh,textField:"text",dataItemKey:"value",onChange:this.onChange,style:utils.gx,leftRightKeysNavigation:!1,title:defaultItem.text},ddlProps));return render?render.call(void 0,dropdown,{view}):dropdown},DropDownListTool}(react.Component);return(0,intlUtils.AK)(Tool),Tool}}(FontStyleToolNS||(FontStyleToolNS={}));var FormatBlockToolNS,ColorPicker=__webpack_require__("./node_modules/@progress/kendo-react-inputs/dist/es/colors/ColorPicker.js"),useLocalization=__webpack_require__("./node_modules/@progress/kendo-react-intl/dist/es/hooks/useLocalization.js"),applyColor_assign=function(){return applyColor_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},applyColor_assign.apply(this,arguments)},ApplyColorTool=function(props){var view=props.view,style=props.style,colorPickerProps=props.colorPickerProps,commandName=props.commandName,titleKey=colorPickerProps.title,ariaLabelKey=colorPickerProps.ariaLabel,_a=colorPickerProps.view,paletteView=void 0===_a?"palette":_a,onChange=react.useCallback((function(event){view&&((0,main.fqb)({style,value:event.value},commandName)(view.state,view.dispatch),"palette"===paletteView&&view.focus())}),[view,style,paletteView,commandName]);return react.createElement(ColorPicker.s,applyColor_assign({onChange,onActiveColorClick:onChange},colorPickerProps,{title:titleKey?(0,useLocalization.B)().toLanguageString(titleKey,messages.D[titleKey]):titleKey,ariaLabel:ariaLabelKey?(0,useLocalization.B)().toLanguageString(ariaLabelKey,messages.D[ariaLabelKey]):ariaLabelKey}))},formatBlock_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),formatBlock_assign=function(){return formatBlock_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},formatBlock_assign.apply(this,arguments)},formatBlock_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};!function(FormatBlockToolNS){FormatBlockToolNS.createFormatBlockDropDownList=function(settings){var Tool=function(_super){function FormatBlockDropDownList(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.onChange=function(event){var item=event.target.value,view=_this.props.view;if(view&&(0,main.EY$)(item.value,settings.commandName)(view.state,view.dispatch)){var syntheticEvent=event.syntheticEvent;syntheticEvent&&"click"===syntheticEvent.type&&view.focus()}},_this}return formatBlock_extends(FormatBlockDropDownList,_super),FormatBlockDropDownList.prototype.render=function(){var _a=this.props,view=_a.view,render=_a.render,data=_a.data,defaultItemProps=_a.defaultItem,ddlProps=formatBlock_rest(_a,["view","render","data","defaultItem"]),items=data||settings.items,defaultItem=defaultItemProps||settings.defaultItem,state=view&&view.state,formats=state?(0,main.am5)(state):[],localization=(0,intlUtils.GB)(this);defaultItem&&defaultItem.localizationKey&&((defaultItem=formatBlock_assign({},defaultItem)).text=defaultItem.localizationKey?localization.toLanguageString(defaultItem.localizationKey,messages.D[defaultItem.localizationKey]):defaultItem.text);var value=1===new Set(formats).size?formats[0]:null,dropdown=react.createElement(DropDownList.O8,formatBlock_assign({value:value?items.find((function(i){return i.value===value})):value,onChange:this.onChange,itemRender:utils.uh,data:items,defaultItem,textField:"text",dataItemKey:"value",style:utils.gx,leftRightKeysNavigation:!1,title:defaultItem.text},ddlProps));return render?render.call(void 0,dropdown,{view}):dropdown},FormatBlockDropDownList}(react.Component);return(0,intlUtils.AK)(Tool),Tool}}(FormatBlockToolNS||(FormatBlockToolNS={}));var HistoryToolNS,proseMirrorTool_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),proseMirrorTool_assign=function(){return proseMirrorTool_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},proseMirrorTool_assign.apply(this,arguments)},proseMirrorTool_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t},createProseMirrorTool=function(settings,command){var Tool=function(_super){function ProseMirrorTool(){return null!==_super&&_super.apply(this,arguments)||this}return proseMirrorTool_extends(ProseMirrorTool,_super),ProseMirrorTool.prototype.render=function(){var _a=this.props,view=_a.view,render=_a.render,buttonProps=proseMirrorTool_rest(_a,["view","render"]),localization=(0,intlUtils.GB)(this),titleKey=settings.messages.title,state=view&&view.state,disabled=!!state&&!command(state),button=react.createElement(Button.$,proseMirrorTool_assign({onClick:disabled?void 0:function(){return view&&command(view.state,(function(tr){return view.dispatch(tr.setMeta("commandName",settings.commandName))}))},"aria-disabled":!!disabled||void 0},utils.Rn,{title:localization.toLanguageString(titleKey,messages.D[titleKey])},settings.props,buttonProps,{className:(0,classNames.x)(buttonProps.className,settings.props.className,{"k-disabled":disabled})}));return render?render.call(void 0,button,{view}):button},ProseMirrorTool}(react.Component);return(0,intlUtils.AK)(Tool),Tool};!function(HistoryToolNS){HistoryToolNS.createUndoTool=function(settings){return createProseMirrorTool(settings,main.tNi)},HistoryToolNS.createRedoTool=function(settings){return createProseMirrorTool(settings,main.ZSj)}}(HistoryToolNS||(HistoryToolNS={}));var IndentToolNS,indent_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),indent_assign=function(){return indent_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},indent_assign.apply(this,arguments)},indent_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};!function(IndentToolNS){IndentToolNS.createIndentTool=function(settings){var Tool=function(_super){function IndentTool(){return null!==_super&&_super.apply(this,arguments)||this}return indent_extends(IndentTool,_super),IndentTool.prototype.render=function(){var _a=this.props,view=_a.view,render=_a.render,buttonProps=indent_rest(_a,["view","render"]),dir=buttonProps.dir,state=view&&view.state,nodes=state&&state.schema.nodes,listItem=nodes&&nodes[settings.listsTypes.listItem],actions=settings.actions,canIndented=!!state&&!!listItem&&((0,main.w0G)(state,actions,dir)||actions.some((function(a){return nodes&&nodes[a.node]&&(0,main.j4p)(state,nodes[a.node])})))&&!(0,main.j4p)(state,listItem),canListIndent=!!state&&(0,main.yOP)(state,listItem),canIndent=canIndented||canListIndent,localization=(0,intlUtils.GB)(this),titleKey=settings.messages.title,disabled=!canIndent,button=react.createElement(Button.$,indent_assign({onClick:disabled?void 0:function(){view&&canListIndent&&listItem?(0,main.$BU)(listItem)(view.state,view.dispatch):view&&canIndented&&(0,main.vNW)(actions,settings.commandName,dir)(view.state,view.dispatch)},"aria-disabled":!!disabled||void 0,title:localization.toLanguageString(titleKey,messages.D[titleKey])},utils.Rn,settings.props,buttonProps,{className:(0,classNames.x)(buttonProps.className,settings.props.className,{"k-disabled":disabled})}));return render?render.call(void 0,button,{view}):button},IndentTool}(react.Component);return(0,intlUtils.AK)(Tool),Tool}}(IndentToolNS||(IndentToolNS={}));var InlineFormatToolNS,inlineFormat_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),inlineFormat_assign=function(){return inlineFormat_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},inlineFormat_assign.apply(this,arguments)},inlineFormat_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};!function(InlineFormatToolNS){InlineFormatToolNS.createInlineFormatTool=function(settings){var Tool=function(_super){function InlineTool(){return null!==_super&&_super.apply(this,arguments)||this}return inlineFormat_extends(InlineTool,_super),InlineTool.prototype.render=function(){var _a=this.props,view=_a.view,render=_a.render,buttonProps=inlineFormat_rest(_a,["view","render"]),state=view&&view.state,options={mark:settings.mark,altMarks:settings.altMarks,altStyle:settings.altStyle},localization=(0,intlUtils.GB)(this),titleKey=settings.messages.title,button=react.createElement(Button.$,inlineFormat_assign({onClick:function(){return view&&(0,main.L4q)(options,state&&state.tr.setMeta("commandName",settings.commandName))(view.state,view.dispatch)},selected:!!state&&(0,main.mP6)(state,options),togglable:!0},utils.Rn,{title:localization.toLanguageString(titleKey,messages.D[titleKey])},settings.props,buttonProps));return render?render.call(void 0,button,{view}):button},InlineTool}(react.Component);return(0,intlUtils.AK)(Tool),Tool}}(InlineFormatToolNS||(InlineFormatToolNS={}));var LinkToolNS,dialogs_main=__webpack_require__("./node_modules/@progress/kendo-react-editor/dist/es/dialogs/main.js"),insertImage_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),insertImage_assign=function(){return insertImage_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},insertImage_assign.apply(this,arguments)},insertImage_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t},insertLink_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),insertLink_assign=function(){return insertLink_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},insertLink_assign.apply(this,arguments)},insertLink_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};!function(LinkToolNS){LinkToolNS.createLinkTool=function(settings){var Tool=function(_super){function LinkTool(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.state={openedDialog:!1},_this.toggleDialog=function(){_this.setState({openedDialog:!_this.state.openedDialog})},_this}return insertLink_extends(LinkTool,_super),LinkTool.prototype.render=function(){var _a=this.props,view=_a.view,render=_a.render,props=insertLink_rest(_a,["view","render"]),state=view&&view.state,collapsed=!state||state.selection.empty,linkMark=state&&(0,main.ut7)(state,state.schema.marks[settings.mark]),localization=(0,intlUtils.GB)(this),insertHyperlink=settings.messages.insertHyperlink,disabled=collapsed&&!linkMark,rendering=[react.createElement(Button.$,insertLink_assign({onClick:disabled?void 0:this.toggleDialog,"aria-disabled":!!disabled||void 0,key:"link"},utils.Rn,{title:localization.toLanguageString(insertHyperlink,messages.D[insertHyperlink])},settings.props,props,{className:(0,classNames.x)(props.className,settings.props.className,{"k-disabled":disabled})})),this.state.openedDialog&&view&&react.createElement(dialogs_main.H.InsertLinkDialog,{key:"insertLinkDialog",settings,dir:props.dir,view,onClose:this.toggleDialog})||null];return render?render.call(void 0,rendering,{view}):rendering},LinkTool}(react.Component);return(0,intlUtils.AK)(Tool),Tool}}(LinkToolNS||(LinkToolNS={}));var ListToolNS,lists_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),lists_assign=function(){return lists_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},lists_assign.apply(this,arguments)},lists_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};!function(ListToolNS){ListToolNS.createListTool=function(settings){var Tool=function(_super){function ListTool(){return null!==_super&&_super.apply(this,arguments)||this}return lists_extends(ListTool,_super),ListTool.prototype.render=function(){var _a=this.props,view=_a.view,render=_a.render,buttonProps=lists_rest(_a,["view","render"]),isActive=!1,localization=(0,intlUtils.GB)(this),titleKey=settings.messages.title,types=settings.types,listType=settings.listType;if(view){var state=view.state,nodes=state.schema.nodes,hasOl=(0,main.j4p)(state,nodes[types.orderedList]),hasUl=(0,main.j4p)(state,nodes[types.bulletList]);isActive=listType===types.orderedList?hasOl&&!hasUl:!hasOl&&hasUl}var button=react.createElement(Button.$,lists_assign({onClick:function(){return view&&(0,main.vvv)(view.state,view.dispatch,view,lists_assign({listType},types),settings.commandName)},togglable:!0,selected:isActive,title:localization.toLanguageString(titleKey,messages.D[titleKey])},utils.Rn,settings.props,buttonProps));return render?render.call(void 0,button,{view}):button},ListTool}(react.Component);return(0,intlUtils.AK)(Tool),Tool}}(ListToolNS||(ListToolNS={}));var OutdentToolNS,outdent_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),outdent_assign=function(){return outdent_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},outdent_assign.apply(this,arguments)},outdent_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};!function(OutdentToolNS){OutdentToolNS.createOutdentTool=function(settings){var Tool=function(_super){function OutdentTool(){return null!==_super&&_super.apply(this,arguments)||this}return outdent_extends(OutdentTool,_super),OutdentTool.prototype.render=function(){var _a=this.props,view=_a.view,render=_a.render,buttonProps=outdent_rest(_a,["view","render"]),state=view&&view.state,dir=buttonProps.dir,indented=!!state&&(0,main.w0G)(state,settings.actions,dir),listItem=state&&state.schema.nodes[settings.listsTypes.listItem],canListOutdent=!!state&&(0,main.V0W)(state,{nodes:settings.actions,listsTypes:settings.listsTypes}),canOutdent=indented||canListOutdent,localization=(0,intlUtils.GB)(this),titleKey=settings.messages.title,disabled=!canOutdent,button=react.createElement(Button.$,outdent_assign({onClick:disabled?void 0:function(){view&&canListOutdent&&listItem?(0,main.T2x)(listItem)(view.state,view.dispatch):view&&indented&&(0,main.vNW)(settings.actions,settings.commandName,dir)(view.state,view.dispatch)},"aria-disabled":!!disabled||void 0,title:localization.toLanguageString(titleKey,messages.D[titleKey])},utils.Rn,settings.props,buttonProps,{className:(0,classNames.x)(buttonProps.className,settings.props.className,{"k-disabled":disabled})}));return render?render.call(void 0,button,{view}):button},OutdentTool}(react.Component);return(0,intlUtils.AK)(Tool),Tool}}(OutdentToolNS||(OutdentToolNS={}));var TableEditNS,deleteColumnCmd=function(state,dispatch){var result=(0,main.gRK)(state,dispatch);if(result&&!dispatch){var pos=(0,main.t6n)(state),row=pos&&pos.node(pos.depth);if(row&&1===row.content.childCount)return!1}return result},deleteRowCmd=function(state,dispatch){var result=(0,main.aRg)(state,dispatch);if(result&&!dispatch){var pos=(0,main.t6n)(state),rowParent=pos&&pos.node(pos.depth-1);if(rowParent&&1===rowParent.content.childCount)return!1}return result};!function(TableEditNS){TableEditNS.createAddRowBeforeTool=function(settings){return createProseMirrorTool(settings,main.JDY)},TableEditNS.createAddRowAfterTool=function(settings){return createProseMirrorTool(settings,main.gC5)},TableEditNS.createAddColumnBeforeTool=function(settings){return createProseMirrorTool(settings,main.RC6)},TableEditNS.createAddColumnAfterTool=function(settings){return createProseMirrorTool(settings,main.GUe)},TableEditNS.createDeleteRowTool=function(settings){return createProseMirrorTool(settings,deleteRowCmd)},TableEditNS.createDeleteColumnTool=function(settings){return createProseMirrorTool(settings,deleteColumnCmd)},TableEditNS.createDeleteTableTool=function(settings){return createProseMirrorTool(settings,main.kGE)},TableEditNS.createMergeCellsTool=function(settings){return createProseMirrorTool(settings,main.w7X)},TableEditNS.createSplitCellTool=function(settings){return createProseMirrorTool(settings,main.L09)}}(TableEditNS||(TableEditNS={}));var UnlinkToolNS,unlink_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),unlink_assign=function(){return unlink_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},unlink_assign.apply(this,arguments)},unlink_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};!function(UnlinkToolNS){UnlinkToolNS.createUnlinkTool=function(settings){var Tool=function(_super){function UnlinkTool(){return null!==_super&&_super.apply(this,arguments)||this}return unlink_extends(UnlinkTool,_super),UnlinkTool.prototype.render=function(){var _a=this.props,view=_a.view,render=_a.render,buttonProps=unlink_rest(_a,["view","render"]),options={mark:settings.mark},hasLink=!!view&&(0,main.mP6)(view.state,options),localization=(0,intlUtils.GB)(this),titleKey=settings.messages.title,disabled=!hasLink,button=react.createElement(Button.$,unlink_assign({onClick:disabled?void 0:function(){return view&&(0,main.vL5)(options,view.state.tr.setMeta("commandName",settings.commandName))(view.state,view.dispatch)},"aria-disabled":!!disabled||void 0},utils.Rn,{title:localization.toLanguageString(titleKey,messages.D[titleKey])},settings.props,buttonProps,{className:(0,classNames.x)(buttonProps.className,settings.props.className,{"k-disabled":disabled})}));return render?render.call(void 0,button,{view}):button},UnlinkTool}(react.Component);return(0,intlUtils.AK)(Tool),Tool}}(UnlinkToolNS||(UnlinkToolNS={}));var ViewHtmlToolNS,viewHtml_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),viewHtml_assign=function(){return viewHtml_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},viewHtml_assign.apply(this,arguments)},viewHtml_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};!function(ViewHtmlToolNS){ViewHtmlToolNS.createViewHtmlTool=function(settings){var Tool=function(_super){function ViewHtmlTool(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.state={openedDialog:!1},_this.toggleDialog=function(){_this.setState({openedDialog:!_this.state.openedDialog})},_this}return viewHtml_extends(ViewHtmlTool,_super),ViewHtmlTool.prototype.render=function(){var _a=this.props,view=_a.view,render=_a.render,buttonProps=viewHtml_rest(_a,["view","render"]),localization=(0,intlUtils.GB)(this),titleKey=settings.messages.viewHtml,rendering=[react.createElement(Button.$,viewHtml_assign({onClick:this.toggleDialog,key:"viewHtml"},utils.Rn,{title:localization.toLanguageString(titleKey,messages.D[titleKey])},settings.props,buttonProps)),this.state.openedDialog&&view&&react.createElement(dialogs_main.H.ViewHtmlDialog,{key:"viewHtmlDialog",view,settings,dir:buttonProps.dir,onClose:this.toggleDialog})||null];return render?render.call(void 0,rendering,{view}):rendering},ViewHtmlTool}(react.Component);return(0,intlUtils.AK)(Tool),Tool}}(ViewHtmlToolNS||(ViewHtmlToolNS={}));var print_assign=function(){return print_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},print_assign.apply(this,arguments)},print_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t},print=toolsSettings.w.print,Print=function(props){var view=props.view,render=props.render,_a=props.settings,settings=void 0===_a?print:_a,buttonProps=print_rest(props,["view","render","settings"]),dom=view&&view.dom,doc=dom&&dom.ownerDocument,editorWindow=doc&&doc.defaultView,titleKey=settings.messages.title,disabled=!editorWindow||editorWindow===window,onClick=react.useCallback((function(){editorWindow&&editorWindow.print()}),[editorWindow]),button=react.createElement(Button.$,print_assign({onClick:disabled?void 0:onClick,"aria-disabled":!!disabled||void 0,title:(0,useLocalization.B)().toLanguageString(titleKey,messages.D[titleKey])},utils.Rn,settings.props,buttonProps,{className:(0,classNames.x)(buttonProps.className,settings.props.className,{"k-disabled":disabled})}));return render?render.call(void 0,button,{view}):button},core=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/html/core.js"),create_promise=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/util/create-promise.js"),parse_color=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/common/color/parse-color.js"),pdf_core=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/pdf/core.js"),geometry_size=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/geometry/size.js"),shapes_group=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/shapes/group.js"),definition_id=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/util/definition-id.js"),constants=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/core/constants.js"),Pattern=function(Group){function Pattern(options){Group.call(this);var width=options.width,height=options.height;this._size=geometry_size.A.create([width,height]),this.id=(0,definition_id.A)()}Group&&(Pattern.__proto__=Group),Pattern.prototype=Object.create(Group&&Group.prototype),Pattern.prototype.constructor=Pattern;var prototypeAccessors={nodeType:{configurable:!0}};return prototypeAccessors.nodeType.get=function(){return constants.XF},Pattern.prototype.size=function size(value){return value?(this._size=geometry_size.A.create(value),this):this._size},Object.defineProperties(Pattern.prototype,prototypeAccessors),Pattern}(shapes_group.A);var gradients_gradient=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/gradients/gradient.js"),radial_gradient=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/gradients/radial-gradient.js"),path=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/shapes/path.js"),geometry_matrix=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/geometry/matrix.js"),rect=__webpack_require__("./node_modules/@progress/kendo-drawing/dist/es/geometry/rect.js"),TEXT_RENDERING_MODE=pdf_core.$1,DASH_PATTERNS={dash:[4],dashDot:[4,2,1,2],dot:[1,2],longDash:[8,2],longDashDot:[8,2,1,2],longDashDotDot:[8,2,1,2,1,2],solid:[]},LINE_CAP={butt:0,round:1,square:2},LINE_JOIN={miter:0,round:1,bevel:2};function render(group,callback){var fonts=[],images={},options=group.options;function getOption(name,defval,hash){return hash||(hash=options),hash.pdf&&null!=hash.pdf[name]?hash.pdf[name]:defval}var multiPage=getOption("multiPage"),imgDPI=getOption("imgDPI",300);pdf_core.r();var handlers={Image:function(element){var url=element.src(),size=element.bbox().size;if(imgDPI){var prev=images[url];size={width:Math.ceil(size.width*imgDPI/72),height:Math.ceil(size.height*imgDPI/72)},prev&&(size.width=Math.max(prev.width,size.width),size.height=Math.max(prev.height,size.height))}images[url]=size},Text:function(element){var style=pdf_core.Ar(element.options.font),url=pdf_core.r6(style);fonts.indexOf(url)<0&&fonts.push(url)}};function doIt(){if(!(--count>0)){var pdf=new pdf_core.yo({producer:getOption("producer"),title:getOption("title"),author:getOption("author"),subject:getOption("subject"),keywords:getOption("keywords"),creator:getOption("creator"),date:getOption("date"),autoPrint:getOption("autoPrint")});multiPage?group.children.forEach(drawPage):drawPage(group),callback(pdf.render(),pdf)}function drawPage(group){var options=group.options,tmp=function optimize(root){var changed,clipbox=!1,matrix=geometry_matrix.A.unit(),currentBox=null;do{changed=!1,root=opt(root)}while(root&&changed);return{root,bbox:currentBox};function change(newShape){return changed=!0,newShape}function visible(shape){return shape.visible()&&shape.opacity()>0&&(shouldDraw(shape.fill())||shouldDraw(shape.stroke()))}function optArray(a){for(var b=[],i=0;i<a.length;++i){var el=opt(a[i]);null!=el&&b.push(el)}return b}function withClipping(shape,f){var saveclipbox=clipbox,savematrix=matrix;shape.transform()&&(matrix=matrix.multiplyCopy(shape.transform().matrix()));var clip=shape.clip();clip&&"function"==typeof clip.bbox&&(clip=clip.bbox())&&(clip=clip.bbox(matrix),clipbox=clipbox?rect.A.intersect(clipbox,clip):clip);try{return f()}finally{clipbox=saveclipbox,matrix=savematrix}}function inClipbox(shape){if(null==clipbox)return!1;var box=shape.rawBBox();return box&&(box=box.bbox(matrix)),clipbox&&box&&(box=rect.A.intersect(box,clipbox)),box}function opt(shape){return withClipping(shape,(function(){if(!(shape instanceof shapes_group.A||shape instanceof path.P)){var box=inClipbox(shape);if(!box)return change(null);currentBox=currentBox?rect.A.union(currentBox,box):box}return dispatch({Path:function(shape){return 0!==shape.segments.length&&visible(shape)?shape:change(null)},MultiPath:function(shape){if(!visible(shape))return change(null);var el=new path.P(shape.options);return el.paths=optArray(shape.paths),0===el.paths.length?change(null):el},Circle:function(shape){return visible(shape)?shape:change(null)},Arc:function(shape){return visible(shape)?shape:change(null)},Text:function(shape){return/\S/.test(shape.content())&&visible(shape)?shape:change(null)},Image:function(shape){return shape.visible()&&shape.opacity()>0?shape:change(null)},Group:function(shape){if(!(shape.visible()&&shape.opacity()>0))return change(null);var el=new shapes_group.A(shape.options);return el.children=optArray(shape.children),el._pdfLink=shape._pdfLink,shape===root||0!==el.children.length||shape._pdfLink?el:change(null)},Rect:function(shape){return visible(shape)?shape:change(null)}},shape)}))}}(group),bbox=tmp.bbox;group=tmp.root;var paperSize=getOption("paperSize",getOption("paperSize","auto"),options),addMargin=!1;if("auto"==paperSize)if(bbox){var size=bbox.getSize();paperSize=[size.width,size.height],addMargin=!0;var origin=bbox.getOrigin();(tmp=new shapes_group.A).transform(new geometry_matrix.A(1,0,0,1,-origin.x,-origin.y)),tmp.append(group),group=tmp}else paperSize="A4";drawElement(group,pdf.addPage({paperSize,margin:getOption("margin",getOption("margin"),options),addMargin,landscape:getOption("landscape",getOption("landscape",!1),options)}),pdf)}}group.traverse((function(element){dispatch(handlers,element);var fill=element.fill&&element.fill();fill instanceof Pattern&&fill.traverse((function(child){dispatch(handlers,child)}))}));var count=2;pdf_core.rn(fonts,doIt),pdf_core.z6(images,doIt,{jpegQuality:getOption("jpegQuality",.92),keepPNG:getOption("keepPNG",!1)})}function toDataURL(group,callback){render(group,(function(data){callback("data:application/pdf;base64,"+data.base64())}))}function dispatch(handlers,element){var handler=handlers[element.nodeType];return handler?handler.call.apply(handler,arguments):element}function drawElement(element,page,pdf){element.options._pdfDebug&&page.comment("BEGIN: "+element.options._pdfDebug);var transform=element.transform(),opacity=element.opacity();if(page.save(),null!=opacity&&opacity<1&&page.setOpacity(opacity),function setStrokeOptions(element,page){var stroke=element.stroke&&element.stroke();if(!stroke)return;var color=stroke.color;if(color){if(null==(color=parseColor(color)))return;page.setStrokeColor(color.r,color.g,color.b),1!=color.a&&page.setStrokeOpacity(color.a)}var width=stroke.width;if(null!=width){if(0===width)return;page.setLineWidth(width)}var dashType=stroke.dashType;dashType&&page.setDashPattern(DASH_PATTERNS[dashType],0);var lineCap=stroke.lineCap;lineCap&&page.setLineCap(LINE_CAP[lineCap]);var lineJoin=stroke.lineJoin;lineJoin&&page.setLineJoin(LINE_JOIN[lineJoin]);var opacity=stroke.opacity;null!=opacity&&page.setStrokeOpacity(opacity)}(element,page),function setFillOptions(element,page){var fill=element.fill&&element.fill();if(!fill)return;if(fill instanceof gradients_gradient.A||fill instanceof Pattern)return;var color=fill.color;if(color){if(null==(color=parseColor(color)))return;page.setFillColor(color.r,color.g,color.b),1!=color.a&&page.setFillOpacity(color.a)}var opacity=fill.opacity;null!=opacity&&page.setFillOpacity(opacity)}(element,page),transform){var m=transform.matrix();page.transform(m.a,m.b,m.c,m.d,m.e,m.f)}!function setClipping(element,page,pdf){var clip=element.clip();clip&&(_drawPath(clip,page,pdf),page.clip())}(element,page,pdf),dispatch({Path:drawPath,MultiPath:drawMultiPath,Circle:drawing_drawCircle,Arc:drawArc,Text:drawText,Image:drawImage,Group:drawGroup,Rect:drawing_drawRect},element,page,pdf),page.restore(),element.options._pdfDebug&&page.comment("END: "+element.options._pdfDebug)}function shouldDraw(thing){return thing&&(thing instanceof gradients_gradient.A||thing instanceof Pattern||thing.color&&!/^(none|transparent)$/i.test(thing.color)&&(null==thing.width||thing.width>0)&&(null==thing.opacity||thing.opacity>0))}function maybeGradient(element,page,pdf,stroke){var fill=element.fill();if(fill instanceof gradients_gradient.A){stroke?page.clipStroke():page.clip();var start,end,isRadial=fill instanceof radial_gradient.A;isRadial?(start={x:fill.center().x,y:fill.center().y,r:0},end={x:fill.center().x,y:fill.center().y,r:fill.radius()}):(start={x:fill.start().x,y:fill.start().y},end={x:fill.end().x,y:fill.end().y});var stops=fill.stops.elements().map((function(stop){var offset=stop.offset();offset=/%$/.test(offset)?parseFloat(offset)/100:parseFloat(offset);var color=parseColor(stop.color());return color.a*=stop.opacity(),{offset,color}}));stops.unshift(stops[0]),stops.push(stops[stops.length-1]);var gradient={userSpace:fill.userSpace(),type:isRadial?"radial":"linear",start,end,stops},box=element.rawBBox(),tl=box.topLeft(),size=box.getSize();return box={left:tl.x,top:tl.y,width:size.width,height:size.height},page.gradient(gradient,box),!0}}function maybePattern(element,page,pdf,stroke){var fill=element.fill();if(fill instanceof Pattern){stroke?page.clipStroke():page.clip();var box=element.rawBBox(),tl=box.topLeft(),size=box.getSize(),strokeWidth=element.stroke()?element.stroke().width:0;return page.pattern(fill,{left:tl.x+strokeWidth/2,top:tl.y+strokeWidth/2,width:size.width-strokeWidth,height:size.height-strokeWidth},drawPattern),!0}}function maybeFillStroke(element,page,pdf){shouldDraw(element.fill())&&shouldDraw(element.stroke())?maybeGradient(element,page,0,!0)||maybePattern(element,page,0,!0)||page.fillStroke():shouldDraw(element.fill())?maybeGradient(element,page,0,!1)||maybePattern(element,page,0,!1)||page.fill():shouldDraw(element.stroke())?page.stroke():page.nop()}function _drawPath(element,page,pdf){var segments=element.segments;if(0!==segments.length&&!function maybeDrawRect(path,page){var segments=path.segments;if(4==segments.length&&path.options.closed){for(var a=[],i=0;i<segments.length;++i){if(segments[i].controlIn())return!1;a[i]=segments[i].anchor()}if(a[0].y==a[1].y&&a[1].x==a[2].x&&a[2].y==a[3].y&&a[3].x==a[0].x||a[0].x==a[1].x&&a[1].y==a[2].y&&a[2].x==a[3].x&&a[3].y==a[0].y)return page.rect(a[0].x,a[0].y,a[2].x-a[0].x,a[2].y-a[0].y),!0}}(element,page)){for(var prev,i=0;i<segments.length;++i){var seg=segments[i],anchor=seg.anchor();if(prev){var prevOut=prev.controlOut(),controlIn=seg.controlIn();prevOut&&controlIn?page.bezier(prevOut.x,prevOut.y,controlIn.x,controlIn.y,anchor.x,anchor.y):page.lineTo(anchor.x,anchor.y)}else page.moveTo(anchor.x,anchor.y);prev=seg}element.options.closed&&page.close()}}function drawPath(element,page,pdf){_drawPath(element,page),maybeFillStroke(element,page)}function drawMultiPath(element,page,pdf){for(var paths=element.paths,i=0;i<paths.length;++i)_drawPath(paths[i],page);maybeFillStroke(element,page)}function drawing_drawCircle(element,page,pdf){var g=element.geometry();page.circle(g.center.x,g.center.y,g.radius),maybeFillStroke(element,page)}function drawArc(element,page,pdf){var points=element.geometry().curvePoints();page.moveTo(points[0].x,points[0].y);for(var i=1;i<points.length;)page.bezier(points[i].x,points[i++].y,points[i].x,points[i++].y,points[i].x,points[i++].y);maybeFillStroke(element,page)}function drawText(element,page){var mode,style=pdf_core.Ar(element.options.font),pos=element._position;page.transform(1,0,0,-1,pos.x,pos.y+style.fontSize);var draw=function(renderMode){page.beginText(),page.setFont(pdf_core.r6(style),style.fontSize),page.setTextRenderingMode(renderMode),page.showText(element.content(),element._pdfRect?element._pdfRect.width():null)};element.fill()&&element.stroke()?(mode=TEXT_RENDERING_MODE.fillAndStroke,"stroke"===element.options.paintOrder&&(draw(TEXT_RENDERING_MODE.stroke),mode=TEXT_RENDERING_MODE.fill)):element.fill()?mode=TEXT_RENDERING_MODE.fill:element.stroke()&&(mode=TEXT_RENDERING_MODE.stroke),draw(mode),page.endText()}function drawPattern(pattern,page,pdf){for(var children=pattern.children,i=0;i<children.length;++i)drawElement(children[i],page,pdf)}function drawGroup(element,page,pdf){element._pdfLink&&page.addLink(element._pdfLink.url,element._pdfLink);for(var children=element.children,i=0;i<children.length;++i)drawElement(children[i],page,pdf)}function drawImage(element,page){var url=element.src();if(url){var rect=element.rect(),tl=rect.getOrigin(),sz=rect.getSize();page.transform(sz.width,0,0,-sz.height,tl.x,tl.y+sz.height),page.drawImage(url)}}function drawing_drawRect(element,page,pdf){var geometry=element.geometry(),ref=geometry.cornerRadius,rx=ref[0],ry=ref[1];0===rx&&0===ry?(page.rect(geometry.origin.x,geometry.origin.y,geometry.size.width,geometry.size.height),maybeFillStroke(element,page)):drawPath(path.w.fromRect(geometry,element.options),page)}function parseColor(value){var color=(0,parse_color.Ay)(value,!0);return color?color.toRGB():null}function exportPDF(group,options){var promise=(0,create_promise.A)();for(var i in options)"margin"==i&&group.options.pdf&&group.options.pdf._ignoreMargin||group.options.set("pdf."+i,options[i]);return toDataURL(group,promise.resolve),promise}var es_main=__webpack_require__("./node_modules/@progress/kendo-file-saver/dist/es/main.js"),server_browser=__webpack_require__("./node_modules/react-dom/server.browser.js"),KendoDrawingAdapter=function(){function KendoDrawingAdapter(drawDOM,exportPDF,saveAs,domElement,options){void 0===options&&(options={});var _this=this;this.drawDOM=drawDOM,this.exportPDF=exportPDF,this.saveAs=saveAs,this.domElement=domElement,this.options=options,this.convertPageTemplateToHtml=function(pageContext){var pageTemplateContent=server_browser.qV(react.createElement(_this.options.pageTemplate,{pageNum:pageContext.pageNum,totalPages:pageContext.totalPages}));return"<span>".concat(pageTemplateContent,"</span>")}}return KendoDrawingAdapter.prototype.savePDF=function(callback){var _this=this,savePromise=this.drawDOM(this.domElement,this.getDrawOptions()).then((function(group){return _this.exportPDF(group,_this.getPDFOptions())})).then((function(dataUri){return _this.saveAs(dataUri,_this.options.fileName||"export.pdf",_this.getSaveOptions())}));callback&&savePromise.then(callback,callback)},KendoDrawingAdapter.prototype.getDrawOptions=function(){return{avoidLinks:this.options.avoidLinks,forcePageBreak:this.options.forcePageBreak,keepTogether:this.options.keepTogether,margin:this.options.margin,paperSize:this.options.paperSize,landscape:this.options.landscape,repeatHeaders:this.options.repeatHeaders,scale:this.options.scale,template:this.options.pageTemplate&&this.convertPageTemplateToHtml}},KendoDrawingAdapter.prototype.getPDFOptions=function(){return{author:this.options.author,creator:this.options.creator||"KendoReact PDF Generator",date:this.options.date,imgDPI:this.options.imageResolution,keywords:this.options.keywords,landscape:this.options.landscape,margin:this.options.margin,multiPage:!0,paperSize:this.options.paperSize,producer:this.options.producer,subject:this.options.subject,title:this.options.title}},KendoDrawingAdapter.prototype.getSaveOptions=function(){return{forceProxy:this.options.forceProxy,proxyData:this.options.proxyData,proxyTarget:this.options.proxyTarget,proxyURL:this.options.proxyURL}},KendoDrawingAdapter}();const es_KendoDrawingAdapter=KendoDrawingAdapter;var pdf_assign=function(){return pdf_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},pdf_assign.apply(this,arguments)},pdf_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t},pdf=toolsSettings.w.pdf,defaultSavePdfOptions=toolsSettings.w.savePdfOptions,Pdf=function(props){var view=props.view,render=props.render,_a=props.settings,settings=void 0===_a?pdf:_a,savePdfOptions=props.savePdfOptions,savePdfCallback=props.savePdfCallback,buttonProps=pdf_rest(props,["view","render","settings","savePdfOptions","savePdfCallback"]),titleKey=settings.messages.title,onClick=react.useCallback((function(){view&&function savePDF(domElement,options,callback){void 0===options&&(options={}),new es_KendoDrawingAdapter(core.vr,exportPDF,es_main.U,domElement,options).savePDF(callback)}(view.dom,pdf_assign(pdf_assign({},defaultSavePdfOptions),savePdfOptions||{}),savePdfCallback)}),[view,savePdfOptions,savePdfCallback]),button=react.createElement(Button.$,pdf_assign({onClick,title:(0,useLocalization.B)().toLanguageString(titleKey,messages.D[titleKey])},utils.Rn,settings.props,buttonProps));return render?render.call(void 0,button,{view}):button},selectAll_assign=function(){return selectAll_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},selectAll_assign.apply(this,arguments)},selectAll_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t},selectAll=toolsSettings.w.selectAll,SelectAll=function(props){var view=props.view,render=props.render,_a=props.settings,settings=void 0===_a?selectAll:_a,buttonProps=selectAll_rest(props,["view","render","settings"]),titleKey=settings.messages.title,onClick=react.useCallback((function(){view&&((0,main.Ubm)(view.state,view.dispatch),view.focus())}),[view]),button=react.createElement(Button.$,selectAll_assign({onClick,title:(0,useLocalization.B)().toLanguageString(titleKey,messages.D[titleKey])},utils.Rn,settings.props,buttonProps));return render?render.call(void 0,button,{view}):button},cleanFormatting_assign=function(){return cleanFormatting_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},cleanFormatting_assign.apply(this,arguments)},cleanFormatting_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t},cleanFormatting=toolsSettings.w.cleanFormatting,command=(0,main.DNf)(),CleanFormatting=function(props){var view=props.view,render=props.render,_a=props.settings,settings=void 0===_a?cleanFormatting:_a,buttonProps=cleanFormatting_rest(props,["view","render","settings"]),titleKey=settings.messages.title,disabled=!view||!command(view.state),onClick=react.useCallback((function(){view&&command(view.state,(function(tr){tr.setMeta("commandName",settings.commandName),view.dispatch(tr)}))}),[view]),button=react.createElement(Button.$,cleanFormatting_assign({onClick:disabled?void 0:onClick,"aria-disabled":!!disabled||void 0,title:(0,useLocalization.B)().toLanguageString(titleKey,messages.D[titleKey])},utils.Rn,settings.props,buttonProps,{className:(0,classNames.x)(props.className,settings.props.className,{"k-disabled":disabled})}));return render?render.call(void 0,button,{view}):button},FindReplace=__webpack_require__("./node_modules/@progress/kendo-react-editor/dist/es/dialogs/FindReplace.js"),findReplace_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),findReplace_assign=function(){return findReplace_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},findReplace_assign.apply(this,arguments)},findReplace_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t},settings=toolsSettings.w.findAndReplace,findReplace_FindAndReplace=function(_super){function FindAndReplace(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.state={showDialog:!1},_this.onClose=function(){return _this.setState({showDialog:!1})},_this.onOpen=function(){return _this.setState({showDialog:!0})},_this}return findReplace_extends(FindAndReplace,_super),FindAndReplace.prototype.render=function(){var _a=this.props,view=_a.view,buttonProps=findReplace_rest(_a,["view"]),props=settings.props,localization=(0,intlUtils.GB)(this),titleKey=settings.messages.findReplaceToolTitle,disabled=!view;return[react.createElement(Button.$,findReplace_assign({onClick:disabled?void 0:this.onOpen,"aria-disabled":!!disabled||void 0},utils.Rn,{title:localization.toLanguageString(titleKey,messages.D[titleKey]),key:"tool"},props,buttonProps,{className:(0,classNames.x)(buttonProps.className,props.className,{"k-disabled":disabled})})),this.state.showDialog&&view&&react.createElement(FindReplace.H,{view,onClose:this.onClose,dir:buttonProps.dir,key:"dialog"})]},FindAndReplace}(react.Component);(0,intlUtils.AK)(findReplace_FindAndReplace);var SplitButton=__webpack_require__("./node_modules/@progress/kendo-react-buttons/dist/es/ListButton/SplitButton.js"),lists_styled_assign=function(){return lists_styled_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},lists_styled_assign.apply(this,arguments)},__spreadArray=function(to,from,pack){if(pack||2===arguments.length)for(var ar,i=0,l=from.length;i<l;i++)!ar&&i in from||(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},parentNode=function(state,nodeType){var _a=state.selection,from=_a.from,to=_a.to,result=null;return state.doc.nodesBetween(from,to,(function(node){return!(result=result||(node.type===nodeType?node:null))})),result},ListTool=function(props){var ol,ul,isActive=!1,view=props.view,types=toolsSettings.Z,listType=props.listType,localization=(0,useLocalization.B)(),items=__spreadArray([],props.items||[],!0);if(view){var state=view.state,nodes=state&&state.schema.nodes;ol=nodes&&parentNode(state,nodes[types.orderedList]),ul=nodes&&parentNode(state,nodes[types.bulletList]),isActive=Boolean(listType===types.orderedList?ol&&!ul:!ol&&ul)}if(isActive&&(ol||ul)){var listStyleType_1=(0,main.Of_)((ol||ul).attrs);items=items.map((function(item,index){return lists_styled_assign(lists_styled_assign({},item),{selected:listStyleType_1?item.style===listStyleType_1:0===index})}))}return react.createElement("span",{onMouseDown:function(e){e.preventDefault()}},react.createElement(SplitButton.f,{textField:"text",items,icon:props.icon,svgIcon:props.svgIcon,onButtonClick:function(_event){view&&((0,main.vvv)(view.state,view.dispatch,view,lists_styled_assign(lists_styled_assign({listType},types),{listAttrs:{}}),"InsertList"),view.focus())},onItemClick:function(event){if(view){var listAttrs=event.item.style?{style:"list-style-type: "+event.item.style+";"}:{},currentList=ol||ul;if(currentList&&(0,main.Of_)(currentList.attrs)!==event.item.style){var pos=view.state.selection.$head.posAtIndex(0,-2)-1;view.dispatch(view.state.tr.setNodeMarkup(pos,view.state.schema.nodes[listType],listAttrs))}else(0,main.vvv)(view.state,view.dispatch,view,lists_styled_assign(lists_styled_assign({listType},types),{listAttrs}),"InsertList");view.focus()}},buttonClass:isActive?"k-selected":void 0,title:void 0!==props.title?props.title:localization.toLanguageString(props.titleKey,messages.D[props.titleKey])}))},index_es=__webpack_require__("./node_modules/@progress/kendo-svg-icons/dist/index.es.js"),InputPrefix=__webpack_require__("./node_modules/@progress/kendo-react-inputs/dist/es/input/InputPrefix.js"),Checkbox=__webpack_require__("./node_modules/@progress/kendo-react-inputs/dist/es/checkbox/Checkbox.js"),NumericTextBox=__webpack_require__("./node_modules/@progress/kendo-react-inputs/dist/es/numerictextbox/NumericTextBox.js"),Textbox=__webpack_require__("./node_modules/@progress/kendo-react-inputs/dist/es/textbox/Textbox.js"),AutoComplete=__webpack_require__("./node_modules/@progress/kendo-react-dropdowns/dist/es/AutoComplete/AutoComplete.js"),Window=__webpack_require__("./node_modules/@progress/kendo-react-dialogs/dist/es/Window.js"),WindowActionsBar=__webpack_require__("./node_modules/@progress/kendo-react-dialogs/dist/es/WindowActionsBar.js"),IconWrap=__webpack_require__("./node_modules/@progress/kendo-react-common/dist/es/icons/IconWrap.js"),utils_assign=function(){return utils_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},utils_assign.apply(this,arguments)},reUnit=/[\D]+$/,getUnit=function(value){var unitsMatch=value.match(reUnit);return unitsMatch?unitsMatch[0]:""},nodeSize=function(node,style){var _a,_b,value=parseStyle((null===(_b=node.attrs)||void 0===_b?void 0:_b.style)||"")[style]||"";return(_a={})[style]=parseFloat(value)||null,_a[style+"Unit"]=getUnit(value),_a},parseStyle=function(styleText){return(styleText||"").split(/\s*;\s*/).filter(Boolean).map((function(s){var _a,nameValue=s.split(/\s*:\s*/);return(_a={})[nameValue[0]]=nameValue[1],_a})).reduce((function(acc,val){return utils_assign(utils_assign({},acc),val)}),{})},reAnyValue=/^.+$/;function setNodeStyle(nodeAttrs,styleType,value){var attrs;if(new RegExp("[^-]?"+styleType+":").test(nodeAttrs.style||"")){var style=function(styleText,newStyle){var styleToChange=newStyle.style,regExp=newStyle.value,newValue=newStyle.newValue;if(!styleText)return{changed:!1,style:null};var styles=styleText.split(/\s*;\s*/).filter((function(s){return Boolean(s)})),filtered=styles.filter((function(s){var nameValue=s.split(/\s*:\s*/);return!(nameValue[0].toLowerCase()===styleToChange&&regExp.test(nameValue[1]))}));return newValue&&filtered.push("".concat(styleToChange,": ").concat(newValue)),{style:filtered.join("; ")+(filtered.length?";":""),changed:Boolean(newValue)||filtered.length!==styles.length}}(nodeAttrs.style||"",{style:styleType,value:reAnyValue,newValue:value}).style;attrs=utils_assign(utils_assign({},nodeAttrs),{style})}else if(nodeAttrs.style){var st_1=parseStyle(nodeAttrs.style);st_1[styleType]=value,attrs=utils_assign(utils_assign({},nodeAttrs),{style:Object.keys(st_1).filter((function(s){return Boolean(st_1[s])})).reduce((function(acc,cur){return acc+cur+": "+st_1[cur]+"; "}),"").trim()})}else attrs=value?utils_assign(utils_assign({},nodeAttrs),{style:styleType+": "+value+";"}):utils_assign({},nodeAttrs);return attrs}var EditorTools,selectedCells=function(state){var startNodeTable=(0,utils.Bo)(state.selection.$from,(function(n){return"table"===n.type.name})),endNodeTable=(0,utils.Bo)(state.selection.$to,(function(n){return"table"===n.type.name}));return startNodeTable&&endNodeTable&&startNodeTable.depth===endNodeTable.depth&&startNodeTable.node.eq(endNodeTable.node)?function(state){var doc=state.doc,selection=state.selection,result=[];return selection.ranges.forEach((function(range){var from=range.$from.pos,to=range.$to.pos;doc.nodesBetween(from,to,(function(node,pos,_parent,_index){"table_cell"!==node.type.name&&"table_header"!==node.type.name||result.push({node,pos})}))})),result}(state).filter((function(_a){var pos=_a.pos,parentTable=(0,utils.Bo)(state.doc.resolve(pos),(function(n){return"table"===n.type.name}));return parentTable&&parentTable.depth===startNodeTable.depth&&startNodeTable.node.eq(parentTable.node)})):[]},tableCells=function(state){var cells=[];if(selectedCells(state).length){var $pos=state.selection.$from,parentTable=(0,utils.Bo)($pos,(function(n){return"table"===n.type.spec.tableRole}));if(null===parentTable)return cells;var tablePos_1=$pos.start(parentTable.depth),tableNode=parentTable.node,map=main.J3d.get(tableNode),doc_1=state.doc;map.map.forEach((function(m){var pos=m+tablePos_1;cells.push({pos,node:doc_1.nodeAt(pos)})}))}return cells},cellPropsUtils_assign=function(){return cellPropsUtils_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},cellPropsUtils_assign.apply(this,arguments)},cellsStyle=function(cells,style){var values=new Set,value="";return cells.forEach((function(cell){var _a;value=parseStyle((null===(_a=cell.node.attrs)||void 0===_a?void 0:_a.style)||"")[style]||"",values.add(value)})),1===values.size&&value?value:""},cellsProp=function(cells,prop){var values=new Set,value="";return cells.forEach((function(cell){value=(cell.node.attrs||{})[prop]||"",values.add(value)})),1===values.size&&value?value:""},initialCellData={applyToAll:!1,cellWidth:null,widthUnit:"",cellHeight:null,heightUnit:"",alignment:{x:"",y:""},textControl:"",backgroundColor:void 0,cellPadding:null,borderWidth:null,borderColor:void 0,borderStyle:null,id:"",className:""},cellsDefaultData=function(state){var cells=selectedCells(state),$pos=state.selection.$from,table=cells.length?(0,utils.Bo)($pos,(function(n){return"table"===n.type.spec.tableRole})):null;return table?cellPropsUtils_assign(cellPropsUtils_assign(cellPropsUtils_assign(cellPropsUtils_assign({},initialCellData),function(cells,table,$pos){var result={cellWidth:null,widthUnit:""},tableNode=table.node,tablePos=$pos.start(table.depth);if(!tableNode.attrs["k-colgroup-data"])return result;var width=new Set,value="",colgroup=(0,main.f9v)(tableNode.attrs["k-colgroup-data"]).firstChild;return cells.forEach((function(cell){for(var $cell=tableNode.resolve(cell.pos-tablePos),row=$cell.parent,cellIndex=$cell.index(),colSpan=0,i=0;i<=cellIndex;i++)colSpan+=row.child(i).attrs.colspan;var col=colgroup.children[colSpan-1];col&&(value=col.style.width,width.add(value))})),1===width.size&&value&&(result.cellWidth=parseFloat(value)||null,result.widthUnit=getUnit(value)),result}(cells,table,$pos)),function(cells,table,$pos){var result={cellHeight:null,heightUnit:""},tableNode=table.node,tablePos=$pos.start(table.depth),height=new Set,value="";return cells.forEach((function(cell){var _a,row=tableNode.resolve(cell.pos-tablePos).parent;value=parseStyle((null===(_a=row.attrs)||void 0===_a?void 0:_a.style)||"").height||"",height.add(value)})),1===height.size&&value&&(result.cellHeight=parseFloat(value)||null,result.heightUnit=getUnit(value)),result}(cells,table,$pos)),{alignment:{x:cellsStyle(cells,"text-align"),y:cellsStyle(cells,"vertical-align")},textControl:cellsStyle(cells,"white-space"),backgroundColor:cellsStyle(cells,"background-color")||void 0,cellPadding:parseFloat(cellsStyle(cells,"padding"))||null,borderWidth:parseFloat(cellsStyle(cells,"border-width"))||null,borderColor:cellsStyle(cells,"border-color")||void 0,borderStyle:cellsStyle(cells,"border-style")||null,id:cellsProp(cells,"id"),className:cellsProp(cells,"class")}):initialCellData},applyOnCell=function(tr,data,cells){cells.forEach((function(_a){var node=_a.node,pos=_a.pos,attrs=cellPropsUtils_assign({},node.attrs);attrs=setNodeStyle(attrs,"border-color",data.borderColor||""),attrs=setNodeStyle(attrs,"border-style",data.borderStyle||""),attrs=setNodeStyle(attrs,"border-width","number"==typeof data.borderWidth?data.borderWidth+"px":""),attrs=setNodeStyle(attrs,"padding","number"==typeof data.cellPadding?data.cellPadding+"px":""),attrs=setNodeStyle(attrs,"background-color",data.backgroundColor||""),attrs=setNodeStyle(attrs,"text-align",data.alignment.x||""),attrs=setNodeStyle(attrs,"vertical-align",data.alignment.y||""),(attrs=setNodeStyle(attrs,"white-space",data.textControl||"")).id=data.id||null,attrs.class=data.className||null,tr.setNodeMarkup(pos,null,attrs),"number"==typeof data.cellWidth&&function(tr,pos,width){for(var _a,_b,$cell=tr.doc.resolve(pos),row=$cell.parent,cellIndex=$cell.index(),colSpan=0,i=0;i<=cellIndex;i++)colSpan+=row.child(i).attrs.colspan;var tableNode=$cell.node($cell.depth-1),tablePos=$cell.posAtIndex(0,$cell.depth-1)-1,attrs=tableNode.attrs;if(attrs&&attrs["k-colgroup-data"])(colgroup=(0,main.f9v)(attrs["k-colgroup-data"]).firstChild).children[colSpan-1].style.width=width,attrs=cellPropsUtils_assign(cellPropsUtils_assign({},attrs),((_a={})["k-colgroup-data"]=colgroup.outerHTML,_a)),tr.setNodeMarkup(tablePos,null,attrs);else{var total=0;for(i=0;i<row.childCount;i++)total+=row.child(i).attrs.colspan;var colgroup=document.createElement("colgroup"),cols=new Array(total);for(i=0;i<total;i++)cols[i]=document.createElement("col"),colgroup.appendChild(cols[i]);cols[cellIndex].style.width=width,attrs=cellPropsUtils_assign(cellPropsUtils_assign({},attrs),((_b={})["k-colgroup-data"]="<colgroup>"+cols.reduce((function(acc,cur){return acc+cur.outerHTML}),"")+"</colgroup>",_b)),tr.setNodeMarkup(tablePos,null,attrs)}}(tr,pos,data.cellWidth+(data.widthUnit||"px")),"number"==typeof data.cellHeight&&function(tr,pos,height){var $cell=tr.doc.resolve(pos),row=$cell.parent,rowPos=$cell.posAtIndex(0)-1;tr.setNodeMarkup(rowPos,null,setNodeStyle(row.attrs,"height",height))}(tr,pos,data.cellHeight+(data.heightUnit||"px"))}))},tableCellProperties_assign=function(){return tableCellProperties_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},tableCellProperties_assign.apply(this,arguments)},tableCellProperties_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t},tableCellProperties_spreadArray=function(to,from,pack){if(pack||2===arguments.length)for(var ar,i=0,l=from.length;i<l;i++)!ar&&i in from||(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},TableCellProperties=function(props){var view=props.view,buttonProps=tableCellProperties_rest(props,["view"]),_a=react.useState(!1),showDialog=_a[0],setShowDialog=_a[1],loc=(0,useLocalization.B)(),inTable=Boolean(view&&(0,utils.Bo)(view.state.selection.$from,(function(n){return"table"===n.type.spec.tableRole}))),onClick=react.useCallback((function(){setShowDialog(!0)}),[]),closeDialog=react.useCallback((function(){setShowDialog(!1),null==view||view.focus()}),[view]),onSave=react.useCallback((function(data){if(view&&data){var tr=function(state,data){var tr=state.tr,cells=data.applyToAll?tableCells(state):selectedCells(state);return applyOnCell(tr,data,cells),tr}(view.state,data);tr.docChanged&&view.dispatch(tr)}closeDialog()}),[view,closeDialog]);return react.createElement(react.Fragment,null,react.createElement(Button.$,tableCellProperties_assign({type:"button",title:loc.toLanguageString(messages.H.cellProperties,messages.D[messages.H.cellProperties]),icon:"table-cell-properties",svgIcon:index_es.tableCellPropertiesIcon,onClick,disabled:!inTable},utils.Rn,buttonProps)),showDialog&&view&&react.createElement(TableCellPropertiesDialog,{view,onCancel:closeDialog,onSave}))},alignData=[{textKey:messages.H.cellPropertiesLeftTop,text:messages.D[messages.H.cellPropertiesLeftTop],icon:"table-align-top-left",svgIcon:index_es.tableAlignTopLeftIcon,value:{x:"left",y:"top"}},{textKey:messages.H.cellPropertiesCenterTop,text:messages.D[messages.H.cellPropertiesCenterTop],icon:"table-align-top-center",svgIcon:index_es.tableAlignTopCenterIcon,value:{x:"center",y:"top"}},{textKey:messages.H.cellPropertiesRightTop,text:messages.D[messages.H.cellPropertiesRightTop],icon:"table-align-top-right",svgIcon:index_es.tableAlignTopRightIcon,value:{x:"right",y:"top"}},{textKey:messages.H.cellPropertiesLeftMiddle,text:messages.D[messages.H.cellPropertiesLeftMiddle],icon:"table-align-middle-left",svgIcon:index_es.tableAlignMiddleLeftIcon,value:{x:"left",y:"middle"}},{textKey:messages.H.cellPropertiesCenterMiddle,text:messages.D[messages.H.cellPropertiesCenterMiddle],icon:"table-align-middle-center",svgIcon:index_es.tableAlignMiddleCenterIcon,value:{x:"center",y:"middle"}},{textKey:messages.H.cellPropertiesRightMiddle,text:messages.D[messages.H.cellPropertiesRightMiddle],icon:"table-align-middle-right",svgIcon:index_es.tableAlignMiddleRightIcon,value:{x:"right",y:"middle"}},{textKey:messages.H.cellPropertiesLeftBottom,text:messages.D[messages.H.cellPropertiesLeftBottom],icon:"table-align-bottom-left",svgIcon:index_es.tableAlignBottomLeftIcon,value:{x:"left",y:"bottom"}},{textKey:messages.H.cellPropertiesCenterBottom,text:messages.D[messages.H.cellPropertiesCenterBottom],icon:"table-align-bottom-center",svgIcon:index_es.tableAlignBottomCenterIcon,value:{x:"center",y:"bottom"}},{textKey:messages.H.cellPropertiesRightBottom,text:messages.D[messages.H.cellPropertiesRightBottom],icon:"table-align-bottom-right",svgIcon:index_es.tableAlignBottomRightIcon,value:{x:"right",y:"bottom"}},{textKey:messages.H.cellPropertiesNoAlignment,text:messages.D[messages.H.cellPropertiesNoAlignment],icon:"align-remove",svgIcon:index_es.tableAlignRemoveIcon,value:{x:"",y:""}}],textControlData=[{textKey:messages.H.cellPropertiesWrap,text:messages.D[messages.H.cellPropertiesWrap],value:"",icon:"text-wrap",svgIcon:index_es.textWrapIcon},{textKey:messages.H.cellPropertiesFitToCell,text:messages.D[messages.H.cellPropertiesFitToCell],value:"nowrap",icon:"parameter-string",svgIcon:index_es.parameterStringIcon}],valueRenderWithIcon=function(element,value){return value?react.createElement(react.Fragment,null,react.createElement(InputPrefix.F,null,react.createElement(IconWrap.Q,{icon:value.svgIcon,name:value.icon})),element):element},itemRenderWithIcon=function(li,itemProps){var itemChildren=react.createElement(react.Fragment,null,react.createElement(InputPrefix.F,null,react.createElement(IconWrap.Q,{icon:itemProps.dataItem.svgIcon,name:itemProps.dataItem.icon})),li.props.children);return react.cloneElement(li,li.props,itemChildren)},TableCellPropertiesDialog=function(props){var defaults=react.useMemo((function(){return cellsDefaultData(props.view.state)}),[props.view]),loc=(0,useLocalization.B)(),applyToAll=react.useRef(null),applyToAllDef=defaults.applyToAll,cellWidth=react.useRef(null),cellWidthDef=defaults.cellWidth,widthUnit=react.useRef(null);defaults.widthUnit&&!utils.MD.includes(defaults.widthUnit)&&utils.MD.push(defaults.widthUnit);var widthUnitDef=defaults.widthUnit||"",cellHeight=react.useRef(null),cellHeightDef=defaults.cellHeight,heightUnit=react.useRef(null);defaults.heightUnit&&!utils.MD.includes(defaults.heightUnit)&&utils.MD.push(defaults.heightUnit);var heightUnitDef=defaults.heightUnit||"",alignment=react.useRef(null),alignmentDef=alignData.find((function(al){return void 0!==al.value.x&&defaults.alignment&&al.value.x===defaults.alignment.x&&al.value.y===defaults.alignment.y}))||null,textControl=react.useRef(null),textControlDef=textControlData.find((function(d){return d.value===defaults.textControl})),backgroundColor=react.useRef(null),backgroundColorDef=defaults.backgroundColor,cellPadding=react.useRef(null),cellPaddingDef=defaults.cellPadding,borderWidth=react.useRef(null),borderWidthDef=defaults.borderWidth,borderColor=react.useRef(null),borderColorDef=defaults.borderColor,borderStyle=react.useRef(null),borderStyleDef=utils.le.find((function(s){return s.value===defaults.borderStyle})),id=react.useRef(null),idDef=defaults.id,className=react.useRef(null),classNameDef=defaults.className,onSave=react.useCallback((function(){var _a,_b,_c,_d,_e,_f,_g,_h,_j,_k,_l,_m,_o,_p,_q,_r,_s,_t,_u,_v,data={applyToAll:Boolean(null===(_b=null===(_a=applyToAll.current)||void 0===_a?void 0:_a.element)||void 0===_b?void 0:_b.checked),cellWidth:(null===(_c=cellWidth.current)||void 0===_c?void 0:_c.value)||null,widthUnit:(null===(_d=widthUnit.current)||void 0===_d?void 0:_d.value)||"",cellHeight:(null===(_e=cellHeight.current)||void 0===_e?void 0:_e.value)||null,heightUnit:(null===(_f=heightUnit.current)||void 0===_f?void 0:_f.value)||"",alignment:null===(_h=null===(_g=alignment.current)||void 0===_g?void 0:_g.value)||void 0===_h?void 0:_h.value,textControl:null===(_k=null===(_j=textControl.current)||void 0===_j?void 0:_j.value)||void 0===_k?void 0:_k.value,backgroundColor:null===(_l=backgroundColor.current)||void 0===_l?void 0:_l.value,cellPadding:"number"==typeof(null===(_m=cellPadding.current)||void 0===_m?void 0:_m.value)?null===(_o=cellPadding.current)||void 0===_o?void 0:_o.value:null,borderWidth:"number"==typeof(null===(_p=borderWidth.current)||void 0===_p?void 0:_p.value)?null===(_q=borderWidth.current)||void 0===_q?void 0:_q.value:null,borderColor:null===(_r=borderColor.current)||void 0===_r?void 0:_r.value,borderStyle:(null===(_t=null===(_s=borderStyle.current)||void 0===_s?void 0:_s.value)||void 0===_t?void 0:_t.value)||null,id:String((null===(_u=id.current)||void 0===_u?void 0:_u.value)||""),className:String((null===(_v=className.current)||void 0===_v?void 0:_v.value)||"")};props.onSave.call(void 0,data)}),[props.onSave]),content=react.createElement("div",{className:"k-form k-form-md"},react.createElement("fieldset",{className:"k-form-fieldset"},react.createElement("div",{className:"k-form-layout k-d-grid k-grid-cols-4 k-gap-x-4"},react.createElement("div",{className:"k-form-field k-col-span-full"},react.createElement("div",{className:"k-form-field-wrap"},react.createElement("span",{className:"k-checkbox-wrap"},react.createElement(Checkbox.S,{ref:applyToAll,defaultChecked:applyToAllDef})),react.createElement("label",{className:"k-checkbox-label"},loc.toLanguageString(messages.H.cellPropertiesApplyToAllCells,messages.D[messages.H.cellPropertiesApplyToAllCells])))),react.createElement("div",{className:"k-form-field k-col-span-1"},react.createElement("label",{className:"k-label k-form-label"},loc.toLanguageString(messages.H.cellPropertiesWidth,messages.D[messages.H.cellPropertiesWidth])),react.createElement("div",{className:"k-form-field-wrap"},react.createElement(NumericTextBox.u,{ref:cellWidth,defaultValue:cellWidthDef,min:0,placeholder:loc.toLanguageString(messages.H.sizeAuto,messages.D[messages.H.sizeAuto])}),react.createElement("div",{className:"k-form-hint"},loc.toLanguageString(messages.H.cellPropertiesApplyToColumn,messages.D[messages.H.cellPropertiesApplyToColumn])))),react.createElement("div",{className:"k-form-field k-col-span-1"},react.createElement("label",{className:"k-label k-form-label"}," "),react.createElement("div",{className:"k-form-field-wrap"},react.createElement(AutoComplete.j9,{ref:widthUnit,defaultValue:widthUnitDef,data:utils.MD,popupSettings:utils.MF}))),react.createElement("div",{className:"k-form-field k-col-span-1"},react.createElement("label",{className:"k-label k-form-label"},loc.toLanguageString(messages.H.cellPropertiesHeight,messages.D[messages.H.cellPropertiesHeight])),react.createElement("div",{className:"k-form-field-wrap"},react.createElement(NumericTextBox.u,{ref:cellHeight,defaultValue:cellHeightDef,min:0,placeholder:loc.toLanguageString(messages.H.sizeAuto,messages.D[messages.H.sizeAuto])}),react.createElement("div",{className:"k-form-hint"},loc.toLanguageString(messages.H.cellPropertiesApplyToRow,messages.D[messages.H.cellPropertiesApplyToRow])))),react.createElement("div",{className:"k-form-field k-col-span-1"},react.createElement("label",{className:"k-label k-form-label"}," "),react.createElement("div",{className:"k-form-field-wrap"},react.createElement(AutoComplete.j9,{ref:heightUnit,defaultValue:heightUnitDef,data:utils.MD,popupSettings:utils.MF}))),react.createElement("div",{className:"k-form-field k-col-span-2"},react.createElement("label",{className:"k-label k-form-label"},loc.toLanguageString(messages.H.cellPropertiesAlignment,messages.D[messages.H.cellPropertiesAlignment])),react.createElement("div",{className:"k-form-field-wrap"},react.createElement(DropDownList.O8,{ref:alignment,defaultValue:alignmentDef,data:alignData.map((function(i){return tableCellProperties_assign(tableCellProperties_assign({},i),{text:loc.toLanguageString(i.textKey,i.text)})})),textField:"text",dataItemKey:"text",popupSettings:utils.MF,valueRender:valueRenderWithIcon,itemRender:itemRenderWithIcon}))),react.createElement("div",{className:"k-form-field k-col-span-2"},react.createElement("label",{className:"k-label k-form-label"},loc.toLanguageString(messages.H.cellPropertiesTextControl,messages.D[messages.H.cellPropertiesTextControl])),react.createElement("div",{className:"k-form-field-wrap"},react.createElement(DropDownList.O8,{ref:textControl,defaultValue:textControlDef,data:textControlData.map((function(i){return tableCellProperties_assign(tableCellProperties_assign({},i),{text:loc.toLanguageString(i.textKey,i.text)})})),textField:"text",dataItemKey:"value",popupSettings:utils.MF,valueRender:valueRenderWithIcon,itemRender:itemRenderWithIcon}))),react.createElement("div",{className:"k-form-field k-col-span-2"},react.createElement("label",{className:"k-label k-form-label"},loc.toLanguageString(messages.H.cellPropertiesCellPadding,messages.D[messages.H.cellPropertiesCellPadding])),react.createElement("div",{className:"k-form-field-wrap"},react.createElement(NumericTextBox.u,{ref:cellPadding,defaultValue:cellPaddingDef,min:0}))),react.createElement("div",{className:"k-form-field k-col-span-2"},react.createElement("label",{className:"k-label k-form-label"},loc.toLanguageString(messages.H.cellPropertiesBackground,messages.D[messages.H.cellPropertiesBackground])),react.createElement("div",{className:"k-form-field-wrap"},react.createElement(ColorPicker.s,{ref:backgroundColor,defaultValue:backgroundColorDef}))),react.createElement("div",{className:"k-form-field k-col-span-1"},react.createElement("label",{className:"k-label k-form-label"},loc.toLanguageString(messages.H.cellPropertiesBorderWidth,messages.D[messages.H.cellPropertiesBorderWidth])),react.createElement("div",{className:"k-form-field-wrap"},react.createElement(NumericTextBox.u,{ref:borderWidth,defaultValue:borderWidthDef,min:0}))),react.createElement("div",{className:"k-form-field k-col-span-1"},react.createElement("label",{className:"k-label k-form-label"},loc.toLanguageString(messages.H.cellPropertiesBorderColor,messages.D[messages.H.cellPropertiesBorderColor])),react.createElement("div",{className:"k-form-field-wrap"},react.createElement(ColorPicker.s,{ref:borderColor,defaultValue:borderColorDef}))),react.createElement("div",{className:"k-form-field k-col-span-2"},react.createElement("label",{className:"k-label k-form-label"},loc.toLanguageString(messages.H.cellPropertiesBorderStyle,messages.D[messages.H.cellPropertiesBorderStyle])),react.createElement("div",{className:"k-form-field-wrap"},react.createElement(DropDownList.O8,{ref:borderStyle,defaultValue:borderStyleDef,popupSettings:utils.MF,data:utils.le,textField:"text",dataItemKey:"value"}))),react.createElement("div",{className:"k-form-field k-col-span-full"},react.createElement("label",{className:"k-label k-form-label"},loc.toLanguageString(messages.H.cellPropertiesId,messages.D[messages.H.cellPropertiesId])),react.createElement("div",{className:"k-form-field-wrap"},react.createElement(Textbox.f,{ref:id,defaultValue:idDef}))),react.createElement("div",{className:"k-form-field k-col-span-full"},react.createElement("label",{className:"k-label k-form-label"},loc.toLanguageString(messages.H.cellPropertiesCssClass,messages.D[messages.H.cellPropertiesCssClass])),react.createElement("div",{className:"k-form-field-wrap"},react.createElement(Textbox.f,{ref:className,defaultValue:classNameDef})))))),actionButtons=[react.createElement(Button.$,{themeColor:"primary",key:"save",onClick:onSave},loc.toLanguageString(messages.H.cellPropertiesSave,messages.D[messages.H.cellPropertiesSave])),react.createElement(Button.$,{onClick:props.onCancel,key:"cancel"},loc.toLanguageString(messages.H.cellPropertiesCancel,messages.D[messages.H.cellPropertiesCancel]))];return react.createElement(Window.p,{className:"k-editor-window k-editor-table-wizard-window",title:loc.toLanguageString(messages.H.cellProperties,messages.D[messages.H.cellProperties]),onClose:props.onCancel,key:"dialog",style:{userSelect:"none"},width:408,height:587,modal:!0,minimizeButton:function(){return null},maximizeButton:function(){return null},resizable:!1},content,react.createElement.apply(react_namespaceObject,tableCellProperties_spreadArray([WindowActionsBar.l,{layout:"start"}],actionButtons,!1)))},TabStrip=__webpack_require__("./node_modules/@progress/kendo-react-layout/dist/es/tabstrip/TabStrip.js"),TabStripTab=__webpack_require__("./node_modules/@progress/kendo-react-layout/dist/es/tabstrip/TabStripTab.js"),tablePropsUtils_assign=function(){return tablePropsUtils_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},tablePropsUtils_assign.apply(this,arguments)},initialTableData={rows:0,columns:0,width:null,widthUnit:"",height:null,heightUnit:"",position:null,textAlign:"",cellPadding:null,cellSpacing:null,backgroundColor:void 0,borderWidth:null,borderColor:void 0,borderStyle:null,collapseBorders:!1,id:"",className:"",caption:"",captionAlignment:null,captionPosition:null,headerRows:0,headerColumns:0,associateHeaders:"none"},tablePositionStyles={left:{"margin-left":"","margin-right":"auto"},center:{"margin-left":"auto","margin-right":"auto"},right:{"margin-left":"auto","margin-right":""},"":{}},toCellsMap=function(map){for(var cells=[],h=0;h<map.height;h++){var start=h*map.width,end=start+map.width;cells.push(map.map.slice(start,end))}return cells},associateHeadersType=function(table){var useScope=!0,useIds=!0;return table.content.forEach((function(row){row.content.forEach((function(cell){var th="table_header"===cell.type.name,td="table_cell"===cell.type.name;th&&!cell.attrs.scope&&(useScope=!1),(th&&!cell.attrs.id||td&&!cell.attrs.headers)&&(useIds=!1)}))})),useScope?"scope":useIds?"id":"none"},tableDefaultData=function(state){var _a,_b,_c,cells=selectedCells(state),$pos=state.selection.$from,table=cells.length?(0,utils.Bo)($pos,(function(n){return"table"===n.type.spec.tableRole})):null;if(!table)return initialTableData;var tableParent=(0,utils.Bo)($pos,(function(n){return"table_wrapper"===n.type.name})),captionStr="",captionStyles={},parentStyles={};tableParent&&(parentStyles=parseStyle(tableParent.node.attrs.style),tableParent.node.content.forEach((function(node){if("table_caption_external"===node.type.name){var fr=(0,main.Jm5)(node);captionStr="<img>"===(captionStr=(0,main.fHs)(fr))?"":captionStr,captionStyles=parseStyle(node.attrs.style)}})));var styles=parseStyle((null===(_a=table.node.attrs)||void 0===_a?void 0:_a.style)||""),map=main.J3d.get(table.node),pos="auto"===parentStyles["margin-left"]&&"auto"===parentStyles["margin-right"]?"center":"auto"===parentStyles["margin-right"]?"left":"auto"===parentStyles["margin-left"]?"right":null,headerCells=function(table,map){var headerRows=0,headerColumns=0,cells=toCellsMap(map);cells.forEach((function(row){var headerCells=!0;row.forEach((function(cellPos){var cell=table.nodeAt(cellPos);cell&&"table_header"!==cell.type.name&&(headerCells=!1)})),headerCells&&headerRows++}));for(var col=0;col<map.width;col++){for(var headerCells=!0,row=0;row<map.height;row++){var cellPos=cells[row]&&cells[row][col],cell="number"==typeof cellPos&&table.nodeAt(cellPos);cell&&"table_header"!==cell.type.name&&(headerCells=!1)}headerCells&&headerColumns++}return{rows:headerRows,columns:headerColumns}}(table.node,map),cellsPadding=function(table){var padding=new Set;return table.content.forEach((function(row){row.content.forEach((function(cell){padding.add(parseStyle(cell.attrs.style).padding||"")}))})),1===padding.size?Array.from(padding)[0]:""}(table.node);return tablePropsUtils_assign(tablePropsUtils_assign(tablePropsUtils_assign(tablePropsUtils_assign(tablePropsUtils_assign(tablePropsUtils_assign({},initialTableData),{columns:map.width,rows:map.height}),nodeSize(table.node,"width")),tableParent&&/%/.test(parentStyles.width||"")?nodeSize(tableParent.node,"width"):{}),nodeSize(table.node,"height")),{textAlign:styles["text-align"]||"",position:pos||null,cellPadding:cellsPadding?parseFloat(cellsPadding):null,cellSpacing:styles["border-spacing"]?parseFloat(styles["border-spacing"]):null,backgroundColor:styles["background-color"],borderWidth:styles["border-width"]?parseFloat(styles["border-width"]):null,borderColor:styles["border-color"],borderStyle:styles["border-style"]||null,collapseBorders:"collapse"===styles["border-collapse"],caption:captionStr||void 0,captionAlignment:captionStyles["text-align"]||"",captionPosition:captionStyles["caption-side"]||null,headerRows:headerCells.rows,headerColumns:headerCells.columns,associateHeaders:headerCells.rows||headerCells.columns?associateHeadersType(table.node):"none",id:(null===(_b=table.node.attrs)||void 0===_b?void 0:_b.id)||"",className:(null===(_c=table.node.attrs)||void 0===_c?void 0:_c.class)||""})},lastCell=function(table){var cell=table.lastChild.lastChild;return{node:cell,pos:table.content.size-cell.nodeSize}},addTableNodes=function(state,tablePos,table,toAdd,command){var cellPos=tablePos+lastCell(table).pos;if(!state.doc.nodeAt(cellPos))return state;for(var res=state.doc.resolve(cellPos),sel=new main.rnf(res,res),selTr=state.tr.setSelection(sel),resultState=state.apply(selTr),i=0;i<toAdd;i++)command(resultState,(function(tr){resultState=resultState.apply(tr)}));return resultState},removeTableNodes=function(state,tablePos,toDelete,command){for(var resultState=state,i=0;i<toDelete;i++){var table=resultState.doc.nodeAt(tablePos);if(table){var cellPos=tablePos+lastCell(table).pos,res=resultState.doc.resolve(cellPos),selection=new main.rnf(res,res),selTr=resultState.tr.setSelection(selection);command(resultState=resultState.apply(selTr),(function(tr){resultState=resultState.apply(tr)}))}}return resultState},setCellType=function(state,cell,pos,type,attrs){if(cell.type.name!==type.name||Object.keys(attrs).length>0){var tr=state.tr.setNodeMarkup(pos,type,tablePropsUtils_assign(tablePropsUtils_assign({},cell.attrs),attrs));return state.apply(tr)}return state},setTableHeaderCells=function(state,data,tablePos){var table=state.doc.nodeAt(tablePos),map=table&&main.J3d.get(table);if(!table||!map)return state;var cells=toCellsMap(map),newState=state,_a=state.schema.nodes,table_header=_a.table_header,table_cell=_a.table_cell,id=String((new Date).getTime()),ids=[],headers=function(row,col,colHeader,rowHeader){var result=[];if(rowHeader)for(var r=0;r<row;r++)ids[r]&&ids[r][col]&&result.push(ids[r][col]);if(colHeader)for(var c=0;c<col;c++)ids[row]&&ids[row][c]&&result.push(ids[row][c]);return result.join(" ")};return cells.forEach((function(row,rowIndex){row.forEach((function(cellPos,cellIndex){var cell=table.nodeAt(cellPos);if(cell){var colHeader=cellIndex<data.headerColumns,rowHeader=rowIndex<data.headerRows,attrs=tablePropsUtils_assign({},cell.attrs);!function(cell,attrs){/^cell-[0-9]+-[0-9]+$/.test(cell.attrs.id||"")&&(attrs.id=null)}(cell,attrs),attrs.headers=null,attrs.scope=null,rowHeader||colHeader?("scope"===data.associateHeaders&&(attrs.scope=rowHeader?"col":"row"),"id"===data.associateHeaders&&(attrs.id=function(row,col){var result="cell-".concat(row).concat(col,"-").concat(id);return ids[row]||ids.push([]),ids[row][col]||ids[row].push([]),ids[row][col]=result,result}(rowIndex,cellIndex),(cellIndex>0||rowIndex>0)&&(attrs.headers=headers(rowIndex,cellIndex,colHeader,rowHeader)||null)),newState=setCellType(newState,cell,tablePos+cellPos+1,table_header,attrs)):("id"===data.associateHeaders&&(attrs.headers=headers(rowIndex,cellIndex,data.headerColumns>0,data.headerRows>0)||null),newState=setCellType(newState,cell,tablePos+cellPos+1,table_cell,attrs))}}))})),newState},parseCaptionContent=function(content,schema){return(0,main.FsP)("<p>"+content+"</p>",schema).content.firstChild.content},createCaption=function(data,schema){if(data.caption){var captAttrs={caption:"",style:"display: table-caption"};data.captionAlignment&&(captAttrs=setNodeStyle(captAttrs,"text-align",data.captionAlignment)),data.captionPosition&&(captAttrs=setNodeStyle(captAttrs,"caption-side",data.captionPosition));var captionContent=parseCaptionContent(data.caption,schema);return captionContent&&schema.nodes.table_caption_external.createAndFill(captAttrs,captionContent)||void 0}},hasCaption=function(wrapperNode){return wrapperNode.firstChild&&"table_caption_external"===wrapperNode.firstChild.type.name},updateWrapper=function(state,data,tablePos,tableWrapper,tableWrapperPos){var result={state,pos:tablePos};if(tableWrapper||!data.position&&!data.caption)tableWrapper&&(data.position||data.caption||!data.caption&&hasCaption(tableWrapper.node))?(state=function(state,wrapperNode,wrapperPos,styles){var attrs=tablePropsUtils_assign({},wrapperNode.attrs);return attrs=setNodeStyle(attrs,"margin-left",""),attrs=setNodeStyle(attrs,"margin-right",""),Object.keys(styles||{}).forEach((function(s){attrs=setNodeStyle(attrs,s,(styles||{})[s]||"")})),state.apply(state.tr.setNodeMarkup(wrapperPos,null,attrs))}(state,tableWrapper.node,tableWrapperPos,data.position&&tablePositionStyles[data.position]),state=function(state,wrapperNode,wrapperPos,data){var captionNode,nextState=state,captContentPos=wrapperPos+2,captPos=wrapperPos+1,schema=nextState.schema;if(hasCaption(wrapperNode))if(captionNode=wrapperNode.firstChild,data.caption){var captionContent=parseCaptionContent(data.caption,schema);if(captionNode=(nextState=nextState.apply(nextState.tr.replaceWith(captContentPos,captContentPos+captionNode.content.size,captionContent))).doc.nodeAt(captPos)){var captAttrs=tablePropsUtils_assign({},captionNode.attrs);captAttrs=setNodeStyle(captAttrs,"text-align",data.captionAlignment||""),captAttrs=setNodeStyle(captAttrs,"caption-side",data.captionPosition||""),nextState=nextState.apply(nextState.tr.setNodeAttribute(captPos,"style",captAttrs.style))}}else nextState=nextState.apply(nextState.tr.deleteRange(captContentPos,captContentPos+captionNode.content.size));else(captionNode=createCaption(data,schema))&&(nextState=nextState.apply(nextState.tr.replaceWith(captPos,captPos,captionNode)));return nextState}(state,tableWrapper.node,tableWrapperPos,data),result={state,pos:tableWrapperPos}):result=!tableWrapper||data.position||data.caption?{state,pos:tablePos}:{state,node:tableWrapper.node,pos:state.selection.$from.start(tableWrapper.depth)-1};else{var wrapperAttrs_1={table:"",style:"display: table"},children=[],position=data.position,posStyles_1=position&&tablePositionStyles[position];posStyles_1&&Object.keys(posStyles_1).forEach((function(styleName){wrapperAttrs_1=setNodeStyle(wrapperAttrs_1,styleName,posStyles_1[styleName]||"")})),"number"==typeof data.width&&"%"===data.widthUnit&&(wrapperAttrs_1=setNodeStyle(wrapperAttrs_1,"width",data.width+data.widthUnit));var captionNode=createCaption(data,state.schema);captionNode&&children.push(captionNode);var table=state.doc.nodeAt(tablePos);children.push(table);var createdWrapper=state.schema.nodes.table_wrapper.createAndFill(wrapperAttrs_1,children);if(createdWrapper){var tr=state.tr.replaceWith(tablePos,tablePos+table.content.size,createdWrapper);result={state:state=state.apply(tr),pos:tablePos}}}var wrapper=tableWrapper&&result.state.doc.nodeAt(tableWrapperPos);if(wrapper){var attrs=void 0;"number"==typeof data.width&&"%"===data.widthUnit?attrs=setNodeStyle(wrapper.attrs,"width",data.width+data.widthUnit):"%"!==data.widthUnit&&/%/.test(parseStyle(wrapper.attrs.style||"").width||"")&&(attrs=setNodeStyle(wrapper.attrs,"width","")),attrs&&(result.state=result.state.apply(result.state.tr.setNodeMarkup(tableWrapperPos,null,attrs)))}return result},applyTableData=function(state,data){var $from=state.selection.$from,table=(0,utils.Bo)($from,(function(n){return"table"===n.type.spec.tableRole}));if(table){var tablePos=$from.start(table.depth)-1,nextState=function(state,tablePos,rows,columns){var nextState=state,table=nextState.doc.nodeAt(tablePos);if(!table)return nextState;var map=main.J3d.get(table);return map.width===columns&&map.height===rows?nextState:(columns>map.width?nextState=addTableNodes(nextState,tablePos,table,columns-map.width,main.GUe):columns<map.width&&(nextState=removeTableNodes(nextState,tablePos,map.width-columns,deleteColumnCmd)),(table=nextState.doc.nodeAt(tablePos))?(rows>(map=main.J3d.get(table)).height?nextState=addTableNodes(nextState,tablePos,table,rows-map.height,main.gC5):rows<map.height&&(nextState=removeTableNodes(nextState,tablePos,map.height-rows,deleteRowCmd)),nextState):nextState)}(state,tablePos,data.rows,data.columns);if(nextState){var transaction=nextState.tr;tableCells(nextState).forEach((function(cell){var attrs=tablePropsUtils_assign({},cell.node.attrs);attrs=setNodeStyle(attrs,"padding","number"==typeof data.cellPadding?data.cellPadding+"px":""),transaction.setNodeMarkup(cell.pos,null,attrs)})),nextState=function(state,data,tablePos){var table=state.doc.nodeAt(tablePos);if(!table)return state;var attrs=tablePropsUtils_assign({},table.attrs),shouldSetWidth=null!==data.width&&("%"!==data.widthUnit||!data.caption&&!data.position);attrs=setNodeStyle(attrs,"width",shouldSetWidth?data.width+data.widthUnit:""),attrs=setNodeStyle(attrs,"height",null!==data.height?data.height+data.heightUnit:""),attrs=setNodeStyle(attrs,"text-align",data.textAlign||""),attrs=setNodeStyle(attrs,"background-color",data.backgroundColor||""),attrs=setNodeStyle(attrs,"border-width",data.borderWidth?data.borderWidth+"px":""),attrs=setNodeStyle(attrs,"border-style",data.borderStyle||""),attrs=setNodeStyle(attrs,"border-color",data.borderColor||""),attrs=setNodeStyle(attrs,"border-spacing",null!==data.cellSpacing?data.cellSpacing+"px":""),attrs=null!==data.cellSpacing?setNodeStyle(attrs,"border-collapse","unset"):setNodeStyle(attrs,"border-collapse",data.collapseBorders?"collapse":"");var posStyles=tablePositionStyles[data.position||""]||{};Object.keys(posStyles).forEach((function(style){attrs=setNodeStyle(attrs,style,posStyles[style])})),attrs.id=data.id||null,attrs.class=data.className||null;var tr=state.tr.setNodeMarkup(tablePos,null,attrs);return state.apply(tr)}(nextState=nextState.apply(transaction),data,tablePos),nextState=setTableHeaderCells(nextState,data,tablePos);var tableParent=(0,utils.Bo)($from,(function(n){return"table_wrapper"===n.type.name})),tableParentPos=$from.start((null==tableParent?void 0:tableParent.depth)||0)-1,result=updateWrapper(nextState,data,tablePos,tableParent,tableParentPos);nextState=result.state;var from=result.pos,node=nextState.doc.nodeAt(result.pos);if(node){var to=from+(tableParent||table).node.content.size,tr=state.tr.replaceWith(from,to,node),atEnd=main.LN_.atEnd(node),selection=main.U3g.create(tr.doc,from+atEnd.to+1);return tr.setSelection(selection),tr}}}},tableProperties_assign=function(){return tableProperties_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},tableProperties_assign.apply(this,arguments)},tableProperties_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t},tableProperties_spreadArray=function(to,from,pack){if(pack||2===arguments.length)for(var ar,i=0,l=from.length;i<l;i++)!ar&&i in from||(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},TableProperties=function(props){var view=props.view,buttonProps=tableProperties_rest(props,["view"]),loc=(0,useLocalization.B)(),_a=react.useState(!1),showDialog=_a[0],setShowDialog=_a[1],inTable=Boolean(view&&(0,utils.Bo)(view.state.selection.$from,(function(n){return"table"===n.type.spec.tableRole}))),onClick=react.useCallback((function(){setShowDialog(!0)}),[]),closeDialog=react.useCallback((function(){setShowDialog(!1),null==view||view.focus()}),[view]),onSave=react.useCallback((function(data){if(view&&data){var tr=applyTableData(view.state,data);tr&&view.dispatch(tr)}closeDialog()}),[view,closeDialog]);return react.createElement(react.Fragment,null,react.createElement(Button.$,tableProperties_assign({type:"button",title:loc.toLanguageString(messages.H.tableProperties,messages.D[messages.H.tableProperties]),icon:"table-properties",svgIcon:index_es.tablePropertiesIcon,onClick,disabled:!inTable},utils.Rn,buttonProps)),showDialog&&react.createElement(TablePropertiesDialog,{onClose:closeDialog,onSave,view}))},tableProperties_alignData=[{textKey:messages.H.tablePropertiesAlignLeft,text:messages.D[messages.H.tablePropertiesAlignLeft],value:"left",icon:"table-align-middle-left",svgIcon:index_es.tableAlignMiddleLeftIcon},{textKey:messages.H.tablePropertiesAlignCenter,text:messages.D[messages.H.tablePropertiesAlignCenter],value:"center",icon:"table-align-middle-center",svgIcon:index_es.tableAlignMiddleCenterIcon},{textKey:messages.H.tablePropertiesAlignRight,text:messages.D[messages.H.tablePropertiesAlignRight],value:"right",icon:"table-align-middle-right",svgIcon:index_es.tableAlignMiddleRightIcon},{textKey:messages.H.tablePropertiesNoAlignment,text:messages.D[messages.H.tablePropertiesNoAlignment],value:"",icon:"align-remove",svgIcon:index_es.tableAlignRemoveIcon}],tablePosition=[{textKey:messages.H.tablePropertiesLeft,text:messages.D[messages.H.tablePropertiesLeft],value:"left",style:{},icon:"table-position-left",svgIcon:index_es.tablePositionStartIcon},{textKey:messages.H.tablePropertiesCenter,text:messages.D[messages.H.tablePropertiesCenter],value:"center",style:{},icon:"table-position-center",svgIcon:index_es.tablePositionCenterIcon},{textKey:messages.H.tablePropertiesRight,text:messages.D[messages.H.tablePropertiesRight],value:"right",style:{},icon:"table-position-right",svgIcon:index_es.tablePositionEndIcon}].map((function(p){return tableProperties_assign(tableProperties_assign({},p),{style:tablePositionStyles[p.value]})})),captionPositionData=[{textKey:messages.H.tablePropertiesTop,text:messages.D[messages.H.tablePropertiesTop],value:"top",icon:"position-top",svgIcon:index_es.positionTopIcon},{textKey:messages.H.tablePropertiesBottom,text:messages.D[messages.H.tablePropertiesBottom],value:"bottom",icon:"position-bottom",svgIcon:index_es.positionBottomIcon}],associateHeadersData=[{textKey:messages.H.tablePropertiesNone,text:messages.D[messages.H.tablePropertiesNone],value:"none"},{textKey:messages.H.tablePropertiesUsingScopeAttribute,text:messages.D[messages.H.tablePropertiesUsingScopeAttribute],value:"scope"},{textKey:messages.H.tablePropertiesUsingIdAttributes,text:messages.D[messages.H.tablePropertiesUsingIdAttributes],value:"id"}],TablePropertiesDialog=function(props){var defaults=react.useMemo((function(){var state=props.view&&props.view.state;return state?tableDefaultData(state):initialTableData}),[props.view]),loc=(0,useLocalization.B)(),_a=react.useState(0),selected=_a[0],setSelected=_a[1],onSelect=react.useCallback((function(event){setSelected(event.selected)}),[]),rows=react.useRef(null),columns=react.useRef(null),width=react.useRef(null),height=react.useRef(null),cellSpacing=react.useRef(null),cellPadding=react.useRef(null),borderWidth=react.useRef(null),widthUnit=react.useRef(null),heightUnit=react.useRef(null),position=react.useRef(null),alignment=react.useRef(null),borderStyle=react.useRef(null),backgroundColor=react.useRef(null),borderColor=react.useRef(null),collapseBorders=react.useRef(null),id=react.useRef(null),className=react.useRef(null),caption=react.useRef(null),headerRows=react.useRef(null),headerColumns=react.useRef(null),captionAlignment=react.useRef(null),captionPosition=react.useRef(null),associateHeaders=react.useRef(null),onSave=react.useCallback((function(){var _a,_b,_c,_d,_e,_f,_g,_h,_j,_k,_l,_m,_o,_p,_q,_r,_s,_t,_u,_v,data={rows:(null===(_a=rows.current)||void 0===_a?void 0:_a.value)||0,columns:(null===(_b=columns.current)||void 0===_b?void 0:_b.value)||0,width:width.current?width.current.value:null,height:height.current?height.current.value:null,cellSpacing:cellSpacing.current?cellSpacing.current.value:null,cellPadding:cellPadding.current?cellPadding.current.value:null,borderWidth:borderWidth.current?borderWidth.current.value:null,widthUnit:(null===(_c=widthUnit.current)||void 0===_c?void 0:_c.value)||"",heightUnit:(null===(_d=heightUnit.current)||void 0===_d?void 0:_d.value)||"",position:(null===(_f=null===(_e=position.current)||void 0===_e?void 0:_e.value)||void 0===_f?void 0:_f.value)||null,textAlign:(null===(_g=alignment.current)||void 0===_g?void 0:_g.value)?alignment.current.value.value:null,borderStyle:(null===(_h=borderStyle.current)||void 0===_h?void 0:_h.value)?borderStyle.current.value.value:null,backgroundColor:null===(_j=backgroundColor.current)||void 0===_j?void 0:_j.value,borderColor:null===(_k=borderColor.current)||void 0===_k?void 0:_k.value,collapseBorders:Boolean(null===(_m=null===(_l=collapseBorders.current)||void 0===_l?void 0:_l.element)||void 0===_m?void 0:_m.checked),id:String((null===(_o=id.current)||void 0===_o?void 0:_o.value)||""),className:String((null===(_p=className.current)||void 0===_p?void 0:_p.value)||""),caption:String((null===(_q=caption.current)||void 0===_q?void 0:_q.value)||""),headerRows:(null===(_r=headerRows.current)||void 0===_r?void 0:_r.value)||0,headerColumns:(null===(_s=headerColumns.current)||void 0===_s?void 0:_s.value)||0,captionAlignment:(null===(_t=captionAlignment.current)||void 0===_t?void 0:_t.value)?captionAlignment.current.value.value:null,captionPosition:(null===(_u=captionPosition.current)||void 0===_u?void 0:_u.value)?captionPosition.current.value.value:null,associateHeaders:(null===(_v=associateHeaders.current)||void 0===_v?void 0:_v.value)?associateHeaders.current.value.value:"none"};props.onSave.call(void 0,data)}),[props.onSave]),general=react.createElement("div",{className:"k-form k-form-md"},react.createElement("fieldset",{className:"k-form-fieldset"},react.createElement("div",{className:"k-form-layout k-d-grid k-grid-cols-4 k-gap-x-4"},react.createElement("div",{className:"k-form-field k-col-span-2"},react.createElement("label",{className:"k-label k-form-label"},loc.toLanguageString(messages.H.tablePropertiesRows,messages.D[messages.H.tablePropertiesRows])),react.createElement("div",{className:"k-form-field-wrap"},react.createElement(NumericTextBox.u,{ref:rows,defaultValue:defaults.rows,min:1}))),react.createElement("div",{className:"k-form-field k-col-span-2"},react.createElement("label",{className:"k-label k-form-label"},loc.toLanguageString(messages.H.tablePropertiesColumns,messages.D[messages.H.tablePropertiesColumns])),react.createElement("div",{className:"k-form-field-wrap"},react.createElement(NumericTextBox.u,{ref:columns,defaultValue:defaults.columns,min:1}))),react.createElement("div",{className:"k-form-field k-col-span-1"},react.createElement("label",{className:"k-label k-form-label"},loc.toLanguageString(messages.H.tablePropertiesWidth,messages.D[messages.H.tablePropertiesWidth])),react.createElement("div",{className:"k-form-field-wrap"},react.createElement(NumericTextBox.u,{ref:width,defaultValue:defaults.width,min:0,placeholder:loc.toLanguageString(messages.H.sizeAuto,messages.D[messages.H.sizeAuto])}))),react.createElement("div",{className:"k-form-field k-col-span-1"},react.createElement("label",{className:"k-label k-form-label"}," "),react.createElement("div",{className:"k-form-field-wrap"},react.createElement(AutoComplete.j9,{ref:widthUnit,defaultValue:defaults.widthUnit,data:utils.MD,popupSettings:utils.MF}))),react.createElement("div",{className:"k-form-field k-col-span-1"},react.createElement("label",{className:"k-label k-form-label"},loc.toLanguageString(messages.H.tablePropertiesHeight,messages.D[messages.H.tablePropertiesHeight])),react.createElement("div",{className:"k-form-field-wrap"},react.createElement(NumericTextBox.u,{ref:height,defaultValue:defaults.height,min:0,placeholder:loc.toLanguageString(messages.H.sizeAuto,messages.D[messages.H.sizeAuto])}))),react.createElement("div",{className:"k-form-field k-col-span-1"},react.createElement("label",{className:"k-label k-form-label"}," "),react.createElement("div",{className:"k-form-field-wrap"},react.createElement(AutoComplete.j9,{ref:heightUnit,defaultValue:defaults.heightUnit,data:utils.MD.filter((function(x){return"%"!==x})),popupSettings:utils.MF}))),react.createElement("div",{className:"k-form-field k-col-span-2"},react.createElement("label",{className:"k-label k-form-label"},loc.toLanguageString(messages.H.tablePropertiesPosition,messages.D[messages.H.tablePropertiesPosition])),react.createElement("div",{className:"k-form-field-wrap"},react.createElement(DropDownList.O8,{ref:position,defaultValue:tablePosition.find((function(p){return p.value===defaults.position})),popupSettings:utils.MF,data:tablePosition.map((function(i){return tableProperties_assign(tableProperties_assign({},i),{text:loc.toLanguageString(i.textKey,i.text)})})),textField:"text",dataItemKey:"value",valueRender:valueRenderWithIcon,itemRender:itemRenderWithIcon}))),react.createElement("div",{className:"k-form-field k-col-span-2"},react.createElement("label",{className:"k-label k-form-label"},loc.toLanguageString(messages.H.tablePropertiesAlignment,messages.D[messages.H.tablePropertiesAlignment])),react.createElement("div",{className:"k-form-field-wrap"},react.createElement(DropDownList.O8,{ref:alignment,defaultValue:tableProperties_alignData.find((function(a){return a.value===defaults.textAlign})),data:tableProperties_alignData.map((function(i){return tableProperties_assign(tableProperties_assign({},i),{text:loc.toLanguageString(i.textKey,i.text)})})),textField:"text",dataItemKey:"value",popupSettings:utils.MF,valueRender:valueRenderWithIcon,itemRender:itemRenderWithIcon}))),react.createElement("div",{className:"k-form-field k-col-span-2"},react.createElement("label",{className:"k-label k-form-label"},loc.toLanguageString(messages.H.tablePropertiesCellSpacing,messages.D[messages.H.tablePropertiesCellSpacing])),react.createElement("div",{className:"k-form-field-wrap"},react.createElement(NumericTextBox.u,{ref:cellSpacing,defaultValue:defaults.cellSpacing,placeholder:loc.toLanguageString(messages.H.sizeAuto,messages.D[messages.H.sizeAuto]),min:0}))),react.createElement("div",{className:"k-form-field k-col-span-2"},react.createElement("label",{className:"k-label k-form-label"},loc.toLanguageString(messages.H.tablePropertiesCellPadding,messages.D[messages.H.tablePropertiesCellPadding])),react.createElement("div",{className:"k-form-field-wrap"},react.createElement(NumericTextBox.u,{ref:cellPadding,defaultValue:defaults.cellPadding,placeholder:loc.toLanguageString(messages.H.sizeAuto,messages.D[messages.H.sizeAuto]),min:0}))),react.createElement("div",{className:"k-form-field k-col-span-full"},react.createElement("label",{className:"k-label k-form-label"},loc.toLanguageString(messages.H.tablePropertiesTableBackground,messages.D[messages.H.tablePropertiesTableBackground])),react.createElement("div",{className:"k-form-field-wrap"},react.createElement(ColorPicker.s,{ref:backgroundColor,defaultValue:defaults.backgroundColor}))),react.createElement("div",{className:"k-form-field k-col-span-1"},react.createElement("label",{className:"k-label k-form-label"},loc.toLanguageString(messages.H.tablePropertiesBorderWidth,messages.D[messages.H.tablePropertiesBorderWidth])),react.createElement("div",{className:"k-form-field-wrap"},react.createElement(NumericTextBox.u,{ref:borderWidth,defaultValue:defaults.borderWidth,min:0}))),react.createElement("div",{className:"k-form-field k-col-span-1"},react.createElement("label",{className:"k-label k-form-label"},loc.toLanguageString(messages.H.tablePropertiesBorderColor,messages.D[messages.H.tablePropertiesBorderColor])),react.createElement("div",{className:"k-form-field-wrap"},react.createElement(ColorPicker.s,{ref:borderColor,defaultValue:defaults.borderColor}))),react.createElement("div",{className:"k-form-field k-col-span-2"},react.createElement("label",{className:"k-label k-form-label"},loc.toLanguageString(messages.H.tablePropertiesBorderStyle,messages.D[messages.H.tablePropertiesBorderStyle])),react.createElement("div",{className:"k-form-field-wrap"},react.createElement(DropDownList.O8,{ref:borderStyle,defaultValue:utils.le.find((function(s){return s.value===defaults.borderStyle})),popupSettings:utils.MF,data:utils.le.map((function(i){return tableProperties_assign(tableProperties_assign({},i),{text:loc.toLanguageString(i.textKey,i.text)})})),textField:"text",dataItemKey:"value"}))),react.createElement("div",{className:"k-form-field k-col-span-full"},react.createElement("div",{className:"k-form-field-wrap"},react.createElement(Checkbox.S,{ref:collapseBorders,className:"k-checkbox-wrap",label:loc.toLanguageString(messages.H.tablePropertiesCollapseBorders,messages.D[messages.H.tablePropertiesCollapseBorders]),defaultChecked:defaults.collapseBorders})))))),advanced=react.createElement("div",{className:"k-form k-form-md"},react.createElement("fieldset",{className:"k-form-fieldset"},react.createElement("div",{className:"k-form-layout k-d-grid"},react.createElement("div",{className:"k-form-field"},react.createElement("label",{className:"k-label k-form-label"},loc.toLanguageString(messages.H.tablePropertiesId,messages.D[messages.H.tablePropertiesId])),react.createElement("div",{className:"k-form-field-wrap"},react.createElement(Textbox.f,{ref:id,defaultValue:defaults.id}))),react.createElement("div",{className:"k-form-field"},react.createElement("label",{className:"k-label k-form-label"},loc.toLanguageString(messages.H.tablePropertiesCssClass,messages.D[messages.H.tablePropertiesCssClass])),react.createElement("div",{className:"k-form-field-wrap"},react.createElement(Textbox.f,{ref:className,defaultValue:defaults.className}))),react.createElement("fieldset",{className:"k-form-fieldset"},react.createElement("legend",{className:"k-form-legend"},loc.toLanguageString(messages.H.tablePropertiesAccessibility,messages.D[messages.H.tablePropertiesAccessibility])),react.createElement("div",{className:"k-d-grid k-grid-cols-4 k-gap-x-4"},react.createElement("div",{className:"k-form-field k-col-span-full"},react.createElement("label",{className:"k-label k-form-label"},loc.toLanguageString(messages.H.tablePropertiesCaption,messages.D[messages.H.tablePropertiesCaption])),react.createElement("div",{className:"k-form-field-wrap"},react.createElement(Textbox.f,{ref:caption,defaultValue:defaults.caption}))),react.createElement("div",{className:"k-form-field k-col-span-2"},react.createElement("label",{className:"k-label k-form-label"},loc.toLanguageString(messages.H.tablePropertiesCaptionPosition,messages.D[messages.H.tablePropertiesCaptionPosition])),react.createElement("div",{className:"k-form-field-wrap"},react.createElement(DropDownList.O8,{ref:captionPosition,defaultValue:captionPositionData.find((function(i){return i.value===defaults.captionPosition})),data:captionPositionData.map((function(i){return tableProperties_assign(tableProperties_assign({},i),{text:loc.toLanguageString(i.textKey,i.text)})})),popupSettings:utils.MF,textField:"text",dataItemKey:"value",valueRender:valueRenderWithIcon,itemRender:itemRenderWithIcon}))),react.createElement("div",{className:"k-form-field k-col-span-2"},react.createElement("label",{className:"k-label k-form-label"},loc.toLanguageString(messages.H.tablePropertiesCaptionAlignment,messages.D[messages.H.tablePropertiesCaptionAlignment])),react.createElement("div",{className:"k-form-field-wrap"},react.createElement(DropDownList.O8,{ref:captionAlignment,defaultValue:tableProperties_alignData.find((function(i){return i.value===defaults.captionAlignment})),data:tableProperties_alignData.map((function(i){return tableProperties_assign(tableProperties_assign({},i),{text:loc.toLanguageString(i.textKey,i.text)})})),popupSettings:utils.MF,textField:"text",dataItemKey:"value",valueRender:valueRenderWithIcon,itemRender:itemRenderWithIcon}))),react.createElement("div",{className:"k-form-field k-col-span-1"},react.createElement("label",{className:"k-label k-form-label"},loc.toLanguageString(messages.H.tablePropertiesHeaderRows,messages.D[messages.H.tablePropertiesHeaderRows])),react.createElement("div",{className:"k-form-field-wrap"},react.createElement(NumericTextBox.u,{ref:headerRows,defaultValue:defaults.headerRows,min:0}))),react.createElement("div",{className:"k-form-field k-col-span-1"},react.createElement("label",{className:"k-label k-form-label"},loc.toLanguageString(messages.H.tablePropertiesHeaderCols,messages.D[messages.H.tablePropertiesHeaderCols])),react.createElement("div",{className:"k-form-field-wrap"},react.createElement(NumericTextBox.u,{ref:headerColumns,defaultValue:defaults.headerColumns,min:0}))),react.createElement("div",{className:"k-form-field k-col-span-2"},react.createElement("label",{className:"k-label k-form-label"},loc.toLanguageString(messages.H.tablePropertiesAssociateHeaders,messages.D[messages.H.tablePropertiesAssociateHeaders])),react.createElement("div",{className:"k-form-field-wrap"},react.createElement(DropDownList.O8,{ref:associateHeaders,defaultValue:associateHeadersData.find((function(i){return i.value===defaults.associateHeaders})),data:associateHeadersData.map((function(i){return tableProperties_assign(tableProperties_assign({},i),{text:loc.toLanguageString(i.textKey,i.text)})})),popupSettings:utils.MF,textField:"text",dataItemKey:"value"})))))))),content=react.createElement(TabStrip.q,{selected,onSelect,animation:!1,keepTabsMounted:!0},react.createElement(TabStripTab.T,{title:loc.toLanguageString(messages.H.tablePropertiesGeneral,messages.D[messages.H.tablePropertiesGeneral])},general),react.createElement(TabStripTab.T,{title:loc.toLanguageString(messages.H.tablePropertiesAdvanced,messages.D[messages.H.tablePropertiesAdvanced])},advanced)),actionButtons=[react.createElement(Button.$,{themeColor:"primary",key:"save",onClick:onSave},loc.toLanguageString(messages.H.tablePropertiesSave,messages.D[messages.H.tablePropertiesSave])),react.createElement(Button.$,{onClick:props.onClose,key:"cancel"},loc.toLanguageString(messages.H.tablePropertiesCancel,messages.D[messages.H.tablePropertiesCancel]))];return react.createElement(Window.p,{className:"k-editor-window k-editor-table-wizard-window",title:loc.toLanguageString(messages.H.tableProperties,messages.D[messages.H.tableProperties]),onClose:props.onClose,key:"dialog",style:{userSelect:"none"},width:480,height:630,modal:!0,minimizeButton:function(){return null},maximizeButton:function(){return null},resizable:!1},content,react.createElement.apply(react_namespaceObject,tableProperties_spreadArray([WindowActionsBar.l,{layout:"start"}],actionButtons,!1)))},main_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),main_assign=function(){return main_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},main_assign.apply(this,arguments)};!function(EditorTools){function createAlignTool(settings){return function(settings){var Tool=function(_super){function AlignTool(){return null!==_super&&_super.apply(this,arguments)||this}return align_extends(AlignTool,_super),AlignTool.prototype.render=function(){var _a=this.props,view=_a.view,render=_a.render,props=align_rest(_a,["view","render"]),state=view&&view.state,aligned=!!state&&(0,main.Zxn)(state,settings.actions),actions=aligned?alignRemove.actions:settings.actions,commandName=aligned?alignRemove.commandName:settings.commandName,localization=(0,intlUtils.GB)(this),titleKey=settings.messages.title,button=react.createElement(Button.$,align_assign({onClick:function(){return view&&(0,main._gP)(actions,commandName)(view.state,view.dispatch)},selected:aligned,togglable:!0},utils.Rn,{title:localization.toLanguageString(titleKey,messages.D[titleKey])},settings.props,props));return render?render.call(void 0,button,{view}):button},AlignTool}(react.Component);return(0,intlUtils.AK)(Tool),Tool}(settings)}EditorTools.createAlignTool=createAlignTool;var AlignLeft=function(_super){function AlignLeft(){return null!==_super&&_super.apply(this,arguments)||this}return main_extends(AlignLeft,_super),AlignLeft}(createAlignTool(toolsSettings.w.alignLeft));EditorTools.AlignLeft=AlignLeft;var AlignRight=function(_super){function AlignRight(){return null!==_super&&_super.apply(this,arguments)||this}return main_extends(AlignRight,_super),AlignRight}(createAlignTool(toolsSettings.w.alignRight));EditorTools.AlignRight=AlignRight;var AlignCenter=function(_super){function AlignCenter(){return null!==_super&&_super.apply(this,arguments)||this}return main_extends(AlignCenter,_super),AlignCenter}(createAlignTool(toolsSettings.w.alignCenter));EditorTools.AlignCenter=AlignCenter;var AlignJustify=function(_super){function AlignJustify(){return null!==_super&&_super.apply(this,arguments)||this}return main_extends(AlignJustify,_super),AlignJustify}(createAlignTool(toolsSettings.w.alignJustify));function createInsertTableTool(settings){return InsertTableToolNS.createInsertTableTool(settings)}EditorTools.AlignJustify=AlignJustify,EditorTools.createInsertTableTool=createInsertTableTool;var InsertTable=function(_super){function InsertTable(){return null!==_super&&_super.apply(this,arguments)||this}return main_extends(InsertTable,_super),InsertTable}(createInsertTableTool(toolsSettings.w.insertTable));EditorTools.InsertTable=InsertTable;var InsertTablePopup=function(_super){function InsertTablePopup(){return null!==_super&&_super.apply(this,arguments)||this}return main_extends(InsertTablePopup,_super),InsertTablePopup}(InsertTablePopupNS.InsertTablePopup);function createStyleDropDownList(settings){return FontStyleToolNS.createStyleDropDownList(settings)}EditorTools.InsertTablePopup=InsertTablePopup,EditorTools.createStyleDropDownList=createStyleDropDownList;var FontSize=function(_super){function FontSize(){return null!==_super&&_super.apply(this,arguments)||this}return main_extends(FontSize,_super),FontSize}(createStyleDropDownList(toolsSettings.w.fontSize));EditorTools.FontSize=FontSize;var FontName=function(_super){function FontName(){return null!==_super&&_super.apply(this,arguments)||this}return main_extends(FontName,_super),FontName}(createStyleDropDownList(toolsSettings.w.fontName));function createFormatBlockDropDownList(settings){return FormatBlockToolNS.createFormatBlockDropDownList(settings)}EditorTools.FontName=FontName,EditorTools.ForeColor=function(props){return react.createElement(ApplyColorTool,main_assign({},toolsSettings.w.foreColor,props))},EditorTools.BackColor=function(props){return react.createElement(ApplyColorTool,main_assign({},toolsSettings.w.backColor,props))},EditorTools.createFormatBlockDropDownList=createFormatBlockDropDownList;var FormatBlock=function(_super){function FormatBlock(){return null!==_super&&_super.apply(this,arguments)||this}return main_extends(FormatBlock,_super),FormatBlock}(createFormatBlockDropDownList(toolsSettings.w.formatBlock));function createUndoTool(settings){return HistoryToolNS.createUndoTool(settings)}function createRedoTool(settings){return HistoryToolNS.createRedoTool(settings)}EditorTools.FormatBlock=FormatBlock,EditorTools.createUndoTool=createUndoTool,EditorTools.createRedoTool=createRedoTool;var Undo=function(_super){function Undo(){return null!==_super&&_super.apply(this,arguments)||this}return main_extends(Undo,_super),Undo}(createUndoTool(toolsSettings.w.undo));EditorTools.Undo=Undo;var Redo=function(_super){function Redo(){return null!==_super&&_super.apply(this,arguments)||this}return main_extends(Redo,_super),Redo}(createRedoTool(toolsSettings.w.redo));function createIndentTool(settings){return IndentToolNS.createIndentTool(settings)}EditorTools.Redo=Redo,EditorTools.createIndentTool=createIndentTool;var Indent=function(_super){function Indent(){return null!==_super&&_super.apply(this,arguments)||this}return main_extends(Indent,_super),Indent}(createIndentTool(toolsSettings.w.indent));function createInlineFormatTool(settings){return InlineFormatToolNS.createInlineFormatTool(settings)}EditorTools.Indent=Indent,EditorTools.createInlineFormatTool=createInlineFormatTool;var Bold=function(_super){function Bold(){return null!==_super&&_super.apply(this,arguments)||this}return main_extends(Bold,_super),Bold}(createInlineFormatTool(toolsSettings.w.bold));EditorTools.Bold=Bold;var Italic=function(_super){function Italic(){return null!==_super&&_super.apply(this,arguments)||this}return main_extends(Italic,_super),Italic}(createInlineFormatTool(toolsSettings.w.italic));EditorTools.Italic=Italic;var Underline=function(_super){function Underline(){return null!==_super&&_super.apply(this,arguments)||this}return main_extends(Underline,_super),Underline}(createInlineFormatTool(toolsSettings.w.underline));EditorTools.Underline=Underline;var Strikethrough=function(_super){function Strikethrough(){return null!==_super&&_super.apply(this,arguments)||this}return main_extends(Strikethrough,_super),Strikethrough}(createInlineFormatTool(toolsSettings.w.strikethrough));EditorTools.Strikethrough=Strikethrough;var Subscript=function(_super){function Subscript(){return null!==_super&&_super.apply(this,arguments)||this}return main_extends(Subscript,_super),Subscript}(createInlineFormatTool(toolsSettings.w.subscript));EditorTools.Subscript=Subscript;var Superscript=function(_super){function Superscript(){return null!==_super&&_super.apply(this,arguments)||this}return main_extends(Superscript,_super),Superscript}(createInlineFormatTool(toolsSettings.w.superscript));function createInsertImageTool(settings){return function(settings){var Tool=function(_super){function InsertImageTool(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.state={openedDialog:!1},_this.toggleDialog=function(){_this.setState({openedDialog:!_this.state.openedDialog})},_this}return insertImage_extends(InsertImageTool,_super),InsertImageTool.prototype.render=function(){var _a=this.props,view=_a.view,render=_a.render,buttonProps=insertImage_rest(_a,["view","render"]),state=view&&view.state,nodeType=state?state.schema.nodes[settings.node]:void 0,localization=(0,intlUtils.GB)(this),insertImage=settings.messages.insertImage,disabled=!nodeType||!state||!(0,main.cz2)(state,nodeType),rendering=[react.createElement(Button.$,insertImage_assign({onClick:disabled?void 0:this.toggleDialog,"aria-disabled":!!disabled||void 0,key:"insertImage"},utils.Rn,{title:localization.toLanguageString(insertImage,messages.D[insertImage])},settings.props,buttonProps,{className:(0,classNames.x)(buttonProps.className,settings.props.className,{"k-disabled":disabled})})),this.state.openedDialog&&view&&react.createElement(dialogs_main.H.InsertImageDialog,{key:"insertImageDialog",view,settings,dir:buttonProps.dir,onClose:this.toggleDialog})||null];return render?render.call(void 0,rendering,{view}):rendering},InsertImageTool}(react.Component);return(0,intlUtils.AK)(Tool),Tool}(settings)}EditorTools.Superscript=Superscript,EditorTools.createInsertImageTool=createInsertImageTool;var InsertImage=function(_super){function InsertImage(){return null!==_super&&_super.apply(this,arguments)||this}return main_extends(InsertImage,_super),InsertImage}(createInsertImageTool(toolsSettings.w.image));function createLinkTool(settings){return LinkToolNS.createLinkTool(settings)}EditorTools.InsertImage=InsertImage,EditorTools.createLinkTool=createLinkTool;var Link=function(_super){function Link(){return null!==_super&&_super.apply(this,arguments)||this}return main_extends(Link,_super),Link}(createLinkTool(toolsSettings.w.link));EditorTools.Link=Link;var InsertFile=function(_super){function InsertFile(){return null!==_super&&_super.apply(this,arguments)||this}return main_extends(InsertFile,_super),InsertFile}(createLinkTool(toolsSettings.w.insertFile));function createListTool(settings){return ListToolNS.createListTool(settings)}EditorTools.InsertFile=InsertFile,EditorTools.createListTool=createListTool;var OrderedList=function(_super){function OrderedList(){return null!==_super&&_super.apply(this,arguments)||this}return main_extends(OrderedList,_super),OrderedList}(createListTool(toolsSettings.w.orderedList));EditorTools.OrderedList=OrderedList;var UnorderedList=function(_super){function UnorderedList(){return null!==_super&&_super.apply(this,arguments)||this}return main_extends(UnorderedList,_super),UnorderedList}(createListTool(toolsSettings.w.bulletList));function createOutdentTool(settings){return OutdentToolNS.createOutdentTool(settings)}EditorTools.UnorderedList=UnorderedList,EditorTools.BulletedList=function(props){var ulItems=[{icon:"list-unordered",svgIcon:index_es.listUnorderedIcon,text:"Disc",style:"disc"},{icon:"list-unordered-outline",svgIcon:index_es.listUnorderedOutlineIcon,text:"Circle",style:"circle"},{icon:"list-unordered-square",svgIcon:index_es.listUnorderedSquareIcon,text:"Square",style:"square"}];return react.createElement(ListTool,main_assign({listType:toolsSettings.w.bulletList.listType,items:ulItems,icon:"list-unordered",svgIcon:index_es.listUnorderedIcon,titleKey:toolsSettings.w.bulletList.messages.title},props))},EditorTools.NumberedList=function(props){var olItems=[{icon:"list-ordered",svgIcon:index_es.listOrderedIcon,text:"Decimal"},{icon:"list-roman-upper",svgIcon:index_es.listRomanUpperIcon,text:"Upper roman",style:"upper-roman"},{icon:"list-roman-lower",svgIcon:index_es.listRomanLowerIcon,text:"Lower roman",style:"lower-roman"},{icon:"list-latin-big",svgIcon:index_es.listLatinBigIcon,text:"Upper latin",style:"upper-latin"},{icon:"list-latin-small",svgIcon:index_es.listLatinSmallIcon,text:"Lower latin",style:"lower-latin"}];return react.createElement(ListTool,main_assign({listType:toolsSettings.w.orderedList.listType,items:olItems,icon:"list-ordered",svgIcon:index_es.listOrderedIcon,titleKey:toolsSettings.w.orderedList.messages.title},props))},EditorTools.TableCellProperties=TableCellProperties,EditorTools.TableProperties=TableProperties,EditorTools.createOutdentTool=createOutdentTool;var Outdent=function(_super){function Outdent(){return null!==_super&&_super.apply(this,arguments)||this}return main_extends(Outdent,_super),Outdent}(createOutdentTool(toolsSettings.w.outdent));function createAddRowBeforeTool(settings){return TableEditNS.createAddRowBeforeTool(settings)}function createAddRowAfterTool(settings){return TableEditNS.createAddRowAfterTool(settings)}function createAddColumnBeforeTool(settings){return TableEditNS.createAddColumnBeforeTool(settings)}function createAddColumnAfterTool(settings){return TableEditNS.createAddColumnAfterTool(settings)}function createDeleteRowTool(settings){return TableEditNS.createDeleteRowTool(settings)}function createDeleteColumnTool(settings){return TableEditNS.createDeleteColumnTool(settings)}function createDeleteTableTool(settings){return TableEditNS.createDeleteTableTool(settings)}function createMergeCellsTool(settings){return TableEditNS.createMergeCellsTool(settings)}function createSplitCellTool(settings){return TableEditNS.createSplitCellTool(settings)}EditorTools.Outdent=Outdent,EditorTools.Print=function(props){return react.createElement(Print,main_assign({},props))},EditorTools.Pdf=function(props){return react.createElement(Pdf,main_assign({},props))},EditorTools.SelectAll=function(props){return react.createElement(SelectAll,main_assign({},props))},EditorTools.CleanFormatting=function(props){return react.createElement(CleanFormatting,main_assign({},props))},EditorTools.createAddRowBeforeTool=createAddRowBeforeTool,EditorTools.createAddRowAfterTool=createAddRowAfterTool,EditorTools.createAddColumnBeforeTool=createAddColumnBeforeTool,EditorTools.createAddColumnAfterTool=createAddColumnAfterTool,EditorTools.createDeleteRowTool=createDeleteRowTool,EditorTools.createDeleteColumnTool=createDeleteColumnTool,EditorTools.createDeleteTableTool=createDeleteTableTool,EditorTools.createMergeCellsTool=createMergeCellsTool,EditorTools.createSplitCellTool=createSplitCellTool;var AddRowBefore=function(_super){function AddRowBefore(){return null!==_super&&_super.apply(this,arguments)||this}return main_extends(AddRowBefore,_super),AddRowBefore}(createAddRowBeforeTool(toolsSettings.w.addRowBefore));EditorTools.AddRowBefore=AddRowBefore;var AddRowAfter=function(_super){function AddRowAfter(){return null!==_super&&_super.apply(this,arguments)||this}return main_extends(AddRowAfter,_super),AddRowAfter}(createAddRowAfterTool(toolsSettings.w.addRowAfter));EditorTools.AddRowAfter=AddRowAfter;var AddColumnBefore=function(_super){function AddColumnBefore(){return null!==_super&&_super.apply(this,arguments)||this}return main_extends(AddColumnBefore,_super),AddColumnBefore}(createAddColumnBeforeTool(toolsSettings.w.addColumnBefore));EditorTools.AddColumnBefore=AddColumnBefore;var AddColumnAfter=function(_super){function AddColumnAfter(){return null!==_super&&_super.apply(this,arguments)||this}return main_extends(AddColumnAfter,_super),AddColumnAfter}(createAddColumnAfterTool(toolsSettings.w.addColumnAfter));EditorTools.AddColumnAfter=AddColumnAfter;var DeleteRow=function(_super){function DeleteRow(){return null!==_super&&_super.apply(this,arguments)||this}return main_extends(DeleteRow,_super),DeleteRow}(createDeleteRowTool(toolsSettings.w.deleteRow));EditorTools.DeleteRow=DeleteRow;var DeleteColumn=function(_super){function DeleteColumn(){return null!==_super&&_super.apply(this,arguments)||this}return main_extends(DeleteColumn,_super),DeleteColumn}(createDeleteColumnTool(toolsSettings.w.deleteColumn));EditorTools.DeleteColumn=DeleteColumn;var DeleteTable=function(_super){function DeleteTable(){return null!==_super&&_super.apply(this,arguments)||this}return main_extends(DeleteTable,_super),DeleteTable}(createDeleteTableTool(toolsSettings.w.deleteTable));EditorTools.DeleteTable=DeleteTable;var MergeCells=function(_super){function MergeCells(){return null!==_super&&_super.apply(this,arguments)||this}return main_extends(MergeCells,_super),MergeCells}(createMergeCellsTool(toolsSettings.w.mergeCells));EditorTools.MergeCells=MergeCells;var SplitCell=function(_super){function SplitCell(){return null!==_super&&_super.apply(this,arguments)||this}return main_extends(SplitCell,_super),SplitCell}(createSplitCellTool(toolsSettings.w.splitCell));function createUnlinkTool(settings){return UnlinkToolNS.createUnlinkTool(settings)}EditorTools.SplitCell=SplitCell,EditorTools.createUnlinkTool=createUnlinkTool;var Unlink=function(_super){function Unlink(){return null!==_super&&_super.apply(this,arguments)||this}return main_extends(Unlink,_super),Unlink}(createUnlinkTool(toolsSettings.w.unlink));function createViewHtmlTool(settings){return ViewHtmlToolNS.createViewHtmlTool(settings)}EditorTools.Unlink=Unlink,EditorTools.createViewHtmlTool=createViewHtmlTool;var ViewHtml=function(_super){function ViewHtml(){return null!==_super&&_super.apply(this,arguments)||this}return main_extends(ViewHtml,_super),ViewHtml}(createViewHtmlTool(toolsSettings.w.viewHtml));EditorTools.ViewHtml=ViewHtml;var FindAndReplace=function(_super){function FindAndReplace(){return null!==_super&&_super.apply(this,arguments)||this}return main_extends(FindAndReplace,_super),FindAndReplace}(findReplace_FindAndReplace);EditorTools.FindAndReplace=FindAndReplace}(EditorTools||(EditorTools={}))},"./node_modules/@progress/kendo-react-editor/dist/es/tools/utils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Bo:()=>parentNode,JT:()=>formatString,MD:()=>units,MF:()=>popupSettings,Rn:()=>onDownPreventDefault,gx:()=>userSelectNone,le:()=>borderStyles,uh:()=>itemRender});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_messages__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@progress/kendo-react-editor/dist/es/messages/index.js"),onDownPreventDefault={onMouseDown:function(e){return e.preventDefault()},onPointerDown:function(e){return e.preventDefault()}},userSelectNone={userSelect:"none"},formatString=function(input){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];return args.forEach((function(value,index){input=input.replace("{"+index+"}",String(value))})),input},itemRender=function(li,itemProps){return itemProps.dataItem.style?react__WEBPACK_IMPORTED_MODULE_0__.cloneElement(li,li.props,react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{style:itemProps.dataItem.style},li.props.children)):li},units=["px","em","%"],popupSettings={animate:{openDuration:150,closeDuration:150}},borderStyles=[{textKey:_messages__WEBPACK_IMPORTED_MODULE_1__.H.borderStyleNone,text:_messages__WEBPACK_IMPORTED_MODULE_1__.D[_messages__WEBPACK_IMPORTED_MODULE_1__.H.borderStyleNone],value:"none"},{textKey:_messages__WEBPACK_IMPORTED_MODULE_1__.H.borderStyleSolid,text:_messages__WEBPACK_IMPORTED_MODULE_1__.D[_messages__WEBPACK_IMPORTED_MODULE_1__.H.borderStyleSolid],value:"solid"},{textKey:_messages__WEBPACK_IMPORTED_MODULE_1__.H.borderStyleDotted,text:_messages__WEBPACK_IMPORTED_MODULE_1__.D[_messages__WEBPACK_IMPORTED_MODULE_1__.H.borderStyleDotted],value:"dotted"},{textKey:_messages__WEBPACK_IMPORTED_MODULE_1__.H.borderStyleDashed,text:_messages__WEBPACK_IMPORTED_MODULE_1__.D[_messages__WEBPACK_IMPORTED_MODULE_1__.H.borderStyleDashed],value:"dashed"},{textKey:_messages__WEBPACK_IMPORTED_MODULE_1__.H.borderStyleDouble,text:_messages__WEBPACK_IMPORTED_MODULE_1__.D[_messages__WEBPACK_IMPORTED_MODULE_1__.H.borderStyleDouble],value:"double"},{textKey:_messages__WEBPACK_IMPORTED_MODULE_1__.H.borderStyleGroove,text:_messages__WEBPACK_IMPORTED_MODULE_1__.D[_messages__WEBPACK_IMPORTED_MODULE_1__.H.borderStyleGroove],value:"groove"},{textKey:_messages__WEBPACK_IMPORTED_MODULE_1__.H.borderStyleRidge,text:_messages__WEBPACK_IMPORTED_MODULE_1__.D[_messages__WEBPACK_IMPORTED_MODULE_1__.H.borderStyleRidge],value:"ridge"},{textKey:_messages__WEBPACK_IMPORTED_MODULE_1__.H.borderStyleInset,text:_messages__WEBPACK_IMPORTED_MODULE_1__.D[_messages__WEBPACK_IMPORTED_MODULE_1__.H.borderStyleInset],value:"inset"},{textKey:_messages__WEBPACK_IMPORTED_MODULE_1__.H.borderStyleOutset,text:_messages__WEBPACK_IMPORTED_MODULE_1__.D[_messages__WEBPACK_IMPORTED_MODULE_1__.H.borderStyleOutset],value:"outset"},{textKey:_messages__WEBPACK_IMPORTED_MODULE_1__.H.borderStyleInitial,text:_messages__WEBPACK_IMPORTED_MODULE_1__.D[_messages__WEBPACK_IMPORTED_MODULE_1__.H.borderStyleInitial],value:"initial"},{textKey:_messages__WEBPACK_IMPORTED_MODULE_1__.H.borderStyleInherit,text:_messages__WEBPACK_IMPORTED_MODULE_1__.D[_messages__WEBPACK_IMPORTED_MODULE_1__.H.borderStyleInherit],value:"inherit"},{textKey:_messages__WEBPACK_IMPORTED_MODULE_1__.H.borderStyleHidden,text:_messages__WEBPACK_IMPORTED_MODULE_1__.D[_messages__WEBPACK_IMPORTED_MODULE_1__.H.borderStyleHidden],value:"hidden"}];function parentNode(pos,predicate){for(var depth=pos.depth;depth>0;depth--){var node=pos.node(depth);if(predicate(node))return{node,depth}}return null}},"./node_modules/@progress/kendo-react-editor/dist/es/utils/props-key.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{F:()=>editorPropsKey});var editorPropsKey=new(__webpack_require__("./node_modules/@progress/kendo-editor-common/dist/es/main.js").hsM)("editor-props")},"./node_modules/@progress/kendo-react-form/dist/es/FieldWrapper.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{c:()=>FieldWrapper});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@progress/kendo-react-common/dist/es/classNames.js"),FieldWrapper=function(props){var fieldClassName=(0,_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_1__.x)({"k-form-field":!0,"k-rtl":"rtl"===props.dir},props.className);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:fieldClassName,style:props.style},props.children)};FieldWrapper.displayName="KendoReactFieldWrapper"},"./node_modules/@progress/kendo-react-inputs/dist/es/checkbox/Checkbox.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{S:()=>Checkbox});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./node_modules/prop-types/index.js"),_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@progress/kendo-react-common/dist/es/hocs/withPropsContext.js"),_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@progress/kendo-react-common/dist/es/hooks/usePropsContext.js"),_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@progress/kendo-react-common/dist/es/guid.js"),_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@progress/kendo-react-common/dist/es/events/dispatchEvent.js"),_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@progress/kendo-react-common/dist/es/keys.js"),_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@progress/kendo-react-common/dist/es/hooks/useDir.js"),_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@progress/kendo-react-common/dist/es/classNames.js"),_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@progress/kendo-react-common/dist/es/theme.js"),_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/@progress/kendo-react-common/dist/es/getTabIndex.js"),_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@progress/kendo-react-common/dist/es/validate-package.js"),_package_metadata__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@progress/kendo-react-inputs/dist/es/package-metadata.js"),_progress_kendo_react_intl__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@progress/kendo-react-intl/dist/es/hooks/useLocalization.js"),_messages__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@progress/kendo-react-inputs/dist/es/messages/index.js"),__assign=function(){return __assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign.apply(this,arguments)},__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t},CheckboxPropsContext=(0,_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_1__.K)(),Checkbox=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((function(directProps,target){var _a;(0,_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_2__.$)(_package_metadata__WEBPACK_IMPORTED_MODULE_3__.Q);var props=(0,_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_4__.t)(CheckboxPropsContext,directProps),_b=props,ariaDescribedBy=_b.ariaDescribedBy,ariaLabelledBy=_b.ariaLabelledBy,checked=_b.checked,className=_b.className,labelClassName=_b.labelClassName,children=_b.children,defaultChecked=_b.defaultChecked,disabled=_b.disabled,defaultValue=_b.defaultValue,id=_b.id,size=_b.size,rounded=_b.rounded,label=_b.label,labelPlacement=_b.labelPlacement,name=_b.name,labelOptional=_b.labelOptional,onChange=_b.onChange,onFocus=_b.onFocus,onBlur=_b.onBlur,tabIndex=_b.tabIndex,value=_b.value,required=_b.required,valid=_b.valid,validationMessage=_b.validationMessage,validityStyles=_b.validityStyles,others=(_b.visited,_b.touched,_b.modified,__rest(_b,["ariaDescribedBy","ariaLabelledBy","checked","className","labelClassName","children","defaultChecked","disabled","defaultValue","id","size","rounded","label","labelPlacement","name","labelOptional","onChange","onFocus","onBlur","tabIndex","value","required","valid","validationMessage","validityStyles","visited","touched","modified"])),elementRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(null),focusElement=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((function(){elementRef.current&&elementRef.current.focus()}),[]),getImperativeHandle=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((function(){return{element:elementRef.current,focus:focusElement,get name(){return elementRef.current&&elementRef.current.name}}}),[focusElement]);react__WEBPACK_IMPORTED_MODULE_0__.useImperativeHandle(target,getImperativeHandle);var _c=react__WEBPACK_IMPORTED_MODULE_0__.useState(defaultChecked),stateChecked=_c[0],setStateChecked=_c[1],_d=react__WEBPACK_IMPORTED_MODULE_0__.useState(defaultValue),stateValue=_d[0],setStateValue=_d[1],valueIsBoolean="boolean"==typeof value||null===value,isCheckedControlled=void 0!==checked,isValueControlled=valueIsBoolean,currentValue=isValueControlled?value:stateValue,currentChecked=isCheckedControlled?checked:isValueControlled?void 0:stateChecked,useValueAsChecked=void 0===currentChecked&&currentValue,checkedProp=useValueAsChecked?currentValue:currentChecked,valueProp=useValueAsChecked||isValueControlled?null===value?value:void 0:value||currentValue,indeterminateProp=null===checkedProp||null===valueProp,calculatedId=react__WEBPACK_IMPORTED_MODULE_0__.useMemo((function(){return(0,_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_5__.O)()}),[]),localizationService=(0,_progress_kendo_react_intl__WEBPACK_IMPORTED_MODULE_6__.B)(),localizeMessage=function(message){return localizationService.toLanguageString(message,_messages__WEBPACK_IMPORTED_MODULE_7__.DZ[message])},defaultValidationMessage=localizeMessage(_messages__WEBPACK_IMPORTED_MODULE_7__.FR),optionalMessage=localizeMessage(_messages__WEBPACK_IMPORTED_MODULE_7__.Xe),isValid=void 0!==valid?valid:!required||!!currentChecked;react__WEBPACK_IMPORTED_MODULE_0__.useEffect((function(){elementRef.current&&elementRef.current.setCustomValidity&&elementRef.current.setCustomValidity(isValid?"":validationMessage||defaultValidationMessage)}),[isValid,validationMessage,defaultValidationMessage]);var setValue=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((function(e,val){isValueControlled||disabled||(setStateValue(val),isCheckedControlled||disabled||setStateChecked(val)),onChange&&!disabled&&(0,_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_8__.P)(onChange,e,__assign(__assign({},getImperativeHandle()),{value:val}),{value:val})}),[isCheckedControlled,disabled,onChange,isValueControlled,getImperativeHandle]),handleChange=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((function(e){var newValue=e.target.checked;setValue(e,newValue)}),[setValue,value]),handleKeyDown=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((function(e){if(!disabled){var keyCode=e.keyCode,currentVal=e.currentTarget.checked;keyCode===_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_9__.D.space&&(e.preventDefault(),e.stopPropagation(),setValue(e,!currentVal))}}),[disabled,setValue]),handleKeyUp=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((function(e){disabled||e.keyCode===_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_9__.D.space&&e.preventDefault()}),[disabled]),handleFocus=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((function(e){onFocus&&!disabled&&(0,_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_8__.P)(onFocus,e,getImperativeHandle(),void 0)}),[onFocus,disabled,getImperativeHandle]),handleBlur=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((function(e){onBlur&&!disabled&&(0,_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_8__.P)(onBlur,e,getImperativeHandle(),void 0)}),[onBlur,disabled,getImperativeHandle]),dir=(0,_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_10__.Z)(elementRef,props.dir),checkboxClasses=(0,_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_11__.x)("k-checkbox-wrap",className),inputProps=__assign(__assign({type:"checkbox",className:(0,_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_11__.x)("k-checkbox",(_a={},_a["k-checkbox-".concat(_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_12__.O.sizeMap[size]||size)]=size,_a["k-rounded-".concat(_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_12__.O.roundedMap[rounded]||rounded)]=rounded,_a["k-indeterminate"]=indeterminateProp,_a["k-disabled"]=disabled,_a["k-invalid k-invalid"]=!(isValid||void 0!==validityStyles||!0===validityStyles),_a)),ref:elementRef,name,id:id||calculatedId,"aria-labelledby":ariaLabelledBy,"aria-describedby":ariaDescribedBy,checked:Boolean(checkedProp),disabled,tabIndex:(0,_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_13__.y)(tabIndex,disabled),role:"checkbox",required:void 0!==required&&required,"aria-checked":!(!currentChecked&&!checkedProp)||!!indeterminateProp&&"mixed","aria-disabled":disabled||void 0},others),{onChange:handleChange,onKeyDown:handleKeyDown,onKeyUp:handleKeyUp,onFocus:handleFocus,onBlur:handleBlur}),checkboxInput=react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,void 0===valueProp?react__WEBPACK_IMPORTED_MODULE_0__.createElement("input",__assign({},inputProps)):react__WEBPACK_IMPORTED_MODULE_0__.createElement("input",__assign({},inputProps,{value:valueIsBoolean?void 0:null===valueProp?"":valueProp}))),checkboxLabel=react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,void 0!==label?react__WEBPACK_IMPORTED_MODULE_0__.createElement("label",{className:(0,_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_11__.x)("k-checkbox-label",labelClassName),htmlFor:id||calculatedId,style:{userSelect:"none"}},label,labelOptional&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"k-label-optional"},optionalMessage)):null);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,"before"===labelPlacement?react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:checkboxClasses,dir:"rtl"},checkboxInput,checkboxLabel,children):react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:checkboxClasses,dir},checkboxInput,checkboxLabel,children))}));Checkbox.propTypes={checked:prop_types__WEBPACK_IMPORTED_MODULE_14__.bool,className:prop_types__WEBPACK_IMPORTED_MODULE_14__.string,defaultChecked:prop_types__WEBPACK_IMPORTED_MODULE_14__.bool,defaultValue:prop_types__WEBPACK_IMPORTED_MODULE_14__.any,dir:prop_types__WEBPACK_IMPORTED_MODULE_14__.string,disabled:prop_types__WEBPACK_IMPORTED_MODULE_14__.bool,id:prop_types__WEBPACK_IMPORTED_MODULE_14__.string,size:prop_types__WEBPACK_IMPORTED_MODULE_14__.oneOf([null,"small","medium","large"]),rounded:prop_types__WEBPACK_IMPORTED_MODULE_14__.oneOf([null,"small","medium","large"]),ariaLabelledBy:prop_types__WEBPACK_IMPORTED_MODULE_14__.string,ariaDescribedBy:prop_types__WEBPACK_IMPORTED_MODULE_14__.string,label:prop_types__WEBPACK_IMPORTED_MODULE_14__.any,labelPlacement:prop_types__WEBPACK_IMPORTED_MODULE_14__.string,labelOptional:prop_types__WEBPACK_IMPORTED_MODULE_14__.bool,name:prop_types__WEBPACK_IMPORTED_MODULE_14__.string,tabIndex:prop_types__WEBPACK_IMPORTED_MODULE_14__.number,value:prop_types__WEBPACK_IMPORTED_MODULE_14__.any,validationMessage:prop_types__WEBPACK_IMPORTED_MODULE_14__.string,required:prop_types__WEBPACK_IMPORTED_MODULE_14__.bool,validate:prop_types__WEBPACK_IMPORTED_MODULE_14__.bool,valid:prop_types__WEBPACK_IMPORTED_MODULE_14__.bool,onChange:prop_types__WEBPACK_IMPORTED_MODULE_14__.func,onFocus:prop_types__WEBPACK_IMPORTED_MODULE_14__.func,onBlur:prop_types__WEBPACK_IMPORTED_MODULE_14__.func};Checkbox.defaultProps={size:"medium",rounded:"medium"},Checkbox.displayName="KendoCheckbox"},"./node_modules/@progress/kendo-react-inputs/dist/es/textarea/TextArea.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{f:()=>TextArea});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/prop-types/index.js"),_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@progress/kendo-react-common/dist/es/hocs/withPropsContext.js"),_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@progress/kendo-react-common/dist/es/hooks/usePropsContext.js"),_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@progress/kendo-react-common/dist/es/guid.js"),_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@progress/kendo-react-common/dist/es/hooks/useDir.js"),_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@progress/kendo-react-common/dist/es/events/dispatchEvent.js"),_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@progress/kendo-react-common/dist/es/getTabIndex.js"),_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@progress/kendo-react-common/dist/es/classNames.js"),_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@progress/kendo-react-common/dist/es/theme.js"),__assign=function(){return __assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign.apply(this,arguments)},__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t},TextAreaPropsContext=(0,_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_1__.K)(),TextArea=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((function(directProps,target){var _a,props=(0,_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_2__.t)(TextAreaPropsContext,directProps),_b=props,size=_b.size,rounded=_b.rounded,fillMode=_b.fillMode,ariaDescribedBy=_b.ariaDescribedBy,ariaLabelledBy=_b.ariaLabelledBy,autoSize=_b.autoSize,className=_b.className,defaultValue=_b.defaultValue,disabled=_b.disabled,readOnly=_b.readOnly,required=_b.required,rows=_b.rows,id=_b.id,name=_b.name,placeholder=_b.placeholder,style=_b.style,tabIndex=_b.tabIndex,value=_b.value,valid=_b.valid,validationMessage=_b.validationMessage,validityStyles=_b.validityStyles,onChange=_b.onChange,onFocus=_b.onFocus,onBlur=_b.onBlur,others=(_b.visited,_b.touched,_b.modified,__rest(_b,["size","rounded","fillMode","ariaDescribedBy","ariaLabelledBy","autoSize","className","defaultValue","disabled","readOnly","required","rows","id","name","placeholder","style","tabIndex","value","valid","validationMessage","validityStyles","onChange","onFocus","onBlur","visited","touched","modified"])),elementRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(null),focusElement=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((function(){elementRef.current&&elementRef.current.focus()}),[]),_c=react__WEBPACK_IMPORTED_MODULE_0__.useState(defaultValue),stateValue=_c[0],setStateValue=_c[1],isControlled=void 0!==value,currentValue=isControlled?value:stateValue,getImperativeHandle=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((function(){return{element:elementRef,focus:focusElement,get value(){return currentValue},get name(){return elementRef.current&&elementRef.current.name}}}),[focusElement,currentValue]);react__WEBPACK_IMPORTED_MODULE_0__.useImperativeHandle(target,getImperativeHandle);var _d=react__WEBPACK_IMPORTED_MODULE_0__.useState("auto"),textAreaHeight=_d[0],setTextAreaHeight=_d[1],calculatedId=react__WEBPACK_IMPORTED_MODULE_0__.useMemo((function(){return(0,_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_3__.O)()}),[]),dir=(0,_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_4__.Z)(elementRef,props.dir),isValid=void 0!==valid?valid:!required||!!currentValue;react__WEBPACK_IMPORTED_MODULE_0__.useEffect((function(){elementRef.current&&elementRef.current.setCustomValidity&&elementRef.current.setCustomValidity(isValid?"":validationMessage||"")}),[isValid,validationMessage]),react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect((function(){elementRef.current&&setTextAreaHeight("".concat(elementRef.current.scrollHeight,"px"))}),[currentValue]);var handleChange=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((function(event){var newValue=event.target.value;setTextAreaHeight("auto"),isControlled||disabled||setStateValue(newValue),onChange&&!disabled&&(0,_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_5__.P)(onChange,event,__assign(__assign({},getImperativeHandle()),{value:newValue}),{value:newValue})}),[setStateValue,onChange,disabled,isControlled]),handleFocus=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((function(event){onFocus&&!disabled&&(0,_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_5__.P)(onFocus,event,getImperativeHandle(),void 0)}),[onFocus,disabled]),handleBlur=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((function(event){onBlur&&!disabled&&(0,_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_5__.P)(onBlur,event,getImperativeHandle(),void 0)}),[onBlur,disabled]),textAreaProps=__assign(__assign({id:id||calculatedId,role:"textbox",name,className:"k-input-inner !k-overflow-auto",ref:elementRef,disabled,rows,placeholder,readOnly,required,tabIndex:(0,_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_6__.y)(tabIndex,disabled),style:autoSize?{resize:"none",overflow:"hidden",height:textAreaHeight}:{},"aria-labelledby":ariaLabelledBy,"aria-describedby":ariaDescribedBy,"aria-multiline":!0,"aria-disabled":disabled||void 0,value:isControlled?value:stateValue},others),{onChange:handleChange,onFocus:handleFocus,onBlur:handleBlur});return react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:(0,_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_7__.x)("k-input","k-textarea",(_a={},_a["k-input-".concat(_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_8__.O.sizeMap[size]||size)]=size,_a["k-input-".concat(fillMode)]=fillMode,_a["k-rounded-".concat(_progress_kendo_react_common__WEBPACK_IMPORTED_MODULE_8__.O.roundedMap[rounded]||rounded)]=rounded,_a["k-invalid"]=!(isValid||void 0!==validityStyles||!0===validityStyles),_a["k-required"]=required,_a["k-disabled"]=disabled,_a),className),style,dir},react__WEBPACK_IMPORTED_MODULE_0__.createElement("textarea",__assign({},textAreaProps)))}));TextArea.propTypes={ariaDescribedBy:prop_types__WEBPACK_IMPORTED_MODULE_9__.string,ariaLabelledBy:prop_types__WEBPACK_IMPORTED_MODULE_9__.string,autoSize:prop_types__WEBPACK_IMPORTED_MODULE_9__.bool,className:prop_types__WEBPACK_IMPORTED_MODULE_9__.string,defaultValue:prop_types__WEBPACK_IMPORTED_MODULE_9__.string,dir:prop_types__WEBPACK_IMPORTED_MODULE_9__.string,disabled:prop_types__WEBPACK_IMPORTED_MODULE_9__.bool,readOnly:prop_types__WEBPACK_IMPORTED_MODULE_9__.bool,rows:prop_types__WEBPACK_IMPORTED_MODULE_9__.number,id:prop_types__WEBPACK_IMPORTED_MODULE_9__.string,name:prop_types__WEBPACK_IMPORTED_MODULE_9__.string,placeholder:prop_types__WEBPACK_IMPORTED_MODULE_9__.string,style:prop_types__WEBPACK_IMPORTED_MODULE_9__.object,tabIndex:prop_types__WEBPACK_IMPORTED_MODULE_9__.number,value:prop_types__WEBPACK_IMPORTED_MODULE_9__.oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_9__.string,prop_types__WEBPACK_IMPORTED_MODULE_9__.arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_9__.string),prop_types__WEBPACK_IMPORTED_MODULE_9__.number]),onChange:prop_types__WEBPACK_IMPORTED_MODULE_9__.func,onFocus:prop_types__WEBPACK_IMPORTED_MODULE_9__.func,onBlur:prop_types__WEBPACK_IMPORTED_MODULE_9__.func,size:prop_types__WEBPACK_IMPORTED_MODULE_9__.oneOf([null,"small","medium","large"]),rounded:prop_types__WEBPACK_IMPORTED_MODULE_9__.oneOf([null,"small","medium","large","full"]),fillMode:prop_types__WEBPACK_IMPORTED_MODULE_9__.oneOf([null,"solid","flat","outline"])};TextArea.displayName="KendoTextArea",TextArea.defaultProps={size:"medium",rounded:"medium",fillMode:"solid"}},"./node_modules/react-dom/cjs/react-dom-server-legacy.browser.production.min.js":(__unused_webpack_module,exports,__webpack_require__)=>{var aa=__webpack_require__("./node_modules/react/index.js");function l(a){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+a,c=1;c<arguments.length;c++)b+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+a+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p=Object.prototype.hasOwnProperty,fa=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ha={},ia={};function ja(a){return!!p.call(ia,a)||!p.call(ha,a)&&(fa.test(a)?ia[a]=!0:(ha[a]=!0,!1))}function r(a,b,c,d,f,e,g){this.acceptsBooleans=2===b||3===b||4===b,this.attributeName=d,this.attributeNamespace=f,this.mustUseProperty=c,this.propertyName=a,this.type=b,this.sanitizeURL=e,this.removeEmptyString=g}var t={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(a){t[a]=new r(a,0,!1,a,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(a){var b=a[0];t[b]=new r(b,1,!1,a[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(a){t[a]=new r(a,2,!1,a.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(a){t[a]=new r(a,2,!1,a,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(a){t[a]=new r(a,3,!1,a.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(a){t[a]=new r(a,3,!0,a,null,!1,!1)})),["capture","download"].forEach((function(a){t[a]=new r(a,4,!1,a,null,!1,!1)})),["cols","rows","size","span"].forEach((function(a){t[a]=new r(a,6,!1,a,null,!1,!1)})),["rowSpan","start"].forEach((function(a){t[a]=new r(a,5,!1,a.toLowerCase(),null,!1,!1)}));var ka=/[\-:]([a-z])/g;function la(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(a){var b=a.replace(ka,la);t[b]=new r(b,1,!1,a,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(a){var b=a.replace(ka,la);t[b]=new r(b,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(a){var b=a.replace(ka,la);t[b]=new r(b,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(a){t[a]=new r(a,1,!1,a.toLowerCase(),null,!1,!1)})),t.xlinkHref=new r("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(a){t[a]=new r(a,1,!1,a.toLowerCase(),null,!0,!0)}));var u={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ma=["Webkit","ms","Moz","O"];Object.keys(u).forEach((function(a){ma.forEach((function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1),u[b]=u[a]}))}));var na=/["'&<>]/;function v(a){if("boolean"==typeof a||"number"==typeof a)return""+a;a=""+a;var b=na.exec(a);if(b){var d,c="",f=0;for(d=b.index;d<a.length;d++){switch(a.charCodeAt(d)){case 34:b="&quot;";break;case 38:b="&amp;";break;case 39:b="&#x27;";break;case 60:b="&lt;";break;case 62:b="&gt;";break;default:continue}f!==d&&(c+=a.substring(f,d)),f=d+1,c+=b}a=f!==d?c+a.substring(f,d):c}return a}var oa=/([A-Z])/g,pa=/^ms-/,qa=Array.isArray;function w(a,b){return{insertionMode:a,selectedValue:b}}var sa=new Map;function ta(a,b,c){if("object"!=typeof c)throw Error(l(62));for(var d in b=!0,c)if(p.call(c,d)){var f=c[d];if(null!=f&&"boolean"!=typeof f&&""!==f){if(0===d.indexOf("--")){var e=v(d);f=v((""+f).trim())}else{e=d;var g=sa.get(e);void 0!==g||(g=v(e.replace(oa,"-$1").toLowerCase().replace(pa,"-ms-")),sa.set(e,g)),e=g,f="number"==typeof f?0===f||p.call(u,d)?""+f:f+"px":v((""+f).trim())}b?(b=!1,a.push(' style="',e,":",f)):a.push(";",e,":",f)}}b||a.push('"')}function x(a,b,c,d){switch(c){case"style":return void ta(a,b,d);case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<c.length)||"o"!==c[0]&&"O"!==c[0]||"n"!==c[1]&&"N"!==c[1])if(null!==(b=t.hasOwnProperty(c)?t[c]:null)){switch(typeof d){case"function":case"symbol":return;case"boolean":if(!b.acceptsBooleans)return}switch(c=b.attributeName,b.type){case 3:d&&a.push(" ",c,'=""');break;case 4:!0===d?a.push(" ",c,'=""'):!1!==d&&a.push(" ",c,'="',v(d),'"');break;case 5:isNaN(d)||a.push(" ",c,'="',v(d),'"');break;case 6:!isNaN(d)&&1<=d&&a.push(" ",c,'="',v(d),'"');break;default:b.sanitizeURL&&(d=""+d),a.push(" ",c,'="',v(d),'"')}}else if(ja(c)){switch(typeof d){case"function":case"symbol":return;case"boolean":if("data-"!==(b=c.toLowerCase().slice(0,5))&&"aria-"!==b)return}a.push(" ",c,'="',v(d),'"')}}function y(a,b,c){if(null!=b){if(null!=c)throw Error(l(60));if("object"!=typeof b||!("__html"in b))throw Error(l(61));null!=(b=b.__html)&&a.push(""+b)}}function va(a,b,c,d){a.push(A(c));var e,f=c=null;for(e in b)if(p.call(b,e)){var g=b[e];if(null!=g)switch(e){case"children":c=g;break;case"dangerouslySetInnerHTML":f=g;break;default:x(a,d,e,g)}}return a.push(">"),y(a,f,c),"string"==typeof c?(a.push(v(c)),null):c}var wa=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,xa=new Map;function A(a){var b=xa.get(a);if(void 0===b){if(!wa.test(a))throw Error(l(65,a));b="<"+a,xa.set(a,b)}return b}function ya(a,b,c,d,f){switch(b){case"select":a.push(A("select"));var e=null,g=null;for(n in c)if(p.call(c,n)){var h=c[n];if(null!=h)switch(n){case"children":e=h;break;case"dangerouslySetInnerHTML":g=h;break;case"defaultValue":case"value":break;default:x(a,d,n,h)}}return a.push(">"),y(a,g,e),e;case"option":g=f.selectedValue,a.push(A("option"));var k=h=null,m=null,n=null;for(e in c)if(p.call(c,e)){var q=c[e];if(null!=q)switch(e){case"children":h=q;break;case"selected":m=q;break;case"dangerouslySetInnerHTML":n=q;break;case"value":k=q;default:x(a,d,e,q)}}if(null!=g)if(c=null!==k?""+k:function ua(a){var b="";return aa.Children.forEach(a,(function(a){null!=a&&(b+=a)})),b}(h),qa(g)){for(d=0;d<g.length;d++)if(""+g[d]===c){a.push(' selected=""');break}}else""+g===c&&a.push(' selected=""');else m&&a.push(' selected=""');return a.push(">"),y(a,n,h),h;case"textarea":for(h in a.push(A("textarea")),n=g=e=null,c)if(p.call(c,h)&&null!=(k=c[h]))switch(h){case"children":n=k;break;case"value":e=k;break;case"defaultValue":g=k;break;case"dangerouslySetInnerHTML":throw Error(l(91));default:x(a,d,h,k)}if(null===e&&null!==g&&(e=g),a.push(">"),null!=n){if(null!=e)throw Error(l(92));if(qa(n)&&1<n.length)throw Error(l(93));e=""+n}return"string"==typeof e&&"\n"===e[0]&&a.push("\n"),null!==e&&a.push(v(""+e)),null;case"input":for(g in a.push(A("input")),k=n=h=e=null,c)if(p.call(c,g)&&null!=(m=c[g]))switch(g){case"children":case"dangerouslySetInnerHTML":throw Error(l(399,"input"));case"defaultChecked":k=m;break;case"defaultValue":h=m;break;case"checked":n=m;break;case"value":e=m;break;default:x(a,d,g,m)}return null!==n?x(a,d,"checked",n):null!==k&&x(a,d,"checked",k),null!==e?x(a,d,"value",e):null!==h&&x(a,d,"value",h),a.push("/>"),null;case"menuitem":for(var C in a.push(A("menuitem")),c)if(p.call(c,C)&&null!=(e=c[C]))switch(C){case"children":case"dangerouslySetInnerHTML":throw Error(l(400));default:x(a,d,C,e)}return a.push(">"),null;case"title":for(q in a.push(A("title")),e=null,c)if(p.call(c,q)&&null!=(g=c[q]))switch(q){case"children":e=g;break;case"dangerouslySetInnerHTML":throw Error(l(434));default:x(a,d,q,g)}return a.push(">"),e;case"listing":case"pre":for(k in a.push(A(b)),g=e=null,c)if(p.call(c,k)&&null!=(h=c[k]))switch(k){case"children":e=h;break;case"dangerouslySetInnerHTML":g=h;break;default:x(a,d,k,h)}if(a.push(">"),null!=g){if(null!=e)throw Error(l(60));if("object"!=typeof g||!("__html"in g))throw Error(l(61));null!=(c=g.__html)&&("string"==typeof c&&0<c.length&&"\n"===c[0]?a.push("\n",c):a.push(""+c))}return"string"==typeof e&&"\n"===e[0]&&a.push("\n"),e;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":for(var D in a.push(A(b)),c)if(p.call(c,D)&&null!=(e=c[D]))switch(D){case"children":case"dangerouslySetInnerHTML":throw Error(l(399,b));default:x(a,d,D,e)}return a.push("/>"),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return va(a,c,b,d);case"html":return 0===f.insertionMode&&a.push("<!DOCTYPE html>"),va(a,c,b,d);default:if(-1===b.indexOf("-")&&"string"!=typeof c.is)return va(a,c,b,d);for(m in a.push(A(b)),g=e=null,c)if(p.call(c,m)&&null!=(h=c[m]))switch(m){case"children":e=h;break;case"dangerouslySetInnerHTML":g=h;break;case"style":ta(a,d,h);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:ja(m)&&"function"!=typeof h&&"symbol"!=typeof h&&a.push(" ",m,'="',v(h),'"')}return a.push(">"),y(a,g,e),e}}function za(a,b,c){if(a.push('\x3c!--$?--\x3e<template id="'),null===c)throw Error(l(395));return a.push(c),a.push('"></template>')}var Ca=/[<\u2028\u2029]/g;function Da(a){return JSON.stringify(a).replace(Ca,(function(a){switch(a){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}}))}function Fa(a,b,c,d){return c.generateStaticMarkup?(a.push(v(b)),!1):(""===b?a=d:(d&&a.push("\x3c!-- --\x3e"),a.push(v(b)),a=!0),a)}var B=Object.assign,Ga=Symbol.for("react.element"),Ha=Symbol.for("react.portal"),Ia=Symbol.for("react.fragment"),Ja=Symbol.for("react.strict_mode"),Ka=Symbol.for("react.profiler"),La=Symbol.for("react.provider"),Ma=Symbol.for("react.context"),Na=Symbol.for("react.forward_ref"),Oa=Symbol.for("react.suspense"),Pa=Symbol.for("react.suspense_list"),Qa=Symbol.for("react.memo"),Ra=Symbol.for("react.lazy"),Sa=Symbol.for("react.scope"),Ta=Symbol.for("react.debug_trace_mode"),Ua=Symbol.for("react.legacy_hidden"),Va=Symbol.for("react.default_value"),Wa=Symbol.iterator;function Xa(a){if(null==a)return null;if("function"==typeof a)return a.displayName||a.name||null;if("string"==typeof a)return a;switch(a){case Ia:return"Fragment";case Ha:return"Portal";case Ka:return"Profiler";case Ja:return"StrictMode";case Oa:return"Suspense";case Pa:return"SuspenseList"}if("object"==typeof a)switch(a.$$typeof){case Ma:return(a.displayName||"Context")+".Consumer";case La:return(a._context.displayName||"Context")+".Provider";case Na:var b=a.render;return(a=a.displayName)||(a=""!==(a=b.displayName||b.name||"")?"ForwardRef("+a+")":"ForwardRef"),a;case Qa:return null!==(b=a.displayName||null)?b:Xa(a.type)||"Memo";case Ra:b=a._payload,a=a._init;try{return Xa(a(b))}catch(c){}}return null}var Ya={};function Za(a,b){if(!(a=a.contextTypes))return Ya;var d,c={};for(d in a)c[d]=b[d];return c}var E=null;function F(a,b){if(a!==b){a.context._currentValue2=a.parentValue,a=a.parent;var c=b.parent;if(null===a){if(null!==c)throw Error(l(401))}else{if(null===c)throw Error(l(401));F(a,c)}b.context._currentValue2=b.value}}function $a(a){a.context._currentValue2=a.parentValue,null!==(a=a.parent)&&$a(a)}function ab(a){var b=a.parent;null!==b&&ab(b),a.context._currentValue2=a.value}function bb(a,b){if(a.context._currentValue2=a.parentValue,null===(a=a.parent))throw Error(l(402));a.depth===b.depth?F(a,b):bb(a,b)}function cb(a,b){var c=b.parent;if(null===c)throw Error(l(402));a.depth===c.depth?F(a,c):cb(a,c),b.context._currentValue2=b.value}function G(a){var b=E;b!==a&&(null===b?ab(a):null===a?$a(b):b.depth===a.depth?F(b,a):b.depth>a.depth?bb(b,a):cb(b,a),E=a)}var db={isMounted:function(){return!1},enqueueSetState:function(a,b){null!==(a=a._reactInternals).queue&&a.queue.push(b)},enqueueReplaceState:function(a,b){(a=a._reactInternals).replace=!0,a.queue=[b]},enqueueForceUpdate:function(){}};function eb(a,b,c,d){var f=void 0!==a.state?a.state:null;a.updater=db,a.props=c,a.state=f;var e={queue:[],replace:!1};a._reactInternals=e;var g=b.contextType;if(a.context="object"==typeof g&&null!==g?g._currentValue2:d,"function"==typeof(g=b.getDerivedStateFromProps)&&(f=null==(g=g(c,f))?f:B({},f,g),a.state=f),"function"!=typeof b.getDerivedStateFromProps&&"function"!=typeof a.getSnapshotBeforeUpdate&&("function"==typeof a.UNSAFE_componentWillMount||"function"==typeof a.componentWillMount))if(b=a.state,"function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),b!==a.state&&db.enqueueReplaceState(a,a.state,null),null!==e.queue&&0<e.queue.length)if(b=e.queue,g=e.replace,e.queue=null,e.replace=!1,g&&1===b.length)a.state=b[0];else{for(e=g?b[0]:a.state,f=!0,g=g?1:0;g<b.length;g++){var h=b[g];null!=(h="function"==typeof h?h.call(a,e,c,d):h)&&(f?(f=!1,e=B({},e,h)):B(e,h))}a.state=e}else e.queue=null}var fb={id:1,overflow:""};function gb(a,b,c){var d=a.id;a=a.overflow;var f=32-H(d)-1;d&=~(1<<f),c+=1;var e=32-H(b)+f;if(30<e){var g=f-f%5;return e=(d&(1<<g)-1).toString(32),d>>=g,f-=g,{id:1<<32-H(b)+f|c<<f|d,overflow:e+a}}return{id:1<<e|c<<f|d,overflow:a}}var H=Math.clz32?Math.clz32:function hb(a){return 0===(a>>>=0)?32:31-(ib(a)/jb|0)|0},ib=Math.log,jb=Math.LN2;var lb="function"==typeof Object.is?Object.is:function kb(a,b){return a===b&&(0!==a||1/a==1/b)||a!=a&&b!=b},I=null,ob=null,J=null,K=null,L=!1,M=!1,N=0,O=null,P=0;function Q(){if(null===I)throw Error(l(321));return I}function pb(){if(0<P)throw Error(l(312));return{memoizedState:null,queue:null,next:null}}function qb(){return null===K?null===J?(L=!1,J=K=pb()):(L=!0,K=J):null===K.next?(L=!1,K=K.next=pb()):(L=!0,K=K.next),K}function rb(){ob=I=null,M=!1,J=null,P=0,K=O=null}function sb(a,b){return"function"==typeof b?b(a):b}function tb(a,b,c){if(I=Q(),K=qb(),L){var d=K.queue;if(b=d.dispatch,null!==O&&void 0!==(c=O.get(d))){O.delete(d),d=K.memoizedState;do{d=a(d,c.action),c=c.next}while(null!==c);return K.memoizedState=d,[d,b]}return[K.memoizedState,b]}return a=a===sb?"function"==typeof b?b():b:void 0!==c?c(b):b,K.memoizedState=a,a=(a=K.queue={last:null,dispatch:null}).dispatch=ub.bind(null,I,a),[K.memoizedState,a]}function vb(a,b){if(I=Q(),b=void 0===b?null:b,null!==(K=qb())){var c=K.memoizedState;if(null!==c&&null!==b){var d=c[1];a:if(null===d)d=!1;else{for(var f=0;f<d.length&&f<b.length;f++)if(!lb(b[f],d[f])){d=!1;break a}d=!0}if(d)return c[0]}}return a=a(),K.memoizedState=[a,b],a}function ub(a,b,c){if(25<=P)throw Error(l(301));if(a===I)if(M=!0,a={action:c,next:null},null===O&&(O=new Map),void 0===(c=O.get(b)))O.set(b,a);else{for(b=c;null!==b.next;)b=b.next;b.next=a}}function wb(){throw Error(l(394))}function R(){}var xb={readContext:function(a){return a._currentValue2},useContext:function(a){return Q(),a._currentValue2},useMemo:vb,useReducer:tb,useRef:function(a){I=Q();var b=(K=qb()).memoizedState;return null===b?(a={current:a},K.memoizedState=a):b},useState:function(a){return tb(sb,a)},useInsertionEffect:R,useLayoutEffect:function(){},useCallback:function(a,b){return vb((function(){return a}),b)},useImperativeHandle:R,useEffect:R,useDebugValue:R,useDeferredValue:function(a){return Q(),a},useTransition:function(){return Q(),[!1,wb]},useId:function(){var a=ob.treeContext,b=a.overflow;a=((a=a.id)&~(1<<32-H(a)-1)).toString(32)+b;var c=S;if(null===c)throw Error(l(404));return b=N++,a=":"+c.idPrefix+"R"+a,0<b&&(a+="H"+b.toString(32)),a+":"},useMutableSource:function(a,b){return Q(),b(a._source)},useSyncExternalStore:function(a,b,c){if(void 0===c)throw Error(l(407));return c()}},S=null,yb=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function zb(a){return console.error(a),null}function T(){}function Bb(a,b,c,d,f,e,g,h){a.allPendingTasks++,null===c?a.pendingRootTasks++:c.pendingTasks++;var k={node:b,ping:function(){var b=a.pingedTasks;b.push(k),1===b.length&&Cb(a)},blockedBoundary:c,blockedSegment:d,abortSet:f,legacyContext:e,context:g,treeContext:h};return f.add(k),k}function U(a,b,c,d,f,e){return{status:0,id:-1,index:b,parentFlushed:!1,chunks:[],children:[],formatContext:d,boundary:c,lastPushedText:f,textEmbedded:e}}function V(a,b){if(null!=(a=a.onError(b))&&"string"!=typeof a)throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof a+'" instead');return a}function W(a,b){var c=a.onShellError;c(b),(c=a.onFatalError)(b),null!==a.destination?(a.status=2,a.destination.destroy(b)):(a.status=1,a.fatalError=b)}function Db(a,b,c,d,f){for(I={},ob=b,N=0,a=c(d,f);M;)M=!1,N=0,P+=1,K=null,a=c(d,f);return rb(),a}function Eb(a,b,c,d){var f=c.render(),e=d.childContextTypes;if(null!=e){var g=b.legacyContext;if("function"!=typeof c.getChildContext)d=g;else{for(var h in c=c.getChildContext())if(!(h in e))throw Error(l(108,Xa(d)||"Unknown",h));d=B({},g,c)}b.legacyContext=d,X(a,b,f),b.legacyContext=g}else X(a,b,f)}function Fb(a,b){if(a&&a.defaultProps){for(var c in b=B({},b),a=a.defaultProps)void 0===b[c]&&(b[c]=a[c]);return b}return b}function Gb(a,b,c,d,f){if("function"==typeof c)if(c.prototype&&c.prototype.isReactComponent){f=Za(c,b.legacyContext);var e=c.contextType;eb(e=new c(d,"object"==typeof e&&null!==e?e._currentValue2:f),c,d,f),Eb(a,b,e,c)}else{f=Db(a,b,c,d,e=Za(c,b.legacyContext));var g=0!==N;if("object"==typeof f&&null!==f&&"function"==typeof f.render&&void 0===f.$$typeof)eb(f,c,d,e),Eb(a,b,f,c);else if(g){d=b.treeContext,b.treeContext=gb(d,1,0);try{X(a,b,f)}finally{b.treeContext=d}}else X(a,b,f)}else{if("string"!=typeof c){switch(c){case Ua:case Ta:case Ja:case Ka:case Ia:case Pa:return void X(a,b,d.children);case Sa:throw Error(l(343));case Oa:a:{c=b.blockedBoundary,f=b.blockedSegment,e=d.fallback,d=d.children;var h={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:g=new Set,errorDigest:null},k=U(0,f.chunks.length,h,f.formatContext,!1,!1);f.children.push(k),f.lastPushedText=!1;var m=U(0,0,null,f.formatContext,!1,!1);m.parentFlushed=!0,b.blockedBoundary=h,b.blockedSegment=m;try{if(Hb(a,b,d),a.responseState.generateStaticMarkup||m.lastPushedText&&m.textEmbedded&&m.chunks.push("\x3c!-- --\x3e"),m.status=1,Y(h,m),0===h.pendingTasks)break a}catch(n){m.status=4,h.forceClientRender=!0,h.errorDigest=V(a,n)}finally{b.blockedBoundary=c,b.blockedSegment=f}b=Bb(a,e,c,k,g,b.legacyContext,b.context,b.treeContext),a.pingedTasks.push(b)}return}if("object"==typeof c&&null!==c)switch(c.$$typeof){case Na:if(d=Db(a,b,c.render,d,f),0!==N){c=b.treeContext,b.treeContext=gb(c,1,0);try{X(a,b,d)}finally{b.treeContext=c}}else X(a,b,d);return;case Qa:return void Gb(a,b,c=c.type,d=Fb(c,d),f);case La:if(f=d.children,c=c._context,d=d.value,e=c._currentValue2,c._currentValue2=d,E=d={parent:g=E,depth:null===g?0:g.depth+1,context:c,parentValue:e,value:d},b.context=d,X(a,b,f),null===(a=E))throw Error(l(403));return d=a.parentValue,a.context._currentValue2=d===Va?a.context._defaultValue:d,a=E=a.parent,void(b.context=a);case Ma:return void X(a,b,d=(d=d.children)(c._currentValue2));case Ra:return void Gb(a,b,c=(f=c._init)(c._payload),d=Fb(c,d),void 0)}throw Error(l(130,null==c?c:typeof c,""))}switch(e=ya((f=b.blockedSegment).chunks,c,d,a.responseState,f.formatContext),f.lastPushedText=!1,g=f.formatContext,f.formatContext=function ra(a,b,c){switch(b){case"select":return w(1,null!=c.value?c.value:c.defaultValue);case"svg":return w(2,null);case"math":return w(3,null);case"foreignObject":return w(1,null);case"table":return w(4,null);case"thead":case"tbody":case"tfoot":return w(5,null);case"colgroup":return w(7,null);case"tr":return w(6,null)}return 4<=a.insertionMode||0===a.insertionMode?w(1,null):a}(g,c,d),Hb(a,b,e),f.formatContext=g,c){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:f.chunks.push("</",c,">")}f.lastPushedText=!1}}function X(a,b,c){if(b.node=c,"object"==typeof c&&null!==c){switch(c.$$typeof){case Ga:return void Gb(a,b,c.type,c.props,c.ref);case Ha:throw Error(l(257));case Ra:var d=c._init;return void X(a,b,c=d(c._payload))}if(qa(c))return void Ib(a,b,c);if(null===c||"object"!=typeof c?d=null:d="function"==typeof(d=Wa&&c[Wa]||c["@@iterator"])?d:null,d&&(d=d.call(c))){if(!(c=d.next()).done){var f=[];do{f.push(c.value),c=d.next()}while(!c.done);Ib(a,b,f)}return}throw a=Object.prototype.toString.call(c),Error(l(31,"[object Object]"===a?"object with keys {"+Object.keys(c).join(", ")+"}":a))}"string"==typeof c?(d=b.blockedSegment).lastPushedText=Fa(b.blockedSegment.chunks,c,a.responseState,d.lastPushedText):"number"==typeof c&&((d=b.blockedSegment).lastPushedText=Fa(b.blockedSegment.chunks,""+c,a.responseState,d.lastPushedText))}function Ib(a,b,c){for(var d=c.length,f=0;f<d;f++){var e=b.treeContext;b.treeContext=gb(e,d,f);try{Hb(a,b,c[f])}finally{b.treeContext=e}}}function Hb(a,b,c){var d=b.blockedSegment.formatContext,f=b.legacyContext,e=b.context;try{return X(a,b,c)}catch(k){if(rb(),"object"!=typeof k||null===k||"function"!=typeof k.then)throw b.blockedSegment.formatContext=d,b.legacyContext=f,b.context=e,G(e),k;c=k;var g=b.blockedSegment,h=U(0,g.chunks.length,null,g.formatContext,g.lastPushedText,!0);g.children.push(h),g.lastPushedText=!1,a=Bb(a,b.node,b.blockedBoundary,h,b.abortSet,b.legacyContext,b.context,b.treeContext).ping,c.then(a,a),b.blockedSegment.formatContext=d,b.legacyContext=f,b.context=e,G(e)}}function Jb(a){var b=a.blockedBoundary;(a=a.blockedSegment).status=3,Kb(this,b,a)}function Lb(a,b,c){var d=a.blockedBoundary;a.blockedSegment.status=3,null===d?(b.allPendingTasks--,2!==b.status&&(b.status=2,null!==b.destination&&b.destination.push(null))):(d.pendingTasks--,d.forceClientRender||(d.forceClientRender=!0,a=void 0===c?Error(l(432)):c,d.errorDigest=b.onError(a),d.parentFlushed&&b.clientRenderedBoundaries.push(d)),d.fallbackAbortableTasks.forEach((function(a){return Lb(a,b,c)})),d.fallbackAbortableTasks.clear(),b.allPendingTasks--,0===b.allPendingTasks&&(d=b.onAllReady)())}function Y(a,b){if(0===b.chunks.length&&1===b.children.length&&null===b.children[0].boundary){var c=b.children[0];c.id=b.id,c.parentFlushed=!0,1===c.status&&Y(a,c)}else a.completedSegments.push(b)}function Kb(a,b,c){if(null===b){if(c.parentFlushed){if(null!==a.completedRootSegment)throw Error(l(389));a.completedRootSegment=c}a.pendingRootTasks--,0===a.pendingRootTasks&&(a.onShellError=T,(b=a.onShellReady)())}else b.pendingTasks--,b.forceClientRender||(0===b.pendingTasks?(c.parentFlushed&&1===c.status&&Y(b,c),b.parentFlushed&&a.completedBoundaries.push(b),b.fallbackAbortableTasks.forEach(Jb,a),b.fallbackAbortableTasks.clear()):c.parentFlushed&&1===c.status&&(Y(b,c),1===b.completedSegments.length&&b.parentFlushed&&a.partialBoundaries.push(b)));a.allPendingTasks--,0===a.allPendingTasks&&(a=a.onAllReady)()}function Cb(a){if(2!==a.status){var b=E,c=yb.current;yb.current=xb;var d=S;S=a.responseState;try{var e,f=a.pingedTasks;for(e=0;e<f.length;e++){var g=f[e],h=a,k=g.blockedSegment;if(0===k.status){G(g.context);try{X(h,g,g.node),h.responseState.generateStaticMarkup||k.lastPushedText&&k.textEmbedded&&k.chunks.push("\x3c!-- --\x3e"),g.abortSet.delete(g),k.status=1,Kb(h,g.blockedBoundary,k)}catch(z){if(rb(),"object"==typeof z&&null!==z&&"function"==typeof z.then){var m=g.ping;z.then(m,m)}else{g.abortSet.delete(g),k.status=4;var n=g.blockedBoundary,q=z,C=V(h,q);if(null===n?W(h,q):(n.pendingTasks--,n.forceClientRender||(n.forceClientRender=!0,n.errorDigest=C,n.parentFlushed&&h.clientRenderedBoundaries.push(n))),h.allPendingTasks--,0===h.allPendingTasks)(0,h.onAllReady)()}}}}f.splice(0,e),null!==a.destination&&Mb(a,a.destination)}catch(z){V(a,z),W(a,z)}finally{S=d,yb.current=c,c===xb&&G(b)}}}function Z(a,b,c){switch(c.parentFlushed=!0,c.status){case 0:var d=c.id=a.nextSegmentId++;return c.lastPushedText=!1,c.textEmbedded=!1,a=a.responseState,b.push('<template id="'),b.push(a.placeholderPrefix),a=d.toString(16),b.push(a),b.push('"></template>');case 1:c.status=2;var f=!0;d=c.chunks;var e=0;c=c.children;for(var g=0;g<c.length;g++){for(f=c[g];e<f.index;e++)b.push(d[e]);f=Nb(a,b,f)}for(;e<d.length-1;e++)b.push(d[e]);return e<d.length&&(f=b.push(d[e])),f;default:throw Error(l(390))}}function Nb(a,b,c){var d=c.boundary;if(null===d)return Z(a,b,c);if(d.parentFlushed=!0,d.forceClientRender)return a.responseState.generateStaticMarkup||(d=d.errorDigest,b.push("\x3c!--$!--\x3e"),b.push("<template"),d&&(b.push(' data-dgst="'),d=v(d),b.push(d),b.push('"')),b.push("></template>")),Z(a,b,c),a=!!a.responseState.generateStaticMarkup||b.push("\x3c!--/$--\x3e");if(0<d.pendingTasks){d.rootSegmentID=a.nextSegmentId++,0<d.completedSegments.length&&a.partialBoundaries.push(d);var f=a.responseState,e=f.nextSuspenseID++;return f=f.boundaryPrefix+e.toString(16),d=d.id=f,za(b,a.responseState,d),Z(a,b,c),b.push("\x3c!--/$--\x3e")}if(d.byteSize>a.progressiveChunkSize)return d.rootSegmentID=a.nextSegmentId++,a.completedBoundaries.push(d),za(b,a.responseState,d.id),Z(a,b,c),b.push("\x3c!--/$--\x3e");if(a.responseState.generateStaticMarkup||b.push("\x3c!--$--\x3e"),1!==(c=d.completedSegments).length)throw Error(l(391));return Nb(a,b,c[0]),a=!!a.responseState.generateStaticMarkup||b.push("\x3c!--/$--\x3e")}function Ob(a,b,c){return function Aa(a,b,c,d){switch(c.insertionMode){case 0:case 1:return a.push('<div hidden id="'),a.push(b.segmentPrefix),b=d.toString(16),a.push(b),a.push('">');case 2:return a.push('<svg aria-hidden="true" style="display:none" id="'),a.push(b.segmentPrefix),b=d.toString(16),a.push(b),a.push('">');case 3:return a.push('<math aria-hidden="true" style="display:none" id="'),a.push(b.segmentPrefix),b=d.toString(16),a.push(b),a.push('">');case 4:return a.push('<table hidden id="'),a.push(b.segmentPrefix),b=d.toString(16),a.push(b),a.push('">');case 5:return a.push('<table hidden><tbody id="'),a.push(b.segmentPrefix),b=d.toString(16),a.push(b),a.push('">');case 6:return a.push('<table hidden><tr id="'),a.push(b.segmentPrefix),b=d.toString(16),a.push(b),a.push('">');case 7:return a.push('<table hidden><colgroup id="'),a.push(b.segmentPrefix),b=d.toString(16),a.push(b),a.push('">');default:throw Error(l(397))}}(b,a.responseState,c.formatContext,c.id),Nb(a,b,c),function Ba(a,b){switch(b.insertionMode){case 0:case 1:return a.push("</div>");case 2:return a.push("</svg>");case 3:return a.push("</math>");case 4:return a.push("</table>");case 5:return a.push("</tbody></table>");case 6:return a.push("</tr></table>");case 7:return a.push("</colgroup></table>");default:throw Error(l(397))}}(b,c.formatContext)}function Pb(a,b,c){for(var d=c.completedSegments,f=0;f<d.length;f++)Qb(a,b,c,d[f]);if(d.length=0,a=a.responseState,d=c.id,c=c.rootSegmentID,b.push(a.startInlineScript),a.sentCompleteBoundaryFunction?b.push('$RC("'):(a.sentCompleteBoundaryFunction=!0,b.push('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("')),null===d)throw Error(l(395));return c=c.toString(16),b.push(d),b.push('","'),b.push(a.segmentPrefix),b.push(c),b.push('")<\/script>')}function Qb(a,b,c,d){if(2===d.status)return!0;var f=d.id;if(-1===f){if(-1===(d.id=c.rootSegmentID))throw Error(l(392));return Ob(a,b,d)}return Ob(a,b,d),a=a.responseState,b.push(a.startInlineScript),a.sentCompleteSegmentFunction?b.push('$RS("'):(a.sentCompleteSegmentFunction=!0,b.push('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("')),b.push(a.segmentPrefix),f=f.toString(16),b.push(f),b.push('","'),b.push(a.placeholderPrefix),b.push(f),b.push('")<\/script>')}function Mb(a,b){try{var c=a.completedRootSegment;if(null!==c&&0===a.pendingRootTasks){Nb(a,b,c),a.completedRootSegment=null;var d=a.responseState.bootstrapChunks;for(c=0;c<d.length-1;c++)b.push(d[c]);c<d.length&&b.push(d[c])}var e,f=a.clientRenderedBoundaries;for(e=0;e<f.length;e++){var g=f[e];d=b;var h=a.responseState,k=g.id,m=g.errorDigest,n=g.errorMessage,q=g.errorComponentStack;if(d.push(h.startInlineScript),h.sentClientRenderFunction?d.push('$RX("'):(h.sentClientRenderFunction=!0,d.push('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("')),null===k)throw Error(l(395));if(d.push(k),d.push('"'),m||n||q){d.push(",");var C=Da(m||"");d.push(C)}if(n||q){d.push(",");var D=Da(n||"");d.push(D)}if(q){d.push(",");var z=Da(q);d.push(z)}if(!d.push(")<\/script>"))return a.destination=null,e++,void f.splice(0,e)}f.splice(0,e);var ba=a.completedBoundaries;for(e=0;e<ba.length;e++)if(!Pb(a,b,ba[e]))return a.destination=null,e++,void ba.splice(0,e);ba.splice(0,e);var ca=a.partialBoundaries;for(e=0;e<ca.length;e++){var mb=ca[e];a:{f=a,g=b;var da=mb.completedSegments;for(h=0;h<da.length;h++)if(!Qb(f,g,mb,da[h])){h++,da.splice(0,h);var nb=!1;break a}da.splice(0,h),nb=!0}if(!nb)return a.destination=null,e++,void ca.splice(0,e)}ca.splice(0,e);var ea=a.completedBoundaries;for(e=0;e<ea.length;e++)if(!Pb(a,b,ea[e]))return a.destination=null,e++,void ea.splice(0,e);ea.splice(0,e)}finally{0===a.allPendingTasks&&0===a.pingedTasks.length&&0===a.clientRenderedBoundaries.length&&0===a.completedBoundaries.length&&b.push(null)}}function Rb(a,b){try{var c=a.abortableTasks;c.forEach((function(c){return Lb(c,a,b)})),c.clear(),null!==a.destination&&Mb(a,a.destination)}catch(d){V(a,d),W(a,d)}}function Sb(){}function Tb(a,b,c,d){var f=!1,e=null,g="",h={push:function(a){return null!==a&&(g+=a),!0},destroy:function(a){f=!0,e=a}},k=!1;if(a=function Ab(a,b,c,d,f,e,g,h,k){var m=[],n=new Set;return(c=U(b={destination:null,responseState:b,progressiveChunkSize:void 0===d?12800:d,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:n,pingedTasks:m,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:void 0===f?zb:f,onAllReady:void 0===e?T:e,onShellReady:void 0===g?T:g,onShellError:void 0===h?T:h,onFatalError:void 0===k?T:k},0,null,c,!1,!1)).parentFlushed=!0,a=Bb(b,a,null,c,n,Ya,null,fb),m.push(a),b}(a,function Ea(a,b){return{bootstrapChunks:[],startInlineScript:"<script>",placeholderPrefix:(b=void 0===b?"":b)+"P:",segmentPrefix:b+"S:",boundaryPrefix:b+"B:",idPrefix:b,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1,generateStaticMarkup:a}}(c,b?b.identifierPrefix:void 0),{insertionMode:1,selectedValue:null},1/0,Sb,void 0,(function(){k=!0}),void 0,void 0),Cb(a),Rb(a,d),1===a.status)a.status=2,h.destroy(a.fatalError);else if(2!==a.status&&null===a.destination){a.destination=h;try{Mb(a,h)}catch(m){V(a,m),W(a,m)}}if(f)throw e;if(!k)throw Error(l(426));return g}exports.renderToNodeStream=function(){throw Error(l(207))},exports.renderToStaticMarkup=function(a,b){return Tb(a,b,!0,'The server used "renderToStaticMarkup" which does not support Suspense. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')},exports.renderToStaticNodeStream=function(){throw Error(l(208))},exports.renderToString=function(a,b){return Tb(a,b,!1,'The server used "renderToString" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')},exports.version="18.3.1"},"./node_modules/react-dom/cjs/react-dom-server.browser.production.min.js":(__unused_webpack_module,exports,__webpack_require__)=>{var aa=__webpack_require__("./node_modules/react/index.js");function k(a){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+a,c=1;c<arguments.length;c++)b+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+a+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=null,n=0;function p(a,b){if(0!==b.length)if(512<b.length)0<n&&(a.enqueue(new Uint8Array(l.buffer,0,n)),l=new Uint8Array(512),n=0),a.enqueue(b);else{var c=l.length-n;c<b.length&&(0===c?a.enqueue(l):(l.set(b.subarray(0,c),n),a.enqueue(l),b=b.subarray(c)),l=new Uint8Array(512),n=0),l.set(b,n),n+=b.length}}function t(a,b){return p(a,b),!0}function ba(a){l&&0<n&&(a.enqueue(new Uint8Array(l.buffer,0,n)),l=null,n=0)}var ca=new TextEncoder;function u(a){return ca.encode(a)}function w(a){return ca.encode(a)}function da(a,b){"function"==typeof a.error?a.error(b):a.close()}var x=Object.prototype.hasOwnProperty,ea=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,fa={},ha={};function ia(a){return!!x.call(ha,a)||!x.call(fa,a)&&(ea.test(a)?ha[a]=!0:(fa[a]=!0,!1))}function y(a,b,c,d,f,e,g){this.acceptsBooleans=2===b||3===b||4===b,this.attributeName=d,this.attributeNamespace=f,this.mustUseProperty=c,this.propertyName=a,this.type=b,this.sanitizeURL=e,this.removeEmptyString=g}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(a){z[a]=new y(a,0,!1,a,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(a){var b=a[0];z[b]=new y(b,1,!1,a[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(a){z[a]=new y(a,2,!1,a.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(a){z[a]=new y(a,2,!1,a,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(a){z[a]=new y(a,3,!1,a.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(a){z[a]=new y(a,3,!0,a,null,!1,!1)})),["capture","download"].forEach((function(a){z[a]=new y(a,4,!1,a,null,!1,!1)})),["cols","rows","size","span"].forEach((function(a){z[a]=new y(a,6,!1,a,null,!1,!1)})),["rowSpan","start"].forEach((function(a){z[a]=new y(a,5,!1,a.toLowerCase(),null,!1,!1)}));var ja=/[\-:]([a-z])/g;function ka(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(a){var b=a.replace(ja,ka);z[b]=new y(b,1,!1,a,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(a){var b=a.replace(ja,ka);z[b]=new y(b,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(a){var b=a.replace(ja,ka);z[b]=new y(b,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(a){z[a]=new y(a,1,!1,a.toLowerCase(),null,!1,!1)})),z.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(a){z[a]=new y(a,1,!1,a.toLowerCase(),null,!0,!0)}));var B={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},la=["Webkit","ms","Moz","O"];Object.keys(B).forEach((function(a){la.forEach((function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1),B[b]=B[a]}))}));var oa=/["'&<>]/;function C(a){if("boolean"==typeof a||"number"==typeof a)return""+a;a=""+a;var b=oa.exec(a);if(b){var d,c="",f=0;for(d=b.index;d<a.length;d++){switch(a.charCodeAt(d)){case 34:b="&quot;";break;case 38:b="&amp;";break;case 39:b="&#x27;";break;case 60:b="&lt;";break;case 62:b="&gt;";break;default:continue}f!==d&&(c+=a.substring(f,d)),f=d+1,c+=b}a=f!==d?c+a.substring(f,d):c}return a}var pa=/([A-Z])/g,qa=/^ms-/,ra=Array.isArray,sa=w("<script>"),ta=w("<\/script>"),ua=w('<script src="'),va=w('<script type="module" src="'),wa=w('" async=""><\/script>'),xa=/(<\/|<)(s)(cript)/gi;function ya(a,b,c,d){return b+("s"===c?"\\u0073":"\\u0053")+d}function D(a,b){return{insertionMode:a,selectedValue:b}}var Ca=w("\x3c!-- --\x3e");function Da(a,b,c,d){return""===b?d:(d&&a.push(Ca),a.push(u(C(b))),!0)}var Ea=new Map,Fa=w(' style="'),Ga=w(":"),Ha=w(";");function Ia(a,b,c){if("object"!=typeof c)throw Error(k(62));for(var d in b=!0,c)if(x.call(c,d)){var f=c[d];if(null!=f&&"boolean"!=typeof f&&""!==f){if(0===d.indexOf("--")){var e=u(C(d));f=u(C((""+f).trim()))}else{e=d;var g=Ea.get(e);void 0!==g||(g=w(C(e.replace(pa,"-$1").toLowerCase().replace(qa,"-ms-"))),Ea.set(e,g)),e=g,f="number"==typeof f?0===f||x.call(B,d)?u(""+f):u(f+"px"):u(C((""+f).trim()))}b?(b=!1,a.push(Fa,e,Ga,f)):a.push(Ha,e,Ga,f)}}b||a.push(E)}var H=w(" "),I=w('="'),E=w('"'),Ja=w('=""');function J(a,b,c,d){switch(c){case"style":return void Ia(a,b,d);case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<c.length)||"o"!==c[0]&&"O"!==c[0]||"n"!==c[1]&&"N"!==c[1])if(null!==(b=z.hasOwnProperty(c)?z[c]:null)){switch(typeof d){case"function":case"symbol":return;case"boolean":if(!b.acceptsBooleans)return}switch(c=u(b.attributeName),b.type){case 3:d&&a.push(H,c,Ja);break;case 4:!0===d?a.push(H,c,Ja):!1!==d&&a.push(H,c,I,u(C(d)),E);break;case 5:isNaN(d)||a.push(H,c,I,u(C(d)),E);break;case 6:!isNaN(d)&&1<=d&&a.push(H,c,I,u(C(d)),E);break;default:b.sanitizeURL&&(d=""+d),a.push(H,c,I,u(C(d)),E)}}else if(ia(c)){switch(typeof d){case"function":case"symbol":return;case"boolean":if("data-"!==(b=c.toLowerCase().slice(0,5))&&"aria-"!==b)return}a.push(H,u(c),I,u(C(d)),E)}}var K=w(">"),Ka=w("/>");function L(a,b,c){if(null!=b){if(null!=c)throw Error(k(60));if("object"!=typeof b||!("__html"in b))throw Error(k(61));null!=(b=b.__html)&&a.push(u(""+b))}}var Ma=w(' selected=""');function Na(a,b,c,d){a.push(M(c));var e,f=c=null;for(e in b)if(x.call(b,e)){var g=b[e];if(null!=g)switch(e){case"children":c=g;break;case"dangerouslySetInnerHTML":f=g;break;default:J(a,d,e,g)}}return a.push(K),L(a,f,c),"string"==typeof c?(a.push(u(C(c))),null):c}var Oa=w("\n"),Pa=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,Qa=new Map;function M(a){var b=Qa.get(a);if(void 0===b){if(!Pa.test(a))throw Error(k(65,a));b=w("<"+a),Qa.set(a,b)}return b}var Ra=w("<!DOCTYPE html>");function Sa(a,b,c,d,f){switch(b){case"select":a.push(M("select"));var e=null,g=null;for(r in c)if(x.call(c,r)){var h=c[r];if(null!=h)switch(r){case"children":e=h;break;case"dangerouslySetInnerHTML":g=h;break;case"defaultValue":case"value":break;default:J(a,d,r,h)}}return a.push(K),L(a,g,e),e;case"option":g=f.selectedValue,a.push(M("option"));var m=h=null,q=null,r=null;for(e in c)if(x.call(c,e)){var v=c[e];if(null!=v)switch(e){case"children":h=v;break;case"selected":q=v;break;case"dangerouslySetInnerHTML":r=v;break;case"value":m=v;default:J(a,d,e,v)}}if(null!=g)if(c=null!==m?""+m:function La(a){var b="";return aa.Children.forEach(a,(function(a){null!=a&&(b+=a)})),b}(h),ra(g)){for(d=0;d<g.length;d++)if(""+g[d]===c){a.push(Ma);break}}else""+g===c&&a.push(Ma);else q&&a.push(Ma);return a.push(K),L(a,r,h),h;case"textarea":for(h in a.push(M("textarea")),r=g=e=null,c)if(x.call(c,h)&&null!=(m=c[h]))switch(h){case"children":r=m;break;case"value":e=m;break;case"defaultValue":g=m;break;case"dangerouslySetInnerHTML":throw Error(k(91));default:J(a,d,h,m)}if(null===e&&null!==g&&(e=g),a.push(K),null!=r){if(null!=e)throw Error(k(92));if(ra(r)&&1<r.length)throw Error(k(93));e=""+r}return"string"==typeof e&&"\n"===e[0]&&a.push(Oa),null!==e&&a.push(u(C(""+e))),null;case"input":for(g in a.push(M("input")),m=r=h=e=null,c)if(x.call(c,g)&&null!=(q=c[g]))switch(g){case"children":case"dangerouslySetInnerHTML":throw Error(k(399,"input"));case"defaultChecked":m=q;break;case"defaultValue":h=q;break;case"checked":r=q;break;case"value":e=q;break;default:J(a,d,g,q)}return null!==r?J(a,d,"checked",r):null!==m&&J(a,d,"checked",m),null!==e?J(a,d,"value",e):null!==h&&J(a,d,"value",h),a.push(Ka),null;case"menuitem":for(var A in a.push(M("menuitem")),c)if(x.call(c,A)&&null!=(e=c[A]))switch(A){case"children":case"dangerouslySetInnerHTML":throw Error(k(400));default:J(a,d,A,e)}return a.push(K),null;case"title":for(v in a.push(M("title")),e=null,c)if(x.call(c,v)&&null!=(g=c[v]))switch(v){case"children":e=g;break;case"dangerouslySetInnerHTML":throw Error(k(434));default:J(a,d,v,g)}return a.push(K),e;case"listing":case"pre":for(m in a.push(M(b)),g=e=null,c)if(x.call(c,m)&&null!=(h=c[m]))switch(m){case"children":e=h;break;case"dangerouslySetInnerHTML":g=h;break;default:J(a,d,m,h)}if(a.push(K),null!=g){if(null!=e)throw Error(k(60));if("object"!=typeof g||!("__html"in g))throw Error(k(61));null!=(c=g.__html)&&("string"==typeof c&&0<c.length&&"\n"===c[0]?a.push(Oa,u(c)):a.push(u(""+c)))}return"string"==typeof e&&"\n"===e[0]&&a.push(Oa),e;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":for(var F in a.push(M(b)),c)if(x.call(c,F)&&null!=(e=c[F]))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(k(399,b));default:J(a,d,F,e)}return a.push(Ka),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return Na(a,c,b,d);case"html":return 0===f.insertionMode&&a.push(Ra),Na(a,c,b,d);default:if(-1===b.indexOf("-")&&"string"!=typeof c.is)return Na(a,c,b,d);for(q in a.push(M(b)),g=e=null,c)if(x.call(c,q)&&null!=(h=c[q]))switch(q){case"children":e=h;break;case"dangerouslySetInnerHTML":g=h;break;case"style":Ia(a,d,h);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:ia(q)&&"function"!=typeof h&&"symbol"!=typeof h&&a.push(H,u(q),I,u(C(h)),E)}return a.push(K),L(a,g,e),e}}var Ta=w("</"),Ua=w(">"),Va=w('<template id="'),Wa=w('"></template>'),Xa=w("\x3c!--$--\x3e"),Ya=w('\x3c!--$?--\x3e<template id="'),Za=w('"></template>'),$a=w("\x3c!--$!--\x3e"),ab=w("\x3c!--/$--\x3e"),bb=w("<template"),cb=w('"'),db=w(' data-dgst="');w(' data-msg="'),w(' data-stck="');var eb=w("></template>");function fb(a,b,c){if(p(a,Ya),null===c)throw Error(k(395));return p(a,c),t(a,Za)}var gb=w('<div hidden id="'),hb=w('">'),ib=w("</div>"),jb=w('<svg aria-hidden="true" style="display:none" id="'),kb=w('">'),lb=w("</svg>"),mb=w('<math aria-hidden="true" style="display:none" id="'),nb=w('">'),ob=w("</math>"),pb=w('<table hidden id="'),qb=w('">'),rb=w("</table>"),sb=w('<table hidden><tbody id="'),tb=w('">'),ub=w("</tbody></table>"),vb=w('<table hidden><tr id="'),wb=w('">'),xb=w("</tr></table>"),yb=w('<table hidden><colgroup id="'),zb=w('">'),Ab=w("</colgroup></table>");var Db=w('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'),Eb=w('$RS("'),Gb=w('","'),Hb=w('")<\/script>'),Ib=w('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("'),Jb=w('$RC("'),Kb=w('","'),Lb=w('")<\/script>'),Mb=w('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("'),Nb=w('$RX("'),Ob=w('"'),Pb=w(")<\/script>"),Qb=w(","),Rb=/[<\u2028\u2029]/g;function Sb(a){return JSON.stringify(a).replace(Rb,(function(a){switch(a){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}}))}var N=Object.assign,Tb=Symbol.for("react.element"),Ub=Symbol.for("react.portal"),Vb=Symbol.for("react.fragment"),Wb=Symbol.for("react.strict_mode"),Xb=Symbol.for("react.profiler"),Yb=Symbol.for("react.provider"),Zb=Symbol.for("react.context"),$b=Symbol.for("react.forward_ref"),ac=Symbol.for("react.suspense"),bc=Symbol.for("react.suspense_list"),cc=Symbol.for("react.memo"),dc=Symbol.for("react.lazy"),ec=Symbol.for("react.scope"),fc=Symbol.for("react.debug_trace_mode"),gc=Symbol.for("react.legacy_hidden"),hc=Symbol.for("react.default_value"),ic=Symbol.iterator;function jc(a){if(null==a)return null;if("function"==typeof a)return a.displayName||a.name||null;if("string"==typeof a)return a;switch(a){case Vb:return"Fragment";case Ub:return"Portal";case Xb:return"Profiler";case Wb:return"StrictMode";case ac:return"Suspense";case bc:return"SuspenseList"}if("object"==typeof a)switch(a.$$typeof){case Zb:return(a.displayName||"Context")+".Consumer";case Yb:return(a._context.displayName||"Context")+".Provider";case $b:var b=a.render;return(a=a.displayName)||(a=""!==(a=b.displayName||b.name||"")?"ForwardRef("+a+")":"ForwardRef"),a;case cc:return null!==(b=a.displayName||null)?b:jc(a.type)||"Memo";case dc:b=a._payload,a=a._init;try{return jc(a(b))}catch(c){}}return null}var kc={};function lc(a,b){if(!(a=a.contextTypes))return kc;var d,c={};for(d in a)c[d]=b[d];return c}var O=null;function P(a,b){if(a!==b){a.context._currentValue=a.parentValue,a=a.parent;var c=b.parent;if(null===a){if(null!==c)throw Error(k(401))}else{if(null===c)throw Error(k(401));P(a,c)}b.context._currentValue=b.value}}function mc(a){a.context._currentValue=a.parentValue,null!==(a=a.parent)&&mc(a)}function nc(a){var b=a.parent;null!==b&&nc(b),a.context._currentValue=a.value}function oc(a,b){if(a.context._currentValue=a.parentValue,null===(a=a.parent))throw Error(k(402));a.depth===b.depth?P(a,b):oc(a,b)}function pc(a,b){var c=b.parent;if(null===c)throw Error(k(402));a.depth===c.depth?P(a,c):pc(a,c),b.context._currentValue=b.value}function Q(a){var b=O;b!==a&&(null===b?nc(a):null===a?mc(b):b.depth===a.depth?P(b,a):b.depth>a.depth?oc(b,a):pc(b,a),O=a)}var qc={isMounted:function(){return!1},enqueueSetState:function(a,b){null!==(a=a._reactInternals).queue&&a.queue.push(b)},enqueueReplaceState:function(a,b){(a=a._reactInternals).replace=!0,a.queue=[b]},enqueueForceUpdate:function(){}};function rc(a,b,c,d){var f=void 0!==a.state?a.state:null;a.updater=qc,a.props=c,a.state=f;var e={queue:[],replace:!1};a._reactInternals=e;var g=b.contextType;if(a.context="object"==typeof g&&null!==g?g._currentValue:d,"function"==typeof(g=b.getDerivedStateFromProps)&&(f=null==(g=g(c,f))?f:N({},f,g),a.state=f),"function"!=typeof b.getDerivedStateFromProps&&"function"!=typeof a.getSnapshotBeforeUpdate&&("function"==typeof a.UNSAFE_componentWillMount||"function"==typeof a.componentWillMount))if(b=a.state,"function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),b!==a.state&&qc.enqueueReplaceState(a,a.state,null),null!==e.queue&&0<e.queue.length)if(b=e.queue,g=e.replace,e.queue=null,e.replace=!1,g&&1===b.length)a.state=b[0];else{for(e=g?b[0]:a.state,f=!0,g=g?1:0;g<b.length;g++){var h=b[g];null!=(h="function"==typeof h?h.call(a,e,c,d):h)&&(f?(f=!1,e=N({},e,h)):N(e,h))}a.state=e}else e.queue=null}var sc={id:1,overflow:""};function tc(a,b,c){var d=a.id;a=a.overflow;var f=32-uc(d)-1;d&=~(1<<f),c+=1;var e=32-uc(b)+f;if(30<e){var g=f-f%5;return e=(d&(1<<g)-1).toString(32),d>>=g,f-=g,{id:1<<32-uc(b)+f|c<<f|d,overflow:e+a}}return{id:1<<e|c<<f|d,overflow:a}}var uc=Math.clz32?Math.clz32:function vc(a){return 0===(a>>>=0)?32:31-(wc(a)/xc|0)|0},wc=Math.log,xc=Math.LN2;var zc="function"==typeof Object.is?Object.is:function yc(a,b){return a===b&&(0!==a||1/a==1/b)||a!=a&&b!=b},R=null,Ac=null,Bc=null,S=null,T=!1,Cc=!1,U=0,V=null,Dc=0;function W(){if(null===R)throw Error(k(321));return R}function Ec(){if(0<Dc)throw Error(k(312));return{memoizedState:null,queue:null,next:null}}function Fc(){return null===S?null===Bc?(T=!1,Bc=S=Ec()):(T=!0,S=Bc):null===S.next?(T=!1,S=S.next=Ec()):(T=!0,S=S.next),S}function Gc(){Ac=R=null,Cc=!1,Bc=null,Dc=0,S=V=null}function Hc(a,b){return"function"==typeof b?b(a):b}function Ic(a,b,c){if(R=W(),S=Fc(),T){var d=S.queue;if(b=d.dispatch,null!==V&&void 0!==(c=V.get(d))){V.delete(d),d=S.memoizedState;do{d=a(d,c.action),c=c.next}while(null!==c);return S.memoizedState=d,[d,b]}return[S.memoizedState,b]}return a=a===Hc?"function"==typeof b?b():b:void 0!==c?c(b):b,S.memoizedState=a,a=(a=S.queue={last:null,dispatch:null}).dispatch=Jc.bind(null,R,a),[S.memoizedState,a]}function Kc(a,b){if(R=W(),b=void 0===b?null:b,null!==(S=Fc())){var c=S.memoizedState;if(null!==c&&null!==b){var d=c[1];a:if(null===d)d=!1;else{for(var f=0;f<d.length&&f<b.length;f++)if(!zc(b[f],d[f])){d=!1;break a}d=!0}if(d)return c[0]}}return a=a(),S.memoizedState=[a,b],a}function Jc(a,b,c){if(25<=Dc)throw Error(k(301));if(a===R)if(Cc=!0,a={action:c,next:null},null===V&&(V=new Map),void 0===(c=V.get(b)))V.set(b,a);else{for(b=c;null!==b.next;)b=b.next;b.next=a}}function Lc(){throw Error(k(394))}function Mc(){}var Oc={readContext:function(a){return a._currentValue},useContext:function(a){return W(),a._currentValue},useMemo:Kc,useReducer:Ic,useRef:function(a){R=W();var b=(S=Fc()).memoizedState;return null===b?(a={current:a},S.memoizedState=a):b},useState:function(a){return Ic(Hc,a)},useInsertionEffect:Mc,useLayoutEffect:function(){},useCallback:function(a,b){return Kc((function(){return a}),b)},useImperativeHandle:Mc,useEffect:Mc,useDebugValue:Mc,useDeferredValue:function(a){return W(),a},useTransition:function(){return W(),[!1,Lc]},useId:function(){var a=Ac.treeContext,b=a.overflow;a=((a=a.id)&~(1<<32-uc(a)-1)).toString(32)+b;var c=Nc;if(null===c)throw Error(k(404));return b=U++,a=":"+c.idPrefix+"R"+a,0<b&&(a+="H"+b.toString(32)),a+":"},useMutableSource:function(a,b){return W(),b(a._source)},useSyncExternalStore:function(a,b,c){if(void 0===c)throw Error(k(407));return c()}},Nc=null,Pc=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function Qc(a){return console.error(a),null}function X(){}function Tc(a,b,c,d,f,e,g,h){a.allPendingTasks++,null===c?a.pendingRootTasks++:c.pendingTasks++;var m={node:b,ping:function(){var b=a.pingedTasks;b.push(m),1===b.length&&Uc(a)},blockedBoundary:c,blockedSegment:d,abortSet:f,legacyContext:e,context:g,treeContext:h};return f.add(m),m}function Sc(a,b,c,d,f,e){return{status:0,id:-1,index:b,parentFlushed:!1,chunks:[],children:[],formatContext:d,boundary:c,lastPushedText:f,textEmbedded:e}}function Y(a,b){if(null!=(a=a.onError(b))&&"string"!=typeof a)throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof a+'" instead');return a}function Vc(a,b){var c=a.onShellError;c(b),(c=a.onFatalError)(b),null!==a.destination?(a.status=2,da(a.destination,b)):(a.status=1,a.fatalError=b)}function Wc(a,b,c,d,f){for(R={},Ac=b,U=0,a=c(d,f);Cc;)Cc=!1,U=0,Dc+=1,S=null,a=c(d,f);return Gc(),a}function Xc(a,b,c,d){var f=c.render(),e=d.childContextTypes;if(null!=e){var g=b.legacyContext;if("function"!=typeof c.getChildContext)d=g;else{for(var h in c=c.getChildContext())if(!(h in e))throw Error(k(108,jc(d)||"Unknown",h));d=N({},g,c)}b.legacyContext=d,Z(a,b,f),b.legacyContext=g}else Z(a,b,f)}function Yc(a,b){if(a&&a.defaultProps){for(var c in b=N({},b),a=a.defaultProps)void 0===b[c]&&(b[c]=a[c]);return b}return b}function Zc(a,b,c,d,f){if("function"==typeof c)if(c.prototype&&c.prototype.isReactComponent){f=lc(c,b.legacyContext);var e=c.contextType;rc(e=new c(d,"object"==typeof e&&null!==e?e._currentValue:f),c,d,f),Xc(a,b,e,c)}else{f=Wc(a,b,c,d,e=lc(c,b.legacyContext));var g=0!==U;if("object"==typeof f&&null!==f&&"function"==typeof f.render&&void 0===f.$$typeof)rc(f,c,d,e),Xc(a,b,f,c);else if(g){d=b.treeContext,b.treeContext=tc(d,1,0);try{Z(a,b,f)}finally{b.treeContext=d}}else Z(a,b,f)}else{if("string"!=typeof c){switch(c){case gc:case fc:case Wb:case Xb:case Vb:case bc:return void Z(a,b,d.children);case ec:throw Error(k(343));case ac:a:{c=b.blockedBoundary,f=b.blockedSegment,e=d.fallback,d=d.children;var h={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:g=new Set,errorDigest:null},m=Sc(0,f.chunks.length,h,f.formatContext,!1,!1);f.children.push(m),f.lastPushedText=!1;var q=Sc(0,0,null,f.formatContext,!1,!1);q.parentFlushed=!0,b.blockedBoundary=h,b.blockedSegment=q;try{if($c(a,b,d),q.lastPushedText&&q.textEmbedded&&q.chunks.push(Ca),q.status=1,ad(h,q),0===h.pendingTasks)break a}catch(r){q.status=4,h.forceClientRender=!0,h.errorDigest=Y(a,r)}finally{b.blockedBoundary=c,b.blockedSegment=f}b=Tc(a,e,c,m,g,b.legacyContext,b.context,b.treeContext),a.pingedTasks.push(b)}return}if("object"==typeof c&&null!==c)switch(c.$$typeof){case $b:if(d=Wc(a,b,c.render,d,f),0!==U){c=b.treeContext,b.treeContext=tc(c,1,0);try{Z(a,b,d)}finally{b.treeContext=c}}else Z(a,b,d);return;case cc:return void Zc(a,b,c=c.type,d=Yc(c,d),f);case Yb:if(f=d.children,c=c._context,d=d.value,e=c._currentValue,c._currentValue=d,O=d={parent:g=O,depth:null===g?0:g.depth+1,context:c,parentValue:e,value:d},b.context=d,Z(a,b,f),null===(a=O))throw Error(k(403));return d=a.parentValue,a.context._currentValue=d===hc?a.context._defaultValue:d,a=O=a.parent,void(b.context=a);case Zb:return void Z(a,b,d=(d=d.children)(c._currentValue));case dc:return void Zc(a,b,c=(f=c._init)(c._payload),d=Yc(c,d),void 0)}throw Error(k(130,null==c?c:typeof c,""))}switch(e=Sa((f=b.blockedSegment).chunks,c,d,a.responseState,f.formatContext),f.lastPushedText=!1,g=f.formatContext,f.formatContext=function Ba(a,b,c){switch(b){case"select":return D(1,null!=c.value?c.value:c.defaultValue);case"svg":return D(2,null);case"math":return D(3,null);case"foreignObject":return D(1,null);case"table":return D(4,null);case"thead":case"tbody":case"tfoot":return D(5,null);case"colgroup":return D(7,null);case"tr":return D(6,null)}return 4<=a.insertionMode||0===a.insertionMode?D(1,null):a}(g,c,d),$c(a,b,e),f.formatContext=g,c){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:f.chunks.push(Ta,u(c),Ua)}f.lastPushedText=!1}}function Z(a,b,c){if(b.node=c,"object"==typeof c&&null!==c){switch(c.$$typeof){case Tb:return void Zc(a,b,c.type,c.props,c.ref);case Ub:throw Error(k(257));case dc:var d=c._init;return void Z(a,b,c=d(c._payload))}if(ra(c))return void bd(a,b,c);if(null===c||"object"!=typeof c?d=null:d="function"==typeof(d=ic&&c[ic]||c["@@iterator"])?d:null,d&&(d=d.call(c))){if(!(c=d.next()).done){var f=[];do{f.push(c.value),c=d.next()}while(!c.done);bd(a,b,f)}return}throw a=Object.prototype.toString.call(c),Error(k(31,"[object Object]"===a?"object with keys {"+Object.keys(c).join(", ")+"}":a))}"string"==typeof c?(d=b.blockedSegment).lastPushedText=Da(b.blockedSegment.chunks,c,a.responseState,d.lastPushedText):"number"==typeof c&&((d=b.blockedSegment).lastPushedText=Da(b.blockedSegment.chunks,""+c,a.responseState,d.lastPushedText))}function bd(a,b,c){for(var d=c.length,f=0;f<d;f++){var e=b.treeContext;b.treeContext=tc(e,d,f);try{$c(a,b,c[f])}finally{b.treeContext=e}}}function $c(a,b,c){var d=b.blockedSegment.formatContext,f=b.legacyContext,e=b.context;try{return Z(a,b,c)}catch(m){if(Gc(),"object"!=typeof m||null===m||"function"!=typeof m.then)throw b.blockedSegment.formatContext=d,b.legacyContext=f,b.context=e,Q(e),m;c=m;var g=b.blockedSegment,h=Sc(0,g.chunks.length,null,g.formatContext,g.lastPushedText,!0);g.children.push(h),g.lastPushedText=!1,a=Tc(a,b.node,b.blockedBoundary,h,b.abortSet,b.legacyContext,b.context,b.treeContext).ping,c.then(a,a),b.blockedSegment.formatContext=d,b.legacyContext=f,b.context=e,Q(e)}}function cd(a){var b=a.blockedBoundary;(a=a.blockedSegment).status=3,dd(this,b,a)}function ed(a,b,c){var d=a.blockedBoundary;a.blockedSegment.status=3,null===d?(b.allPendingTasks--,2!==b.status&&(b.status=2,null!==b.destination&&b.destination.close())):(d.pendingTasks--,d.forceClientRender||(d.forceClientRender=!0,a=void 0===c?Error(k(432)):c,d.errorDigest=b.onError(a),d.parentFlushed&&b.clientRenderedBoundaries.push(d)),d.fallbackAbortableTasks.forEach((function(a){return ed(a,b,c)})),d.fallbackAbortableTasks.clear(),b.allPendingTasks--,0===b.allPendingTasks&&(d=b.onAllReady)())}function ad(a,b){if(0===b.chunks.length&&1===b.children.length&&null===b.children[0].boundary){var c=b.children[0];c.id=b.id,c.parentFlushed=!0,1===c.status&&ad(a,c)}else a.completedSegments.push(b)}function dd(a,b,c){if(null===b){if(c.parentFlushed){if(null!==a.completedRootSegment)throw Error(k(389));a.completedRootSegment=c}a.pendingRootTasks--,0===a.pendingRootTasks&&(a.onShellError=X,(b=a.onShellReady)())}else b.pendingTasks--,b.forceClientRender||(0===b.pendingTasks?(c.parentFlushed&&1===c.status&&ad(b,c),b.parentFlushed&&a.completedBoundaries.push(b),b.fallbackAbortableTasks.forEach(cd,a),b.fallbackAbortableTasks.clear()):c.parentFlushed&&1===c.status&&(ad(b,c),1===b.completedSegments.length&&b.parentFlushed&&a.partialBoundaries.push(b)));a.allPendingTasks--,0===a.allPendingTasks&&(a=a.onAllReady)()}function Uc(a){if(2!==a.status){var b=O,c=Pc.current;Pc.current=Oc;var d=Nc;Nc=a.responseState;try{var e,f=a.pingedTasks;for(e=0;e<f.length;e++){var g=f[e],h=a,m=g.blockedSegment;if(0===m.status){Q(g.context);try{Z(h,g,g.node),m.lastPushedText&&m.textEmbedded&&m.chunks.push(Ca),g.abortSet.delete(g),m.status=1,dd(h,g.blockedBoundary,m)}catch(G){if(Gc(),"object"==typeof G&&null!==G&&"function"==typeof G.then){var q=g.ping;G.then(q,q)}else{g.abortSet.delete(g),m.status=4;var r=g.blockedBoundary,v=G,A=Y(h,v);if(null===r?Vc(h,v):(r.pendingTasks--,r.forceClientRender||(r.forceClientRender=!0,r.errorDigest=A,r.parentFlushed&&h.clientRenderedBoundaries.push(r))),h.allPendingTasks--,0===h.allPendingTasks)(0,h.onAllReady)()}}}}f.splice(0,e),null!==a.destination&&fd(a,a.destination)}catch(G){Y(a,G),Vc(a,G)}finally{Nc=d,Pc.current=c,c===Oc&&Q(b)}}}function gd(a,b,c){switch(c.parentFlushed=!0,c.status){case 0:var d=c.id=a.nextSegmentId++;return c.lastPushedText=!1,c.textEmbedded=!1,a=a.responseState,p(b,Va),p(b,a.placeholderPrefix),p(b,a=u(d.toString(16))),t(b,Wa);case 1:c.status=2;var f=!0;d=c.chunks;var e=0;c=c.children;for(var g=0;g<c.length;g++){for(f=c[g];e<f.index;e++)p(b,d[e]);f=hd(a,b,f)}for(;e<d.length-1;e++)p(b,d[e]);return e<d.length&&(f=t(b,d[e])),f;default:throw Error(k(390))}}function hd(a,b,c){var d=c.boundary;if(null===d)return gd(a,b,c);if(d.parentFlushed=!0,d.forceClientRender)d=d.errorDigest,t(b,$a),p(b,bb),d&&(p(b,db),p(b,u(C(d))),p(b,cb)),t(b,eb),gd(a,b,c);else if(0<d.pendingTasks){d.rootSegmentID=a.nextSegmentId++,0<d.completedSegments.length&&a.partialBoundaries.push(d);var f=a.responseState,e=f.nextSuspenseID++;f=w(f.boundaryPrefix+e.toString(16)),d=d.id=f,fb(b,a.responseState,d),gd(a,b,c)}else if(d.byteSize>a.progressiveChunkSize)d.rootSegmentID=a.nextSegmentId++,a.completedBoundaries.push(d),fb(b,a.responseState,d.id),gd(a,b,c);else{if(t(b,Xa),1!==(c=d.completedSegments).length)throw Error(k(391));hd(a,b,c[0])}return t(b,ab)}function id(a,b,c){return function Bb(a,b,c,d){switch(c.insertionMode){case 0:case 1:return p(a,gb),p(a,b.segmentPrefix),p(a,u(d.toString(16))),t(a,hb);case 2:return p(a,jb),p(a,b.segmentPrefix),p(a,u(d.toString(16))),t(a,kb);case 3:return p(a,mb),p(a,b.segmentPrefix),p(a,u(d.toString(16))),t(a,nb);case 4:return p(a,pb),p(a,b.segmentPrefix),p(a,u(d.toString(16))),t(a,qb);case 5:return p(a,sb),p(a,b.segmentPrefix),p(a,u(d.toString(16))),t(a,tb);case 6:return p(a,vb),p(a,b.segmentPrefix),p(a,u(d.toString(16))),t(a,wb);case 7:return p(a,yb),p(a,b.segmentPrefix),p(a,u(d.toString(16))),t(a,zb);default:throw Error(k(397))}}(b,a.responseState,c.formatContext,c.id),hd(a,b,c),function Cb(a,b){switch(b.insertionMode){case 0:case 1:return t(a,ib);case 2:return t(a,lb);case 3:return t(a,ob);case 4:return t(a,rb);case 5:return t(a,ub);case 6:return t(a,xb);case 7:return t(a,Ab);default:throw Error(k(397))}}(b,c.formatContext)}function jd(a,b,c){for(var d=c.completedSegments,f=0;f<d.length;f++)kd(a,b,c,d[f]);if(d.length=0,a=a.responseState,d=c.id,c=c.rootSegmentID,p(b,a.startInlineScript),a.sentCompleteBoundaryFunction?p(b,Jb):(a.sentCompleteBoundaryFunction=!0,p(b,Ib)),null===d)throw Error(k(395));return c=u(c.toString(16)),p(b,d),p(b,Kb),p(b,a.segmentPrefix),p(b,c),t(b,Lb)}function kd(a,b,c,d){if(2===d.status)return!0;var f=d.id;if(-1===f){if(-1===(d.id=c.rootSegmentID))throw Error(k(392));return id(a,b,d)}return id(a,b,d),p(b,(a=a.responseState).startInlineScript),a.sentCompleteSegmentFunction?p(b,Eb):(a.sentCompleteSegmentFunction=!0,p(b,Db)),p(b,a.segmentPrefix),p(b,f=u(f.toString(16))),p(b,Gb),p(b,a.placeholderPrefix),p(b,f),t(b,Hb)}function fd(a,b){l=new Uint8Array(512),n=0;try{var c=a.completedRootSegment;if(null!==c&&0===a.pendingRootTasks){hd(a,b,c),a.completedRootSegment=null;var d=a.responseState.bootstrapChunks;for(c=0;c<d.length-1;c++)p(b,d[c]);c<d.length&&t(b,d[c])}var e,f=a.clientRenderedBoundaries;for(e=0;e<f.length;e++){var g=f[e];d=b;var h=a.responseState,m=g.id,q=g.errorDigest,r=g.errorMessage,v=g.errorComponentStack;if(p(d,h.startInlineScript),h.sentClientRenderFunction?p(d,Nb):(h.sentClientRenderFunction=!0,p(d,Mb)),null===m)throw Error(k(395));if(p(d,m),p(d,Ob),(q||r||v)&&(p(d,Qb),p(d,u(Sb(q||"")))),(r||v)&&(p(d,Qb),p(d,u(Sb(r||"")))),v&&(p(d,Qb),p(d,u(Sb(v)))),!t(d,Pb))return a.destination=null,e++,void f.splice(0,e)}f.splice(0,e);var A=a.completedBoundaries;for(e=0;e<A.length;e++)if(!jd(a,b,A[e]))return a.destination=null,e++,void A.splice(0,e);A.splice(0,e),ba(b),l=new Uint8Array(512),n=0;var F=a.partialBoundaries;for(e=0;e<F.length;e++){var G=F[e];a:{f=a,g=b;var ma=G.completedSegments;for(h=0;h<ma.length;h++)if(!kd(f,g,G,ma[h])){h++,ma.splice(0,h);var Fb=!1;break a}ma.splice(0,h),Fb=!0}if(!Fb)return a.destination=null,e++,void F.splice(0,e)}F.splice(0,e);var na=a.completedBoundaries;for(e=0;e<na.length;e++)if(!jd(a,b,na[e]))return a.destination=null,e++,void na.splice(0,e);na.splice(0,e)}finally{ba(b),0===a.allPendingTasks&&0===a.pingedTasks.length&&0===a.clientRenderedBoundaries.length&&0===a.completedBoundaries.length&&b.close()}}function ld(a,b){try{var c=a.abortableTasks;c.forEach((function(c){return ed(c,a,b)})),c.clear(),null!==a.destination&&fd(a,a.destination)}catch(d){Y(a,d),Vc(a,d)}}exports.renderToReadableStream=function(a,b){return new Promise((function(c,d){var f,e,g=new Promise((function(a,b){e=a,f=b})),h=function Rc(a,b,c,d,f,e,g,h,m){var q=[],r=new Set;return(c=Sc(b={destination:null,responseState:b,progressiveChunkSize:void 0===d?12800:d,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:r,pingedTasks:q,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:void 0===f?Qc:f,onAllReady:void 0===e?X:e,onShellReady:void 0===g?X:g,onShellError:void 0===h?X:h,onFatalError:void 0===m?X:m},0,null,c,!1,!1)).parentFlushed=!0,a=Tc(b,a,null,c,r,kc,null,sc),q.push(a),b}(a,function za(a,b,c,d,f){a=void 0===a?"":a,b=void 0===b?sa:w('<script nonce="'+C(b)+'">');var e=[];if(void 0!==c&&e.push(b,u((""+c).replace(xa,ya)),ta),void 0!==d)for(c=0;c<d.length;c++)e.push(ua,u(C(d[c])),wa);if(void 0!==f)for(d=0;d<f.length;d++)e.push(va,u(C(f[d])),wa);return{bootstrapChunks:e,startInlineScript:b,placeholderPrefix:w(a+"P:"),segmentPrefix:w(a+"S:"),boundaryPrefix:a+"B:",idPrefix:a,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1}}(b?b.identifierPrefix:void 0,b?b.nonce:void 0,b?b.bootstrapScriptContent:void 0,b?b.bootstrapScripts:void 0,b?b.bootstrapModules:void 0),function Aa(a){return D("http://www.w3.org/2000/svg"===a?2:"http://www.w3.org/1998/Math/MathML"===a?3:0,null)}(b?b.namespaceURI:void 0),b?b.progressiveChunkSize:void 0,b?b.onError:void 0,e,(function(){var a=new ReadableStream({type:"bytes",pull:function(a){if(1===h.status)h.status=2,da(a,h.fatalError);else if(2!==h.status&&null===h.destination){h.destination=a;try{fd(h,a)}catch(A){Y(h,A),Vc(h,A)}}},cancel:function(){ld(h)}},{highWaterMark:0});a.allReady=g,c(a)}),(function(a){g.catch((function(){})),d(a)}),f);if(b&&b.signal){var m=b.signal,q=function(){ld(h,m.reason),m.removeEventListener("abort",q)};m.addEventListener("abort",q)}Uc(h)}))},exports.version="18.3.1"},"./node_modules/react-dom/server.browser.js":(__unused_webpack_module,exports,__webpack_require__)=>{var l,s;l=__webpack_require__("./node_modules/react-dom/cjs/react-dom-server-legacy.browser.production.min.js"),s=__webpack_require__("./node_modules/react-dom/cjs/react-dom-server.browser.production.min.js"),l.version,l.renderToString,exports.qV=l.renderToStaticMarkup,l.renderToNodeStream,l.renderToStaticNodeStream,s.renderToReadableStream}}]);